{"version":3,"sources":["lib\\enyo\\src\\options.js","lib\\enyo\\src\\PathResolverFactory.js","lib\\enyo\\index.js","lib\\enyo\\src\\pathResolver.js","lib\\enyo\\src\\ready.js","lib\\enyo\\src\\utils.js","lib\\enyo\\src\\job.js","lib\\enyo\\src\\json.js","lib\\enyo\\src\\AjaxProperties.js","lib\\enyo\\src\\roots.js","lib\\enyo\\src\\platform.js","lib\\enyo\\src\\FormData.js","lib\\enyo\\src\\logger.js","lib\\enyo\\src\\dom.js","lib\\enyo\\src\\xhr.js","lib\\enyo\\src\\animation.js","lib\\enyo\\src\\kind.js","lib\\enyo\\src\\resolution.js","lib\\enyo\\src\\HTMLStringDelegate.js","lib\\enyo\\src\\gesture\\util.js","lib\\enyo\\src\\Control\\floatingLayer.js","lib\\enyo\\src\\ApplicationSupport.js","lib\\enyo\\src\\ComponentBindingSupport.js","lib\\enyo\\src\\MultipleDispatchSupport.js","lib\\enyo\\src\\Layout.js","lib\\enyo\\src\\MixinSupport.js","lib\\enyo\\src\\ComputedSupport.js","lib\\enyo\\src\\Binding.js","lib\\enyo\\src\\LinkedListNode.js","lib\\enyo\\src\\BindingSupport.js","lib\\enyo\\src\\LinkedList.js","lib\\enyo\\src\\ObserverChainNode.js","lib\\enyo\\src\\ObserverChain.js","lib\\enyo\\src\\ObserverSupport.js","lib\\enyo\\src\\CoreObject.js","lib\\enyo\\src\\jobs.js","lib\\enyo\\src\\Async.js","lib\\enyo\\src\\Component.js","lib\\enyo\\src\\Ajax.js","lib\\enyo\\src\\Signals.js","lib\\enyo\\src\\MultipleDispatchComponent.js","lib\\enyo\\src\\ScrollMath.js","lib\\enyo\\src\\Jsonp.js","lib\\enyo\\src\\master.js","lib\\enyo\\src\\Controller.js","lib\\enyo\\src\\WebService.js","lib\\enyo\\src\\UiComponent.js","lib\\enyo\\src\\dispatcher.js","lib\\enyo\\src\\AccessibilitySupport\\AccessibilitySupport.js","lib\\enyo\\src\\Control\\fullscreen.js","lib\\enyo\\src\\gesture\\drag.js","lib\\enyo\\src\\gesture\\touchGestures.js","lib\\enyo\\src\\gesture\\gesture.js","lib\\enyo\\src\\Control\\Control.js","lib\\enyo\\src\\touch.js","lib\\enyo\\src\\ViewController.js","lib\\enyo\\src\\Repeater.js","lib\\enyo\\src\\Image\\Image.js","lib\\enyo\\src\\ScrollStrategy.js","lib\\enyo\\src\\ScrollThumb\\ScrollThumb.js","lib\\enyo\\src\\Scrim\\Scrim.js","lib\\enyo\\src\\GroupItem.js","lib\\enyo\\src\\Application.js","lib\\enyo\\src\\TouchScrollStrategy.js","lib\\enyo\\src\\Popup\\Popup.js","lib\\enyo\\src\\ToolDecorator\\ToolDecorator.js","lib\\enyo\\src\\TranslateScrollStrategy.js","lib\\enyo\\src\\Button\\Button.js","lib\\enyo\\src\\Scroller\\Scroller.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACztBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACprBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5qCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACltBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7lBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7sDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACv3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1vBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"generated.js","sourceRoot":"","sourcesContent":["/*jshint node:true */\r\n'use strict';\r\n\r\n/**\r\n* Returns the global enyo options hash\r\n* @module enyo/options\r\n*/\r\n\r\nmodule.exports = (global.enyo && global.enyo.options) || {};\r\n","\r\n\r\nvar PathResolverFactory = module.exports = function() {\r\n\tthis.paths = {};\r\n\tthis.pathNames = [];\r\n};\r\n\r\nPathResolverFactory.prototype = {\r\n\taddPath: function(inName, inPath) {\r\n\t\tthis.paths[inName] = inPath;\r\n\t\tthis.pathNames.push(inName);\r\n\t\tthis.pathNames.sort(function(a, b) {\r\n\t\t\treturn b.length - a.length;\r\n\t\t});\r\n\t\treturn inPath;\r\n\t},\r\n\taddPaths: function(inPaths) {\r\n\t\tif (inPaths) {\r\n\t\t\tfor (var n in inPaths) {\r\n\t\t\t\tthis.addPath(n, inPaths[n]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tincludeTrailingSlash: function(inPath) {\r\n\t\treturn (inPath && inPath.slice(-1) !== \"/\") ? inPath + \"/\" : inPath;\r\n\t},\r\n\t// replace macros of the form $pathname with the mapped value of paths.pathname\r\n\trewrite: function (inPath) {\r\n\t\tvar working, its = this.includeTrailingSlash, paths = this.paths;\r\n\t\tvar fn = function(macro, name) {\r\n\t\t\tworking = true;\r\n\t\t\treturn its(paths[name]) || '';\r\n\t\t};\r\n\t\tvar result = inPath;\r\n\t\tdo {\r\n\t\t\tworking = false;\r\n\t\t\tfor (var i=0; i<this.pathNames.length; i++) {\r\n\t\t\t\tvar regex = new RegExp(\"\\\\$(\" + this.pathNames[i] + \")(\\\\/)?\", \"g\");\r\n\t\t\t\tresult = result.replace(regex, fn);\r\n\t\t\t}\r\n\t\t} while (working);\r\n\t\treturn result;\r\n\t}\r\n};\r\n","'use strict';\r\n\r\nexports = module.exports = require('./src/options');\r\nexports.version = '2.7.0';\r\n","var PathResolverFactory = require('./PathResolverFactory');\r\n\r\nmodule.exports = new PathResolverFactory();\r\n","require('enyo');\r\n\r\n// we need to register appropriately to know when\r\n// the document is officially ready, to ensure that\r\n// client code is only going to execute at the\r\n// appropriate time\r\n\r\nvar doc = global.document;\r\nvar queue = [];\r\nvar ready = (\"complete\" === doc.readyState);\r\nvar run;\r\nvar init;\r\nvar remove;\r\nvar add;\r\nvar flush;\r\nvar flushScheduled = false;\r\n\r\n/**\r\n* Registers a callback (and optional `this` context) to run after all the Enyo and library code\r\n* has loaded and the `DOMContentLoaded` event (or equivalent on older browsers) has been sent.\r\n* \r\n* If called after the system is in a ready state, runs the supplied code asynchronously at the\r\n* earliest opportunity.\r\n*\r\n* @module enyo/ready\r\n* @param {Function} fn - The method to execute when the DOM is ready.\r\n* @param {Object} [context] - The optional context (`this`) under which to execute the\r\n*\tcallback method.\r\n* @public\r\n*/\r\nmodule.exports = function (fn, context) {\r\n\tqueue.push([fn, context]);\r\n\t// schedule another queue flush if needed to run new ready calls\r\n\tif (ready && !flushScheduled) {\r\n\t\tsetTimeout(flush, 0);\r\n\t\tflushScheduled = true;\r\n\t}\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nrun = function (fn, context) {\r\n\tfn.call(context || global);\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\ninit = function (event) {\r\n\t// if we're interactive, it should be safe to move\r\n\t// forward because the content has been parsed\r\n\tif ((ready = (\"interactive\" === doc.readyState))) {\r\n\t\tif (\"DOMContentLoaded\" !== event.type && \"readystatechange\" !== event.type) {\r\n\t\t\tremove(event.type, init);\r\n\t\t\tflush();\r\n\t\t}\r\n\t}\r\n\t// for legacy WebKit (including webOS 3.x and less) and assurance\r\n\tif ((ready = (\"complete\" === doc.readyState || \"loaded\" === doc.readyState))) {\r\n\t\tremove(event.type, init);\r\n\t\tflush();\r\n\t}\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nadd = function (event, fn) {\r\n\tdoc.addEventListener(event, fn, false);\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nremove = function (event, fn) {\r\n\tdoc.removeEventListener(event, fn, false);\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nflush = function () {\r\n\tif (ready && queue.length) {\r\n\t\twhile (queue.length) {\r\n\t\t\trun.apply(global, queue.shift());\r\n\t\t}\r\n\t}\r\n\tflushScheduled = false;\r\n};\r\n\r\n// ok, let's hook this up\r\nadd(\"DOMContentLoaded\", init);\r\nadd(\"readystatechange\", init);\r\n","require('enyo');\r\n\r\n/**\r\n* A collection of utilities\r\n* @module enyo/utils\r\n*/\r\n\r\n/**\r\n* A polyfill for platforms that don't yet support\r\n* [bind()]{@glossary Function.prototype.bind}. As explained in the linked article, this\r\n* polyfill handles the general use case but cannot exactly mirror the ECMA-262 version 5\r\n* implementation specification. This is an adaptation of the example promoted\r\n* [here]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind}.\r\n*/\r\nif (!Function.prototype.bind) {\r\n\tFunction.prototype.bind = function (ctx) {\r\n\t\t// deliberately used here...\r\n\t\tvar args = Array.prototype.slice.call(arguments, 1),\r\n\t\t\tscop = this,\r\n\t\t\tnop = function () {},\r\n\t\t\tret;\r\n\r\n\t\t// as-per MDN's explanation of this polyfill we're filling in for the IsCallable\r\n\t\t// internal (we can't access it)\r\n\t\tif (typeof this != 'function') {\r\n\t\t\tthrow new TypeError('Function.prototype.bind called on non-callable object.');\r\n\t\t}\r\n\r\n\t\tret = function () {\r\n\t\t\tvar largs = args.concat(Array.prototype.slice.call(arguments)),\r\n\t\t\t\tlctx = this instanceof nop && ctx ? this : ctx;\r\n\r\n\t\t\treturn scop.apply(lctx, largs);\r\n\t\t};\r\n\r\n\t\tnop.prototype = this.prototype;\r\n\r\n\t\t/*jshint -W055 */\r\n\t\tret.prototype = new nop();\r\n\t\t/*jshint +W055 */\r\n\r\n\t\treturn ret;\r\n\t};\r\n}\r\n\r\n/**\r\n* Returns a function that can be extended (via `.extend()`) similar to prototypal inheritance.\r\n* Like {@link module:enyo/kind#inherit}, `extend()` expects as its first argument a factory function\r\n* that returns the new function that will be called instead of the original function. The original\r\n* is available as the first argument to that factory function.\r\n*\r\n* ```javascript\r\n* var\r\n*\tutils = require('enyo/utils');\r\n*\r\n* var factor = new utils.Extensible(function (a, b) {\r\n*\treturn a + b;\r\n* });\r\n* factor(2, 4); // returns 6;\r\n* factor.extend(function (sup) {\r\n*\treturn function (a, b) {\r\n*\t\treturn sup.apply(this, arguments) * b;\r\n*\t};\r\n* });\r\n* factor(2, 4) // return 24;\r\n* ```\r\n*\r\n* @param  {Function} fn - Original function that can be extended\r\n* @param {Object} [ctx] - Context on which `fn` will be called. Defaults to the Extensible instance.\r\n* @return {Function} - A wrapped version of `fn` with the `extend()` method added\r\n*\r\n* @public\r\n*/\r\nexports.Extensible = function Extensible (fn) {\r\n\tif (!(this instanceof Extensible)) return new Extensible(fn);\r\n\r\n\tthis.fn = fn;\r\n\tvar f = function () {\r\n\t\treturn this.fn.apply(this, arguments);\r\n\t}.bind(this);\r\n\r\n\tf.extend = function (factory) {\r\n\t\tthis.fn = factory(this.fn);\r\n\t}.bind(this);\r\n\r\n\treturn f;\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nexports.nop = function () {};\r\n\r\n/**\r\n* @private\r\n*/\r\nexports.nob = {};\r\n\r\n/**\r\n* @private\r\n*/\r\nexports.nar = [];\r\n\r\n/**\r\n* This name is reported in inspectors as the type of objects created via delegate;\r\n* otherwise, we would just use {@link module:enyo/utils#nop}.\r\n*\r\n* @private\r\n*/\r\nvar Instance = exports.instance = function () {};\r\n\r\n/**\r\n* @private\r\n*/\r\nvar setPrototype = exports.setPrototype = function (ctor, proto) {\r\n\tctor.prototype = proto;\r\n};\r\n\r\n/**\r\n* Boodman/crockford delegation w/cornford optimization\r\n*\r\n* @private\r\n*/\r\nexports.delegate = function (proto) {\r\n\tsetPrototype(Instance, proto);\r\n\treturn new Instance();\r\n};\r\n\r\n// ----------------------------------\r\n// General Functions\r\n// ----------------------------------\r\n\r\n/**\r\n* Determines whether a variable is defined.\r\n*\r\n* @param {*} target - Anything that can be compared to `undefined`.\r\n* @returns {Boolean} `true` if defined, `false` otherwise.\r\n* @public\r\n*/\r\nvar exists = exports.exists = function (target) {\r\n\treturn (target !== undefined);\r\n};\r\n\r\nvar uidCounter = 0;\r\n\r\n/**\r\n* Creates a unique identifier (with an optional prefix) and returns the identifier as a string.\r\n*\r\n* @param {String} [prefix] - The prefix to prepend to the generated unique id.\r\n* @returns {String} An optionally-prefixed identifier.\r\n* @public\r\n*/\r\nexports.uid = function (prefix) {\r\n\treturn String((prefix? prefix: '') + uidCounter++);\r\n};\r\n\r\n/**\r\n* RFC4122 uuid generator for the browser.\r\n*\r\n* @returns {String} An [RFC4122]{@glossary UUID}-compliant, universally unique identifier.\r\n* @public\r\n*/\r\nexports.uuid = function () {\r\n\t// @TODO: Could possibly be faster\r\n\tvar t, p = (\r\n\t\t(Math.random().toString(16).substr(2,8)) + '-' +\r\n\t\t((t=Math.random().toString(16).substr(2,8)).substr(0,4)) + '-' +\r\n\t\t(t.substr(4,4)) +\r\n\t\t((t=Math.random().toString(16).substr(2,8)).substr(0,4)) + '-' +\r\n\t\t(t.substr(4,4)) +\r\n\t\t(Math.random().toString(16).substr(2,8))\r\n\t);\r\n\treturn p;\r\n};\r\n\r\n/**\r\n* Generates a random number using [Math.random]{@glossary Math.random}.\r\n*\r\n* @param {Number} bound - The multiplier used to generate the product.\r\n* @returns {Number} A random number.\r\n* @public\r\n*/\r\nexports.irand = function (bound) {\r\n\treturn Math.floor(Math.random() * bound);\r\n};\r\n\r\nvar toString = Object.prototype.toString;\r\n\r\n/**\r\n* Determines whether a given variable is a [String]{@glossary String}.\r\n*\r\n* @param {*} it - The variable to be tested.\r\n* @returns {Boolean} `true` if variable is a [String]{@glossary String};\r\n* otherwise, `false`.\r\n* @public\r\n*/\r\nexports.isString = function (it) {\r\n\treturn toString.call(it) === '[object String]';\r\n};\r\n\r\n/**\r\n* Determines whether a given variable is a [Function]{@glossary Function}.\r\n*\r\n* @param {*} it - The variable to be tested.\r\n* @returns {Boolean} `true` if variable is a [Function]{@glossary Function};\r\n* otherwise, `false`.\r\n* @public\r\n*/\r\nexports.isFunction = function (it) {\r\n\treturn toString.call(it) === '[object Function]';\r\n};\r\n\r\n/**\r\n* Determines whether a given variable is an [Array]{@glossary Array}.\r\n*\r\n* @param {*} it - The variable to be tested.\r\n* @returns {Boolean} `true` if variable is an [Array]{@glossary Array};\r\n* otherwise, `false`.\r\n* @method\r\n* @public\r\n*/\r\nvar isArray = exports.isArray = Array.isArray || function (it) {\r\n\treturn toString.call(it) === '[object Array]';\r\n};\r\n\r\n/**\r\n* Determines whether a given variable is an [Object]{@glossary Object}.\r\n*\r\n* @param {*} it - The variable to be tested.\r\n* @returns {Boolean} `true` if variable is an [Object]{@glossary Object};\r\n* otherwise, `false`.\r\n* @method\r\n* @public\r\n*/\r\nexports.isObject = Object.isObject || function (it) {\r\n\treturn toString.call(it) === '[object Object]';\r\n};\r\n\r\n/**\r\n* Determines whether a given variable is an explicit boolean `true`.\r\n*\r\n* @param {*} it - The variable to be tested.\r\n* @returns {Boolean} `true` if variable is an explicit `true`; otherwise,\r\n* `false`.\r\n* @public\r\n*/\r\nexports.isTrue = function (it) {\r\n\treturn !(it === 'false' || it === false || it === 0 || it === null || it === undefined);\r\n};\r\n\r\n/**\r\n* Determines whether a given variable is a numeric value.\r\n*\r\n* @param {*} it - The variable to be tested.\r\n* @returns {Boolean} `true` if variable is a numeric value; otherwise,\r\n* `false`.\r\n* @public\r\n*/\r\nexports.isNumeric = function (it) {\r\n\t// borrowed from jQuery\r\n\treturn !isArray(it) && (it - parseFloat(it) + 1) >= 0;\r\n};\r\n\r\n/**\r\n* Binds the `this` context of any method to a scope and a variable number of provided initial\r\n* parameters.\r\n*\r\n* @param {Object} scope - The `this` context for the method.\r\n* @param {(Function|String)} method - A Function or the name of a method to bind.\r\n* @param {...*} [args] Any arguments that will be provided as the initial arguments to the\r\n*                      enclosed method.\r\n* @returns {Function} The bound method/closure.\r\n* @public\r\n*/\r\nvar bind = exports.bind = function (scope, method) {\r\n\tif (!method) {\r\n\t\tmethod = scope;\r\n\t\tscope = null;\r\n\t}\r\n\tscope = scope || global;\r\n\tif (typeof method == 'string') {\r\n\t\tif (scope[method]) {\r\n\t\t\tmethod = scope[method];\r\n\t\t} else {\r\n\t\t\tthrow('enyo.bind: scope[\"' + method + '\"] is null (scope=\"' + scope + '\")');\r\n\t\t}\r\n\t}\r\n\tif (typeof method == 'function') {\r\n\t\tvar args = cloneArray(arguments, 2);\r\n\t\tif (method.bind) {\r\n\t\t\treturn method.bind.apply(method, [scope].concat(args));\r\n\t\t} else {\r\n\t\t\treturn function() {\r\n\t\t\t\tvar nargs = cloneArray(arguments);\r\n\t\t\t\t// invoke with collected args\r\n\t\t\t\treturn method.apply(scope, args.concat(nargs));\r\n\t\t\t};\r\n\t\t}\r\n\t} else {\r\n\t\tthrow('enyo.bind: scope[\"' + method + '\"] is not a function (scope=\"' + scope + '\")');\r\n\t}\r\n};\r\n\r\n/**\r\n* Binds a callback to a scope. If the object has a `destroyed` property that's truthy, then the\r\n* callback will not be run if called. This can be used to implement both\r\n* {@link module:enyo/CoreObject~Object#bindSafely} and {@link module:enyo/CoreObject~Object}-like objects like\r\n* {@link module:enyo/Model~Model} and {@link module:enyo/Collection~Collection}.\r\n*\r\n* @param {Object} scope - The `this` context for the method.\r\n* @param {(Function|String)} method - A Function or the name of a method to bind.\r\n* @param {...*} [args] Any arguments that will be provided as the initial arguments to the\r\n*                      enclosed method.\r\n* @returns {Function} The bound method/closure.\r\n* @public\r\n*/\r\nexports.bindSafely = function (scope, method) {\r\n\tif (typeof method == 'string') {\r\n\t\tif (scope[method]) {\r\n\t\t\tmethod = scope[method];\r\n\t\t} else {\r\n\t\t\tthrow('enyo.bindSafely: scope[\"' + method + '\"] is null (this=\"' + this + '\")');\r\n\t\t}\r\n\t}\r\n\tif (typeof method == 'function') {\r\n\t\tvar args = cloneArray(arguments, 2);\r\n\t\treturn function() {\r\n\t\t\tif (scope.destroyed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar nargs = cloneArray(arguments);\r\n\t\t\treturn method.apply(scope, args.concat(nargs));\r\n\t\t};\r\n\t} else {\r\n\t\tthrow('enyo.bindSafely: scope[\"' + method + '\"] is not a function (this=\"' + this + '\")');\r\n\t}\r\n};\r\n\r\n/**\r\n* Calls the provided `method` on `scope`, asynchronously.\r\n*\r\n* Uses [window.setTimeout()]{@glossary window.setTimeout} with minimum delay,\r\n* usually around 10ms.\r\n*\r\n* Additional arguments are passed to `method` when it is invoked.\r\n*\r\n* If only a single argument is supplied, will just call that function asynchronously without\r\n* doing any additional binding.\r\n*\r\n* @param {Object} scope - The `this` context for the method.\r\n* @param {(Function|String)} method - A Function or the name of a method to bind.\r\n* @param {...*} [args] Any arguments that will be provided as the initial arguments to the\r\n*                      enclosed method.\r\n* @returns {Number} The `setTimeout` id.\r\n* @public\r\n*/\r\nexports.asyncMethod = function (scope, method) {\r\n\tif (!method) {\r\n\t\t// passed just a single argument\r\n\t\treturn setTimeout(scope, 1);\r\n\t} else {\r\n\t\treturn setTimeout(bind.apply(scope, arguments), 1);\r\n\t}\r\n};\r\n\r\n/**\r\n* Calls the provided `method` ([String]{@glossary String}) on `scope` with optional\r\n* arguments `args` ([Array]{@glossary Array}), if the object and method exist.\r\n*\r\n* @example\r\n* \tutils = require('enyo/utils');\r\n* \tutils.call(myWorkObject, 'doWork', [3, 'foo']);\r\n*\r\n* @param {Object} scope - The `this` context for the method.\r\n* @param {(Function|String)} method - A Function or the name of a method to bind.\r\n* @param {Array} [args] - An array of arguments to pass to the method.\r\n* @returns {*} The return value of the method.\r\n* @public\r\n*/\r\nexports.call = function (scope, method, args) {\r\n\tvar context = scope || this;\r\n\tif (method) {\r\n\t\tvar fn = context[method] || method;\r\n\t\tif (fn && fn.apply) {\r\n\t\t\treturn fn.apply(context, args || []);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n* Returns the current time in milliseconds. On platforms that support it,\r\n* [Date.now()]{@glossary Date.now} will be used; otherwise this will\r\n* be equivalent to [new Date().getTime()]{@glossary Date.getTime}.\r\n*\r\n* @returns {Number} Number of milliseconds representing the current time.\r\n* @method\r\n* @public\r\n*/\r\n\r\nvar now = exports.now = Date.now || function () {\r\n\treturn new Date().getTime();\r\n};\r\n\r\n/**\r\n* When [window.performance]{@glossary window.performance} is available, supplies\r\n* a high-precision, high-performance monotonic timestamp, which is independent of\r\n* changes to the system clock and thus safer for use in animation, etc. Falls back to\r\n* {@link module:enyo/utils#now} (based on the JavaScript [Date]{@glossary Date} object),\r\n* which is subject to system time changes.\r\n*\r\n* @returns {Number} Number of milliseconds representing the current time or time since\r\n*                   start of application execution as reported by the platform.\r\n* @method\r\n* @public\r\n*/\r\nexports.perfNow = (function () {\r\n\t// we have to check whether or not the browser has supplied a valid\r\n\t// method to use\r\n\tvar perf = window.performance || {};\r\n\t// test against all known vendor-specific implementations, but use\r\n\t// a fallback just in case\r\n\tperf.now = perf.now || perf.mozNow || perf.msNow || perf.oNow || perf.webkitNow || now;\r\n\treturn function () {\r\n\t\treturn perf.now();\r\n\t};\r\n}());\r\n\r\n/**\r\n* A fast-path enabled global getter that takes a string path, which may be a full path (from\r\n* context window/Enyo) or a relative path (to the execution context of the method). It knows how\r\n* to check for and call the backwards-compatible generated getters, as well as how to handle\r\n* computed properties. Returns `undefined` if the object at the given path cannot be found. May\r\n* safely be called on non-existent paths.\r\n*\r\n* @param {String} path - The path from which to retrieve a value.\r\n* @returns {*} The value for the given path, or `undefined` if the path could not be\r\n*                  completely resolved.\r\n* @method enyo.getPath\r\n* @public\r\n*/\r\nvar getPath = exports.getPath = function (path) {\r\n\t// we're trying to catch only null/undefined not empty string or 0 cases\r\n\tif (!path && path !== null && path !== undefined) return path;\r\n\r\n\tvar next = this,\r\n\t\tparts,\r\n\t\tpart,\r\n\t\tgetter,\r\n\t\tprev;\r\n\r\n\t// obviously there is a severe penalty for requesting get with a path lead\r\n\t// by unnecessary relative notation...\r\n\tif (path[0] == '.') path = path.replace(/^\\.+/, '');\r\n\r\n\t// here's where we check to make sure we have a truthy string-ish\r\n\tif (!path) return;\r\n\r\n\tparts = path.split('.');\r\n\tpart = parts.shift();\r\n\r\n\tdo {\r\n\t\tprev = next;\r\n\t\t// for constructors we must check to make sure they are undeferred before\r\n\t\t// looking for static properties\r\n\t\t// for the auto generated or provided published property support we have separate\r\n\t\t// routines that must be called to preserve compatibility\r\n\t\tif (next._getters && ((getter = next._getters[part])) && !getter.generated) next = next[getter]();\r\n\t\t// for all other special cases to ensure we use any overloaded getter methods\r\n\t\telse if (next.get && next !== this && next.get !== getPath) next = next.get(part);\r\n\t\t// and for regular cases\r\n\t\telse next = next[part];\r\n\t} while (next && (part = parts.shift()));\r\n\r\n\t// if necessary we ensure we've undeferred any constructor that we're\r\n\t// retrieving here as a final property as well\r\n\treturn next;\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\ngetPath.fast = function (path) {\r\n\t// the current context\r\n\tvar b = this, fn, v;\r\n\tif (b._getters && (fn = b._getters[path])) {\r\n\t\tv = b[fn]();\r\n\t} else {\r\n\t\tv = b[path];\r\n\t}\r\n\r\n\treturn v;\r\n};\r\n\r\n/**\r\n* @TODO: Out of date...\r\n* A global setter that takes a string path (relative to the method's execution context) or a\r\n* full path (relative to window). Attempts to automatically retrieve any previously existing\r\n* value to supply to any observers. If the context is an {@link module:enyo/CoreObject~Object} or subkind, the\r\n* {@link module:enyo/ObserverSupport~ObserverSupport.notify} method is used to notify listeners for the path's being\r\n* set. If the previous value is equivalent to the newly set value, observers will not be\r\n* triggered by default. If the third parameter is present and is an explicit boolean true, the\r\n* observers will be triggered regardless. Returns the context from which the method was executed.\r\n*\r\n* @param {String} path - The path for which to set the given value.\r\n* @param {*} is - The value to set.\r\n* @param {Object} [opts] - An options hash.\r\n* @returns {this} Whatever the given context was when executed.\r\n* @method enyo.setPath\r\n* @public\r\n*/\r\nvar setPath = exports.setPath = function (path, is, opts) {\r\n\t// we're trying to catch only null/undefined not empty string or 0 cases\r\n\tif (!path || (!path && path !== null && path !== undefined)) return this;\r\n\r\n\tvar next = this,\r\n\t\toptions = {create: true, silent: false, force: false},\r\n\t\tbase = next,\r\n\t\tparts,\r\n\t\tpart,\r\n\t\twas,\r\n\t\tforce,\r\n\t\tcreate,\r\n\t\tsilent,\r\n\t\tcomparator;\r\n\r\n\tif (typeof opts == 'object') opts = mixin({}, [options, opts]);\r\n\telse {\r\n\t\tforce = opts;\r\n\t\topts = options;\r\n\t}\r\n\r\n\tif (opts.force) force = true;\r\n\tsilent = opts.silent;\r\n\tcreate = opts.create;\r\n\tcomparator = opts.comparator;\r\n\r\n\r\n\t// obviously there is a severe penalty for requesting get with a path lead\r\n\t// by unnecessary relative notation...\r\n\tif (path[0] == '.') path = path.replace(/^\\.+/, '');\r\n\r\n\t// here's where we check to make sure we have a truthy string-ish\r\n\tif (!path) return next;\r\n\r\n\tparts = path.split('.');\r\n\tpart = parts.shift();\r\n\r\n\tdo {\r\n\r\n\t\tif (!parts.length) was = next.get && next.get !== getPath? next.get(part): next[part];\r\n\t\telse {\r\n\t\t\t// this allows us to ensure that if we're setting a static property of a constructor we have the\r\n\t\t\t// correct constructor\r\n\t\t\t// @TODO: It seems ludicrous to have to check this on every single part of a chain; if we didn't have\r\n\t\t\t// deferred constructors this wouldn't be necessary and is expensive - unnecessarily so when speed is so important\r\n\t\t\tif (next !== base && next.set && next.set !== setPath) {\r\n\t\t\t\tparts.unshift(part);\r\n\t\t\t\tnext.set(parts.join('.'), is, opts);\r\n\t\t\t\treturn base;\r\n\t\t\t}\r\n\t\t\tif (next !== base && next.get) next = (next.get !== getPath? next.get(part): next[part]) || (create && (next[part] = {}));\r\n\t\t\telse next = next[part] || (create && (next[part] = {}));\r\n\t\t}\r\n\r\n\t} while (next && parts.length && (part = parts.shift()));\r\n\r\n\tif (!next) return base;\r\n\r\n\t// now update to the new value\r\n\tif (next !== base && next.set && next.set !== setPath) {\r\n\t\tnext.set(part, is, opts);\r\n\t\treturn base;\r\n\t} else next[part] = is;\r\n\r\n\t// if possible we notify the changes but this change is notified from the immediate\r\n\t// parent not the root object (could be the same)\r\n\tif (next.notify && !silent && (force || was !== is || (comparator && comparator(was, is)))) next.notify(part, was, is, opts);\r\n\t// we will always return the original root-object of the call\r\n\treturn base;\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nsetPath.fast = function (path, value) {\r\n\t// the current context\r\n\tvar b = this,\r\n\t\t// the previous value and helper variable\r\n\t\trv, fn;\r\n\t// we have to check and ensure that we're not setting a computed property\r\n\t// and if we are, do nothing\r\n\tif (b._computed && b._computed[path] !== undefined) {\r\n\t\treturn b;\r\n\t}\r\n\tif (b._getters && (fn=b._getters[path])) {\r\n\t\trv = b[fn]();\r\n\t} else {\r\n\t\trv = b[path];\r\n\t}\r\n\t// set the new value now that we can\r\n\tb[path] = value;\r\n\r\n\t// this method is only ever called from the context of enyo objects\r\n\t// as a protected method\r\n\tif (rv !== value) { b.notifyObservers(path, rv, value); }\r\n\t// return the context\r\n\treturn b;\r\n};\r\n\r\n// ----------------------------------\r\n// String Functions\r\n// ----------------------------------\r\n\r\n/**\r\n* Uppercases a given string. Will coerce to a [String]{@glossary String}\r\n* if possible/necessary.\r\n*\r\n* @param {String} str - The string to uppercase.\r\n* @returns {String} The uppercased string.\r\n* @public\r\n*/\r\nexports.toUpperCase = new exports.Extensible(function (str) {\r\n\tif (str != null) {\r\n\t\treturn str.toString().toUpperCase();\r\n\t}\r\n\treturn str;\r\n});\r\n\r\n/**\r\n* Lowercases a given string. Will coerce to a [String]{@glossary String}\r\n* if possible/necessary.\r\n*\r\n* @param {String} str - The string to lowercase.\r\n* @returns {String} The lowercased string.\r\n* @public\r\n*/\r\nexports.toLowerCase = new exports.Extensible(function (str) {\r\n\tif (str != null) {\r\n\t\treturn str.toString().toLowerCase();\r\n\t}\r\n\treturn str;\r\n});\r\n\r\n/**\r\n* Capitalizes a given string.\r\n*\r\n* @param {String} str - The string to capitalize.\r\n* @returns {String} The capitalized string.\r\n* @public\r\n*/\r\nexports.cap = function (str) {\r\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1);\r\n};\r\n\r\n/**\r\n* Un-capitalizes a given string.\r\n*\r\n* @param {String} str - The string to un-capitalize.\r\n* @returns {String} The un-capitalized string.\r\n* @public\r\n*/\r\nexports.uncap = function (str) {\r\n\treturn str.slice(0, 1).toLowerCase() + str.slice(1);\r\n};\r\n\r\n/**\r\n* Injects an arbitrary number of values, in order, into a template string at\r\n* positions marked by `\"%.\"`.\r\n*\r\n* @param {String} template - The string template to inject with values.\r\n* @param {...String} val The values to inject into the template.\r\n* @returns {String} A copy of the template populated with values.\r\n* @public\r\n*/\r\nexports.format = function (template) {\r\n\tvar pattern = /\\%./g,\r\n\t\targ = 0,\r\n\t\ttmp = template,\r\n\t\targs = arguments,\r\n\t\treplacer;\r\n\r\n\treplacer = function () {\r\n\t\treturn args[++arg];\r\n\t};\r\n\r\n\treturn tmp.replace(pattern, replacer);\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nString.prototype.trim = String.prototype.trim || function () {\r\n\treturn this.replace(/^\\s+|\\s+$/g, '');\r\n};\r\n\r\n/**\r\n* Takes a string and trims leading and trailing spaces. Strings with no length,\r\n* non-strings, and falsy values will be returned without modification.\r\n*\r\n* @param {String} str - The string from which to remove whitespace.\r\n* @returns {String} The trimmed string.\r\n* @public\r\n*/\r\nexports.trim = function (str) {\r\n\treturn (typeof str == 'string' && str.trim()) || str;\r\n};\r\n\r\n// ----------------------------------\r\n// Object Functions\r\n// ----------------------------------\r\n\r\n/**\r\n* A [polyfill]{@glossary polyfill} for platforms that don't support\r\n* [Object.create()]{@glossary Object.create}.\r\n*/\r\nObject.create = Object.create || (function () {\r\n\tvar Anon = function () {};\r\n\treturn function (obj) {\r\n\t\t// in the polyfill we can't support the additional features so we are ignoring\r\n\t\t// the extra parameters\r\n\t\tif (!obj || obj === null || typeof obj != 'object') throw 'Object.create: Invalid parameter';\r\n\t\tAnon.prototype = obj;\r\n\t\treturn new Anon();\r\n\t};\r\n})();\r\n\r\n/**\r\n* A [polyfill]{@glossary polyfill} for platforms that don't support\r\n* [Object.keys()]{@glossary Object.keys}.\r\n*/\r\nObject.keys = Object.keys || function (obj) {\r\n\tvar results = [];\r\n\tvar hop = Object.prototype.hasOwnProperty;\r\n\tfor (var prop in obj) {\r\n\t\tif (hop.call(obj, prop)) {\r\n\t\t\tresults.push(prop);\r\n\t\t}\r\n\t}\r\n\treturn results;\r\n};\r\n\r\n/**\r\n* Returns an array of all known enumerable properties found on a given object.\r\n*\r\n* @alias Object.keys.\r\n* @method enyo.keys\r\n* @public\r\n*/\r\nexports.keys = Object.keys;\r\n\r\n/**\r\n* Convenience method that takes an [array]{@glossary Array} of properties\r\n* and an [object]{@glossary Object} as parameters. Returns a new object\r\n* with only those properties named in the array that are found to exist on the\r\n* base object. If the third parameter is `true`, falsy values will be ignored.\r\n*\r\n* @param {String[]} properties The properties to include on the returned object.\r\n* @param {Object} object - The object from which to retrieve values for the requested properties.\r\n* @param {Boolean} [ignore=false] Whether or not to ignore copying falsy values.\r\n* @returns {Object} A new object populated with the requested properties and values from\r\n*                     the given object.\r\n* @public\r\n*/\r\nexports.only = function (properties, object, ignore) {\r\n\tvar ret = {},\r\n\t\tprop,\r\n\t\tlen,\r\n\t\ti;\r\n\r\n\tfor (i = 0, len = properties.length >>> 0; i < len; ++i) {\r\n\t\tprop = properties[i];\r\n\r\n\t\tif (ignore && (object[prop] === undefined || object[prop] === null)) continue;\r\n\t\tret[prop] = object[prop];\r\n\t}\r\n\r\n\treturn ret;\r\n};\r\n\r\n/**\r\n* Convenience method that takes two [objects]{@glossary Object} as parameters.\r\n* For each key from the first object, if the key also exists in the second object,\r\n* a mapping of the key from the first object to the key from the second object is\r\n* added to a result object, which is eventually returned. In other words, the\r\n* returned object maps the named properties of the first object to the named\r\n* properties of the second object. The optional third parameter is a boolean\r\n* designating whether to pass unknown key/value pairs through to the new object.\r\n* If `true`, those keys will exist on the returned object.\r\n*\r\n* @param {Object} map - The object with key/value pairs.\r\n* @param {Object} obj - The object whose values will be used.\r\n* @param {Boolean} [pass=false] Whether or not to pass unnamed properties through\r\n*                               from the given object.\r\n* @returns {Object} A new object whose properties have been mapped.\r\n* @public\r\n*/\r\nexports.remap = function (map, obj, pass) {\r\n\tvar ret = pass ? clone(obj) : {},\r\n\t\tkey;\r\n\r\n\tfor (key in map) {\r\n\t\tif (key in obj) ret[map[key]] = obj.get ? obj.get(key) : obj[key];\r\n\t}\r\n\treturn ret;\r\n};\r\n\r\n/**\r\n* Helper method that accepts an [array]{@glossary Array} of\r\n* [objects]{@glossary Object} and returns a hash of those objects indexed\r\n* by the specified `property`. If a `filter` is provided, the filter should\r\n* accept four parameters: the key, the value (object), the current mutable map\r\n* reference, and an immutable copy of the original array of objects for\r\n* comparison.\r\n*\r\n* @param {String} property - The property to index the array by.\r\n* @param {Array} array - An array of property objects.\r\n* @param {Function} [filter] - The filter function to use; accepts four arguments.\r\n* @returns {Object} A hash (object) indexed by the `property` argument\r\n* @public\r\n*/\r\nexports.indexBy = function (property, array, filter) {\r\n\t// the return value - indexed map from the given array\r\n\tvar map = {},\r\n\t\tvalue,\r\n\t\tlen,\r\n\t\tidx = 0;\r\n\t// sanity check for the array with an efficient native array check\r\n\tif (!exists(array) || !(array instanceof Array)) {\r\n\t\treturn map;\r\n\t}\r\n\t// sanity check the property as a string\r\n\tif (!exists(property) || 'string' !== typeof property) {\r\n\t\treturn map;\r\n\t}\r\n\t// the immutable copy of the array\r\n\tvar copy = clone(array);\r\n\t// test to see if filter actually exsits\r\n\tfilter = exists(filter) && 'function' === typeof filter ? filter : undefined;\r\n\tfor (len = array.length; idx < len; ++idx) {\r\n\t\t// grab the value from the array\r\n\t\tvalue = array[idx];\r\n\t\t// make sure that it exists and has the requested property at all\r\n\t\tif (exists(value) && exists(value[property])) {\r\n\t\t\tif (filter) {\r\n\t\t\t\t// if there was a filter use it - it is responsible for\r\n\t\t\t\t// updating the map accordingly\r\n\t\t\t\tfilter(property, value, map, copy);\r\n\t\t\t} else {\r\n\t\t\t\t// use the default behavior - check to see if the key\r\n\t\t\t\t// already exists on the map it will be overwritten\r\n\t\t\t\tmap[value[property]] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// go ahead and return our modified map\r\n\treturn map;\r\n};\r\n\r\n/**\r\n* Creates and returns a shallow copy of an [Object]{@glossary Object} or an\r\n* [Array]{@glossary Array}. For objects, by default, properties will be scanned and\r\n* copied directly to the clone such that they would pass the\r\n* [hasOwnProperty()]{@glossary Object.hasOwnProperty} test. This is expensive and often not\r\n* required. In this case, the optional second parameter may be used to allow a more efficient\r\n* [copy]{@link Object.create} to be made.\r\n*\r\n* @param {(Object|Array)} base - The [Object]{@glossary Object} or\r\n*                              [Array]{@glossary Array} to be cloned.\r\n* @param {Boolean} [quick] - If `true`, when cloning objects, a faster [copy]{@link Object.create}\r\n*                          method will be used. This parameter has no meaning when cloning arrays.\r\n* @returns {*} A clone of the provided `base` if `base` is of the correct type; otherwise,\r\n*              returns `base` as it was passed in.\r\n* @public\r\n*/\r\nvar clone = exports.clone = function (base, quick) {\r\n\tif (base) {\r\n\r\n\t\t// avoid the overhead of calling yet another internal function to do type-checking\r\n\t\t// just copy the array and be done with it\r\n\t\tif (base instanceof Array) return base.slice();\r\n\t\telse if (base instanceof Object) {\r\n\t\t\treturn quick ? Object.create(base) : mixin({}, base);\r\n\t\t}\r\n\t}\r\n\r\n\t// we will only do this if it is not an array or native object\r\n\treturn base;\r\n};\r\n\r\nvar empty = {};\r\nvar mixinDefaults = {\r\n\texists: false,\r\n\tignore: false,\r\n\tfilter: null\r\n};\r\n\r\n/**\r\n\t@todo Rewrite with appropriate documentation for options parameter (typedef)\r\n\t@todo document 'quick' option\r\n\r\n\tWill take a variety of options to ultimately mix a set of properties\r\n\tfrom objects into single object. All configurations accept a boolean as\r\n\tthe final parameter to indicate whether or not to ignore _truthy_/_existing_\r\n\tvalues on any _objects_ prior.\r\n\r\n\tIf _target_ exists and is an object, it will be the base for all properties\r\n\tand the returned value. If the parameter is used but is _falsy_, a new\r\n\tobject will be created and returned. If no such parameter exists, the first\r\n\tparameter must be an array of objects and a new object will be created as\r\n\tthe _target_.\r\n\r\n\tThe _source_ parameter may be an object or an array of objects. If no\r\n\t_target_ parameter is provided, _source_ must be an array of objects.\r\n\r\n\tThe _options_ parameter allows you to set the _ignore_ and/or _exists_ flags\r\n\tsuch that if _ignore_ is true, it will not override any truthy values in the\r\n\ttarget, and if _exists_ is true, it will only use truthy values from any of\r\n\tthe sources. You may optionally add a _filter_ method-option that returns a\r\n\ttrue or false value to indicate whether the value should be used. It receives\r\n\tparameters in this order: _property_, _source value_, _source values_,\r\n\t_target_, _options_. Note that modifying the target in the filter method can\r\n\thave unexpected results.\r\n\r\n\tSetting _options_ to true will set all options to true.\r\n\r\n* @method enyo.mixin\r\n* @public\r\n*/\r\nvar mixin = exports.mixin = function () {\r\n\tvar ret = arguments[0],\r\n\t\tsrc = arguments[1],\r\n\t\topts = arguments[2],\r\n\t\tval;\r\n\r\n\tif (!ret) ret = {};\r\n\telse if (ret instanceof Array) {\r\n\t\topts = src;\r\n\t\tsrc = ret;\r\n\t\tret = {};\r\n\t}\r\n\r\n\tif (!opts || opts === true) opts = mixinDefaults;\r\n\r\n\tif (src instanceof Array) for (var i=0, it; (it=src[i]); ++i) mixin(ret, it, opts);\r\n\telse {\r\n\t\tfor (var key in src) {\r\n\t\t\tval = src[key];\r\n\r\n\t\t\t// quickly ensure the property isn't a default\r\n\t\t\tif (empty[key] !== val) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t(!opts.exists || val) &&\r\n\t\t\t\t\t(!opts.ignore || !ret[key]) &&\r\n\t\t\t\t\t(opts.filter? opts.filter(key, val, src, ret, opts): true)\r\n\t\t\t\t) {\r\n\t\t\t\t\tret[key] = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn ret;\r\n};\r\n\r\n/**\r\n* Returns an [array]{@glossary Array} of the values of all properties in an\r\n* [object]{@glossary Object}.\r\n*\r\n* @param {Object} obj - The [Object]{@glossary Object} to read the values from.\r\n* @returns {Array} An [array]{@glossary Array} with the values from the `obj`.\r\n* @public\r\n*/\r\nexports.values = function (obj) {\r\n\tvar ret = [];\r\n\tfor (var key in obj) {\r\n\t\tif (obj.hasOwnProperty(key)) ret.push(obj[key]);\r\n\t}\r\n\treturn ret;\r\n};\r\n\r\n// ----------------------------------\r\n// Array Functions\r\n// ----------------------------------\r\n\r\n/**\r\n* A [polyfill]{@glossary polyfill} for platforms that don't support\r\n* [Array.findIndex()]{@glossary Array.findIndex}.\r\n*/\r\nArray.prototype.findIndex = Array.prototype.findIndex || function (fn, ctx) {\r\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) {\r\n\t\tif (fn.call(ctx, this[i], i, this)) return i;\r\n\t}\r\n\treturn -1;\r\n};\r\n\r\n/**\r\n* A [polyfill]{@glossary polyfill} for platforms that don't support\r\n* [Array.find()]{@glossary Array.find}.\r\n*/\r\nArray.prototype.find = Array.prototype.find || function (fn, ctx) {\r\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) {\r\n\t\tif (fn.call(ctx, this[i], i, this)) return this[i];\r\n\t}\r\n};\r\n\r\n/**\r\n* An Enyo convenience method reference to [Array.indexOf()]{@glossary Array.indexOf}.\r\n*\r\n* This also supports the legacy Enyo argument order `el.indexOf(array, offset)` and can\r\n* differentiate between this and the standard `array.indexOf(el, offset)`.\r\n*\r\n* **When possible, you should use the native equivalent.**\r\n*\r\n* This method supports the same arguments as the native version, plus an extra argument at the\r\n* beginning referring to the [array]{@glossary Array} to run this method on.\r\n*\r\n* @public\r\n*/\r\nexports.indexOf = function (array, el, offset) {\r\n\tif (!(array instanceof Array)) return el.indexOf(array, offset);\r\n\treturn array.indexOf(el, offset);\r\n};\r\n\r\n/**\r\n* An Enyo convenience method reference to [Array.lastIndexOf()]{@glossary Array.lastIndexOf}.\r\n*\r\n* This also supports the legacy Enyo argument order `el.lastIndexOf(array, offset)` and can\r\n* differentiate between this and the standard `array.lastIndexOf(el, offset)`.\r\n*\r\n* **When possible, you should use the native equivalent.**\r\n*\r\n* This method supports the same arguments as the native version, plus an extra argument at the\r\n* beginning referring to the [array]{@glossary Array} to run this method on.\r\n*\r\n* @public\r\n*/\r\nexports.lastIndexOf = function (array, el, offset) {\r\n\tif (!(array instanceof Array)) return el.lastIndexOf(array, offset);\r\n\treturn array.lastIndexOf(el, offset);\r\n};\r\n\r\n/**\r\n* An Enyo convenience method reference to [Array.findIndex()]{@glossary Array.findIndex}.\r\n*\r\n* **When possible, you should use the native equivalent.**\r\n*\r\n* This method supports the same arguments as the native version, plus an extra argument at the\r\n* beginning referring to the [array]{@glossary Array} to run this method on.\r\n*\r\n* @public\r\n*/\r\nexports.findIndex = function (array, fn, ctx) {\r\n\treturn array.findIndex(fn, ctx);\r\n};\r\n\r\n/**\r\n* An Enyo convenience method reference to [Array.find()]{@glossary Array.find}.\r\n*\r\n* **When possible, you should use the native equivalent.**\r\n*\r\n* This method supports the same arguments as the native version, plus an extra argument at the\r\n* beginning referring to the [array]{@glossary Array} to run this method on.\r\n*\r\n* @method enyo.find\r\n* @public\r\n*/\r\nvar find = exports.find = function (array, fn, ctx) {\r\n\treturn array.find(fn, ctx);\r\n};\r\n\r\n/**\r\n* @alias enyo.find\r\n* @method enyo.where\r\n* @public\r\n*/\r\nexports.where = find;\r\n\r\n/**\r\n* An Enyo convenience method reference to [Array.forEach()]{@glossary Array.forEach}.\r\n*\r\n* **When possible, you should use the native equivalent.**\r\n*\r\n* This method supports the same arguments as the native version, plus an extra argument at the\r\n* beginning referring to the [array]{@glossary Array} to run this method on.\r\n*\r\n* @public\r\n*/\r\nexports.forEach = function (array, fn, ctx) {\r\n\treturn array.forEach(fn, ctx);\r\n};\r\n\r\n/**\r\n* An Enyo convenience method reference to [Array.map()]{@glossary Array.map}.\r\n*\r\n* **When possible, you should use the native equivalent.**\r\n*\r\n* This method supports the same arguments as the native version, plus an extra argument at the\r\n* beginning referring to the [array]{@glossary Array} to run this method on.\r\n*\r\n* @public\r\n*/\r\nexports.map = function (array, fn, ctx) {\r\n\treturn array.map(fn, ctx);\r\n};\r\n\r\n/**\r\n* An Enyo convenience method reference to [Array.filter()]{@glossary Array.filter}.\r\n*\r\n* **When possible, you should use the native equivalent.**\r\n*\r\n* This method supports the same arguments as the native version, plus an extra argument at the\r\n* beginning referring to the [array]{@glossary Array} to run this method on.\r\n*\r\n* @public\r\n*/\r\nexports.filter = function (array, fn, ctx) {\r\n\treturn array.filter(fn, ctx);\r\n};\r\n\r\n/**\r\n* When given an [array]{@glossary Array} of [objects]{@glossary Object},\r\n* searches through the array's objects; each object with a property name matching\r\n* `prop` has its value for that property compiled into a result array, which is\r\n* eventually returned. For each array object that doesn't have a matching property,\r\n* an `undefined` placeholder element is added to the result array, such that the\r\n* returned result array has the same length as the passed-in `array` parameter.\r\n*\r\n* @param {Array} array - The [array]{@glossary Array} of [objects]{@glossary Object}\r\n*                      in which the `prop` will be searched for.\r\n* @param {String} prop - A string containing the name of the property to search for.\r\n* @returns {Array} An array of all the values of the named property from\r\n*                     objects contained in the `array`.\r\n* @public\r\n*/\r\nexports.pluck = function (array, prop) {\r\n\tif (!(array instanceof Array)) {\r\n\t\tvar tmp = array;\r\n\t\tarray = prop;\r\n\t\tprop = tmp;\r\n\t}\r\n\r\n\tvar ret = [];\r\n\tfor (var i=0, len=array.length >>> 0; i<len; ++i) {\r\n\t\tret.push(array[i]? array[i][prop]: undefined);\r\n\t}\r\n\treturn ret;\r\n};\r\n\r\n/**\r\n* Concatenates a variable number of [arrays]{@glossary Array}, removing any duplicate\r\n* entries.\r\n*\r\n* @returns {Array} The unique values from all [arrays]{@glossary Array}.\r\n* @public\r\n*/\r\nexports.merge = function (/* _arrays_ */) {\r\n\tvar ret = [],\r\n\t\tvalues = Array.prototype.concat.apply([], arguments);\r\n\tfor (var i=0, len=values.length >>> 0; i<len; ++i) {\r\n\t\tif (!~ret.indexOf(values[i])) ret.push(values[i]);\r\n\t}\r\n\treturn ret;\r\n};\r\n\r\n/**\r\n* Clones an existing [Array]{@glossary Array}, or converts an array-like\r\n* object into an Array.\r\n*\r\n* If `offset` is non-zero, the cloning starts from that index in the source\r\n* Array. The clone may be appended to an existing Array by passing in the\r\n* existing Array as `initialArray`.\r\n*\r\n* Array-like objects have `length` properties, and support square-bracket\r\n* notation `([])`. Array-like objects often do not support Array methods\r\n* such as `push()` or `concat()`, and so must be converted to Arrays before\r\n* use.\r\n*\r\n* The special `arguments` variable is an example of an array-like object.\r\n*\r\n* @public\r\n*/\r\nvar cloneArray = exports.cloneArray = function (array, offset, initialArray) {\r\n\tvar ret = initialArray || [];\r\n\tfor(var i = offset || 0, l = array.length; i<l; i++){\r\n\t\tret.push(array[i]);\r\n\t}\r\n\t// Alternate smarter implementation:\r\n\t// return Array.prototype.slice.call(array, offset);\r\n\t// Array.of\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of\r\n\treturn ret;\r\n};\r\n\r\n/**\r\n* @alias cloneArray\r\n* @method enyo.toArray\r\n* @public\r\n*/\r\nexports.toArray = cloneArray;\r\n\r\n/**\r\n* Within a given [array]{@glossary Array}, removes the first\r\n* [strictly equal to]{@glossary ===} occurrence of `el`.\r\n* Note that `array` is modified directly.\r\n*\r\n* @param {Array} array - The [Array]{@glossary Array} to look through.\r\n* @param {*} el - The element to search for and remove.\r\n* @public\r\n*/\r\nexports.remove = function (array, el) {\r\n\tif (!(array instanceof Array)) {\r\n\t\tvar tmp = array;\r\n\t\tarray = el;\r\n\t\tel = tmp;\r\n\t}\r\n\r\n\tvar i = array.indexOf(el);\r\n\tif (-1 < i) array.splice(i, 1);\r\n\treturn array;\r\n};\r\n\r\n/**\r\n* This regex pattern is used by the [isRtl()]{@link module:enyo/utils#isRtl} function.\r\n*\r\n* Arabic: \\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFE\r\n* Hebrew: \\u0590-\\u05FF\\uFB1D-\\uFB4F\r\n*\r\n* @private\r\n*/\r\nvar rtlPattern = /[\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFE\\u0590-\\u05FF\\uFB1D-\\uFB4F]/;\r\n\r\n/**\r\n* Takes content `str` and determines whether or not it is [RTL]{@glossary RTL}.\r\n*\r\n* @param {String} str - A [String]{@glossary String} to check the [RTL]{@glossary RTL}-ness of.\r\n* @return {Boolean} `true` if `str` should be RTL; `false` if not.\r\n* @public\r\n*/\r\nexports.isRtl = function (str) {\r\n\treturn rtlPattern.test(str);\r\n};","require('enyo');\r\n\r\n/**\r\n* Contains methods for dealing with jobs.\r\n* @module enyo/job\r\n*/\r\nvar _jobs = {};\r\n\r\n/**\r\n* Runs a job after a specified amount of time has elapsed\r\n* since a job with the same name has run.\r\n* \r\n* Jobs can be used to throttle behaviors.  If some event may occur one time or\r\n* multiple times, but we want a response to occur only once every `n` seconds,\r\n* we can use a job.\r\n*\r\n* ```\r\n* onscroll: function() {\r\n* \t// updateThumb will be called, but only when 1 second has elapsed since the\r\n* \t// last onscroll\r\n* \texports(\"updateThumb\", this.bindSafely(\"updateThumb\"), 1000);\r\n* }\r\n* ```\r\n*\r\n* @param {String} nom - The name of the job to throttle.\r\n* @param {(Function|String)} job - Either the name of a method or a [function]{@glossary Function}\r\n*                                to execute as the requested job.\r\n* @param {Number} wait - The number of milliseconds to wait before executing the job again.\r\n* @function\r\n* @public\r\n*/\r\nexports = module.exports = function (nom, job, wait) {\r\n\texports.stop(nom);\r\n\t_jobs[nom] = setTimeout(function() {\r\n\t\texports.stop(nom);\r\n\t\tjob();\r\n\t}, wait);\r\n};\r\n\r\n/**\r\n* Cancels the named job, if it has not already fired.\r\n*\r\n* @param {String} nom - The name of the job to cancel.\r\n* @static\r\n* @public\r\n*/\r\nexports.stop = function (nom) {\r\n\tif (_jobs[nom]) {\r\n\t\tclearTimeout(_jobs[nom]);\r\n\t\tdelete _jobs[nom];\r\n\t}\r\n};\r\n\r\n/**\r\n* Immediately invokes the job and prevents any other calls\r\n* to `exports.throttle()` with the same job name from running for the\r\n* specified amount of time.\r\n* \r\n* This is used for throttling user events when you want to provide an\r\n* immediate response, but later invocations might just be noise if they arrive\r\n* too often.\r\n* \r\n* @param {String} nom - The name of the job to throttle.\r\n* @param {(Function|String)} job - Either the name of a method or a [function]{@glossary Function}\r\n*                                to execute as the requested job.\r\n* @param {Number} wait - The number of milliseconds to wait before executing the\r\n*                      job again.\r\n* @static\r\n* @public\r\n*/\r\nexports.throttle = function (nom, job, wait) {\r\n\t// if we still have a job with this name pending, return immediately\r\n\tif (_jobs[nom]) {\r\n\t\treturn;\r\n\t}\r\n\tjob();\r\n\t_jobs[nom] = setTimeout(function() {\r\n\t\texports.stop(nom);\r\n\t}, wait);\r\n};\r\n","require('enyo');\r\n\r\n\r\n/**\r\n* [JSON]{@glossary JSON} related methods and wrappers.\r\n*\r\n* @module enyo/json\r\n* @public\r\n*/\r\nmodule.exports = {\r\n\t\r\n\t/**\r\n\t* Wrapper for [JSON.stringify()]{@glossary JSON.stringify}. Creates a\r\n\t* [JSON]{@glossary JSON} [string]{@glossary String} from an\r\n\t* [object]{@glossary Object}.\r\n\t*\r\n\t* @see {@glossary JSON.stringify}\r\n\t* @param {Object} value - The [object]{@glossary Object} to convert to a\r\n\t*\t[JSON]{@glossary JSON} [string]{@glossary String}.\r\n\t* @param {(Function|String[])} [replacer] An optional parameter indicating either an\r\n\t*\t[array]{@glossary Array} of keys to include in the final output or a\r\n\t*\t[function]{@glossary Function} that will have the opportunity to dynamically return\r\n\t*\tvalues to include for keys.\r\n\t* @param {(Number|String)} [space] - Determines the spacing (if any) for pretty-printed\r\n\t*\toutput of the JSON string. A [number]{@glossary Number} indicates the number of\r\n\t* spaces to use in the output, while a string will be used verbatim.\r\n\t* @returns {String} The JSON string for the given object.\r\n\t* @public\r\n\t*/\r\n\tstringify: function(value, replacer, space) {\r\n\t\treturn JSON.stringify(value, replacer, space);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Wrapper for [JSON.parse()]{@glossary JSON.parse}. Parses a valid\r\n\t* [JSON]{@glossary JSON} [string]{@glossary String} and returns an\r\n\t* [object]{@glossary Object}, or `null` if the parameters are invalid.\r\n\t*\r\n\t* @see {@glossary JSON.parse}\r\n\t* @param {String} json - The [JSON]{@glossary JSON} [string]{@glossary String} to\r\n\t*\tparse into an [object]{@glossary Object}.\r\n\t* @param {Function} [reviver] - The optional [function]{@glossary Function} to use to\r\n\t*\tparse individual keys of the return object.\r\n\t* @returns {(Object|null)} If parameters are valid, an [object]{@glossary Object}\r\n\t* is returned; otherwise, `null`.\r\n\t* @public\r\n\t*/\r\n\tparse: function(json, reviver) {\r\n\t\treturn json ? JSON.parse(json, reviver) : null;\r\n\t}\r\n};\r\n","require('enyo');\r\n\r\n/**\r\n* The available options used by {@link module:enyo/Ajax~Ajax} and {@link module:enyo/WebService~WebService}. You will not\r\n* generally want to access this module directly.\r\n*\r\n* @module enyo/AjaxProperties\r\n* @public\r\n*/\r\nmodule.exports = {\r\n\t\r\n\t/**\r\n\t* When `true`, appends a random number as a parameter for `GET` requests to try to\r\n\t* force a new fetch of the resource instead of reusing a local cache.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tcacheBust: true,\r\n\t\r\n\t/**\r\n\t* The URL for the service. This may be a relative URL if used to fetch resources bundled\r\n\t* with the application.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\turl: '',\r\n\t\r\n\t/**\r\n\t* The HTTP method to use for the request; defaults to `'GET'`.  Supported values include\r\n\t* `'GET'`, `'POST'`, `'PUT'`, and `'DELETE'`.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'GET'\r\n\t* @public\r\n\t*/\r\n\tmethod: 'GET', // {value: 'GET', options: ['GET', 'POST', 'PUT', 'DELETE']}\r\n\t\r\n\t/**\r\n\t* How the response will be handled. Supported values are `'json'`, `'text'`, and `'xml'`.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'json'\r\n\t* @public\r\n\t*/\r\n\thandleAs: 'json', // {value: 'json', options: ['text', 'json', 'xml']}\r\n\t\r\n\t/**\r\n\t* The `Content-Type` header for the request as a String.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'application/x-www-form-urlencoded'\r\n\t* @public\r\n\t*/\r\n\tcontentType: 'application/x-www-form-urlencoded',\r\n\t\r\n\t/**\r\n\t* If `true`, makes a synchronous (blocking) call, if supported.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tsync: false,\r\n\t\r\n\t/**\r\n\t* Optional additional request headers as a [hash]{@glossary Object}, or `null`.\r\n\t\r\n\t* ```javascript\r\n\t* { 'X-My-Header': 'My Value', 'Mood': 'Happy' }\r\n\t* ```\r\n\t*\r\n\t* @type {Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\theaders: null,\r\n\t\r\n\t/**\r\n\t* The content for the request body for `POST/PUT` methods. When `postBody` is a\r\n\t* [buffer]{@glossary Buffer} or a [string]{@glossary String}, it is passed\r\n\t* verbatim in the request body. When it is a [hash]{@glossary Object}, the way it is\r\n\t* encoded depends on the `contentType`:\r\n\t*\r\n\t* - `'application/json'` => [JSON.stringify()]{@glossary JSON.stringify}\r\n\t* - `'application/x-www-urlencoded'` => url-encoded parameters\r\n\t* - `'multipart/form-data'` => passed as fields in {@link module:enyo/FormData} (XHR2 emulation)\r\n\t*\r\n\t* @type {(String|Buffer|Object)}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\tpostBody: '',\r\n\r\n\t/**\r\n\t* The optional username to use for authentication purposes.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\tusername: '',\r\n\t\r\n\t/**\r\n\t* The optional password to use for authentication purposes.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\tpassword: '',\r\n\t\r\n\t/**\r\n\t* Optional [hash]{@glossary Object} with fields to pass directly to the underlying XHR\r\n\t* object. One example is the `withCredentials` flag used for cross-origin requests.\r\n\t*\r\n\t* @type {Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\txhrFields: null,\r\n\t\r\n\t/**\r\n\t* Optional [string]{@glossary String} to override the `MIME-Type` header.\r\n\t*\r\n\t* @type {String}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tmimeType: null\r\n};\r\n","require('enyo');\r\n\r\n/**\r\n* @module enyo/roots\r\n*/\r\n\r\n/**\r\n* @private\r\n*/\r\nvar callbacks = [],\r\n\troots = [];\r\n\r\n/**\r\n* Registers a single callback to be executed whenever a root view is rendered.\r\n* \r\n* @name enyo.rendered\r\n* @method\r\n* @param {Function} method - The callback to execute.\r\n* @param {Object} [context=enyo.global] The context under which to execute the callback.\r\n* @public\r\n*/\r\nexports.rendered = function (method, context) {\r\n\tcallbacks.push({method: method, context: context || global});\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nexports.roots = roots;\r\n\r\n/**\r\n* Invokes all known callbacks (if any) against the root view once it has been rendered.\r\n* This method is not likely to be executed very often.\r\n* \r\n* @private\r\n*/\r\nfunction invoke (root) {\r\n\tcallbacks.forEach(function (ln) {\r\n\t\tln.method.call(ln.context, root);\r\n\t});\r\n}\r\n\r\n/**\r\n* @private\r\n*/\r\nexports.addToRoots = function (view) {\r\n\tvar rendered,\r\n\t\tdestroy;\r\n\t\r\n\t// since it is possible to call renderInto more than once on a given view we ensure we\r\n\t// don't register it twice unnecessarily\r\n\tif (roots.indexOf(view) === -1) {\r\n\t\t\r\n\t\troots.push(view);\r\n\t\t\r\n\t\t// hijack the rendered method\r\n\t\trendered = view.rendered;\r\n\t\t\r\n\t\t// hijack the destroy method\r\n\t\tdestroy = view.destroy;\r\n\t\t\r\n\t\t// supply our rendered hook\r\n\t\tview.rendered = function () {\r\n\t\t\t// we call the original first\r\n\t\t\trendered.apply(this, arguments);\r\n\t\t\t\r\n\t\t\t// and now we invoke the known callbacks against this root\r\n\t\t\tinvoke(this);\r\n\t\t};\r\n\t\t\r\n\t\t// supply our destroy hook\r\n\t\tview.destroy = function () {\r\n\t\t\tvar idx = roots.indexOf(this);\r\n\t\t\t\r\n\t\t\t// remove it from the roots array\r\n\t\t\tif (idx > -1) roots.splice(idx, 1);\r\n\t\t\t\r\n\t\t\t// now we can call the original\r\n\t\t\tdestroy.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n};\r\n","require('enyo');\r\n\r\nvar utils = require('./utils');\r\n\r\n/**\r\n* Determines OS versions of platforms that need special treatment. Can have one of the following\r\n* properties:\r\n*\r\n* * android\r\n* * androidChrome (Chrome on Android, standard starting in 4.1)\r\n* * androidFirefox\r\n* * ie\r\n* * edge\r\n* * ios\r\n* * webos\r\n* * windowsPhone\r\n* * blackberry\r\n* * tizen\r\n* * safari (desktop version)\r\n* * chrome (desktop version)\r\n* * firefox (desktop version)\r\n* * firefoxOS\r\n*\r\n* If the property is defined, its value will be the major version number of the platform.\r\n*\r\n* Example:\r\n* ```javascript\r\n* // android 2 does not have 3d css\r\n* if (enyo.platform.android < 3) {\r\n* \tt = 'translate(30px, 50px)';\r\n* } else {\r\n* \tt = 'translate3d(30px, 50px, 0)';\r\n* }\r\n* this.applyStyle('-webkit-transform', t);\r\n* ```\r\n*\r\n* @module enyo/platform\r\n*/\r\nexports = module.exports = {\r\n\t/**\r\n\t* `true` if the platform has native single-finger [events]{@glossary event}.\r\n\t* @public\r\n\t*/\r\n\ttouch: Boolean(('ontouchstart' in window) || window.navigator.msMaxTouchPoints || (window.navigator.msManipulationViewsEnabled && window.navigator.maxTouchPoints)),\r\n\t/**\r\n\t* `true` if the platform has native double-finger [events]{@glossary event}.\r\n\t* @public\r\n\t*/\r\n\tgesture: Boolean(('ongesturestart' in window) || ('onmsgesturestart' in window && (window.navigator.msMaxTouchPoints > 1 || window.navigator.maxTouchPoints > 1)))\r\n\r\n\t/**\r\n\t* The name of the platform that was detected or `undefined` if the platform\r\n\t* was unrecognized. This value is the key name for the major version of the\r\n\t* platform on the exported object.\r\n\t* @member {String} platformName\r\n\t* @public\r\n\t*/\r\n\r\n};\r\n\r\nvar ua = navigator.userAgent;\r\nvar ep = exports;\r\nvar platforms = [\r\n\t// Windows Phone 7 - 10\r\n\t{platform: 'windowsPhone', regex: /Windows Phone (?:OS )?(\\d+)[.\\d]+/},\r\n\t// Android 4+ using Chrome\r\n\t{platform: 'androidChrome', regex: /Android .* Chrome\\/(\\d+)[.\\d]+/},\r\n\t// Android 2 - 4\r\n\t{platform: 'android', regex: /Android(?:\\s|\\/)(\\d+)/},\r\n\t// Kindle Fire\r\n\t// Force version to 2, (desktop mode does not list android version)\r\n\t{platform: 'android', regex: /Silk\\/1./, forceVersion: 2, extra: {silk: 1}},\r\n\t// Kindle Fire HD (Silk versions 2 or 3)\r\n\t// Force version to 4\r\n\t{platform: 'android', regex: /Silk\\/2./, forceVersion: 4, extra: {silk: 2}},\r\n\t{platform: 'android', regex: /Silk\\/3./, forceVersion: 4, extra: {silk: 3}},\r\n\t// IE 8 - 10\r\n\t{platform: 'ie', regex: /MSIE (\\d+)/},\r\n\t// IE 11\r\n\t{platform: 'ie', regex: /Trident\\/.*; rv:(\\d+)/},\r\n\t// Edge\r\n\t{platform: 'edge', regex: /Edge\\/(\\d+)/},\r\n\t// iOS 3 - 5\r\n\t// Apple likes to make this complicated\r\n\t{platform: 'ios', regex: /iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/},\r\n\t// webOS 1 - 3\r\n\t{platform: 'webos', regex: /(?:web|hpw)OS\\/(\\d+)/},\r\n\t// webOS 4 / OpenWebOS\r\n\t{platform: 'webos', regex: /WebAppManager|Isis|webOS\\./, forceVersion: 4},\r\n\t// Open webOS release LuneOS\r\n\t{platform: 'webos', regex: /LuneOS/, forceVersion: 4, extra: {luneos: 1}},\r\n\t// desktop Safari\r\n\t{platform: 'safari', regex: /Version\\/(\\d+)[.\\d]+\\s+Safari/},\r\n\t// desktop Chrome\r\n\t{platform: 'chrome', regex: /Chrome\\/(\\d+)[.\\d]+/},\r\n\t// Firefox on Android\r\n\t{platform: 'androidFirefox', regex: /Android;.*Firefox\\/(\\d+)/},\r\n\t// FirefoxOS\r\n\t{platform: 'firefoxOS', regex: /Mobile;.*Firefox\\/(\\d+)/},\r\n\t// desktop Firefox\r\n\t{platform: 'firefox', regex: /Firefox\\/(\\d+)/},\r\n\t// Blackberry Playbook\r\n\t{platform: 'blackberry', regex: /PlayBook/i, forceVersion: 2},\r\n\t// Blackberry 10+\r\n\t{platform: 'blackberry', regex: /BB1\\d;.*Version\\/(\\d+\\.\\d+)/},\r\n\t// Tizen\r\n\t{platform: 'tizen', regex: /Tizen (\\d+)/}\r\n];\r\nfor (var i = 0, p, m, v; (p = platforms[i]); i++) {\r\n\tm = p.regex.exec(ua);\r\n\tif (m) {\r\n\t\tif (p.forceVersion) {\r\n\t\t\tv = p.forceVersion;\r\n\t\t} else {\r\n\t\t\tv = Number(m[1]);\r\n\t\t}\r\n\t\tep[p.platform] = v;\r\n\t\tif (p.extra) {\r\n\t\t\tutils.mixin(ep, p.extra);\r\n\t\t}\r\n\t\tep.platformName = p.platform;\r\n\t\tbreak;\r\n\t}\r\n}\r\n","require('enyo');\r\n\r\nvar\r\n\tutils = require('./utils');\r\n\r\n/**\r\n* An [XHR2]{@linkplain http://www.w3.org/TR/XMLHttpRequest/} FormData implementation.\r\n* It is used to send `multipart/form-data` [Ajax]{@glossary ajax} requests. The\r\n* internal [enyo/Blob]{@link module:enyo/Blob} [kind]{@glossary kind} is the\r\n* content provider for file-parts.\r\n*\r\n* Note that in Internet Explorer < 10, both `enyo/FormData` and `enyo/Blob` are\r\n* limited to [string]{@glossary String} content and `enyo/Blob` may only be\r\n* instantiated using an [array]{@glossary Array} of [strings]{@glossary String}.\r\n*\r\n* This implementation is inspired by\r\n* [html5-formdata]{@linkplain https://github.com/francois2metz/html5-formdata/blob/master/formdata.js}.\r\n*\r\n* ```\r\n* Emulate FormData for some browsers\r\n* MIT License\r\n* (c) 2010 Francois de Metz\r\n* ```\r\n*\r\n* @module enyo/FormData\r\n* @public\r\n*/\r\nexports = null;\r\n\r\nif (typeof FormData != 'undefined') {\r\n\ttry {\r\n\t\tnew FormData();\r\n\t\t\r\n\t\texports = module.exports = FormData;\r\n\t// Android Chrome 18 will throw an error trying to create this\r\n\t} catch (e) {}\r\n}\r\n\r\nif (!exports) {\r\n\r\n\t/*jshint -W082 */\r\n\tfunction FormData() {\r\n\t\tthis.fake = true;\r\n\t\tthis._fields = [];\r\n\t\t// This generates a 50 character boundary similar to\r\n\t\t// those used by Firefox.  They are optimized for\r\n\t\t// boyer-moore parsing.\r\n\t\tthis.boundary = '--------------------------';\r\n\t\tfor (var i = 0; i < 24; i++) {\r\n\t\t\tthis.boundary += Math.floor(Math.random() * 10).toString(16);\r\n\t\t}\r\n\t}\r\n\tFormData.prototype.getContentType = function() {\r\n\t\treturn \"multipart/form-data; boundary=\" + this.boundary;\r\n\t};\r\n\tFormData.prototype.append = function(key, value, filename) {\r\n\t\tthis._fields.push([key, value, filename]);\r\n\t};\r\n\tFormData.prototype.toString = function() {\r\n\t\tvar boundary = this.boundary;\r\n\t\tvar body = \"\";\r\n\t\tutils.forEach(this._fields, function(field) {\r\n\t\t\tbody += \"--\" + boundary + \"\\r\\n\";\r\n\t\t\tif (field[2] || field[1].name) {\r\n\t\t\t\t// file upload\r\n\t\t\t\tvar file = field[1], filename = field[2] || file.name;\r\n\t\t\t\tbody += \"Content-Disposition: form-data; name=\\\"\"+ field[0] +\"\\\"; filename=\\\"\"+ filename +\"\\\"\\r\\n\";\r\n\t\t\t\tbody += \"Content-Type: \"+ file.type +\"\\r\\n\\r\\n\";\r\n\t\t\t\tbody += file.getAsBinary() + \"\\r\\n\";\r\n\t\t\t} else {\r\n\t\t\t\t// key-value field\r\n\t\t\t\tbody += \"Content-Disposition: form-data; name=\\\"\"+ field[0] +\"\\\";\\r\\n\\r\\n\";\r\n\t\t\t\tbody += field[1] + \"\\r\\n\";\r\n\t\t\t}\r\n\t\t});\r\n\t\tbody += \"--\" + boundary +\"--\";\r\n\t\treturn body;\r\n\t};\r\n\t/*jshint +W082 */\r\n\t\r\n\tmodule.exports = FormData;\r\n}\r\n","require('enyo');\r\n\r\nvar\r\n\tjson = require('./json'),\r\n\tutils = require('./utils'),\r\n\tplatform = require('./platform');\r\n\r\n/**\r\n* These platforms only allow one argument for [console.log()]{@glossary console.log}:\r\n*\r\n* * android\r\n* * ios\r\n* * webos\r\n*\r\n* @ignore\r\n*/\r\nvar dumbConsole = Boolean(platform.android || platform.ios || platform.webos);\r\n\r\n/**\r\n* Internally used methods and properties associated with logging.\r\n*\r\n* @module enyo/logger\r\n* @public\r\n*/\r\nexports = module.exports = {\r\n\r\n\t/**\r\n\t* The log level to use. Can be a value from -1 to 99, where -1 disables all\r\n\t* logging, 0 is 'error', 10 is 'warn', and 20 is 'log'. It is preferred that\r\n\t* this value be set using the [setLogLevel()]{@link module:enyo/logger#setLogLevel}\r\n\t* method.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 99\r\n\t* @public\r\n\t*/\r\n\tlevel: 99,\r\n\r\n\t/**\r\n\t* The known levels.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tlevels: {log: 20, warn: 10, error: 0},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshouldLog: function (fn) {\r\n\t\tvar ll = parseInt(this.levels[fn], 0);\r\n\t\treturn (ll <= this.level);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tvalidateArgs: function (args) {\r\n\t\t// gracefully handle and prevent circular reference errors in objects\r\n\t\tfor (var i=0, l=args.length, item; (item=args[i]) || i<l; i++) {\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof item === 'object') {\r\n\t\t\t\t\targs[i] = json.stringify(item);\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\targs[i] = 'Error: ' + e.message;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_log: function (fn, args) {\r\n\t\t// avoid trying to use console on IE instances where the object hasn't been\r\n\t\t// created due to the developer tools being unopened\r\n\t\tvar console = global.console;\r\n\t\tif (typeof console === 'undefined') {\r\n            return;\r\n        }\r\n\t\t//var a$ = utils.logging.formatArgs(fn, args);\r\n\t\tvar a$ = utils.isArray(args) ? args : utils.cloneArray(args);\r\n\t\tif (platform.androidFirefox) {\r\n\t\t\t// Firefox for Android's console does not handle objects with circular references\r\n\t\t\tthis.validateArgs(a$);\r\n\t\t}\r\n\t\tif (dumbConsole) {\r\n\t\t\t// at least in early versions of webos, console.* only accept a single argument\r\n\t\t\ta$ = [a$.join(' ')];\r\n\t\t}\r\n\t\tvar fn$ = console[fn];\r\n\t\tif (fn$ && fn$.apply) {\r\n\t\t\t// some consoles support 'warn', 'info', and so on\r\n\t\t\tfn$.apply(console, a$);\r\n\t\t} else if (console.log.apply) {\r\n\t\t\t// some consoles support console.log.apply\r\n\t\t\tconsole.log.apply(console, a$);\r\n\t\t} else {\r\n\t\t\t// otherwise, do our own formatting\r\n\t\t\tconsole.log(a$.join(' '));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* This is exposed elsewhere.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tlog: function (fn, args) {\r\n\r\n\t\tif (fn != 'log' && fn != 'warn' && fn != 'error') {\r\n\t\t\targs = Array.prototype.slice.call(arguments);\r\n\t\t\tfn = 'log';\r\n\t\t}\r\n\r\n\t\tvar console = global.console;\r\n\t\tif (typeof console !== 'undefined') {\r\n\t\t\tif (this.shouldLog(fn)) {\r\n\t\t\t\tthis._log(fn, args);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n* Sets the log level to the given value. This will restrict the amount of output depending on\r\n* the settings. The higher the value, the more output that will be allowed. The default is\r\n* 99. The value, -1, would silence all logging, even 'error' (0).\r\n* Without the 'see': {@link module:enyo/logger#log}.\r\n*\r\n* @see module:enyo/logger#level\r\n* @see module:enyo/logger#log\r\n* @see module:enyo/logger#warn\r\n* @see module:enyo/logger#error\r\n* @param {Number} level - The level to set logging to.\r\n*/\r\nexports.setLogLevel = function (level) {\r\n\tvar ll = parseInt(level, 0);\r\n\tif (isFinite(ll)) {\r\n\t\tthis.level = ll;\r\n\t}\r\n};\r\n\r\n/**\r\n* A wrapper for [console.log()]{@glossary console.log}, compatible\r\n* across supported platforms. Will output only if the current\r\n* [log level]{@link module:enyo/logger#level} allows it. [Object]{@glossary Object}\r\n* parameters will be serialized via [JSON.stringify()]{@glossary JSON.stringify}\r\n* automatically.\r\n*\r\n* @utility\r\n* @see {@glossary console.log}\r\n* @param {...*} - The arguments to be logged.\r\n* @public\r\n*/\r\n\r\n/**\r\n* A wrapper for [console.warn()]{@glossary console.warn}, compatible\r\n* across supported platforms. Will output only if the current\r\n* [log level]{@link module:enyo/logger#level} allows it. [Object]{@glossary Object}\r\n* parameters will be serialized via [JSON.stringify()]{@glossary JSON.stringify}\r\n* automatically.\r\n*\r\n* @utility\r\n* @see {@glossary console.warn}\r\n* @param {...*} - The arguments to be logged.\r\n* @public\r\n*/\r\nexports.warn = function () {\r\n\tthis.log('warn', arguments);\r\n};\r\n\r\n/**\r\n* A wrapper for [console.error()]{@glossary console.error}, compatible\r\n* across supported platforms. Will output only if the current\r\n* [log level]{@link module:enyo/logger#level} allows it. [Object]{@glossary Object}\r\n* parameters will be serialized via [JSON.stringify()]{@glossary JSON.stringify}\r\n* automatically.\r\n*\r\n* @utility\r\n* @see {@glossary console.error}\r\n* @param {...*} - The arguments to be logged.\r\n* @public\r\n*/\r\nexports.error = function () {\r\n\tthis.log('error', arguments);\r\n};\r\n","/**\r\n* Contains methods for working with DOM\r\n* @module enyo/dom\r\n*/\r\nrequire('enyo');\r\n\r\nvar\r\n\troots = require('./roots'),\r\n\tutils = require('./utils'),\r\n\tplatform = require('./platform');\r\n\r\nvar dom = module.exports = {\r\n\r\n\t/**\r\n\t* Shortcut for `document.getElementById()` if `id` is a string; otherwise,\r\n\t* returns `id`. Uses `global.document` unless a document is specified in the\r\n\t* (optional) `doc` parameter.\r\n\t*\r\n\t* ```javascript\r\n\t* var\r\n\t* \tdom = require('enyo/dom');\r\n\t*\r\n\t* // find 'node' if it's a string id, or return it unchanged if it's already a node reference\r\n\t* var domNode = dom.byId(node);\r\n\t* ```\r\n\t*\r\n\t* @param {String} id - The document element ID to get.\r\n\t* @param {Node} [doc] - A [node]{@glossary Node} to search in. Default is the whole\r\n\t*\tdocument.\r\n\t* @returns {Element} A reference to a DOM element.\r\n\t* @public\r\n\t*/\r\n\tbyId: function(id, doc){\r\n\t\treturn (typeof id == 'string') ? (doc || document).getElementById(id) : id;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns a string with ampersand, less-than, and greater-than characters replaced with HTML\r\n\t* entities, e.g.,\r\n\t* ```\r\n\t* '&lt;code&gt;'This &amp; That'&lt;/code&gt;'\r\n\t* ```\r\n\t* becomes\r\n\t* ```\r\n\t* '&amp;lt;code&amp;gt;'This &amp;amp; That'&amp;lt;/code&amp;gt;'\r\n\t* ```\r\n\t*\r\n\t* @param {String} text - A string with entities you'd like to escape/convert.\r\n\t* @returns {String} A string that is properly escaped (the above characters.)\r\n\t* @public\r\n\t*/\r\n\tescape: function(text) {\r\n\t\treturn text !== null ? String(text).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;') : '';\r\n\t},\r\n\r\n\t/**\r\n\t* Returns an object describing the geometry of this node.\r\n\t*\r\n\t* @param {Node} n - The [node]{@glossary Node} to measure.\r\n\t* @returns {Object} An object containing the properties `top`, `left`,\r\n\t* `height`, and `width`.\r\n\t* @public\r\n\t*/\r\n\tgetBounds: function(n) {\r\n\t\tif (n) {\r\n\t\t\treturn {left: n.offsetLeft, top: n.offsetTop, width: n.offsetWidth, height: n.offsetHeight};\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetComputedStyle: function(node) {\r\n\t\treturn global.getComputedStyle && node && global.getComputedStyle(node, null);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetComputedStyleValue: function(node, property, computedStyle) {\r\n\t\tvar s   = computedStyle || this.getComputedStyle(node),\r\n\t\t\tnIE = platform.ie;\r\n\r\n\t\ts = s ? s.getPropertyValue(property) : null;\r\n\r\n\t\tif (nIE) {\r\n\t\t\tvar oConversion = {\r\n\t\t\t\t'thin'   : '2px',\r\n\t\t\t\t'medium' : '4px',\r\n\t\t\t\t'thick'  : '6px',\r\n\t\t\t\t'none'   : '0'\r\n\t\t\t};\r\n\t\t\tif (typeof oConversion[s] != 'undefined') {\r\n\t\t\t\ts = oConversion[s];\r\n\t\t\t}\r\n\r\n\t\t\tif (s == 'auto') {\r\n\t\t\t\tswitch (property) {\r\n\t\t\t\tcase 'width':\r\n\t\t\t\t\ts = node.offsetWidth;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'height':\r\n\t\t\t\t\ts = node.offsetHeight;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn s;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetFirstElementByTagName: function(tagName) {\r\n\t\tvar e = document.getElementsByTagName(tagName);\r\n\t\treturn e && e[0];\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tapplyBodyFit: function() {\r\n\t\tvar h = this.getFirstElementByTagName('html');\r\n\t\tif (h) {\r\n\t\t\tthis.addClass(h, 'enyo-document-fit');\r\n\t\t}\r\n\t\tdom.addBodyClass('enyo-body-fit');\r\n\t\tdom.bodyIsFitting = true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetWindowWidth: function() {\r\n\t\tif (global.innerWidth) {\r\n\t\t\treturn global.innerWidth;\r\n\t\t}\r\n\t\tif (document.body && document.body.offsetWidth) {\r\n\t\t\treturn document.body.offsetWidth;\r\n\t\t}\r\n\t\tif (document.compatMode=='CSS1Compat' &&\r\n\t\t\tdocument.documentElement &&\r\n\t\t\tdocument.documentElement.offsetWidth ) {\r\n\t\t\treturn document.documentElement.offsetWidth;\r\n\t\t}\r\n\t\treturn 320;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetWindowHeight: function() {\r\n\t\tif (global.innerHeight) {\r\n\t\t\treturn global.innerHeight;\r\n\t\t}\r\n\t\tif (document.body && document.body.offsetHeight) {\r\n\t\t\treturn document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (document.compatMode=='CSS1Compat' &&\r\n\t\t\tdocument.documentElement &&\r\n\t\t\tdocument.documentElement.offsetHeight ) {\r\n\t\t\treturn document.documentElement.offsetHeight;\r\n\t\t}\r\n\t\treturn 480;\r\n\t},\r\n\r\n\t/**\r\n\t* The proportion by which the `body` tag differs from the global size, in both X and Y\r\n\t* dimensions. This is relevant when we need to scale the whole interface down from 1920x1080\r\n\t* (1080p) to 1280x720 (720p), for example.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_bodyScaleFactorY: 1,\r\n\t_bodyScaleFactorX: 1,\r\n\tupdateScaleFactor: function() {\r\n\t\tvar bodyBounds = this.getBounds(document.body);\r\n\t\tthis._bodyScaleFactorY = bodyBounds.height / this.getWindowHeight();\r\n\t\tthis._bodyScaleFactorX = bodyBounds.width / this.getWindowWidth();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetComputedBoxValue: function(node, prop, boundary, computedStyle) {\r\n\t\tvar s = computedStyle || this.getComputedStyle(node);\r\n\t\tif (s) {\r\n\t\t\tvar p = s.getPropertyValue(prop + '-' + boundary);\r\n\t\t\treturn p === 'auto' ? 0 : parseInt(p, 10);\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\r\n\t/**\r\n\t* Gets the boundaries of a [node's]{@glossary Node} `margin` or `padding` box.\r\n\t*\r\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\r\n\t* @param {Node} box - The boundary to measure from ('padding' or 'margin').\r\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, and\r\n\t*\t`left`.\r\n\t* @public\r\n\t*/\r\n\tcalcBoxExtents: function(node, box) {\r\n\t\tvar s = this.getComputedStyle(node);\r\n\t\treturn {\r\n\t\t\ttop: this.getComputedBoxValue(node, box, 'top', s),\r\n\t\t\tright: this.getComputedBoxValue(node, box, 'right', s),\r\n\t\t\tbottom: this.getComputedBoxValue(node, box, 'bottom', s),\r\n\t\t\tleft: this.getComputedBoxValue(node, box, 'left', s)\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* Gets the calculated padding of a node. Shortcut for\r\n\t* {@link module:enyo/dom#calcBoxExtents}.\r\n\t*\r\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\r\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, and\r\n\t*\t`left`.\r\n\t* @public\r\n\t*/\r\n\tcalcPaddingExtents: function(node) {\r\n\t\treturn this.calcBoxExtents(node, 'padding');\r\n\t},\r\n\r\n\t/**\r\n\t* Gets the calculated margin of a node. Shortcut for\r\n\t* {@link module:enyo/dom#calcBoxExtents}.\r\n\t*\r\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\r\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, and\r\n\t*\t`left`.\r\n\t* @public\r\n\t*/\r\n\tcalcMarginExtents: function(node) {\r\n\t\treturn this.calcBoxExtents(node, 'margin');\r\n\t},\r\n\t/**\r\n\t* Returns an object like `{top: 0, left: 0, bottom: 100, right: 100, height: 10, width: 10}`\r\n\t* that represents the object's position relative to `relativeToNode` (suitable for absolute\r\n\t* positioning within that parent node). Negative values mean part of the object is not\r\n\t* visible. If you leave `relativeToNode` as `undefined` (or it is not a parent element), then\r\n\t* the position will be relative to the viewport and suitable for absolute positioning in a\r\n\t* floating layer.\r\n\t*\r\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\r\n\t* @param {Node} relativeToNode - The [node]{@glossary Node} to measure the distance from.\r\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, `left`,\r\n\t*\t`height`, and `width`.\r\n\t* @public\r\n\t*/\r\n\tcalcNodePosition: function(targetNode, relativeToNode) {\r\n\t\t// Parse upward and grab our positioning relative to the viewport\r\n\t\tvar top = 0,\r\n\t\t\tleft = 0,\r\n\t\t\tnode = targetNode,\r\n\t\t\twidth = node.offsetWidth,\r\n\t\t\theight = node.offsetHeight,\r\n\t\t\ttransformProp = dom.getStyleTransformProp(),\r\n\t\t\txregex = /translateX\\((-?\\d+)px\\)/i,\r\n\t\t\tyregex = /translateY\\((-?\\d+)px\\)/i,\r\n\t\t\tborderLeft = 0, borderTop = 0,\r\n\t\t\ttotalHeight = 0, totalWidth = 0,\r\n\t\t\toffsetAdjustLeft = 0, offsetAdjustTop = 0;\r\n\r\n\t\tif (relativeToNode) {\r\n\t\t\ttotalHeight = relativeToNode.offsetHeight;\r\n\t\t\ttotalWidth = relativeToNode.offsetWidth;\r\n\t\t} else {\r\n\t\t\ttotalHeight = (document.body.parentNode.offsetHeight > this.getWindowHeight() ? this.getWindowHeight() - document.body.parentNode.scrollTop : document.body.parentNode.offsetHeight);\r\n\t\t\ttotalWidth = (document.body.parentNode.offsetWidth > this.getWindowWidth() ? this.getWindowWidth() - document.body.parentNode.scrollLeft : document.body.parentNode.offsetWidth);\r\n\t\t}\r\n\r\n\t\tif (node.offsetParent) {\r\n\t\t\tdo {\r\n\t\t\t\t// Adjust the offset if relativeToNode is a child of the offsetParent\r\n\t\t\t\tif (relativeToNode && relativeToNode.compareDocumentPosition(node.offsetParent) & Node.DOCUMENT_POSITION_CONTAINS) {\r\n\t\t\t\t\toffsetAdjustLeft = relativeToNode.offsetLeft;\r\n\t\t\t\t\toffsetAdjustTop = relativeToNode.offsetTop;\r\n\t\t\t\t}\r\n\t\t\t\t// Ajust our top and left properties based on the position relative to the parent\r\n\t\t\t\tleft += node.offsetLeft - (node.offsetParent ? node.offsetParent.scrollLeft : 0) - offsetAdjustLeft;\r\n\t\t\t\tif (transformProp && xregex.test(node.style[transformProp])) {\r\n\t\t\t\t\tleft += parseInt(node.style[transformProp].replace(xregex, '$1'), 10);\r\n\t\t\t\t}\r\n\t\t\t\ttop += node.offsetTop - (node.offsetParent ? node.offsetParent.scrollTop : 0) - offsetAdjustTop;\r\n\t\t\t\tif (transformProp && yregex.test(node.style[transformProp])) {\r\n\t\t\t\t\ttop += parseInt(node.style[transformProp].replace(yregex, '$1'), 10);\r\n\t\t\t\t}\r\n\t\t\t\t// Need to correct for borders if any exist on parent elements\r\n\t\t\t\tif (node !== targetNode) {\r\n\t\t\t\t\tif (global.getComputedStyle) {\r\n\t\t\t\t\t\tborderLeft = parseInt(global.getComputedStyle(node, '').getPropertyValue('border-left-width'), 10);\r\n\t\t\t\t\t\tborderTop = parseInt(global.getComputedStyle(node, '').getPropertyValue('border-top-width'), 10);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// No computed style options, so try the normal style object (much less robust)\r\n\t\t\t\t\t\tborderLeft = parseInt(node.style.borderLeftWidth, 10);\r\n\t\t\t\t\t\tborderTop = parseInt(node.style.borderTopWidth, 10);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (borderLeft) {\r\n\t\t\t\t\t\tleft += borderLeft;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (borderTop) {\r\n\t\t\t\t\t\ttop += borderTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// Continue if we have an additional offsetParent, and either don't have a relativeToNode or the offsetParent is contained by the relativeToNode (if offsetParent contains relativeToNode, then we have already calculated up to the node, and can safely exit)\r\n\t\t\t} while ((node = node.offsetParent) && (!relativeToNode || relativeToNode.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY));\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t'top': top,\r\n\t\t\t'left': left,\r\n\t\t\t'bottom': totalHeight - top - height,\r\n\t\t\t'right': totalWidth - left - width,\r\n\t\t\t'height': height,\r\n\t\t\t'width': width\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* Removes a node from the DOM.\r\n\t*\r\n\t* @param {Node} node - The [node]{@glossary Node} to remove.\r\n\t* @public\r\n\t*/\r\n\tremoveNode: function (node) {\r\n\t\tif (node.parentNode) node.parentNode.removeChild(node);\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the `innerHTML` property of the specified `node` to `html`.\r\n\t*\r\n\t* @param {Node} node - The [node]{@glossary Node} to set.\r\n\t* @param {String} html - An HTML string.\r\n\t* @public\r\n\t*/\r\n\tsetInnerHtml: function(node, html) {\r\n\t\tnode.innerHTML = html;\r\n\t},\r\n\r\n\t/**\r\n\t* Checks a [DOM]{@glossary Node} [node]{@glossary Node} for a specific CSS class.\r\n\t*\r\n\t* @param {Node} node - The [node]{@glossary Node} to set.\r\n\t* @param {String} s - The class name to check for.\r\n\t* @returns {(Boolean|undefined)} `true` if `node` has the `s` class; `undefined`\r\n\t* if there is no `node` or it has no `className` property.\r\n\t* @public\r\n\t*/\r\n\thasClass: function(node, s) {\r\n\t\tif (!node || !s || !node.className) { return; }\r\n\t\treturn (' ' + node.className + ' ').indexOf(' ' + s + ' ') >= 0;\r\n\t},\r\n\r\n\t/**\r\n\t* Uniquely adds a CSS class to a DOM node.\r\n\t*\r\n\t* @param {Node} node - The [node]{@glossary Node} to set.\r\n\t* @param {String} s - The class name to add.\r\n\t* @public\r\n\t*/\r\n\taddClass: function(node, s) {\r\n\t\tif (node && s && !this.hasClass(node, s)) {\r\n\t\t\tvar ss = node.className;\r\n\t\t\tnode.className = (ss + (ss ? ' ' : '') + s);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Removes a CSS class from a DOM node if it exists.\r\n\t*\r\n\t* @param {Node} node - The [node]{@glossary Node} from which to remove the class.\r\n\t* @param {String} s - The class name to remove from `node`.\r\n\t* @public\r\n\t*/\r\n\tremoveClass: function(node, s) {\r\n\t\tif (node && s && this.hasClass(node, s)) {\r\n\t\t\tvar ss = node.className;\r\n\t\t\tnode.className = (' ' + ss + ' ').replace(' ' + s + ' ', ' ').slice(1, -1);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Adds a class to `document.body`. This defers the actual class change if nothing has been\r\n\t* rendered into `body` yet.\r\n\t*\r\n\t* @param {String} s - The class name to add to the document's `body`.\r\n\t* @public\r\n\t*/\r\n\taddBodyClass: function(s) {\r\n\t\tif (!utils.exists(roots.roots) || roots.roots.length === 0) {\r\n\t\t\tif (dom._bodyClasses) {\r\n\t\t\t\tdom._bodyClasses.push(s);\r\n\t\t\t} else {\r\n\t\t\t\tdom._bodyClasses = [s];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdom.addClass(document.body, s);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Returns an object describing the absolute position on the screen, relative to the top left\r\n\t* corner of the screen. This function takes into account account absolute/relative\r\n\t* `offsetParent` positioning, `scroll` position, and CSS transforms (currently\r\n\t* `translateX`, `translateY`, and `matrix3d`).\r\n\t*\r\n\t* ```javascript\r\n\t* {top: ..., right: ..., bottom: ..., left: ..., height: ..., width: ...}\r\n\t* ```\r\n\t*\r\n\t* Values returned are only valid if `hasNode()` is truthy. If there's no DOM node for the\r\n\t* object, this returns a bounds structure with `undefined` as the value of all fields.\r\n\t*\r\n\t* @param {Node} n - The [node]{@glossary Node} to measure.\r\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, `left`,\r\n\t*\t`height`, and `width`.\r\n\t* @public\r\n\t*/\r\n\tgetAbsoluteBounds: function(targetNode) {\r\n\t\treturn utils.clone(targetNode.getBoundingClientRect());\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tflushBodyClasses: function() {\r\n\t\tif (dom._bodyClasses) {\r\n\t\t\tfor (var i = 0, c; (c=dom._bodyClasses[i]); ++i) {\r\n\t\t\t\tdom.addClass(document.body, c);\r\n\t\t\t}\r\n\t\t\tdom._bodyClasses = null;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_bodyClasses: null,\r\n\r\n\t/**\r\n\t* Convert to various unit formats. Useful for converting pixels to a resolution-independent\r\n\t* measurement method, like \"rem\". Other units are available if defined in the\r\n\t* {@link module:enyo/dom#unitToPixelFactors} object.\r\n\t*\r\n\t* ```javascript\r\n\t* var\r\n\t* \tdom = require('enyo/dom');\r\n\t*\r\n\t* // Do calculations and get back the desired CSS unit.\r\n\t* var frameWidth = 250,\r\n\t*     frameWithMarginInches = dom.unit( 10 + frameWidth + 10, 'in' ),\r\n\t*     frameWithMarginRems = dom.unit( 10 + frameWidth + 10, 'rem' );\r\n\t* // '2.8125in' == frameWithMarginInches\r\n\t* // '22.5rem' == frameWithMarginRems\r\n\t* ```\r\n\t*\r\n\t* @param {(String|Number)} pixels - The the pixels or math to convert to the unit.\r\n\t*\t(\"px\" suffix in String format is permitted. ex: `'20px'`)\r\n\t* @param {(String)} toUnit - The name of the unit to convert to.\r\n\t* @returns {(Number|undefined)} Resulting conversion, in case of malformed input, `undefined`\r\n\t* @public\r\n\t*/\r\n\tunit: function (pixels, toUnit) {\r\n\t\tif (!toUnit || !this.unitToPixelFactors[toUnit]) return;\r\n\t\tif (typeof pixels == 'string' && pixels.substr(-2) == 'px') pixels = parseInt(pixels.substr(0, pixels.length - 2), 10);\r\n\t\tif (typeof pixels != 'number') return;\r\n\r\n\t\treturn (pixels / this.unitToPixelFactors[toUnit]) + '' + toUnit;\r\n\t},\r\n\r\n\t/**\r\n\t* Object that stores all of the pixel conversion factors to each keyed unit.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tunitToPixelFactors: {\r\n\t\t'rem': 12,\r\n\t\t'in': 96\r\n\t}\r\n};\r\n\r\n// override setInnerHtml for Windows 8 HTML applications\r\nif (typeof global.MSApp !== 'undefined' && typeof global.MSApp.execUnsafeLocalFunction !== 'undefined') {\r\n\tdom.setInnerHtml = function(node, html) {\r\n\t\tglobal.MSApp.execUnsafeLocalFunction(function() {\r\n\t\t\tnode.innerHTML = html;\r\n\t\t});\r\n\t};\r\n}\r\n\r\n// use faster classList interface if it exists\r\nif (document.head && document.head.classList) {\r\n\tdom.hasClass = function(node, s) {\r\n\t\tif (node) {\r\n\t\t\treturn node.classList.contains(s);\r\n\t\t}\r\n\t};\r\n\tdom.addClass = function(node, s) {\r\n\t\tif (node) {\r\n\t\t\treturn node.classList.add(s);\r\n\t\t}\r\n\t};\r\n\tdom.removeClass = function (node, s) {\r\n\t\tif (node) {\r\n\t\t\treturn node.classList.remove(s);\r\n\t\t}\r\n\t};\r\n}\r\n\r\n/**\r\n* Allows bootstrapping in environments that do not have a global object right away.\r\n*\r\n* @param {Function} func - The function to run\r\n* @public\r\n*/\r\ndom.requiresWindow = function(func) {\r\n\tfunc();\r\n};\r\n\r\n\r\nvar cssTransformProps = ['transform', '-webkit-transform', '-moz-transform', '-ms-transform', '-o-transform'],\r\n\tstyleTransformProps = ['transform', 'webkitTransform', 'MozTransform', 'msTransform', 'OTransform'];\r\n\r\n/**\r\n* @private\r\n*/\r\ndom.calcCanAccelerate = function() {\r\n\t/* Android 2 is a liar: it does NOT support 3D transforms, even though Perspective is the best check */\r\n\tif (platform.android <= 2) {\r\n\t\treturn false;\r\n\t}\r\n\tvar p$ = ['perspective', 'WebkitPerspective', 'MozPerspective', 'msPerspective', 'OPerspective'];\r\n\tfor (var i=0, p; (p=p$[i]); i++) {\r\n\t\tif (typeof document.body.style[p] != 'undefined') {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n};\r\n/**\r\n* @private\r\n*/\r\ndom.getCssTransformProp = function() {\r\n\tif (this._cssTransformProp) {\r\n\t\treturn this._cssTransformProp;\r\n\t}\r\n\tvar i = utils.indexOf(this.getStyleTransformProp(), styleTransformProps);\r\n\tthis._cssTransformProp = cssTransformProps[i];\r\n\treturn this._cssTransformProp;\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\ndom.getStyleTransformProp = function() {\r\n\tif (this._styleTransformProp || !document.body) {\r\n\t\treturn this._styleTransformProp;\r\n\t}\r\n\tfor (var i = 0, p; (p = styleTransformProps[i]); i++) {\r\n\t\tif (typeof document.body.style[p] != 'undefined') {\r\n\t\t\tthis._styleTransformProp = p;\r\n\t\t\treturn this._styleTransformProp;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\ndom.domTransformsToCss = function(inTransforms) {\r\n\tvar n, v, text = '';\r\n\tfor (n in inTransforms) {\r\n\t\tv = inTransforms[n];\r\n\t\tif ((v !== null) && (v !== undefined) && (v !== '')) {\r\n\t\t\ttext +=  n + '(' + v + ') ';\r\n\t\t}\r\n\t}\r\n\treturn text;\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\ndom.transformsToDom = function(control) {\r\n\tvar css = this.domTransformsToCss(control.domTransforms),\r\n\t\tstyleProp;\r\n\r\n\tif (control.hasNode()) {\r\n\t\tstyleProp = this.getStyleTransformProp();\r\n\t} else {\r\n\t\tstyleProp = this.getCssTransformProp();\r\n\t}\r\n\r\n\tif (styleProp) control.applyStyle(styleProp, css);\r\n};\r\n\r\n/**\r\n* Returns `true` if the platform supports CSS3 Transforms.\r\n*\r\n* @returns {Boolean} `true` if platform supports CSS `transform` property;\r\n* otherwise, `false`.\r\n* @public\r\n*/\r\ndom.canTransform = function() {\r\n\treturn Boolean(this.getStyleTransformProp());\r\n};\r\n\r\n/**\r\n* Returns `true` if platform supports CSS3 3D Transforms.\r\n*\r\n* Typically used like this:\r\n* ```\r\n* if (dom.canAccelerate()) {\r\n* \tdom.transformValue(this.$.slidingThing, 'translate3d', x + ',' + y + ',' + '0')\r\n* } else {\r\n* \tdom.transformValue(this.$.slidingThing, 'translate', x + ',' + y);\r\n* }\r\n* ```\r\n*\r\n* @returns {Boolean} `true` if platform supports CSS3 3D Transforms;\r\n* otherwise, `false`.\r\n* @public\r\n*/\r\ndom.canAccelerate = function() {\r\n\treturn (this.accelerando !== undefined) ? this.accelerando : document.body && (this.accelerando = this.calcCanAccelerate());\r\n};\r\n\r\n/**\r\n* Applies a series of transforms to the specified {@link module:enyo/Control~Control}, using\r\n* the platform's prefixed `transform` property.\r\n*\r\n* **Note:** Transforms are not commutative, so order is important.\r\n*\r\n* Transform values are updated by successive calls, so\r\n* ```javascript\r\n* dom.transform(control, {translate: '30px, 40px', scale: 2, rotate: '20deg'});\r\n* dom.transform(control, {scale: 3, skewX: '-30deg'});\r\n* ```\r\n*\r\n* is equivalent to:\r\n* ```javascript\r\n* dom.transform(control, {translate: '30px, 40px', scale: 3, rotate: '20deg', skewX: '-30deg'});\r\n* ```\r\n*\r\n* When applying these transforms in a WebKit browser, this is equivalent to:\r\n* ```javascript\r\n* control.applyStyle('-webkit-transform', 'translate(30px, 40px) scale(3) rotate(20deg) skewX(-30deg)');\r\n* ```\r\n*\r\n* And in Firefox, this is equivalent to:\r\n* ```javascript\r\n* control.applyStyle('-moz-transform', 'translate(30px, 40px) scale(3) rotate(20deg) skewX(-30deg)');\r\n* ```\r\n*\r\n* @param {module:enyo/Control~Control} control - The {@link module:enyo/Control~Control} to transform.\r\n* @param {Object} transforms - The set of transforms to apply to `control`.\r\n* @public\r\n*/\r\ndom.transform = function(control, transforms) {\r\n\tvar d = control.domTransforms = control.domTransforms || {};\r\n\tutils.mixin(d, transforms);\r\n\tthis.transformsToDom(control);\r\n};\r\n\r\n/**\r\n* Applies a single transform to the specified {@link module:enyo/Control~Control}.\r\n*\r\n* Example:\r\n* ```\r\n* tap: function(inSender, inEvent) {\r\n* \tvar c = inEvent.originator;\r\n* \tvar r = c.rotation || 0;\r\n* \tr = (r + 45) % 360;\r\n* \tc.rotation = r;\r\n* \tdom.transformValue(c, 'rotate', r);\r\n* }\r\n* ```\r\n*\r\n* This will rotate the tapped control by 45 degrees clockwise.\r\n*\r\n* @param {module:enyo/Control~Control} control - The {@link module:enyo/Control~Control} to transform.\r\n* @param {String} transform - The name of the transform function.\r\n* @param {(String|Number)} value - The value to apply to the transform.\r\n* @public\r\n*/\r\ndom.transformValue = function(control, transform, value) {\r\n\tvar d = control.domTransforms = control.domTransforms || {};\r\n\td[transform] = value;\r\n\tthis.transformsToDom(control);\r\n};\r\n\r\n/**\r\n* Applies a transform that should trigger GPU compositing for the specified\r\n* {@link module:enyo/Control~Control}. By default, the acceleration is only\r\n* applied if the browser supports it. You may also optionally force-set `value`\r\n* directly, to be applied to `translateZ(value)`.\r\n*\r\n* @param {module:enyo/Control~Control} control - The {@link module:enyo/Control~Control} to accelerate.\r\n* @param {(String|Number)} [value] - An optional value to apply to the acceleration transform\r\n*\tproperty.\r\n* @public\r\n*/\r\ndom.accelerate = function(control, value) {\r\n\tvar v = value == 'auto' ? this.canAccelerate() : value;\r\n\tthis.transformValue(control, 'translateZ', v ? 0 : null);\r\n};\r\n\r\n\r\n/**\r\n * The CSS `transition` property name for the current browser/platform, e.g.:\r\n *\r\n * * `-webkit-transition`\r\n * * `-moz-transition`\r\n * * `transition`\r\n *\r\n * @type {String}\r\n * @private\r\n */\r\ndom.transition = (platform.ios || platform.android || platform.chrome || platform.androidChrome || platform.safari)\r\n\t? '-webkit-transition'\r\n\t: (platform.firefox || platform.firefoxOS || platform.androidFirefox)\r\n\t\t? '-moz-transition'\r\n\t\t: 'transition';\r\n","require('enyo');\r\n\r\n/**\r\n* An internally-used module for XHR-related methods and wrappers.\r\n*\r\n* @module enyo/xhr\r\n* @private\r\n*/\r\n\r\nvar\r\n\tutils = require('./utils'),\r\n\tplatform = require('./platform'),\r\n\tpath = require('./pathResolver');\r\n\r\n/**\r\n* Parameters and options for the [enyo/xhr.request()]{@link module:enyo/xhr#request} method.\r\n*\r\n* @typedef {Object} requestOptions\r\n* @property {String} url - The URL to request (required).\r\n* @property {String} method - One of `'GET'`, `'POST'`, `'DELETE'`, `'UPDATE'`, or\r\n* custom methods; defaults to `'GET'`.\r\n* @property {Function} callback - Optional callback method to fire when complete.\r\n* @property {Object} body - Optional serializable body for `POST` requests.\r\n* @property {Object} headers - Optional header overrides; defaults to `null`.\r\n* @property {String} username - Optional username to provide for authentication purposes.\r\n* @property {String} password - Optional password to provide for authentication purposes.\r\n* @property {Object} xhrFields - Optional key/value pairs to apply directly to the request.\r\n* @property {String} mimeType - Optional specification for the `MIME-Type` of the request.\r\n* @property {Boolean} mozSystem - Optional boolean to create cross-domain XHR (Firefox OS only).\r\n* @property {Boolean} mozAnon - Optional boolean to create anonymous XHR that does not send\r\n*\tcookies or authentication headers (Firefox OS only).\r\n* @private\r\n*/\r\n\r\nmodule.exports = {\r\n\t\r\n\t/**\r\n\t* Internally-used method to execute XHR requests.\r\n\t*\r\n\t* Note that we explicitly add a `'cache-control: no-cache'` header for iOS 6 for any\r\n\t* non-`GET` requests to work around a system bug causing non-cachable requests to be\r\n\t* cached. To disable this, use the `header` property to specify an object where\r\n\t* `cache-control` is set to `null`.\r\n\t*\r\n\t* @param {module:enyo/xhr~requestOptions} params - The options and properties for this XHR request.\r\n\t* @returns {XMLHttpRequest} The XHR request object.\r\n\t* @private\r\n\t*/\r\n\trequest: function (params) {\r\n\t\tvar xhr = this.getXMLHttpRequest(params);\r\n\t\tvar url = this.simplifyFileURL(path.rewrite(params.url));\r\n\t\t//\r\n\t\tvar method = params.method || 'GET';\r\n\t\tvar async = !params.sync;\r\n\t\t//\r\n\t\tif (params.username) {\r\n\t\t\txhr.open(method, url, async, params.username, params.password);\r\n\t\t} else {\r\n\t\t\txhr.open(method, url, async);\r\n\t\t}\r\n\t\t//\r\n\t\tutils.mixin(xhr, params.xhrFields);\r\n\t\t// only setup handler when we have a callback\r\n\t\tif (params.callback) {\r\n\t\t\tthis.makeReadyStateHandler(xhr, params.callback);\r\n\t\t}\r\n\t\t//\r\n\t\tparams.headers = params.headers || {};\r\n\t\t// work around iOS 6.0 bug where non-GET requests are cached\r\n\t\t// see http://www.einternals.com/blog/web-development/ios6-0-caching-ajax-post-requests\r\n\t\tif (method !== 'GET' && platform.ios && platform.ios == 6) {\r\n\t\t\tif (params.headers['cache-control'] !== null) {\r\n\t\t\t\tparams.headers['cache-control'] = params.headers['cache-control'] || 'no-cache';\r\n\t\t\t}\r\n\t\t}\r\n\t\t// user-set headers override any platform-default\r\n\t\tif (xhr.setRequestHeader) {\r\n\t\t\tfor (var key in params.headers) {\r\n\t\t\t\tif (params.headers[key]) {\r\n\t\t\t\t\txhr.setRequestHeader(key, params.headers[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//\r\n\t\tif((typeof xhr.overrideMimeType == 'function') && params.mimeType) {\r\n\t\t\txhr.overrideMimeType(params.mimeType);\r\n\t\t}\r\n\t\t//\r\n\t\txhr.send(params.body || null);\r\n\t\tif (!async && params.callback) {\r\n\t\t\txhr.onreadystatechange(xhr);\r\n\t\t}\r\n\t\treturn xhr;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Removes any callbacks that might be set from Enyo code for an existing XHR\r\n\t* and stops the XHR from completing (if possible).\r\n\t*\r\n\t* @param {XMLHttpRequest} The - request to cancel.\r\n\t* @private\r\n\t*/\r\n\tcancel: function (xhr) {\r\n\t\tif (xhr.onload) {\r\n\t\t\txhr.onload = null;\r\n\t\t}\r\n\t\tif (xhr.onreadystatechange) {\r\n\t\t\txhr.onreadystatechange = null;\r\n\t\t}\r\n\t\tif (xhr.abort) {\r\n\t\t\txhr.abort();\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmakeReadyStateHandler: function (inXhr, inCallback) {\r\n\t\tif (global.XDomainRequest && inXhr instanceof global.XDomainRequest) {\r\n\t\t\tinXhr.onload = function() {\r\n\t\t\t\tvar data;\r\n\t\t\t\tif (inXhr.responseType === 'arraybuffer') {\r\n\t\t\t\t\tdata = inXhr.response;\r\n\t\t\t\t} else if (typeof inXhr.responseText === 'string') {\r\n\t\t\t\t\tdata = inXhr.responseText;\r\n\t\t\t\t}\r\n\t\t\t\tinCallback.apply(null, [data, inXhr]);\r\n\t\t\t\tinXhr = null;\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tinXhr.onreadystatechange = function() {\r\n\t\t\t\tif (inXhr && inXhr.readyState == 4) {\r\n\t\t\t\t\tvar data;\r\n\t\t\t\t\tif (inXhr.responseType === 'arraybuffer') {\r\n\t\t\t\t\t\tdata = inXhr.response;\r\n\t\t\t\t\t} else if (typeof inXhr.responseText === 'string') {\r\n\t\t\t\t\t\tdata = inXhr.responseText;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinCallback.apply(null, [data, inXhr]);\r\n\t\t\t\t\tinXhr = null;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinOrigin: function (url) {\r\n\t\tvar a = document.createElement('a'), result = false;\r\n\t\ta.href = url;\r\n\t\t// protocol is ':' for relative URLs\r\n\t\tif (a.protocol === ':' ||\r\n\t\t\t\t(a.protocol === global.location.protocol &&\r\n\t\t\t\t\ta.hostname === global.location.hostname &&\r\n\t\t\t\t\ta.port === (global.location.port ||\r\n\t\t\t\t\t\t(global.location.protocol === 'https:' ? '443' : '80')))) {\r\n\t\t\tresult = true;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsimplifyFileURL: function (url) {\r\n\t\tvar a = document.createElement('a');\r\n\t\ta.href = url;\r\n\t\t// protocol is ':' for relative URLs\r\n\t\tif (a.protocol === 'file:' ||\r\n\t\t\ta.protocol === ':' && global.location.protocol === 'file:') {\r\n\t\t\t// leave off search and hash parts of the URL\r\n\t\t\t// and work around a bug in webOS 3 where the app's host has a domain string\r\n\t\t\t// in it that isn't resolved as a path\r\n\t\t\tvar host = (platform.webos < 4) ? '' : a.host;\r\n\t\t\treturn a.protocol + '//' + host + a.pathname;\r\n\t\t} else if (a.protocol === ':' && global.location.protocol === 'x-wmapp0:') {\r\n\t\t\t// explicitly return absolute URL for Windows Phone 8, as an absolute path is required for local files\r\n\t\t\treturn global.location.protocol + '//' + global.location.pathname.split('/')[0] + '/' + a.host + a.pathname;\r\n\t\t} else {\r\n\t\t\treturn url;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetXMLHttpRequest: function (params) {\r\n\t\ttry {\r\n\t\t\t// only use XDomainRequest when it exists, no extra headers were set, and the\r\n\t\t\t// target URL maps to a domain other than the document origin.\r\n\t\t\tif (platform.ie < 10 && global.XDomainRequest && !params.headers &&\r\n\t\t\t\t!this.inOrigin(params.url) && !/^file:\\/\\//.test(global.location.href)) {\r\n\t\t\t\treturn new global.XDomainRequest();\r\n\t\t\t}\r\n\t\t} catch(e) {}\r\n\t\ttry {\r\n\r\n\t\t\tif (platform.firefoxOS) {\r\n\t\t\t\tvar shouldCreateNonStandardXHR = false; // flag to decide if we're creating the xhr or not\r\n\t\t\t\tvar xhrOptions = {};\r\n\r\n\t\t\t\t// mozSystem allows you to do cross-origin requests on Firefox OS\r\n\t\t\t\t// As seen in:\r\n\t\t\t\t//   https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#Non-standard_properties\r\n\t\t\t\tif (params.mozSystem) {\r\n\t\t\t\t\txhrOptions.mozSystem = true;\r\n\t\t\t\t\tshouldCreateNonStandardXHR = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// mozAnon allows you to send a request without cookies or authentication headers\r\n\t\t\t\t// As seen in:\r\n\t\t\t\t//   https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#Non-standard_properties\r\n\t\t\t\tif (params.mozAnon) {\r\n\t\t\t\t\txhrOptions.mozAnon = true;\r\n\t\t\t\t\tshouldCreateNonStandardXHR = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (shouldCreateNonStandardXHR) {\r\n\t\t\t\t\treturn new XMLHttpRequest(xhrOptions);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn new XMLHttpRequest();\r\n\t\t} catch(e) {}\r\n\t\treturn null;\r\n\t}\r\n};\r\n","/**\r\n* Contains methods useful for animations.\r\n* @module enyo/animation\r\n*/\r\n\r\nrequire('enyo');\r\n\r\nvar\r\n\tplatform = require('./platform'),\r\n\tutils = require('./utils');\r\n\r\nvar ms = Math.round(1000/60),\r\n\tprefix = ['', 'webkit', 'moz', 'ms', 'o'],\r\n\trAF = 'requestAnimationFrame',\r\n\tcRAF = 'cancelRequestAnimationFrame',\r\n\tcAF = 'cancelAnimationFrame',\r\n\ti, pl, p, wcRAF, wrAF, wcAF,\r\n\t_requestFrame, _cancelFrame, cancelFrame;\r\n\r\n/*\r\n* Fallback on setTimeout\r\n*\r\n* @private\r\n*/\r\n_requestFrame = function(callback) {\r\n\treturn global.setTimeout(callback, ms);\r\n};\r\n\r\n/*\r\n* Fallback on clearTimeout\r\n*\r\n* @private\r\n*/\r\n_cancelFrame = function(id) {\r\n\treturn global.clearTimeout(id);\r\n};\r\n\r\nfor (i = 0, pl = prefix.length; (p = prefix[i]) || i < pl; i++) {\r\n\t// if we're on ios 6 just use setTimeout, requestAnimationFrame has some kinks\r\n\tif (platform.ios === 6) {\r\n\t\tbreak;\r\n\t}\r\n\r\n\t// if prefixed, becomes Request and Cancel\r\n\twrAF = p ? (p + utils.cap(rAF)) : rAF;\r\n\twcRAF = p ? (p + utils.cap(cRAF)) : cRAF;\r\n\twcAF = p ? (p + utils.cap(cAF)) : cAF;\r\n\r\n\t// Test for cancelRequestAnimationFrame, because some browsers (Firefix 4-10) have a request without a cancel\r\n\tcancelFrame = global[wcAF] || global[wcRAF];\r\n\tif (cancelFrame) {\r\n\t\t_cancelFrame = cancelFrame;\r\n\t\t_requestFrame = global[wrAF];\r\n\t\tif (p == 'webkit') {\r\n\t\t\t/*\r\n\t\t\t\tNote: In Chrome, the first return value of webkitRequestAnimationFrame is 0.\r\n\t\t\t\tWe make 1 bogus call so the first used return value of webkitRequestAnimationFrame is > 0, as the spec requires.\r\n\t\t\t\tThis makes it so that the requestId is always truthy.\r\n\t\t\t\t(we choose to do this rather than wrapping the native function to avoid the overhead)\r\n\t\t\t*/\r\n\t\t\t_cancelFrame(_requestFrame(utils.nop));\r\n\t\t}\r\n\t\tbreak;\r\n\t}\r\n}\r\n/**\r\n* Requests an animation callback.\r\n*\r\n* On compatible browsers, if `node` is defined, the [callback]{@glossary callback} will\r\n* fire only if `node` is visible.\r\n*\r\n* @param {Function} callback - A [callback]{@glossary callback} to be executed on the\r\n*                            animation frame.\r\n* @param {Node} node - The DOM node to request the animation frame for.\r\n* @returns {Object} A request id to be used with\r\n*                     {@link module:enyo/animation#cancelRequestAnimationFrame}.\r\n* @public\r\n*/\r\nexports.requestAnimationFrame = function(callback, node) {\r\n\treturn _requestFrame(callback, node);\r\n};\r\n/**\r\n* Cancels a requested animation callback with the specified id.\r\n*\r\n* @param {Number} id - The identifier of an animation request we wish to cancel.\r\n* @deprecated since 2.7.0\r\n* @public\r\n*/\r\nexports.cancelRequestAnimationFrame = function(id) {\r\n\treturn _cancelFrame(id);\r\n};\r\n/**\r\n* Cancels a requested animation callback with the specified id.\r\n*\r\n* @param {Number} id - The identifier of an animation request we wish to cancel.\r\n* @public\r\n*/\r\nexports.cancelAnimationFrame = function(id) {\r\n\treturn _cancelFrame(id);\r\n};\r\n\r\n/**\r\n* A set of interpolation functions for animations, similar in function to CSS3\r\n* transitions.\r\n*\r\n* These are intended for use with {@link module:enyo/animation#easedLerp}. Each easing function\r\n* accepts one (1) [Number]{@glossary Number} parameter and returns one (1)\r\n* [Number]{@glossary Number} value.\r\n*\r\n* @public\r\n*/\r\nexports.easing = /** @lends module:enyo/animation~easing.prototype */ {\r\n\t/**\r\n\t* cubicIn\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tcubicIn: function(n) {\r\n\t\treturn Math.pow(n, 3);\r\n\t},\r\n\t/**\r\n\t* cubicOut\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tcubicOut: function(n) {\r\n\t\treturn Math.pow(n - 1, 3) + 1;\r\n\t},\r\n\t/**\r\n\t* expoOut\r\n\t*\r\n\t* @public\r\n\t*/\r\n\texpoOut: function(n) {\r\n\t\treturn (n == 1) ? 1 : (-1 * Math.pow(2, -10 * n) + 1);\r\n\t},\r\n\t/**\r\n\t* quadInOut\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tquadInOut: function(n) {\r\n\t\tn = n * 2;\r\n\t\tif (n < 1) {\r\n\t\t\treturn Math.pow(n, 2) / 2;\r\n\t\t}\r\n\t\treturn -1 * ((--n) * (n - 2) - 1) / 2;\r\n\t},\r\n\t/**\r\n\t* linear\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tlinear: function(n) {\r\n\t\treturn n;\r\n\t}\r\n};\r\n\r\n/**\r\n* Gives an interpolation of an animated transition's distance from 0 to 1.\r\n*\r\n* Given a start time (`t0`) and an animation duration (`duration`), this\r\n* method applies the `easing` function to the percentage of time elapsed\r\n* divided by duration, capped at 100%.\r\n*\r\n* @param {Number} t0 - Start time.\r\n* @param {Number} duration - Duration in milliseconds.\r\n* @param {Function} easing - An easing [function]{@glossary Function} reference from\r\n*\t{@link module:enyo/animation#easing}.\r\n* @param {Boolean} reverse - Whether the animation will run in reverse.\r\n* @returns {Number} The resulting position, capped at a maximum of 100%.\r\n* @public\r\n*/\r\nexports.easedLerp = function(t0, duration, easing, reverse) {\r\n\tvar lerp = (utils.perfNow() - t0) / duration;\r\n\tif (reverse) {\r\n\t\treturn lerp >= 1 ? 0 : (1 - easing(1 - lerp));\r\n\t} else {\r\n\t\treturn lerp >= 1 ? 1 : easing(lerp);\r\n\t}\r\n};\r\n\r\n/**\r\n* Gives an interpolation of an animated transition's distance from\r\n* `startValue` to `valueChange`.\r\n*\r\n* Applies the `easing` function with a wider range of variables to allow for\r\n* more complex animations.\r\n*\r\n* @param {Number} t0 - Start time.\r\n* @param {Number} duration - Duration in milliseconds.\r\n* @param {Function} easing - An easing [function]{@glossary Function} reference from\r\n*\t{@link module:enyo/animation#easing}.\r\n* @param {Boolean} reverse - Whether the animation will run in reverse.\r\n* @param {Number} time\r\n* @param {Number} startValue - Starting value.\r\n* @param {Number} valueChange\r\n* @returns {Number} The resulting position, capped at a maximum of 100%.\r\n* @public\r\n*/\r\nexports.easedComplexLerp = function(t0, duration, easing, reverse, time, startValue, valueChange) {\r\n\tvar lerp = (utils.perfNow() - t0) / duration;\r\n\tif (reverse) {\r\n\t\treturn easing(1 - lerp, time, startValue, valueChange, duration);\r\n\t} else {\r\n\t\treturn easing(lerp, time, startValue, valueChange, duration);\r\n\t}\r\n};\r\n","require('enyo');\r\n\r\nvar\r\n\tlogger = require('./logger'),\r\n\tutils = require('./utils');\r\n\r\nvar defaultCtor = null;\r\n\r\n/**\r\n* Creates a JavaScript {@glossary constructor} function with\r\n* a prototype defined by `props`. **All constructors must have a unique name.**\r\n*\r\n* `kind()` makes it easy to build a constructor-with-prototype (like a\r\n* class) that has advanced features like prototype-chaining\r\n* ({@glossary inheritance}).\r\n*\r\n* A plug-in system is included for extending the abilities of the\r\n* {@glossary kind} generator, and constructors are allowed to\r\n* perform custom operations when subclassed.\r\n*\r\n* If you make changes to `enyo/kind`, be sure to add or update the appropriate\r\n* [unit tests](@link https://github.com/enyojs/enyo/tree/master/tools/test/core/tests).\r\n*\r\n* For more information, see the documentation on\r\n* [Kinds]{@linkplain $dev-guide/key-concepts/kinds.html} in the Enyo Developer Guide.\r\n*\r\n* @module enyo/kind\r\n* @param {Object} props - A [hash]{@glossary Object} of properties used to define and create\r\n*\tthe {@glossary kind}\r\n* @public\r\n*/\r\n/*jshint -W120*/\r\nvar kind = exports = module.exports = function (props) {\r\n/*jshint +W120*/\r\n\t// extract 'name' property\r\n\tvar name = props.name || '';\r\n\tdelete props.name;\r\n\t// extract 'kind' property\r\n\tvar hasKind = ('kind' in props);\r\n\tvar kindName = props.kind;\r\n\tdelete props.kind;\r\n\t// establish base class reference\r\n\tvar base = constructorForKind(kindName);\r\n\tvar isa = base && base.prototype || null;\r\n\t// if we have an explicit kind property with value undefined, we probably\r\n\t// tried to reference a kind that is not yet in scope\r\n\tif (hasKind && kindName === undefined || base === undefined) {\r\n\t\tvar problem = kindName === undefined ? 'undefined kind' : 'unknown kind (' + kindName + ')';\r\n\t\tthrow 'enyo.kind: Attempt to subclass an ' + problem + '. Check dependencies for [' + (name || '<unnamed>') + '].';\r\n\t}\r\n\t// make a boilerplate constructor\r\n\tvar ctor = kind.makeCtor();\r\n\t// semi-reserved word 'constructor' causes problems with Prototype and IE, so we rename it here\r\n\tif (props.hasOwnProperty('constructor')) {\r\n\t\tprops._constructor = props.constructor;\r\n\t\tdelete props.constructor;\r\n\t}\r\n\t// create our prototype\r\n\t//ctor.prototype = isa ? enyo.delegate(isa) : {};\r\n\tutils.setPrototype(ctor, isa ? utils.delegate(isa) : {});\r\n\t// there are special cases where a base class has a property\r\n\t// that may need to be concatenated with a subclasses implementation\r\n\t// as opposed to completely overwriting it...\r\n\tkind.concatHandler(ctor, props);\r\n\r\n\t// put in our props\r\n\tutils.mixin(ctor.prototype, props);\r\n\t// alias class name as 'kind' in the prototype\r\n\t// but we actually only need to set this if a new name was used,\r\n\t// not if it is inheriting from a kind anonymously\r\n\tif (name) {\r\n\t\tctor.prototype.kindName = name;\r\n\t}\r\n\t// this is for anonymous constructors\r\n\telse {\r\n\t\tctor.prototype.kindName = base && base.prototype? base.prototype.kindName: '';\r\n\t}\r\n\t// cache superclass constructor\r\n\tctor.prototype.base = base;\r\n\t// reference our real constructor\r\n\tctor.prototype.ctor = ctor;\r\n\t// support pluggable 'features'\r\n\tutils.forEach(kind.features, function(fn){ fn(ctor, props); });\r\n\t\r\n\tif (name) kindCtors[name] = ctor;\r\n\t\r\n\treturn ctor;\r\n};\r\n\r\nexports.setDefaultCtor = function (ctor) {\r\n\tdefaultCtor = ctor;\r\n};\r\n\r\nvar getDefaultCtor = exports.getDefaultCtor = function () {\r\n\treturn defaultCtor;\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nvar concatenated = exports.concatenated = [];\r\n\r\n/**\r\n* Creates a singleton of a given {@glossary kind} with a given\r\n* definition. **The `name` property will be the instance name of the singleton\r\n* and must be unique.**\r\n*\r\n* ```javascript\r\n* var\r\n* \tkind = require('enyo/kind'),\r\n* \tControl = require('enyo/Control');\r\n*\r\n* module.exports = singleton({\r\n* \tkind: Control,\r\n* \tname: 'app.MySingleton',\r\n* \tpublished: {\r\n* \t\tvalue: 'foo'\r\n* \t},\r\n* \tmakeSomething: function() {\r\n* \t\t//...\r\n* \t}\r\n* });\r\n*\r\n* app.MySingleton.makeSomething();\r\n* app.MySingleton.setValue('bar');\r\n*```\r\n*\r\n* @public\r\n*/\r\nexports.singleton = function (conf) {\r\n\t// extract 'name' property (the name of our singleton)\r\n\tdelete(conf.name);\r\n\t// create an unnamed kind and save its constructor's function\r\n\tvar Kind = kind(conf);\r\n\tvar inst = new Kind();\r\n\treturn inst;\r\n};\r\n\r\n/**\r\n* @name module:enyo/kind.makeCtor\r\n* @method\r\n* @private\r\n*/\r\nkind.makeCtor = function () {\r\n\tvar enyoConstructor = function () {\r\n\t\tif (!(this instanceof enyoConstructor)) {\r\n\t\t\tthrow 'enyo.kind: constructor called directly, not using \"new\"';\r\n\t\t}\r\n\r\n\t\t// two-pass instantiation\r\n\t\tvar result;\r\n\t\tif (this._constructor) {\r\n\t\t\t// pure construction\r\n\t\t\tresult = this._constructor.apply(this, arguments);\r\n\t\t}\r\n\t\t// defer initialization until entire constructor chain has finished\r\n\t\tif (this.constructed) {\r\n\t\t\t// post-constructor initialization\r\n\t\t\tthis.constructed.apply(this, arguments);\r\n\t\t}\r\n\r\n\t\tif (result) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t};\r\n\treturn enyoConstructor;\r\n};\r\n\r\n/**\r\n* Feature hooks for the oop system\r\n*\r\n* @name module:enyo/kind.features\r\n* @private\r\n*/\r\nkind.features = [];\r\n\r\n/**\r\n* Used internally by several mechanisms to allow safe and normalized handling for extending a\r\n* [kind's]{@glossary kind} super-methods. It can take a\r\n* [constructor]{@glossary constructor}, a [prototype]{@glossary Object.prototype}, or an\r\n* instance.\r\n*\r\n* @name module:enyo/kind.extendMethods\r\n* @method\r\n* @private\r\n*/\r\nkind.extendMethods = function (ctor, props, add) {\r\n\tvar proto = ctor.prototype || ctor,\r\n\t\tb = proto.base;\r\n\tif (!proto.inherited && b) {\r\n\t\tproto.inherited = kind.inherited;\r\n\t}\r\n\t// rename constructor to _constructor to work around IE8/Prototype problems\r\n\tif (props.hasOwnProperty('constructor')) {\r\n\t\tprops._constructor = props.constructor;\r\n\t\tdelete props.constructor;\r\n\t}\r\n\t// decorate function properties to support inherited (do this ex post facto so that\r\n\t// ctor.prototype is known, relies on elements in props being copied by reference)\r\n\tfor (var n in props) {\r\n\t\tvar p = props[n];\r\n\t\tif (isInherited(p)) {\r\n\t\t\t// ensure that if there isn't actually a super method to call, it won't\r\n\t\t\t// fail miserably - while this shouldn't happen often, it is a sanity\r\n\t\t\t// check for mixin-extensions for kinds\r\n\t\t\tif (add) {\r\n\t\t\t\tp = proto[n] = p.fn(proto[n] || utils.nop);\r\n\t\t\t} else {\r\n\t\t\t\tp = proto[n] = p.fn(b? (b.prototype[n] || utils.nop): utils.nop);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (utils.isFunction(p)) {\r\n\t\t\tif (add) {\r\n\t\t\t\tproto[n] = p;\r\n\t\t\t\tp.displayName = n + '()';\r\n\t\t\t} else {\r\n\t\t\t\tp._inherited = b? b.prototype[n]: null;\r\n\t\t\t\t// FIXME: we used to need some extra values for inherited, then inherited got cleaner\r\n\t\t\t\t// but in the meantime we used these values to support logging in Object.\r\n\t\t\t\t// For now we support this legacy situation, by suppling logging information here.\r\n\t\t\t\tp.displayName = proto.kindName + '.' + n + '()';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\nkind.features.push(kind.extendMethods);\r\n\r\n/**\r\n* Called by {@link module:enyo/CoreObject~Object} instances attempting to access super-methods\r\n* of a parent class ([kind]{@glossary kind}) by calling\r\n* `this.inherited(arguments)` from within a kind method. This can only be done\r\n* safely when there is known to be a super class with the same method.\r\n*\r\n* @name module:enyo/kind.inherited\r\n* @method\r\n* @private\r\n*/\r\nkind.inherited = function (originals, replacements) {\r\n\t// one-off methods are the fast track\r\n\tvar target = originals.callee;\r\n\tvar fn = target._inherited;\r\n\r\n\t// regardless of how we got here, just ensure we actually\r\n\t// have a function to call or else we throw a console\r\n\t// warning to notify developers they are calling a\r\n\t// super method that doesn't exist\r\n\tif ('function' === typeof fn) {\r\n\t\tvar args = originals;\r\n\t\tif (replacements) {\r\n\t\t\t// combine the two arrays, with the replacements taking the first\r\n\t\t\t// set of arguments, and originals filling up the rest.\r\n\t\t\targs = [];\r\n\t\t\tvar i = 0, l = replacements.length;\r\n\t\t\tfor (; i < l; ++i) {\r\n\t\t\t\targs[i] = replacements[i];\r\n\t\t\t}\r\n\t\t\tl = originals.length;\r\n\t\t\tfor (; i < l; ++i) {\r\n\t\t\t\targs[i] = originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn fn.apply(this, args);\r\n\t} else {\r\n\t\tlogger.warn('enyo.kind.inherited: unable to find requested ' +\r\n\t\t\t'super-method from -> ' + originals.callee.displayName + ' in ' + this.kindName);\r\n\t}\r\n};\r\n\r\n// dcl inspired super-inheritance\r\n\r\nvar Inherited = function (fn) {\r\n\tthis.fn = fn;\r\n};\r\n\r\n/**\r\n* When defining a method that overrides an existing method in a [kind]{@glossary kind}, you\r\n* can wrap the definition in this function and it will decorate it appropriately for inheritance\r\n* to work.\r\n*\r\n* The older `this.inherited(arguments)` method still works, but this version results in much\r\n* faster code and is the only one supported for kind [mixins]{@glossary mixin}.\r\n*\r\n* @param {Function} fn - A [function]{@glossary Function} that takes a single\r\n*   argument (usually named `sup`) and returns a function where\r\n*   `sup.apply(this, arguments)` is used as a mechanism to make the\r\n*   super-call.\r\n* @public\r\n*/\r\nexports.inherit = function (fn) {\r\n\treturn new Inherited(fn);\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nvar isInherited = exports.isInherited = function (fn) {\r\n\treturn fn && (fn instanceof Inherited);\r\n};\r\n\r\n\r\n//\r\n// 'statics' feature\r\n//\r\nkind.features.push(function(ctor, props) {\r\n\t// install common statics\r\n\tif (!ctor.subclass) {\r\n\t\tctor.subclass = kind.statics.subclass;\r\n\t}\r\n\tif (!ctor.extend) {\r\n\t\tctor.extend = kind.statics.extend;\r\n\t}\r\n\tif (!ctor.kind) {\r\n\t\tctor.kind = kind.statics.kind;\r\n\t}\r\n\t// move props statics to constructor\r\n\tif (props.statics) {\r\n\t\tutils.mixin(ctor, props.statics);\r\n\t\tdelete ctor.prototype.statics;\r\n\t}\r\n\t// also support protectedStatics which won't interfere with defer\r\n\tif (props.protectedStatics) {\r\n\t\tutils.mixin(ctor, props.protectedStatics);\r\n\t\tdelete ctor.prototype.protectedStatics;\r\n\t}\r\n\t// allow superclass customization\r\n\tvar base = ctor.prototype.base;\r\n\twhile (base) {\r\n\t\tbase.subclass(ctor, props);\r\n\t\tbase = base.prototype.base;\r\n\t}\r\n});\r\n\r\n/**\r\n* @private\r\n*/\r\nkind.statics = {\r\n\r\n\t/**\r\n\t* A [kind]{@glossary kind} may set its own `subclass()` method as a\r\n\t* static method for its [constructor]{@glossary constructor}. Whenever\r\n\t* it is subclassed, the constructor and properties will be passed through\r\n\t* this method for special handling of important features.\r\n\t*\r\n\t* @name module:enyo/kind.subclass\r\n\t* @method\r\n\t* @param {Function} ctor - The [constructor]{@glossary constructor} of the\r\n\t*\t[kind]{@glossary kind} being subclassed.\r\n\t* @param {Object} props - The properties of the kind being subclassed.\r\n\t* @public\r\n\t*/\r\n\tsubclass: function (ctor, props) {},\r\n\r\n\t/**\r\n\t* Allows for extension of the current [kind]{@glossary kind} without\r\n\t* creating a new kind. This method is available on all\r\n\t* [constructors]{@glossary constructor}, although calling it on a\r\n\t* [deferred]{@glossary deferred} constructor will force it to be\r\n\t* resolved at that time. This method does not re-run the\r\n\t* {@link module:enyo/kind.features} against the constructor or instance.\r\n\t*\r\n\t* @name module:enyo/kind.extend\r\n\t* @method\r\n\t* @param {Object|Object[]} props A [hash]{@glossary Object} or [array]{@glossary Array}\r\n\t*\tof [hashes]{@glossary Object}. Properties will override\r\n\t*\t[prototype]{@glossary Object.prototype} properties. If a\r\n\t*\tmethod that is being added already exists, the new method will\r\n\t*\tsupersede the existing one. The method may call\r\n\t*\t`this.inherited()` or be wrapped with `kind.inherit()` to call\r\n\t*\tthe original method (this chains multiple methods tied to a\r\n\t*\tsingle [kind]{@glossary kind}).\r\n\t* @param {Object} [target] - The instance to be extended. If this is not specified, then the\r\n\t*\t[constructor]{@glossary constructor} of the\r\n\t*\t[object]{@glossary Object} this method is being called on will\r\n\t*\tbe extended.\r\n\t* @returns {Object} The constructor of the class, or specific\r\n\t*\tinstance, that has been extended.\r\n\t* @public\r\n\t*/\r\n\textend: function (props, target) {\r\n\t\tvar ctor = this\r\n\t\t\t, exts = utils.isArray(props)? props: [props]\r\n\t\t\t, proto, fn;\r\n\r\n\t\tfn = function (key, value) {\r\n\t\t\treturn !(typeof value == 'function' || isInherited(value)) && concatenated.indexOf(key) === -1;\r\n\t\t};\r\n\r\n\t\tproto = target || ctor.prototype;\r\n\t\tfor (var i=0, ext; (ext=exts[i]); ++i) {\r\n\t\t\tkind.concatHandler(proto, ext, true);\r\n\t\t\tkind.extendMethods(proto, ext, true);\r\n\t\t\tutils.mixin(proto, ext, {filter: fn});\r\n\t\t}\r\n\r\n\t\treturn target || ctor;\r\n\t},\r\n\r\n\t/**\r\n\t* Creates a new sub-[kind]{@glossary kind} of the current kind.\r\n\t*\r\n\t* @name module:enyo/kind.kind\r\n\t* @method\r\n\t* @param  {Object} props A [hash]{@glossary Object} of properties used to define and create\r\n\t*\tthe [kind]{@glossary kind}\r\n\t* @return {Function} Constructor of the new kind\r\n\t* @public\r\n\t*/\r\n\tkind: function (props) {\r\n\t\tif (props.kind && props.kind !== this) {\r\n\t\t\tlogger.warn('Creating a different kind from a constructor\\'s kind() method is not ' +\r\n\t\t\t\t'supported and will be replaced with the constructor.');\r\n\t\t}\r\n\t\tprops.kind = this;\r\n\t\treturn kind(props);\r\n\t}\r\n};\r\n\r\n/**\r\n* @method\r\n* @private\r\n*/\r\nexports.concatHandler = function (ctor, props, instance) {\r\n\tvar proto = ctor.prototype || ctor\r\n\t\t, base = proto.ctor;\r\n\r\n\twhile (base) {\r\n\t\tif (base.concat) base.concat(ctor, props, instance);\r\n\t\tbase = base.prototype.base;\r\n\t}\r\n};\r\n\r\nvar kindCtors =\r\n/**\r\n* Factory for [kinds]{@glossary kind} identified by [strings]{@glossary String}.\r\n*\r\n* @type Object\r\n* @deprecated Since 2.6.0\r\n* @private\r\n*/\r\n\texports._kindCtors = {};\r\n\r\n/**\r\n* @method\r\n* @private\r\n*/\r\nvar constructorForKind = exports.constructorForKind = function (kind) {\r\n\tif (kind === null) {\r\n\t\treturn kind;\r\n\t} else if (kind === undefined) {\r\n\t\treturn getDefaultCtor();\r\n\t}\r\n\telse if (utils.isFunction(kind)) {\r\n\t\treturn kind;\r\n\t}\r\n\tlogger.warn('Creating instances by name is deprecated. Name used:', kind);\r\n\t// use memoized constructor if available...\r\n\tvar ctor = kindCtors[kind];\r\n\tif (ctor) {\r\n\t\treturn ctor;\r\n\t}\r\n\t// otherwise look it up and memoize what we find\r\n\t//\r\n\t// if kind is an object in enyo, say \"Control\", then ctor = enyo[\"Control\"]\r\n\t// if kind is a path under enyo, say \"Heritage.Button\", then ctor = enyo[\"Heritage.Button\"] || enyo.Heritage.Button\r\n\t// if kind is a fully qualified path, say \"enyo.Heritage.Button\", then ctor = enyo[\"enyo.Heritage.Button\"] || enyo.enyo.Heritage.Button || enyo.Heritage.Button\r\n\t//\r\n\t// Note that kind \"Foo\" will resolve to enyo.Foo before resolving to global \"Foo\".\r\n\t// This is important so \"Image\" will map to built-in Image object, instead of enyo.Image control.\r\n\tctor = Theme[kind] || (global.enyo && global.enyo[kind]) || utils.getPath.call(global, 'enyo.' + kind) || global[kind] || utils.getPath.call(global, kind);\r\n\r\n\t// If what we found at this namespace isn't a function, it's definitely not a kind constructor\r\n\tif (!utils.isFunction(ctor)) {\r\n\t\tthrow '[' + kind + '] is not the name of a valid kind.';\r\n\t}\r\n\tkindCtors[kind] = ctor;\r\n\treturn ctor;\r\n};\r\n\r\n/**\r\n* Namespace for current theme (`enyo.Theme.Button` references the Button specialization for the\r\n* current theme).\r\n*\r\n* @deprecated Since 2.6.0\r\n* @private\r\n*/\r\nvar Theme = exports.Theme = {};\r\n\r\n/**\r\n* @method\r\n* @deprecated Since 2.6.0\r\n* @private\r\n*/\r\nexports.registerTheme = function (ns) {\r\n\tutils.mixin(Theme, ns);\r\n};\r\n\r\n/**\r\n* @method\r\n* @private\r\n*/\r\nexports.createFromKind = function (nom, param) {\r\n\tvar Ctor = nom && constructorForKind(nom);\r\n\tif (Ctor) {\r\n\t\treturn new Ctor(param);\r\n\t}\r\n};\r\n","require('enyo');\r\n\r\nvar\r\n\tDom = require('./dom');\r\n\r\nvar _baseScreenType = 'standard',\r\n\t_riRatio,\r\n\t_screenType,\r\n\t_screenTypes = [ {name: 'standard', pxPerRem: 16, width: global.innerWidth,  height: global.innerHeight, aspectRatioName: 'standard'} ],\t// Assign one sane value in case defineScreenTypes is never run.\r\n\t_screenTypeObject,\r\n\t_oldScreenType;\r\n\r\nvar getScreenTypeObject = function (type) {\r\n\ttype = type || _screenType;\r\n\tif (_screenTypeObject && _screenTypeObject.name == type) {\r\n\t\treturn _screenTypeObject;\r\n\t}\r\n\treturn _screenTypes.filter(function (elem) {\r\n\t\treturn (type == elem.name);\r\n\t})[0];\r\n};\r\n\r\n/**\r\n* Resolution independence methods\r\n* @module enyo/resolution\r\n*/\r\nvar ri = module.exports = {\r\n\t/**\r\n\t* Sets up screen resolution scaling capabilities by defining an array of all the screens\r\n\t* being used. These should be listed in order from smallest to largest, according to\r\n\t* width.\r\n\t*\r\n\t* The `name`, `pxPerRem`, `width`, and `aspectRatioName` properties are required for\r\n\t* each screen type in the array. Setting `base: true` on a screen type marks it as the\r\n\t* default resolution, upon which everything else will be based.\r\n\t*\r\n\t* Executing this method also initializes the rest of the resolution-independence code.\r\n\t*\r\n\t* ```\r\n\t* var resolution = require('enyo/resolution');\r\n\t*\r\n\t* resolution.defineScreenTypes([\r\n\t* \t{name: 'vga',     pxPerRem: 8,  width: 640,  height: 480,  aspectRatioName: 'standard'},\r\n\t* \t{name: 'xga',     pxPerRem: 16, width: 1024, height: 768,  aspectRatioName: 'standard'},\r\n\t* \t{name: 'hd',      pxPerRem: 16, width: 1280, height: 720,  aspectRatioName: 'hdtv'},\r\n\t* \t{name: 'fhd',     pxPerRem: 24, width: 1920, height: 1080, aspectRatioName: 'hdtv', base: true},\r\n\t* \t{name: 'uw-uxga', pxPerRem: 24, width: 2560, height: 1080, aspectRatioName: 'cinema'},\r\n\t* \t{name: 'uhd',     pxPerRem: 48, width: 3840, height: 2160, aspectRatioName: 'hdtv'}\r\n\t* ]);\r\n\t* ```\r\n\t*\r\n\t* @param {Array} types - An array of objects containing screen configuration data, as in the\r\n\t* preceding example.\r\n\t* @public\r\n\t*/\r\n\tdefineScreenTypes: function (types) {\r\n\t\t_screenTypes = types;\r\n\t\tfor (var i = 0; i < _screenTypes.length; i++) {\r\n\t\t\tif (_screenTypes[i]['base']) _baseScreenType = _screenTypes[i].name;\r\n\t\t}\r\n\t\tri.init();\r\n\t},\r\n\r\n\t/**\r\n\t* Fetches the name of the screen type that best matches the current screen size. The best\r\n\t* match is defined as the screen type that is the closest to the screen resolution without\r\n\t* going over. (\"The Price is Right\" style.)\r\n\t*\r\n\t* @param {Object} [rez] - Optional measurement scheme. Must include `height` and `width` properties.\r\n\t* @returns {String} Screen type (e.g., `'fhd'`, `'uhd'`, etc.)\r\n\t* @public\r\n\t*/\r\n\tgetScreenType: function (rez) {\r\n\t\trez = rez || {\r\n\t\t\theight: global.innerHeight,\r\n\t\t\twidth: global.innerWidth\r\n\t\t};\r\n\t\tvar i,\r\n\t\t\ttypes = _screenTypes,\r\n\t\t\tbestMatch = types[types.length - 1].name;\r\n\r\n\t\t// loop thorugh resolutions\r\n\t\tfor (i = types.length - 1; i >= 0; i--) {\r\n\t\t\t// find the one that matches our current size or is smaller. default to the first.\r\n\t\t\tif (rez.width <= types[i].width) {\r\n\t\t\t\tbestMatch = types[i].name;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// return the name of the resolution if we find one.\r\n\t\treturn bestMatch;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateScreenBodyClasses: function (type) {\r\n\t\ttype = type || _screenType;\r\n\t\tif (_oldScreenType) {\r\n\t\t\tDom.removeClass(document.body, 'enyo-res-' + _oldScreenType.toLowerCase());\r\n\t\t\tvar oldScrObj = getScreenTypeObject(_oldScreenType);\r\n\t\t\tif (oldScrObj && oldScrObj.aspectRatioName) {\r\n\t\t\t\tDom.removeClass(document.body, 'enyo-aspect-ratio-' + oldScrObj.aspectRatioName.toLowerCase());\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (type) {\r\n\t\t\tDom.addBodyClass('enyo-res-' + type.toLowerCase());\r\n\t\t\tvar scrObj = getScreenTypeObject(type);\r\n\t\t\tif (scrObj.aspectRatioName) {\r\n\t\t\t\tDom.addBodyClass('enyo-aspect-ratio-' + scrObj.aspectRatioName.toLowerCase());\r\n\t\t\t}\r\n\t\t\treturn type;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetRiRatio: function (type) {\r\n\t\ttype = type || _screenType;\r\n\t\tif (type) {\r\n\t\t\tvar ratio = this.getUnitToPixelFactors(type) / this.getUnitToPixelFactors(_baseScreenType);\r\n\t\t\tif (type == _screenType) {\r\n\t\t\t\t// cache this if it's for our current screen type.\r\n\t\t\t\t_riRatio = ratio;\r\n\t\t\t}\r\n\t\t\treturn ratio;\r\n\t\t}\r\n\t\treturn 1;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetUnitToPixelFactors: function (type) {\r\n\t\ttype = type || _screenType;\r\n\t\tif (type) {\r\n\t\t\treturn getScreenTypeObject(type).pxPerRem;\r\n\t\t}\r\n\t\treturn 1;\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the aspect ratio of the specified screen type. If no screen type is provided,\r\n\t* the current screen type is used.\r\n\t*\r\n\t* @param {String} type - Screen type whose aspect ratio will be calculated. If no screen\r\n\t* type is provided, the current screen type is used.\r\n\t* @returns {Number} The calculated screen ratio (e.g., `1.333`, `1.777`, `2.333`, etc.)\r\n\t* @public\r\n\t*/\r\n\tgetAspectRatio: function (type) {\r\n\t\tvar scrObj = getScreenTypeObject(type);\r\n\t\tif (scrObj.width && scrObj.height) {\r\n\t\t\treturn (scrObj.width / scrObj.height);\r\n\t\t}\r\n\t\treturn 1;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns the name of the aspect ratio for a specified screen type, or for the default\r\n\t* screen type if none is provided.\r\n\t*\r\n\t* @param {String} type - Screen type whose aspect ratio name will be returned. If no\r\n\t* screen type is provided, the current screen type will be used.\r\n\t* @returns {String} The name of the screen type's aspect ratio\r\n\t* @public\r\n\t*/\r\n\tgetAspectRatioName: function (type) {\r\n\t\tvar scrObj = getScreenTypeObject(type);\r\n\t\t return scrObj.aspectRatioName || 'standard';\r\n\t},\r\n\r\n\t/**\r\n\t* Takes a provided pixel value and performs a scaling operation based on the current\r\n\t* screen type.\r\n\t*\r\n\t* @param {Number} px - The quantity of standard-resolution pixels to scale to the\r\n\t* current screen resolution.\r\n\t* @returns {Number} The scaled value based on the current screen scaling factor\r\n\t* @public\r\n\t*/\r\n\tscale: function (px) {\r\n\t\treturn (_riRatio || this.getRiRatio()) * px;\r\n\t},\r\n\r\n\t/**\r\n\t* The default configurable [options]{@link module:enyo/resolution.selectSrc#options}.\r\n\t*\r\n\t* @typedef {Object} module:enyo/resolution.selectSrcSrc\r\n\t* @property {String} hd - HD / 720p Resolution image asset source URI/URL\r\n\t* @property {String} fhd - FHD / 1080p Resolution image asset source URI/URL\r\n\t* @property {String} uhd - UHD / 4K Resolution image asset source URI/URL\r\n\t*/\r\n\r\n\t/**\r\n\t* Selects the ideal image asset from a set of assets, based on various screen\r\n\t* resolutions: HD (720p), FHD (1080p), UHD (4k). When a `src` argument is\r\n\t* provided, `selectSrc()` will choose the best image with respect to the current\r\n\t* screen resolution. `src` may be either the traditional string, which will pass\r\n\t* straight through, or a hash/object of screen types and their asset sources\r\n\t* (keys:screen and values:src). The image sources will be used when the screen\r\n\t* resolution is less than or equal to the provided screen types.\r\n\t*\r\n\t* ```\r\n\t* // Take advantage of the multi-res mode\r\n\t* var\r\n\t* \tkind = require('enyo/kind'),\r\n\t* \tImage = require('enyo/Image');\r\n\t*\r\n\t* {kind: Image, src: {\r\n\t* \t'hd': 'http://lorempixel.com/64/64/city/1/',\r\n\t* \t'fhd': 'http://lorempixel.com/128/128/city/1/',\r\n\t* \t'uhd': 'http://lorempixel.com/256/256/city/1/'\r\n\t* }, alt: 'Multi-res'},\r\n\t*\r\n\t* // Standard string `src`\r\n\t* {kind: Image, src: http://lorempixel.com/128/128/city/1/', alt: 'Large'},\r\n\t* ```\r\n\t*\r\n\t* @param {(String|module:enyo/resolution~selectSrcSrc)} src - A string containing\r\n\t* a single image source or a key/value hash/object containing keys representing screen\r\n\t* types (`'hd'`, `'fhd'`, `'uhd'`, etc.) and values containing the asset source for\r\n\t* that target screen resolution.\r\n\t* @returns {String} The chosen source, given the string or hash provided\r\n\t* @public\r\n\t*/\r\n\tselectSrc: function (src) {\r\n\t\tif (typeof src != 'string' && src) {\r\n\t\t\tvar i, t,\r\n\t\t\t\tnewSrc = src.fhd || src.uhd || src.hd,\r\n\t\t\t\ttypes = _screenTypes;\r\n\r\n\t\t\t// loop through resolutions\r\n\t\t\tfor (i = types.length - 1; i >= 0; i--) {\r\n\t\t\t\tt = types[i].name;\r\n\t\t\t\tif (_screenType == t && src[t]) newSrc = src[t];\r\n\t\t\t}\r\n\r\n\t\t\tsrc = newSrc;\r\n\t\t}\r\n\t\treturn src;\r\n\t},\r\n\r\n\t/**\r\n\t* This will need to be re-run any time the screen size changes, so all the values can be\r\n\t* re-cached.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\t// Later we can wire this up to a screen resize event so it doesn't need to be called manually.\r\n\tinit: function () {\r\n\t\t_oldScreenType = _screenType;\r\n\t\t_screenType = this.getScreenType();\r\n\t\t_screenTypeObject = getScreenTypeObject();\r\n\t\tthis.updateScreenBodyClasses();\r\n\t\tDom.unitToPixelFactors.rem = this.getUnitToPixelFactors();\r\n\t\t_riRatio = this.getRiRatio();\r\n\t}\r\n};\r\n\r\nri.init();\r\n","require('enyo');\r\n\r\nvar\r\n\tDom = require('./dom');\r\n\r\nvar selfClosing = {img: 1, hr: 1, br: 1, area: 1, base: 1, basefont: 1, input: 1, link: 1,\r\n\tmeta: 1, command: 1, embed: 1, keygen: 1, wbr: 1, param: 1, source: 1, track: 1, col: 1};\r\n\r\n/**\r\n* This is the default render delegate used by {@link module:enyo/Control~Control}. It\r\n* generates the HTML [string]{@glossary String} content and correctly inserts\r\n* it into the DOM. A string-concatenation technique is used to perform DOM\r\n* insertion in batches.\r\n*\r\n* @module enyo/HTMLStringDelegate\r\n* @public\r\n*/\r\nmodule.exports = {\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinvalidate: function (control, item) {\r\n\t\tswitch (item) {\r\n\t\tcase 'content':\r\n\t\t\tthis.renderContent(control);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tcontrol.tagsValid = false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trender: function (control) {\r\n\t\tif (control.parent) {\r\n\t\t\tcontrol.parent.beforeChildRender(control);\r\n\t\t\t\r\n\t\t\tif (!control.parent.generated) return;\r\n\t\t\tif (control.tag === null) return control.parent.render();\r\n\t\t}\r\n\t\t\r\n\t\tif (!control.hasNode()) this.renderNode(control);\r\n\t\tif (control.hasNode()) {\r\n\t\t\tthis.renderDom(control);\r\n\t\t\tif (control.generated) control.rendered();\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trenderInto: function (control, parentNode) {\r\n\t\tparentNode.innerHTML = this.generateHtml(control);\r\n\t\t\r\n\t\tif (control.generated) control.rendered();\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trenderNode: function (control) {\r\n\t\tthis.teardownRender(control);\r\n\t\tcontrol.node = document.createElement(control.tag);\r\n\t\tcontrol.addNodeToParent();\r\n\t\tcontrol.set('generated', true);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trenderDom: function (control) {\r\n\t\tthis.renderAttributes(control);\r\n\t\tthis.renderStyles(control);\r\n\t\tthis.renderContent(control);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trenderStyles: function (control) {\r\n\t\tvar style = control.style;\r\n\t\t\r\n\t\t// we can safely do this knowing it will synchronize properly without a double\r\n\t\t// set in the DOM because we're flagging the internal property\r\n\t\tif (control.hasNode()) {\r\n\t\t\tcontrol.node.style.cssText = style;\r\n\t\t\t// retrieve the parsed value for synchronization\r\n\t\t\tcontrol.cssText = style = control.node.style.cssText;\r\n\t\t\t// now we set it knowing they will be synchronized and everybody that is listening\r\n\t\t\t// will also be updated to know about the change\r\n\t\t\tcontrol.set('style', style);\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trenderAttributes: function (control) {\r\n\t\tvar attrs = control.attributes,\r\n\t\t\tnode = control.hasNode(),\r\n\t\t\tkey,\r\n\t\t\tval;\r\n\t\t\r\n\t\tif (node) {\r\n\t\t\tfor (key in attrs) {\r\n\t\t\t\tval = attrs[key];\r\n\t\t\t\tif (val === null || val === false || val === \"\") {\r\n\t\t\t\t\tnode.removeAttribute(key);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.setAttribute(key, val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trenderContent: function (control) {\r\n\t\tif (control.generated) this.teardownChildren(control);\r\n\t\tif (control.hasNode()) control.node.innerHTML = this.generateInnerHtml(control);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgenerateHtml: function (control) {\r\n\t\tvar content,\r\n\t\t\thtml;\r\n\t\t\r\n\t\tif (control.canGenerate === false) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\t// do this first in case content generation affects outer html (styles or attributes)\r\n\t\tcontent = this.generateInnerHtml(control);\r\n\t\t// generate tag, styles, attributes\r\n\t\thtml = this.generateOuterHtml(control, content);\r\n\t\t// NOTE: 'generated' is used to gate access to findNodeById in\r\n\t\t// hasNode, because findNodeById is expensive.\r\n\t\t// NOTE: we typically use 'generated' to mean 'created in DOM'\r\n\t\t// but that has not actually happened at this point.\r\n\t\t// We set 'generated = true' here anyway to avoid having to walk the\r\n\t\t// control tree a second time (to set it later).\r\n\t\t// The contract is that insertion in DOM will happen synchronously\r\n\t\t// to generateHtml() and before anybody should be calling hasNode().\r\n\t\tcontrol.set('generated', true);\r\n\t\treturn html;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgenerateOuterHtml: function (control, content) {\r\n\t\tif (!control.tag) return content;\r\n\t\tif (!control.tagsValid) this.prepareTags(control);\r\n\t\treturn control._openTag + content + control._closeTag;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgenerateInnerHtml: function (control) {\r\n\t\tvar allowHtml = control.allowHtml,\r\n\t\t\tcontent;\r\n\t\t\r\n\t\t// flow can alter the way that html content is rendered inside\r\n\t\t// the container regardless of whether there are children.\r\n\t\tcontrol.flow();\r\n\t\tif (control.children.length) return this.generateChildHtml(control);\r\n\t\telse {\r\n\t\t\tcontent = control.get('content');\r\n\t\t\treturn allowHtml ? content : Dom.escape(content);\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgenerateChildHtml: function (control) {\r\n\t\tvar child,\r\n\t\t\thtml = '',\r\n\t\t\ti = 0,\r\n\t\t\tdelegate;\r\n\t\t\r\n\t\tfor (; (child = control.children[i]); ++i) {\r\n\t\t\tdelegate = child.renderDelegate || this;\r\n\t\t\thtml += delegate.generateHtml(child);\r\n\t\t}\r\n\t\t\r\n\t\treturn html;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprepareTags: function (control) {\r\n\t\tvar html = '';\r\n\t\t\r\n\t\t// open tag\r\n\t\thtml += '<' + control.tag + (control.style ? ' style=\"' + control.style + '\"' : '');\r\n\t\thtml += this.attributesToHtml(control.attributes);\r\n\t\tif (selfClosing[control.tag]) {\r\n\t\t\tcontrol._openTag = html + '/>';\r\n\t\t\tcontrol._closeTag = '';\r\n\t\t} else {\r\n\t\t\tcontrol._openTag = html + '>';\r\n\t\t\tcontrol._closeTag = '</' + control.tag + '>';\r\n\t\t}\r\n\t\t\r\n\t\tcontrol.tagsValid = true;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tattributesToHtml: function(attrs) {\r\n\t\tvar key,\r\n\t\t\tval,\r\n\t\t\thtml = '';\r\n\t\t\t\r\n\t\tfor (key in attrs) {\r\n\t\t\tval = attrs[key];\r\n\t\t\tif (val != null && val !== false && val !== '') {\r\n\t\t\t\thtml += ' ' + key + '=\"' + this.escapeAttribute(val) + '\"';\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn html;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tescapeAttribute: function (text) {\r\n\t\tif (typeof text != 'string') return text;\r\n\t\r\n\t\treturn String(text).replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;');\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tteardownRender: function (control, cache) {\r\n\t\tif (control.generated) {\r\n\t\t\tif (typeof control.beforeTeardown === 'function') {\r\n\t\t\t\tcontrol.beforeTeardown();\r\n\t\t\t}\r\n\t\t\tthis.teardownChildren(control, cache);\r\n\t\t}\r\n\t\t\t\r\n\t\tcontrol.node = null;\r\n\t\tcontrol.set('generated', false);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tteardownChildren: function (control, cache) {\r\n\t\tvar child,\r\n\t\t\ti = 0;\r\n\r\n\t\tfor (; (child = control.children[i]); ++i) {\r\n\t\t\tchild.teardownRender(cache);\r\n\t\t}\r\n\t}\r\n};\r\n","var\r\n\tdom = require('../dom'),\r\n\tplatform = require('../platform'),\r\n\tutils = require('../utils');\r\n\r\n/**\r\n* Used internally by {@link module:enyo/gesture}\r\n*\r\n* @module enyo/gesture/util\r\n* @private\r\n*/\r\nmodule.exports = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teventProps: ['target', 'relatedTarget', 'clientX', 'clientY', 'pageX', 'pageY',\r\n\t\t'screenX', 'screenY', 'altKey', 'ctrlKey', 'metaKey', 'shiftKey',\r\n\t\t'detail', 'identifier', 'dispatchTarget', 'which', 'srcEvent'],\r\n\r\n\t/**\r\n\t* Creates an {@glossary event} of type `type` and returns it.\r\n\t* `evt` should be an event [object]{@glossary Object}.\r\n\t*\r\n\t* @param {String} type - The type of {@glossary event} to make.\r\n\t* @param {(Event|Object)} evt - The event you'd like to clone or an object that looks like it.\r\n\t* @returns {Object} The new event [object]{@glossary Object}.\r\n\t* @public\r\n\t*/\r\n\tmakeEvent: function(type, evt) {\r\n\t\tvar e = {};\r\n\t\te.type = type;\r\n\t\tfor (var i=0, p; (p=this.eventProps[i]); i++) {\r\n\t\t\te[p] = evt[p];\r\n\t\t}\r\n\t\te.srcEvent = e.srcEvent || evt;\r\n\t\te.preventDefault = this.preventDefault;\r\n\t\te.disablePrevention = this.disablePrevention;\r\n\r\n\t\tif (dom._bodyScaleFactorX !== 1 || dom._bodyScaleFactorY !== 1) {\r\n\t\t\t// Intercept only these events, not all events, like: hold, release, tap, etc,\r\n\t\t\t// to avoid doing the operation again.\r\n\t\t\tif (e.type == 'move' || e.type == 'up' || e.type == 'down' || e.type == 'enter' || e.type == 'leave') {\r\n\t\t\t\te.clientX *= dom._bodyScaleFactorX;\r\n\t\t\t\te.clientY *= dom._bodyScaleFactorY;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//\r\n\t\t// normalize event.which and event.pageX/event.pageY\r\n\t\t// Note that while 'which' works in IE9, it is broken for mousemove. Therefore,\r\n\t\t// in IE, use global.event.button\r\n\t\tif (platform.ie < 10) {\r\n\t\t\tvar b = global.event && global.event.button;\r\n\t\t\tif (b) {\r\n\t\t\t\t// multi-button not supported, priority: left, right, middle\r\n\t\t\t\t// (note: IE bitmask is 1=left, 2=right, 4=center);\r\n\t\t\t\te.which = b & 1 ? 1 : (b & 2 ? 2 : (b & 4 ? 3 : 0));\r\n\t\t\t}\r\n\t\t} else if (platform.webos || global.PalmSystem) {\r\n\t\t\t// Temporary fix for owos: it does not currently supply 'which' on move events\r\n\t\t\t// and the user agent string doesn't identify itself so we test for PalmSystem\r\n\t\t\tif (e.which === 0) {\r\n\t\t\t\te.which = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn e;\r\n\t},\r\n\r\n\t/**\r\n\t* Installed on [events]{@glossary event} and called in event context.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tpreventDefault: function() {\r\n\t\tif (this.srcEvent) {\r\n\t\t\tthis.srcEvent.preventDefault();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisablePrevention: function() {\r\n\t\tthis.preventDefault = utils.nop;\r\n\t\tif (this.srcEvent) {\r\n\t\t\tthis.srcEvent.preventDefault = utils.nop;\r\n\t\t}\r\n\t}\r\n};\r\n","/**\r\n* Exports the {@link module:enyo/Control/floatingLayer~FloatingLayer} singleton instance.\r\n* @module enyo/Control/floatingLayer\r\n*/\r\n\r\nvar\r\n\tkind = require('../kind'),\r\n\tplatform = require('../platform');\r\n\r\nmodule.exports = function (Control) {\r\n\t/**\r\n\t* {@link module:enyo/Control/floatingLayer~FloatingLayer} is a\r\n\t* [control]{@link module:enyo/Control~Control} that provides a layer for controls that should be\r\n\t* displayed above an [application]{@link module:enyo/Application~Application}. The `floatingLayer`\r\n\t* singleton can be set as a control's parent to have the control float above the application, e.g.:\r\n\t*\r\n\t* ```\r\n\t* var floatingLayer = require('enyo/floatingLayer');\r\n\t* ...\r\n\t* create: kind.inherit(function (sup) {\r\n\t*\treturn function() {\r\n\t*\t\tsup.apply(this, arguments);\r\n\t*\t\tthis.setParent(floatingLayer);\r\n\t*\t}\r\n\t* });\r\n\t* ```\r\n\t*\r\n\t* Note: `FloatingLayer` is not meant to be instantiated by users.\r\n\t*\r\n\t* @class FloatingLayer\r\n\t* @extends module:enyo/Control~Control\r\n\t* @ui\r\n\t* @protected\r\n\t*/\r\n\tvar FloatingLayer = kind(\r\n\t\t/** @lends module:enyo/Control/floatingLayer~FloatingLayer.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tkind: Control,\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tclasses: 'enyo-fit enyo-clip enyo-untouchable',\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\taccessibilityPreventScroll: true,\r\n\r\n\t\t/**\r\n\t\t* @method\r\n\t\t* @private\r\n\t\t*/\r\n\t\tcreate: kind.inherit(function (sup) {\r\n\t\t\treturn function() {\r\n\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t\tthis.setParent(null);\r\n\r\n\t\t\t\tif (platform.ie < 11) {\r\n\t\t\t\t\tthis.removeClass('enyo-fit');\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}),\r\n\r\n\t\t/**\r\n\t\t* Detects when [node]{@glossary Node} is detatched due to `document.body` being stomped.\r\n\t\t*\r\n\t\t* @method\r\n\t\t* @private\r\n\t\t*/\r\n\t\thasNode: kind.inherit(function (sup) {\r\n\t\t\treturn function() {\r\n\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t\tif (this.node && !this.node.parentNode) {\r\n\t\t\t\t\tthis.teardownRender();\r\n\t\t\t\t}\r\n\t\t\t\treturn this.node;\r\n\t\t\t};\r\n\t\t}),\r\n\r\n\t\t/**\r\n\t\t* @method\r\n\t\t* @private\r\n\t\t*/\r\n\t\trender: kind.inherit(function (sup) {\r\n\t\t\treturn function() {\r\n\t\t\t\tthis.parentNode = document.body;\r\n\t\t\t\treturn sup.apply(this, arguments);\r\n\t\t\t};\r\n\t\t}),\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tgenerateInnerHtml: function () {\r\n\t\t\treturn '';\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tbeforeChildRender: function () {\r\n\t\t\tif (!this.hasNode()) {\r\n\t\t\t\tthis.render();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tteardownChildren: function () {\r\n\t\t}\r\n\t});\r\n\r\n\treturn FloatingLayer;\r\n};","/**\r\n* Exports the {@link module:enyo/ApplicationSupport~ApplicationSupport} mixin.\r\n* @module enyo/ApplicationSupport\r\n*/\r\n\r\nrequire('enyo');\r\n\r\nvar kind = require('./kind');\r\n\r\n/**\r\n* An internally-used support {@glossary mixin} that is applied to all\r\n* [components]{@link module:enyo/Component~Component} of an {@link module:enyo/Application~Application} instance\r\n* (and to their components, recursively). This mixin adds an `app` property to\r\n* each component -- a local reference to the `Application` instance that\r\n* the component belongs to.\r\n* \r\n* @mixin\r\n* @protected\r\n*/\r\nvar ApplicationSupport = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'ApplicationSupport',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tadjustComponentProps: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\tprops.app = props.app || this.app;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\t// release the reference to the application\r\n\t\t\tthis.app = null;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n\r\n};\r\n\r\nmodule.exports = ApplicationSupport;\r\n","/**\r\n* Exports the {@link module:enyo/ComponentBindingSupport~ComponentBindingSupport} mixin.\r\n* @module enyo/ComponentBindingSupport\r\n*/\r\n\r\nrequire('enyo');\r\n\r\nvar\r\n\tkind = require('./kind');\r\n\r\n/**\r\n* An internally-used {@glossary mixin} applied to {@link module:enyo/Component~Component}\r\n* instances to better support [bindings]{@link module:enyo/Binding~Binding}.\r\n*\r\n* @mixin\r\n* @protected\r\n*/\r\nvar ComponentBindingSupport = {\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'ComponentBindingSupport',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tadjustComponentProps: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tprops.bindingTransformOwner || (props.bindingTransformOwner = this.getInstanceOwner());\r\n\t\t};\r\n\t})\r\n};\r\n\r\nmodule.exports = ComponentBindingSupport;\r\n","/**\r\n* Exports the {@link module:enyo/MultipleDispatchSupport~MultipleDispatchSupport} mixin.\r\n* @module enyo/MultipleDispatchSupport\r\n*/\r\n\r\nrequire('enyo');\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\n/**\r\n* A collection of methods to allow a single {@link module:enyo/Component~Component} to\r\n* [dispatch]{@link module:enyo/Component~Component#dispatchEvent} a single {@glossary event} to\r\n* multiple targets. The events are synchronously propagated in the order in\r\n* which the targets are encountered. Note that this {@glossary mixin} is\r\n* already applied to a base [kind]{@glossary kind},\r\n* {@link module:enyo/MultipleDispatchComponent~MultipleDispatchComponent}.\r\n*\r\n* @mixin\r\n* @public\r\n*/\r\nvar MultipleDispatchSupport = {\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'MultipleDispatchSupport',\r\n\t\r\n\t/**\r\n\t* Adds a target for dispatching.\r\n\t*\r\n\t* @param {module:enyo/Component~Component} component - The {@link module:enyo/Component~Component} to add as a dispatch target.\r\n\t* @public\r\n\t*/\r\n\taddDispatchTarget: function (component) {\r\n\t\tvar dt = this._dispatchTargets;\r\n\t\tif (component && !~utils.indexOf(component, dt)) {\r\n\t\t\tdt.push(component);\r\n\t\t}\r\n\t},\r\n\t/**\r\n\t* Removes a target from dispatching.\r\n\t*\r\n\t* @param {module:enyo/Component~Component} component - The {@link module:enyo/Component~Component} to remove as a dispatch\r\n\t*\ttarget.\r\n\t* @public\r\n\t*/\r\n\tremoveDispatchTarget: function (component) {\r\n\t\tvar dt = this._dispatchTargets, i;\r\n\t\ti = utils.indexOf(component, dt);\r\n\t\tif (i > -1) {\r\n\t\t\tdt.splice(i, 1);\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbubbleUp: kind.inherit(function (sup) {\r\n\t\treturn function (name, event, sender) {\r\n\t\t\tif (this._dispatchDefaultPath) {\r\n\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t\tvar dt = this._dispatchTargets;\r\n\t\t\tfor (var i=0, t; (t=dt[i]); ++i) {\r\n\t\t\t\tif (t && !t.destroyed) {\r\n\t\t\t\t\tt.dispatchBubble(name, event, sender);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\townerChanged: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tvar o = this.owner;\r\n\t\t\tthis._dispatchDefaultPath = !! o;\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis._dispatchTargets = [];\r\n\t\t\treturn sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis._dispatchTargets = null;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_dispatchDefaultPath: false\r\n};\r\n\r\nmodule.exports = MultipleDispatchSupport;\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Layout~Layout} kind.\r\n* @module enyo/Layout\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind');\r\n\r\n/**\r\n* {@link module:enyo/Layout~Layout} is the base [kind]{@glossary kind} for layout\r\n* kinds. Layout kinds are used by {@link module:enyo/UiComponent~UiComponent}-based\r\n* [controls]{@link module:enyo/Control~Control} to allow for arranging of child controls by\r\n* setting the [layoutKind]{@link module:enyo/UiComponent~UiComponent#layoutKind} property.\r\n* \r\n* Derived kinds will usually provide their own\r\n* [layoutClass]{@link module:enyo/Layout~Layout#layoutClass} property to affect the CSS\r\n* rules used, and may also implement the [flow()]{@link module:enyo/Layout~Layout#flow}\r\n* and [reflow()]{@link module:enyo/Layout~Layout#reflow} methods. `flow()` is called\r\n* during control rendering, while `reflow()` is called when the associated\r\n* control is resized.\r\n*\r\n* @class Layout\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/Layout~Layout.prototype */ {\r\n\r\n\tname: 'enyo.Layout',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: null,\r\n\r\n\t/** \r\n\t* CSS class that's added to the [control]{@link module:enyo/Control~Control} using this \r\n\t* [layout]{@link module:enyo/Layout~Layout} [kind]{@glossary kind}.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\tlayoutClass: '',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: function (container) {\r\n\t\tthis.container = container;\r\n\t\tif (container) {\r\n\t\t\tcontainer.addClass(this.layoutClass);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tif (this.container) {\r\n\t\t\tthis.container.removeClass(this.layoutClass);\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* Called during static property layout (i.e., during rendering).\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tflow: function () {\r\n\t},\r\n\r\n\t/** \r\n\t* Called during dynamic measuring layout (i.e., during a resize).\r\n\t*\r\n\t* May short-circuit and return `true` if the layout needs to be\r\n\t* redone when the associated Control is next shown. This is useful\r\n\t* for cases where the Control itself has `showing` set to `true`\r\n\t* but an ancestor is hidden, and the layout is therefore unable to\r\n\t* get accurate measurements of the Control or its children.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\treflow: function () {\r\n\t}\r\n});\r\n","/**\r\n* Exports the {@link module:enyo/MixinSupport~MixinSupport} mixin.\r\n* @module enyo/MixinSupport\r\n*/\r\n\r\nrequire('enyo');\r\n\r\n\r\nvar\r\n\tutils = require('./utils'),\r\n\tkind = require('./kind'),\r\n\tlogger = require('./logger');\r\n\r\nkind.concatenated.push('mixins');\r\n\r\nvar sup = kind.statics.extend;\r\n\r\nvar extend = kind.statics.extend = function extend (args, target) {\r\n\tif (utils.isArray(args)) return utils.forEach(args, function (ln) { extend.call(this, ln, target); }, this);\r\n\tif (typeof args == 'string') apply(target || this.prototype, args);\r\n\telse {\r\n\t\tif (args.mixins) feature(target || this, args);\r\n\t\r\n\t\t// this allows for mixins to apply mixins which...is less than ideal but possible\r\n\t\tif (args.name) apply(target || this.prototype, args);\r\n\t\telse sup.apply(this, arguments);\r\n\t}\r\n};\r\n\r\n/*\r\n* Applies, with safeguards, a given mixin to an object.\r\n*/\r\nfunction apply (proto, props) {\r\n\tvar applied = proto._mixins? (proto._mixins = proto._mixins.slice()): (proto._mixins = [])\r\n\t\t, name = utils.isString(props)? props: props.name\r\n\t\t, idx = utils.indexOf(name, applied);\r\n\tif (idx < 0) {\r\n\t\tname == props && (props = utils.getPath(name));\r\n\t\t// if we could not resolve the requested mixin (should never happen)\r\n\t\t// we throw a simple little error\r\n\t\t// @TODO: Normalize error format\r\n\t\t!props && logger.error('Could not find the mixin ' + name);\r\n\t\t\r\n\t\t// it should be noted that this ensures it won't recursively re-add the same mixin but\r\n\t\t// since it is possible for mixins to apply mixins the names will be out of order\r\n\t\t// this name is pushed on but the nested mixins are applied before this one\r\n\t\tname && applied.push(name);\r\n\t\t\r\n\t\tprops = utils.clone(props);\r\n\t\t\r\n\t\t// we need to temporarily move the constructor if it has one so it\r\n\t\t// will override the correct method - this is a one-time permanent\r\n\t\t// runtime operation so subsequent additions of the mixin don't require\r\n\t\t// it again\r\n\t\tif (props.hasOwnProperty('constructor')) {\r\n\t\t\tprops._constructor = props.constructor;\r\n\t\t\tdelete props.constructor;\r\n\t\t}\r\n\t\t\r\n\t\tdelete props.name;\r\n\t\textend(props, proto);\r\n\t\t\r\n\t\t// now put it all back the way it was\r\n\t\tprops.name = name;\r\n\t}\r\n}\r\n\r\nfunction feature (ctor, props) {\r\n\tif (props.mixins) {\r\n\t\tvar proto = ctor.prototype || ctor\r\n\t\t\t, mixins = props.mixins;\r\n\t\t\r\n\t\t// delete props.mixins;\r\n\t\t// delete proto.mixins;\r\n\t\t\r\n\t\tproto._mixins && (proto._mixins = proto._mixins.slice());\r\n\t\tutils.forEach(mixins, function (ln) { apply(proto, ln); });\r\n\t}\r\n}\r\n\r\nkind.features.push(feature);\r\n\r\n/**\r\n* An internally-used support {@glossary mixin} that adds API methods to aid in\r\n* using and applying mixins to [kinds]{@glossary kind}.\r\n*\r\n* @mixin\r\n* @protected\r\n*/\r\nvar MixinSupport = {\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'MixinSupport',\r\n\t\r\n\t/**\r\n\t* Extends the instance with the given properties.\r\n\t*\r\n\t* @param {Object} props - The property [hash]{@glossary Object} from which to extend\r\n\t*\tthe callee.\r\n\t*/\r\n\textend: function (props) {\r\n\t\tprops && apply(this, props);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\timportProps: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\tprops && props.mixins && feature(this, props);\r\n\t\t\t\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n};\r\n\r\nmodule.exports = MixinSupport;\r\n","/**\r\n* Exports the {@link module:enyo/ComputedSupport~ComputedSupport} mixin.\r\n* @module enyo/ComputedSupport\r\n*/\r\n\r\nrequire('enyo');\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\nvar extend = kind.statics.extend;\r\n\t\r\nkind.concatenated.push('computed');\r\n\r\nfunction getComputedValue (obj, path) {\r\n\tvar cache = obj._getComputedCache(path)\r\n\t\t, isCached = obj._isComputedCached(path);\r\n\t\r\n\t// in the end, for efficiency and completeness in other situations\r\n\t// it is better to know the returned value of all computed properties\r\n\t// but in cases where they are set as cached we will sometimes use\r\n\t// that value\r\n\tif (cache.dirty || cache.dirty === undefined) {\r\n\t\tisCached && (cache.dirty = false);\r\n\t\tcache.previous = cache.value;\r\n\t\tcache.value = obj[path]();\r\n\t}\r\n\t\r\n\treturn cache.value;\r\n}\r\n\r\nfunction queueComputed (obj, path) {\r\n\tvar queue = obj._computedQueue || (obj._computedQueue = [])\r\n\t\t, deps = obj._computedDependencies[path];\r\n\t\t\r\n\tif (deps) {\r\n\t\tfor (var i=0, dep; (dep=deps[i]); ++i) {\r\n\t\t\tif (!queue.length || -1 == queue.indexOf(dep)) queue.push(dep);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction flushComputed (obj) {\r\n\tvar queue = obj._computedQueue;\r\n\tobj._computedQueue = null;\r\n\tif (queue && obj.isObserving()) {\r\n\t\tfor (var i=0, ln; (ln=queue[i]); ++i) {\r\n\t\t\tobj.notify(ln, obj._getComputedCache(ln).value, getComputedValue(obj, ln));\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n* A {@glossary mixin} that adds API methods to support\r\n* [computed properties]{@glossary computed_property}. Unlike other support mixins,\r\n* this mixin does not need to be explicitly included by a [kind]{@glossary kind}. If the\r\n* `computed` [array]{@glossary Array} is found in a kind definition, this mixin will\r\n* automatically be included.\r\n*\r\n* @mixin\r\n* @public\r\n*/\r\nvar ComputedSupport = {\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'ComputedSuport',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_computedRecursion: 0,\r\n\t\r\n\t/**\r\n\t* Primarily intended for internal use, this method determines whether the\r\n\t* given path is a known [computed property]{@glossary computed_property}.\r\n\t*\r\n\t* @param {String} path - The property or path to test.\r\n\t* @returns {Boolean} Whether or not the `path` is a\r\n\t*\t[computed property]{@glossary computed_property}.\r\n\t* @public\r\n\t*/\r\n\tisComputed: function (path) {\r\n\t\t// if it exists it will be explicitly one of these cases and it is cheaper than hasOwnProperty\r\n\t\treturn this._computed && (this._computed[path] === true || this._computed[path] === false);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Primarily intended for internal use, this method determines whether the\r\n\t* given path is a known dependency of a\r\n\t* [computed property]{@glossary computed_property}.\r\n\t*\r\n\t* @param {String} path - The property or path to test.\r\n\t* @returns {Boolean} Whether or not the `path` is a dependency of a\r\n\t*\t[computed property]{@glossary computed_property}.\r\n\t* @public\r\n\t*/\r\n\tisComputedDependency: function (path) {\r\n\t\treturn !! (this._computedDependencies? this._computedDependencies[path]: false);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tget: kind.inherit(function (sup) {\r\n\t\treturn function (path) {\r\n\t\t\treturn this.isComputed(path)? getComputedValue(this, path): sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tset: kind.inherit(function (sup) {\r\n\t\treturn function (path) {\r\n\t\t\t// we do not accept parameters for computed properties\r\n\t\t\treturn this.isComputed(path)? this: sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnotifyObservers: function () {\r\n\t\treturn this.notify.apply(this, arguments);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnotify: kind.inherit(function (sup) {\r\n\t\treturn function (path, was, is) {\r\n\t\t\tthis.isComputedDependency(path) && queueComputed(this, path);\r\n\t\t\tthis._computedRecursion++;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis._computedRecursion--;\r\n\t\t\tthis._computedQueue && this._computedRecursion === 0 && flushComputed(this);\r\n\t\t\treturn this;\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_isComputedCached: function (path) {\r\n\t\treturn this._computed[path];\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_getComputedCache: function (path) {\r\n\t\tvar cache = this._computedCache || (this._computedCache = {});\r\n\t\treturn cache[path] || (cache[path] = {});\r\n\t}\r\n};\r\n\r\nmodule.exports = ComputedSupport;\r\n\r\n/*\r\n* Hijack the original so we can add additional default behavior.\r\n*/\r\nvar sup = kind.concatHandler;\r\n\r\n// @NOTE: It seems like a lot of work but it really won't happen that much and the more\r\n// we push to kind-time the better for initialization time\r\n\r\n/**\r\n* @private\r\n*/\r\nkind.concatHandler = function (ctor, props, instance) {\r\n\r\n\tsup.call(this, ctor, props, instance);\r\n\r\n\t// only matters if there are computed properties to manage\r\n\tif (props.computed) {\r\n\t\t\r\n\t\tvar proto = ctor.prototype || ctor\r\n\t\t\t, computed = proto._computed? Object.create(proto._computed): {}\r\n\t\t\t, dependencies = proto._computedDependencies? Object.create(proto._computedDependencies): {};\r\n\t\t\r\n\t\t// if it hasn't already been applied we need to ensure that the prototype will\r\n\t\t// actually have the computed support mixin present, it will not apply it more\r\n\t\t// than once to the prototype\r\n\t\textend(ComputedSupport, proto);\r\n\t\r\n\t\t// @NOTE: This is the handling of the original syntax provided for computed properties in 2.3.ish...\r\n\t\t// All we do here is convert it to a structure that can be used for the other scenario and preferred\r\n\t\t// computed declarations format\r\n\t\tif (!props.computed || !(props.computed instanceof Array)) {\r\n\t\t\t(function () {\r\n\t\t\t\tvar tmp = [], deps, name, conf;\r\n\t\t\t\t// here is the slow iteration over the properties...\r\n\t\t\t\tfor (name in props.computed) {\r\n\t\t\t\t\t// points to the dependencies of the computed method\r\n\t\t\t\t\tdeps = props.computed[name];\r\n\t\t\t\t\t/*jshint -W083 */\r\n\t\t\t\t\tconf = deps && deps.find(function (ln) {\r\n\t\t\t\t\t\t// we deliberately remove the entry here and forcibly return true to break\r\n\t\t\t\t\t\treturn typeof ln == 'object'? (utils.remove(deps, ln) || true): false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t/*jshint +W083 */\r\n\t\t\t\t\t// create a single entry now for the method/computed with all dependencies\r\n\t\t\t\t\ttmp.push({method: name, path: deps, cached: conf? conf.cached: null});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// note that we only do this one so even for a mixin that is evaluated several\r\n\t\t\t\t// times this would only happen once\r\n\t\t\t\tprops.computed = tmp;\r\n\t\t\t}());\r\n\t\t}\r\n\t\t\r\n\t\tvar addDependency = function (path, dep) {\r\n\t\t\t// its really an inverse look at the original\r\n\t\t\tvar deps;\r\n\t\t\t\r\n\t\t\tif (dependencies[path] && !dependencies.hasOwnProperty(path)) dependencies[path] = dependencies[path].slice();\r\n\t\t\tdeps = dependencies[path] || (dependencies[path] = []);\r\n\t\t\tdeps.push(dep);\r\n\t\t};\r\n\t\t\r\n\t\t// now we handle the new computed properties the way we intended to\r\n\t\tfor (var i=0, ln; (ln=props.computed[i]); ++i) {\r\n\t\t\t// if the entry already exists we are merely updating whether or not it is\r\n\t\t\t// now cached\r\n\t\t\tcomputed[ln.method] = !! ln.cached;\r\n\t\t\t// we must now look to add an entry for any given dependencies and map them\r\n\t\t\t// back to the computed property they will trigger\r\n\t\t\t/*jshint -W083 */\r\n\t\t\tif (ln.path && ln.path instanceof Array) ln.path.forEach(function (dep) { addDependency(dep, ln.method); });\r\n\t\t\t/*jshint +W083 */\r\n\t\t\telse if (ln.path) addDependency(ln.path, ln.method);\r\n\t\t}\r\n\t\t\r\n\t\t// arg, free the key from the properties so it won't be applied later...\r\n\t\t// delete props.computed;\r\n\t\t// make sure to reassign the correct items to the prototype\r\n\t\tproto._computed = computed;\r\n\t\tproto._computedDependencies = dependencies;\r\n\t}\r\n};\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Binding~Binding} kind.\r\n* @module enyo/Binding\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\nvar bindings = [];\r\n\r\nvar DIRTY_FROM = 0x01\r\n\t, DIRTY_TO = 0x02;\r\n\r\n/**\r\n* Used to determine if an {@link module:enyo/Binding~Binding} is actually ready.\r\n*\r\n* @private\r\n*/\r\nfunction ready (binding) {\r\n\tvar rdy = binding.ready;\r\n\t\r\n\tif (!rdy) {\r\n\t\t\r\n\t\tvar from = binding.from || '',\r\n\t\t\tto = binding.to || '',\r\n\t\t\tsource = binding.source,\r\n\t\t\ttarget = binding.target,\r\n\t\t\towner = binding.owner,\r\n\t\t\ttwoWay = !binding.oneWay,\r\n\t\t\ttoTarget;\r\n\t\t\r\n\t\tif (typeof from != 'string') from = '';\r\n\t\tif (typeof to != 'string') to = '';\r\n\t\t\r\n\t\tif (!source) {\r\n\t\t\t\r\n\t\t\t// the worst case scenario here is for backward compatibility purposes\r\n\t\t\t// we have to at least be able to derive the source via the from string\r\n\t\t\tif (from[0] == '^') {\r\n\t\t\t\t\r\n\t\t\t\t// this means we're reaching for a global\r\n\t\t\t\tvar fromParts = from.split('.');\r\n\t\t\t\tfrom = fromParts.pop();\r\n\t\t\t\tsource = utils.getPath.call(global, fromParts.join('.').slice(1));\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tsource = owner;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tif (!target) {\r\n\t\t\t\r\n\t\t\t// same worst case as above, for backwards compatibility purposes\r\n\t\t\t// we have to at least be able to derive the target via the to string\r\n\t\t\tif (to[0] == '^') {\r\n\t\t\t\t\r\n\t\t\t\t// this means we're reaching for a global\r\n\t\t\t\tvar toParts = to.split('.');\r\n\t\t\t\tto = toParts.pop();\r\n\t\t\t\ttarget = utils.getPath.call(global, toParts.join('.').slice(1));\r\n\t\t\t} else {\r\n\t\t\t\ttarget = owner;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// we do this so we don't overwrite the originals in case we need to reset later\r\n\t\tbinding._target = target;\r\n\t\tbinding._source = source;\r\n\t\tbinding._from = from[0] == '.'? from.slice(1): from;\r\n\t\tbinding._to = to[0] == '.'? to.slice(1): to;\r\n\t\t\r\n\t\tif (!twoWay) {\r\n\t\t\ttoTarget = binding._to.split('.');\r\n\t\t\tif (toTarget.length > 2) {\r\n\t\t\t\ttoTarget.pop();\r\n\t\t\t\tbinding._toTarget = toTarget.join('.');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// now our sanitization\r\n\t\trdy = !! (\r\n\t\t\t(source && (typeof source == 'object')) &&\r\n\t\t\t(target && (typeof target == 'object')) &&\r\n\t\t\t(from) &&\r\n\t\t\t(to)\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*jshint -W093 */\r\n\treturn (binding.ready = rdy);\r\n\t/*jshint +W093 */\r\n}\r\n\r\n\r\n/**\r\n* @class PassiveBinding\r\n* @public\r\n*/\r\nvar PassiveBinding = kind(\r\n\t/** @lends module:enyo/Binding~PassiveBinding.prototype */ {\r\n\t\r\n\tname: 'enyo.PassiveBinding',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: null,\r\n\t\r\n\t/**\r\n\t* This property is used extensively for various purposes within a\r\n\t* [binding]{@link module:enyo/Binding~Binding}. One primary purpose is to serve as a root\r\n\t* [object]{@glossary Object} from which to\tsearch for the binding's ends (the\r\n\t* [source]{@link module:enyo/Binding~Binding#source} and/or [target]{@link module:enyo/Binding~Binding#target}).\r\n\t* If the owner created the binding, it will also be responsible for destroying \r\n\t* it (automatically).\r\n\t*\r\n\t* @type {module:enyo/CoreObject~Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\towner: null,\r\n\t\r\n\t/**\r\n\t* Set this only to a reference for an [object]{@glossary Object} to use\r\n\t* as the source for the [binding]{@link module:enyo/Binding~Binding}. If this is not a\r\n\t* [bindable]{@link module:enyo/BindingSupport~BindingSupport} object, the source will be derived\r\n\t* from the [from]{@link module:enyo/Binding~Binding#from} property during initialization.\r\n\t* \r\n\t* @type {Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tsource: null,\r\n\t\r\n\t/**\r\n\t* Set this only to a reference for an [object]{@glossary Object} to use\r\n\t* as the target for the [binding]{@link module:enyo/Binding~Binding}. If this is not a\r\n\t* [bindable]{@link module:enyo/BindingSupport~BindingSupport} object, the target will will be\r\n\t* derived from the [to]{@link module:enyo/Binding~Binding#to} property during initialization.\r\n\t* \r\n\t* @type {Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\ttarget: null,\r\n\t\r\n\t/**\r\n\t* A path in which the property of the [source]{@link module:enyo/Binding~Binding#source} to\r\n\t* bind from may be found. If the source is explicitly provided and the path\r\n\t* is relative (i.e., it begins with a `\".\"`), it is relative to the source;\r\n\t* otherwise, it is relative to the [owner]{@link module:enyo/Binding~Binding#owner} of the\r\n\t* [binding]{@link module:enyo/Binding~Binding}. To have a binding be evaluated from the\r\n\t* global scope, prefix the path with a `\"^\"`. If the source and the `\"^\"`\r\n\t* are used in tandem, the `\"^\"` will be ignored and the path will be assumed\r\n\t* to be relative to the provided source.\r\n\t* \r\n\t* @type {String}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tfrom: null,\r\n\t\r\n\t/**\r\n\t* A path in which the property of the [target]{@link module:enyo/Binding~Binding#target} to\r\n\t* bind from may be found. If the target is explicitly provided and the path\r\n\t* is relative (i.e., it begins with a `\".\"`), it is relative to the target;\r\n\t* otherwise, it is relative to the owner of the [binding]{@link module:enyo/Binding~Binding}.\r\n\t* To have a binding be evaluated from the global scope, prefix the path with\r\n\t* a `\"^\"`. If the target and the `\"^\"` are used in tandem, the `\"^\"` will be\r\n\t* ignored and the path will be assumed to be relative to the provided target.\r\n\t* \r\n\t* @type {String}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tto: null,\r\n\r\n\t/**\r\n\t* Set this to a [function]{@glossary Function} or the name of a method on\r\n\t* the [owner]{@link module:enyo/Binding~Binding#owner} of this [binding]{@link module:enyo/Binding~Binding}.\r\n\t* The transform is used to programmatically modify the value being synchronized.\r\n\t* See {@link module:enyo/Binding~Binding~Transform} for detailed information on the parameters\r\n\t* that are available to `transform`.\r\n\t* \r\n\t* @type {module:enyo/Binding~Binding~Transform}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\ttransform: null,\r\n\t\r\n\t/**\r\n\t* Indicates whether the [binding]{@link module:enyo/Binding~Binding} is actually ready.\r\n\t* \r\n\t* @returns {Boolean} `true` if ready; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\tisReady: function () {\r\n\t\treturn this.ready || ready(this);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Causes a single propagation attempt to fail. Typically not called outside\r\n\t* the scope of a [transform]{@link module:enyo/Binding~Binding#transform}.\r\n\t* \r\n\t* @public\r\n\t*/\r\n\tstop: function () {\r\n\t\tthis._stop = true;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Resets all properties to their original state.\r\n\t* \r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\treset: function () {\r\n\t\tthis.ready = null;\r\n\t\tthis._source = this._target = this._to = this._from = this._toTarget = null;\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Rebuilds the entire [binding]{@link module:enyo/Binding~Binding} and synchronizes\r\n\t* the value from the [source]{@link module:enyo/Binding~Binding#source} to the\r\n\t* [target]{@link module:enyo/Binding~Binding#target}.\r\n\t* \r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\trebuild: function () {\r\n\t\treturn this.reset().sync();\r\n\t},\r\n\t\r\n\t/**\r\n\t* Synchronizes values from the [source]{@link module:enyo/Binding~Binding#source} to the\r\n\t* [target]{@link module:enyo/Binding~Binding#target}. This usually will not need to be called manually.\r\n\t* [Two-way bindings]{@link module:enyo/Binding~Binding#oneWay} will automatically synchronize from the\r\n\t* target end once they are connected.\r\n\t* \r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tsync: function () {\r\n\t\tvar source, target, from, to, xform, val;\r\n\r\n\t\tif (this.isReady()) {\r\n\t\t\tsource = this._source;\r\n\t\t\ttarget = this._target;\r\n\t\t\tfrom = this._from;\r\n\t\t\tto = this._to;\r\n\t\t\txform = this.getTransform();\r\n\t\t\tval = utils.getPath.apply(source, [from]);\r\n\r\n\t\t\tif (xform) val = xform.call(this.owner || this, val, DIRTY_FROM, this);\r\n\t\t\tif (!this._stop) utils.setPath.apply(target, [to, val, {create: false}]);\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Releases all of the [binding's]{@link module:enyo/Binding~Binding} parts. Typically, this method will\r\n\t* not need to be called directly unless the binding was created without an\r\n\t* [owner]{@link module:enyo/Binding~Binding#owner}.\r\n\t* \r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tvar owner = this.owner,\r\n\t\t\tidx;\r\n\t\t\r\n\t\tthis.owner = null;\r\n\t\tthis.source = this._source = null;\r\n\t\tthis.target = this._target = null;\r\n\t\tthis.ready = null;\r\n\t\tthis.destroyed = true;\r\n\t\t\r\n\t\t// @todo: remove me or postpone operation?\r\n\t\tidx = bindings.indexOf(this);\r\n\t\tif (idx > -1) bindings.splice(idx, 1);\r\n\t\t\r\n\t\tif (owner && !owner.destroyed) owner.removeBinding(this);\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetTransform: function () {\r\n\t\treturn this._didInitTransform ? this.transform : (function (bnd) {\r\n\t\t\tbnd._didInitTransform = true;\r\n\t\t\t\r\n\t\t\tvar xform = bnd.transform,\r\n\t\t\t\towner = bnd.owner,\r\n\t\t\t\txformOwner = owner && owner.bindingTransformOwner;\r\n\t\t\t\r\n\t\t\tif (xform) {\r\n\t\t\t\tif (typeof xform == 'string') {\r\n\t\t\t\t\tif (xformOwner && xformOwner[xform]) {\r\n\t\t\t\t\t\txform = xformOwner[xform];\r\n\t\t\t\t\t} else if (owner && owner[xform]) {\r\n\t\t\t\t\t\txform = owner[xform];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\txform = utils.getPath.call(global, xform);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t/*jshint -W093 */\r\n\t\t\t\treturn (bnd.transform = (typeof xform == 'function' ? xform : null));\r\n\t\t\t\t/*jshint +W093 */\r\n\t\t\t}\r\n\t\t})(this);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: function (props) {\r\n\t\tbindings.push(this);\r\n\t\t\r\n\t\tif (props) utils.mixin(this, props);\r\n\t\t\r\n\t\tif (!this.euid) this.euid = utils.uid('b');\r\n\r\n\t\tthis.sync();\r\n\t}\r\n});\r\n\r\n/**\r\n* The details for an {@link module:enyo/Binding~Binding#transform} [function]{@glossary Function},\r\n* including the available parameters and how they can be used.\r\n* \r\n* @callback module:enyo/Binding~Binding~Transform\r\n* @param {*} value - The value being synchronized.\r\n* @param {Number} direction - The direction of synchronization; will be either\r\n* \t1 (source value has changed and will be written to target) or 2 (target\r\n* \tvalue has changed and will be written to source).\r\n* @param {Object} binding - A reference to the associated [binding]{@link module:enyo/Binding~Binding}. In cases \r\n* \twhere the binding should be interrupted and not propagate the synchronization at all, call\r\n* \tthe [stop()]{@link module:enyo/Binding~Binding#stop} method on the passed-in binding reference.\r\n*/\r\n\r\n/**\r\n* {@link module:enyo/Binding~Binding} is a mechanism used to keep properties synchronized. A \r\n* binding may be used to link two properties on different\r\n* [objects]{@glossary Object}, or even two properties on the same object.\r\n* Once a binding has been established, it will wait for change notifications;\r\n* when a notification arrives, the binding will synchronize the value between\r\n* the two ends. Note that bindings may be either\r\n* [one-way]{@link module:enyo/Binding~Binding#oneWay} (the default) or\r\n* [two-way]{@link module:enyo/Binding~Binding#oneWay}.\r\n* \r\n* Usually, you will not need to create Binding objects arbitrarily, but will\r\n* instead rely on the public [BindingSupport API]{@link module:enyo/BindingSupport~BindingSupport},\r\n* which is applied to [Object]{@link module:enyo/CoreObject~Object} and so is available on\r\n* all of its [subkinds]{@glossary subkind}.\r\n* \r\n* @class Binding\r\n* @public\r\n*/\r\nexports = module.exports = kind(\r\n\t/** @lends module:enyo/Binding~Binding.prototype */ {\r\n\t\r\n\tname: 'enyo.Binding',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: PassiveBinding,\r\n\t\r\n\t/**\r\n\t* If a [binding]{@link module:enyo/Binding~Binding} is one-way, this flag should be `true` (the default). \r\n\t* If this flag is set to `false`, the binding will be two-way.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\toneWay: true,\r\n\t\r\n\t/**\r\n\t* If the [binding]{@link module:enyo/Binding~Binding} was able to resolve both ends (i.e., its \r\n\t* [source]{@link module:enyo/Binding~Binding#source} and [target]{@link module:enyo/Binding~Binding#target} \r\n\t* [objects]{@glossary Object}), this value will be `true`. Setting this manually will\r\n\t* have undesirable effects.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tconnected: false,\r\n\t\r\n\t/**\r\n\t* By default, a [binding]{@link module:enyo/Binding~Binding} will attempt to connect to both ends \r\n\t* ([source]{@link module:enyo/Binding~Binding#source} and [target]{@link module:enyo/Binding~Binding#target}). If this \r\n\t* process should be deferred, set this flag to `false`.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tautoConnect: true,\r\n\t\r\n\t/**\r\n\t* By default, a [binding]{@link module:enyo/Binding~Binding} will attempt to synchronize its values from \r\n\t* its [source]{@link module:enyo/Binding~Binding#source} to its [target]{@link module:enyo/Binding~Binding#target}. If \r\n\t* this process should be deferred, set this flag to `false`.\r\n\t* \r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tautoSync: true,\r\n\t\r\n\t/**\r\n\t* The `dirty` property represents the changed value state of both the property designated by\r\n\t* the [from]{@link module:enyo/Binding~Binding#from} path and the property designated by the \r\n\t* [to]{@link module:enyo/Binding~Binding#to} path.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default module:enyo/Binding#DIRTY_FROM\r\n\t* @public\r\n\t*/\r\n\tdirty: DIRTY_FROM,\r\n\t\r\n\t/**\r\n\t* Indicates whether the [binding]{@link module:enyo/Binding~Binding} is currently connected.\r\n\t*\r\n\t* @returns {Boolean} `true` if connected; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\tisConnected: function () {\r\n\t\tvar from = this._from,\r\n\t\t\tto = this.oneWay ? (this._toTarget || this._to) : this._to,\r\n\t\t\tsource = this._source,\r\n\t\t\ttarget = this._target,\r\n\t\t\ttoChain,\r\n\t\t\tfromChain;\r\n\t\t\t\r\n\t\tif (from && to && source && target) {\r\n\t\t\tif (!this.oneWay || this._toTarget) toChain = target.getChains()[to];\r\n\t\t\tfromChain = source.getChains()[from];\r\n\t\t\t\r\n\t\t\treturn this.connected\r\n\t\t\t\t&& (fromChain ? fromChain.isConnected() : true)\r\n\t\t\t\t&& (toChain ? toChain.isConnected() : true);\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Resets all properties to their original state.\r\n\t* \r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\treset: function () {\r\n\t\tthis.disconnect();\r\n\t\treturn PassiveBinding.prototype.reset.apply(this, arguments);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Rebuilds the entire [binding]{@link module:enyo/Binding~Binding}. Will synchronize if it is able to \r\n\t* connect and the [autoSync]{@link module:enyo/Binding~Binding#autoSync} flag is `true`.\r\n\t* \r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\trebuild: function () {\r\n\t\treturn this.reset().connect();\r\n\t},\r\n\t\r\n\t/**\r\n\t* Connects the ends (i.e., the [source]{@link module:enyo/Binding~Binding#source} and\r\n\t* [target]{@link module:enyo/Binding~Binding#target}) of the [binding]{@link module:enyo/Binding~Binding}. While you\r\n\t* typically won't need to call this method, it is safe to call even when the ends are\r\n\t* already established. Note that if one or both of the ends does become connected and the\r\n\t* [autoSync]{@link module:enyo/Binding~Binding#autoSync} flag is `true`, the ends will automatically be\r\n\t* synchronized.\r\n\t* \r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tconnect: function () {\r\n\t\tif (!this.isConnected()) {\r\n\t\t\tif (this.isReady()) {\r\n\t\t\t\tthis._source.observe(this._from, this._sourceChanged, this, {priority: true});\r\n\t\t\t\t\r\n\t\t\t\t// for two-way bindings we register to observe changes\r\n\t\t\t\t// from the target\r\n\t\t\t\tif (!this.oneWay) this._target.observe(this._to, this._targetChanged, this);\r\n\t\t\t\telse if (this._toTarget) {\r\n\t\t\t\t\tthis._target.observe(this._toTarget, this._toTargetChanged, this, {priority: true});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// we flag it as having been connected\r\n\t\t\t\tthis.connected = true;\r\n\t\t\t\tif (this.isConnected() && this.autoSync) this.sync(true);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Disconnects from the ends (i.e., the [source]{@link module:enyo/Binding~Binding#source} and \r\n\t* [target]{@link module:enyo/Binding~Binding#target}) if a connection exists at either end. This method \r\n\t* will most likely not need to be called directly.\r\n\t* \r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tdisconnect: function () {\r\n\t\tif (this.isConnected()) {\r\n\t\t\tthis._source.unobserve(this._from, this._sourceChanged, this);\r\n\t\t\t\r\n\t\t\t// for two-way bindings we unregister the observer from\r\n\t\t\t// the target as well\r\n\t\t\tif (!this.oneWay) this._target.unobserve(this._to, this._targetChanged, this);\r\n\t\t\telse if (this._toTarget) {\r\n\t\t\t\tthis._target.unobserve(this._toTarget, this._toTargetChanged, this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.connected = false;\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Synchronizes values from the [source]{@link module:enyo/Binding~Binding#source} to the\r\n\t* [target]{@link module:enyo/Binding~Binding#target}. This usually will not need to be called manually.\r\n\t* [Two-way bindings]{@link module:enyo/Binding~Binding#oneWay} will automatically synchronize from the\r\n\t* target end once they are connected.\r\n\t* \r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tsync: function (force) {\r\n\t\tvar source = this._source,\r\n\t\t\ttarget = this._target,\r\n\t\t\tfrom = this._from,\r\n\t\t\tto = this._to,\r\n\t\t\txform = this.getTransform(),\r\n\t\t\tval;\r\n\t\t\r\n\t\tif (this.isReady() && this.isConnected()) {\r\n\t\t\t\t\r\n\t\t\tswitch (this.dirty || (force && DIRTY_FROM)) {\r\n\t\t\tcase DIRTY_TO:\r\n\t\t\t\tval = target.get(to);\r\n\t\t\t\tif (xform) val = xform.call(this.owner || this, val, DIRTY_TO, this);\r\n\t\t\t\tif (!this._stop) source.set(from, val, {create: false});\r\n\t\t\t\tbreak;\r\n\t\t\tcase DIRTY_FROM:\r\n\t\t\t\t\r\n\t\t\t// @TODO: This should never need to happen but is here just in case\r\n\t\t\t// it is ever arbitrarily called not having been dirty?\r\n\t\t\t// default:\r\n\t\t\t\tval = source.get(from);\r\n\t\t\t\tif (xform) val = xform.call(this.owner || this, val, DIRTY_FROM, this);\r\n\t\t\t\tif (!this._stop) target.set(to, val, {create: false});\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis.dirty = null;\r\n\t\t\tthis._stop = null;\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Releases all of the [binding's]{@link module:enyo/Binding~Binding} parts and unregisters its \r\n\t* [observers]{@link module:enyo/ObserverSupport~ObserverSupport}. Typically, this method will not need to be called \r\n\t* directly unless the binding was created without an [owner]{@link module:enyo/Binding~Binding#owner}.\r\n\t* \r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tthis.disconnect();\r\n\r\n\t\treturn PassiveBinding.prototype.destroy.apply(this, arguments);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: function (props) {\r\n\t\tbindings.push(this);\r\n\t\t\r\n\t\tif (props) utils.mixin(this, props);\r\n\t\t\r\n\t\tif (!this.euid) this.euid = utils.uid('b');\r\n\t\tif (this.autoConnect) this.connect();\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_sourceChanged: function (was, is, path) {\r\n\t\t// @TODO: Should it...would it benefit from using these passed in values?\r\n\t\tthis.dirty = this.dirty == DIRTY_TO ? null : DIRTY_FROM;\r\n\t\treturn this.dirty == DIRTY_FROM && this.sync();\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_targetChanged: function (was, is, path) {\r\n\t\t// @TODO: Same question as above, it seems useful but would it affect computed\r\n\t\t// properties or stale values?\r\n\t\tthis.dirty = this.dirty == DIRTY_FROM ? null : DIRTY_TO;\r\n\t\treturn this.dirty == DIRTY_TO && this.sync();\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_toTargetChanged: function (was, is, path) {\r\n\t\tthis.dirty = DIRTY_FROM;\r\n\t\tthis.reset().connect();\r\n\t}\r\n});\r\n\r\n/**\r\n* Retrieves a [binding]{@link module:enyo/Binding~Binding} by its global id.\r\n*\r\n* @param {String} euid - The [Enyo global id]{@glossary EUID} by which to retrieve a \r\n*\t[binding]{@link module:enyo/Binding~Binding}.\r\n* @returns {module:enyo/Binding~Binding|undefined} A reference to the binding if the id\r\n*\tis found; otherwise, it will return [undefined]{@glossary undefined}.\r\n* \r\n* @static\r\n* @public\r\n*/\r\nexports.find = function (euid) {\r\n\treturn bindings.find(function (ln) {\r\n\t\treturn ln.euid == euid;\r\n\t});\r\n};\r\n\r\n/**\r\n* All {@link module:enyo/Binding~Binding} instances are stored in this list and may be retrieved via the\r\n* {@link module:enyo/Binding.find} method using an {@link module:enyo/Binding~Binding#id} identifier.\r\n*\r\n* @type {module:enyo/Binding~Binding[]}\r\n* @default []\r\n* @public\r\n*/\r\nexports.bindings = bindings;\r\n\r\n/**\r\n* Possible value of the [dirty]{@link module:enyo/Binding~Binding#dirty} property, indicating that the value \r\n* of the [binding source]{@link module:enyo/Binding~Binding#source} has changed.\r\n* \r\n* @static\r\n* @public\r\n*/\r\nexports.DIRTY_FROM = DIRTY_FROM;\r\n\r\n/**\r\n* Possible value of the [dirty]{@link module:enyo/Binding~Binding#dirty} property, indicating that the value\r\n* of the [binding target]{@link module:enyo/Binding~Binding#target} has changed.\r\n* \r\n* @static\r\n* @public\r\n*/\r\nexports.DIRTY_TO = DIRTY_TO;\r\n\r\n/**\r\n* The default [kind]{@glossary kind} that provides [binding]{@link module:enyo/Binding~Binding} \r\n* functionality.\r\n* \r\n* @static\r\n* @public\r\n*/\r\nexports.defaultBindingKind = exports;\r\n\r\n/**\r\n* The kind declaration for the [PassiveBinding]{@link module:enyo/Binding~PassiveBinding} kind\r\n* @public\r\n*/\r\nexports.PassiveBinding = PassiveBinding;\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/LinkedListNode~LinkedListNode} kind.\r\n* @module enyo/LinkedListNode\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\n/**\r\n* An abstract linked-list node.\r\n*\r\n* @class LinkedListNode\r\n* @private\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/LinkedListNode~LinkedListNode.prototype */ {\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: null,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprev: null,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnext: null,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcopy: function () {\r\n\t\tvar cpy = new this.ctor();\r\n\t\tcpy.prev = this.prev;\r\n\t\tcpy.next = this.next;\r\n\t\treturn cpy;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: function (props) {\r\n\t\tprops && utils.mixin(this, props);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: function () {\r\n\t\t// clear reference to previous node\r\n\t\tthis.prev = null;\r\n\t\t\r\n\t\t// if we have a reference to our next node\r\n\t\t// we continue down the chain\r\n\t\tthis.next && this.next.destroy();\r\n\t\t\r\n\t\t// clear our reference to the next node\r\n\t\tthis.next = null;\r\n\t}\r\n});\r\n","/**\r\n* Exports the {@link module:enyo/BindingSupport~BindingSupport} mixin\r\n* @module enyo/BindingSupport\r\n*/\r\n\r\nrequire('enyo');\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\nvar\r\n\tBinding = require('./Binding');\r\n\r\nkind.concatenated.push('bindings');\r\n\r\n/**\r\n* An internally-used {@glossary mixin} that is added to {@link module:enyo/CoreObject~Object}\r\n* and its [subkinds]{@glossary subkind}. It includes public and protected API\r\n* methods for working with [bindings]{@link module:enyo/Binding~Binding}.\r\n*\r\n* @mixin\r\n* @protected\r\n*/\r\nvar BindingSupport = {\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'BindingSupport',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_bindingSupportInitialized: false,\r\n\t\r\n\t/**\r\n\t* Imperatively creates a [binding]{@link module:enyo/Binding~Binding}. Merges a variable\r\n\t* number of [hashes]{@glossary Object} and instantiates a binding that\r\n\t* will have its [owner]{@link module:enyo/Binding~Binding#owner} property set to the callee\r\n\t* (the current {@link module:enyo/CoreObject~Object}). Bindings created in this way will be\r\n\t* [destroyed]{@link module:enyo/Binding~Binding#destroy} when their `owner` is\r\n\t* [destroyed]{@link module:enyo/CoreObject~Object#destroy}.\r\n\t*\r\n\t* @param {...Object} props A variable number of [hashes]{@glossary Object} that will\r\n\t*\tbe merged into the properties applied to the {@link module:enyo/Binding~Binding} instance.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tbinding: function () {\r\n\t\tvar args = utils.toArray(arguments)\r\n\t\t\t, props = utils.mixin(args)\r\n\t\t\t, bindings = this.bindings || (this.bindings = [])\r\n\t\t\t, passiveBindings = this.passiveBindings || (this.passiveBindings = [])\r\n\t\t\t, PBCtor = Binding.PassiveBinding\r\n\t\t\t, Ctor, bnd;\r\n\t\t\t\r\n\t\tprops.owner = props.owner || this;\r\n\t\tCtor = props.kind = props.kind || this.defaultBindingKind || Binding.defaultBindingKind;\r\n\t\t\r\n\t\tif (this._bindingSupportInitialized) {\r\n\t\t\tutils.isString(Ctor) && (Ctor = props.kind = kind.constructorForKind(Ctor));\r\n\t\t\tbnd = new Ctor(props);\r\n\t\t\tbindings.push(bnd);\r\n\t\t\tif (Ctor === PBCtor) {\r\n\t\t\t\tpassiveBindings.push(bnd);\r\n\t\t\t}\r\n\t\t\treturn bnd;\r\n\t\t} else bindings.push(props);\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Removes and [destroys]{@link module:enyo/Binding~Binding#destroy} all of, or a subset of,\r\n\t* the [bindings]{@link module:enyo/Binding~Binding} belonging to the callee.\r\n\t*\r\n\t* @param {module:enyo/Binding~Binding[]} [subset] - The optional [array]{@glossary Array} of\r\n\t*\t[bindings]{@link module:enyo/Binding~Binding} to remove.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tclearBindings: function (subset) {\r\n\t\tvar bindings = subset || (this.bindings && this.bindings.slice());\r\n\t\tbindings.forEach(function (bnd) {\r\n\t\t\tbnd.destroy();\r\n\t\t});\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsyncBindings: function (opts) {\r\n\t\tvar all = opts && opts.all,\r\n\t\t\tforce = opts && opts.force,\r\n\t\t\tbindings = all ? this.bindings : this.passiveBindings;\r\n\r\n\t\tbindings.forEach(function (b) {\r\n\t\t\tb.sync(force);\r\n\t\t});\r\n\t},\r\n\t\r\n\t/**\r\n\t* Removes a single {@link module:enyo/Binding~Binding} from the callee. (This does not\r\n\t* [destroy]{@link module:enyo/Binding~Binding#destroy} the binding.) Also removes the\r\n\t* [owner]{@link module:enyo/Binding~Binding#owner} reference if it is the callee.\r\n\t*\r\n\t* It should be noted that when a binding is destroyed, it is automatically\r\n\t* removed from its owner.\r\n\t*\r\n\t* @param {module:enyo/Binding~Binding} binding - The {@link module:enyo/Binding~Binding} instance to remove.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tremoveBinding: function (binding) {\r\n\t\tutils.remove(binding, this.bindings);\r\n\t\tif (binding.ctor === Binding.PassiveBinding) {\r\n\t\t\tutils.remove(binding, this.passiveBindings);\r\n\t\t}\r\n\t\t\r\n\t\tif (binding.owner === this) binding.owner = null;\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructed: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar bindings = this.bindings;\r\n\t\t\tthis._bindingSupportInitialized = true;\r\n\t\t\tif (bindings) {\r\n\t\t\t\tthis.bindings = [];\r\n\t\t\t\tthis.passiveBindings = [];\r\n\t\t\t\tbindings.forEach(function (def) {\r\n\t\t\t\t\tthis.binding(def);\r\n\t\t\t\t}, this);\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.bindings && this.bindings.length && this.clearBindings();\r\n\t\t\tthis.bindings = null;\r\n\t\t\tthis.passiveBindings = null;\r\n\t\t};\r\n\t})\r\n};\r\n\r\nmodule.exports = BindingSupport;\r\n\r\n/**\r\n\tHijack the original so we can add additional default behavior.\r\n*/\r\nvar sup = kind.concatHandler\r\n\t, flags = {ignore: true};\r\n\r\n/**\r\n* @private\r\n*/\r\nkind.concatHandler = function (ctor, props, instance) {\r\n\tvar proto = ctor.prototype || ctor\r\n\t\t, kind = props && (props.defaultBindingKind || Binding.defaultBindingKind)\r\n\t\t, defaults = props && props.bindingDefaults;\r\n\t\r\n\tsup.call(this, ctor, props, instance);\r\n\tif (props.bindings) {\r\n\t\tprops.bindings.forEach(function (bnd) {\r\n\t\t\tdefaults && utils.mixin(bnd, defaults, flags);\r\n\t\t\tbnd.kind || (bnd.kind = kind); \r\n\t\t});\r\n\t\t\r\n\t\tproto.bindings = proto.bindings? proto.bindings.concat(props.bindings): props.bindings;\r\n\t\tdelete props.bindings;\r\n\t}\r\n};\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/LinkedList~LinkedList} kind.\r\n* @module enyo/LinkedList\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind');\r\n\r\nvar\r\n\tLinkedListNode = require('./LinkedListNode');\r\n\r\n/**\r\n* An abstract linked-list.\r\n*\r\n* @class LinkedList\r\n* @private\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/LinkedList~LinkedList.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnodeKind: LinkedListNode,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thead: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttail: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlength: 0,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclear: function () {\r\n\t\tif (this.head) {\r\n\t\t\t// this will trigger a chain event down the list\r\n\t\t\tthis.head.destroy();\r\n\t\t}\r\n\t\tthis.head = null;\r\n\t\tthis.tail = null;\r\n\t\tthis.length = 0;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tslice: function (fromNode, toNode) {\r\n\t\tvar node = fromNode || this.head\r\n\t\t\t, list = new this.ctor()\r\n\t\t\t, cpy;\r\n\r\n\t\t// ensure we have a final node or our tail\r\n\t\ttoNode = toNode || this.tail;\r\n\r\n\t\tif (node && node !== toNode) {\r\n\t\t\tdo {\r\n\t\t\t\tcpy = node.copy();\r\n\t\t\t\tlist.appendNode(cpy);\r\n\t\t\t} while ((node = node.next) && node !== toNode);\r\n\t\t}\r\n\r\n\t\treturn list;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tthis.clear();\r\n\t\tthis.destroyed = true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateNode: function (props) {\r\n\t\treturn new this.nodeKind(props);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdeleteNode: function (node) {\r\n\t\tthis.removeNode(node);\r\n\r\n\t\t// can't chain destruct because we removed its chain references\r\n\t\tnode.destroy();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tremoveNode: function (node) {\r\n\t\tvar prev = node.prev\r\n\t\t\t, next = node.next;\r\n\r\n\t\tprev && (prev.next = next);\r\n\t\tnext && (next.prev = prev);\r\n\t\tthis.length--;\r\n\t\tnode.next = node.prev = null;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tappendNode: function (node, targetNode) {\r\n\t\ttargetNode = targetNode || this.tail;\r\n\r\n\t\tif (targetNode) {\r\n\t\t\tif (targetNode.next) {\r\n\t\t\t\tnode.next = targetNode.next;\r\n\t\t\t}\r\n\r\n\t\t\ttargetNode.next = node;\r\n\t\t\tnode.prev = targetNode;\r\n\r\n\t\t\tif (targetNode === this.tail) {\r\n\t\t\t\tthis.tail = node;\r\n\t\t\t}\r\n\r\n\t\t\tthis.length++;\r\n\t\t} else {\r\n\r\n\t\t\tthis.head = this.tail = node;\r\n\t\t\tnode.prev = node.next = null;\r\n\t\t\tthis.length = 1;\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfind: function (fn, ctx, targetNode) {\r\n\t\tvar node = targetNode || this.head;\r\n\t\tif (node) {\r\n\t\t\tdo {\r\n\t\t\t\tif (fn.call(ctx || this, node, this)) {\r\n\t\t\t\t\treturn node;\r\n\t\t\t\t}\r\n\t\t\t} while ((node = node.next));\r\n\t\t}\r\n\t\t// if no node qualified it returns false\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tforward: function (fn, ctx, targetNode) {\r\n\t\tvar node = targetNode || this.head;\r\n\t\tif (node) {\r\n\t\t\tdo {\r\n\t\t\t\tif (fn.call(ctx || this, node, this)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} while ((node = node.next));\r\n\t\t}\r\n\t\t// returns the last node (if any) that was processed in the chain\r\n\t\treturn node;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbackward: function (fn, ctx, targetNode) {\r\n\t\tvar node = targetNode || this.tail;\r\n\t\tif (node) {\r\n\t\t\tdo {\r\n\t\t\t\tif (fn.call(ctx || this, node, this)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} while ((node = node.prev));\r\n\t\t}\r\n\t\t// returns the last node (if any) that was processed in the chain\r\n\t\treturn node;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: function () {\r\n\t\tthis.nodeType = kind.constructorForKind(this.nodeType);\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/ObserverChainNode~ObserverChainNode} kind.\r\n* @module enyo/ObserverChainNode\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind');\r\n\r\nvar\r\n\tLinkedListNode = require('./LinkedListNode');\r\n\r\nfunction get (base, prop) {\r\n\treturn base && /*isObject(base)*/ (typeof base == 'object')? (\r\n\t\tbase.get? base.get(prop): base[prop]\r\n\t): undefined;\r\n}\r\n\r\n/**\r\n* An internally used {@glossary kind}.\r\n*\r\n* @class ObserverChainNode\r\n* @extends module:enyo/LinkedListNode~LinkedListNode\r\n* @private\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/ObserverChainNode~ObserverChainNode.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: LinkedListNode,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.connect();\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.disconnect();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.observer = null;\r\n\t\t\tthis.list = null;\r\n\t\t\tthis.object = null;\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconnect: function () {\r\n\t\tvar obj = this.object\r\n\t\t\t, obs = this._changed\r\n\t\t\t, prop = this.property;\r\n\t\tif (obj) {\r\n\t\t\tif (obj.observe) obj.observe(prop, obs, this, {noChain: true, priority: true});\r\n\t\t\tthis.connected = true;\r\n\t\t\tthis.list.connected++;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisconnect: function () {\r\n\t\tvar obj = this.object\r\n\t\t\t, obs = this._changed\r\n\t\t\t, prop = this.property\r\n\t\t\t, was = this.connected;\r\n\t\tobj && obj.unobserve && obj.unobserve(prop, obs, this);\r\n\t\tthis.connected = null;\r\n\t\tif (was) this.list.connected--;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetObject: function (object) {\r\n\t\tvar cur = this.object\r\n\t\t\t, prop = this.property\r\n\t\t\t, was, is;\r\n\t\t\r\n\t\tif (cur !== object) {\r\n\t\t\tthis.disconnect();\r\n\t\t\tthis.object = object;\r\n\t\t\tthis.connect();\r\n\t\t\t\r\n\t\t\tif (this.list.tail === this) {\r\n\t\t\t\twas = get(cur, prop);\r\n\t\t\t\tis = get(object, prop);\r\n\t\t\t\t// @TODO: It would be better to somehow cache values\r\n\t\t\t\t// such that it could intelligently derive the difference\r\n\t\t\t\t// without needing to continuously look it up with get\r\n\t\t\t\twas !== is && this.list.observed(this, was, is);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_changed: function (was, is) {\r\n\t\tthis.list.observed(this, was, is);\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/ObserverChain~ObserverChain} kind.\r\n* @module enyo/ObserverChain\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind');\r\n\r\nvar\r\n\tLinkedList = require('./LinkedList'),\r\n\tObserverChainNode = require('./ObserverChainNode');\r\n\r\nfunction get (base, prop) {\r\n\treturn base && /*isObject(base)*/ (typeof base == 'object')? (\r\n\t\tbase.get? base.get(prop): base[prop]\r\n\t): undefined;\r\n}\r\n\r\n/**\r\n* An internally used {@glossary kind}.\r\n*\r\n* @class ObserverChain\r\n* @extends module:enyo/LinkedList~LinkedList\r\n* @private\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/ObserverChain~ObserverChain.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: LinkedList,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnodeKind: ObserverChainNode,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconnected: 0,\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructor: function (path, object) {\r\n\t\tthis.object = object;\r\n\t\tthis.path = path;\r\n\t\tthis.parts = path.split('.');\r\n\t\tthis.createChain();\r\n\t},\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.object = null;\r\n\t\t\tthis.parts = null;\r\n\t\t\tthis.path = null;\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trebuild: function (target) {\r\n\t\tif (!this.rebuilding) {\r\n\t\t\tthis.rebuilding = true;\r\n\t\t\tthis.forward(function (node) {\r\n\t\t\t\tif (node !== this.head) {\r\n\t\t\t\t\tvar src = node.prev.object\r\n\t\t\t\t\t\t, prop = node.prev.property;\r\n\t\t\t\t\tnode.setObject(get(src, prop));\r\n\t\t\t\t}\r\n\t\t\t}, this, target);\r\n\t\t\tthis.rebuilding = false;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisConnected: function () {\r\n\t\treturn !! (this.connected === this.length && this.length);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbuildPath: function (target) {\r\n\t\tvar str = '';\r\n\t\t\r\n\t\tthis.backward(function (node) {\r\n\t\t\tstr = node.property + (str? ('.' + str): str);\r\n\t\t}, this, target);\r\n\t\t\r\n\t\treturn str;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateChain: function () {\r\n\t\tvar parts = this.parts\r\n\t\t\t, next = this.object\r\n\t\t\t, $ = false\r\n\t\t\t, node, prop;\r\n\t\t\t\r\n\t\tfor (var i=0; (prop=parts[i]); ++i) {\r\n\t\t\t\r\n\t\t// forEach(parts, function (prop, idx) {\r\n\t\t\t// we create a special case for the $ hash property\r\n\t\t\tif (prop == '$') {\r\n\t\t\t\t$ = true;\r\n\t\t\t} else {\r\n\t\t\t\t// in cases where the chain has the $ property we arbitrarily\r\n\t\t\t\t// force it onto our current nodes property and let the special handling\r\n\t\t\t\t// in ObserverChainNode and ObserverSupport handle the rest\r\n\t\t\t\t$ && (prop = '$.' + prop);\r\n\t\t\t\tnode = this.createNode({property: prop, object: next, list: this});\r\n\t\t\t\tthis.appendNode(node);\r\n\t\t\t\tnext = get(next, prop);\r\n\t\t\t\t$ = false;\r\n\t\t\t}\r\n\t\t// }, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobserved: function (node, was, is) {\r\n\t\tthis.object.stopNotifications();\r\n\t\t// @NOTE: About the following two cases, they are mutually exclusive and this seems perfect\r\n\t\t// that we don't see double notifications\r\n\t\t// @TODO: Only notify if it was the full property path? This is far more efficient after\r\n\t\t// testing but not as flexible...\r\n\t\tnode === this.tail /*&& was !== is*/ && this.object.notify(this.buildPath(node), was, is);\r\n\t\t// @TODO: It seems the same case across the board that the rebuild only needs to take place\r\n\t\t// from the beginning to the second-to-last elem\r\n\t\tnode !== this.tail && was !== is && this.rebuild(node);\r\n\t\tthis.object.startNotifications();\r\n\t}\r\n});\r\n","/**\r\n* Exports the {@link module:enyo/ObserverSupport~ObserverSupport} mixin\r\n* @module enyo/ObserverSupport\r\n*/\r\nrequire('enyo');\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\nvar\r\n\tObserverChain = require('./ObserverChain');\r\n\r\nvar observerTable = {};\r\n\t\r\nkind.concatenated.push(\"observers\");\r\n\r\n/**\r\n* Responds to changes in one or more properties.\r\n* [Observers]{@link module:enyo/ObserverSupport~ObserverSupport#observers} may be registered in\r\n* several different ways. See the {@link module:enyo/ObserverSupport} documentation\r\n* for more details. Also note that, while observers should not be called\r\n* directly, if defined on a [kind]{@glossary kind}, they may be\r\n* overloaded for special behavior.\r\n*\r\n* @see {@link module:enyo/ObserverSupport}\r\n* @see {@link module:enyo/ObserverSupport~ObserverSupport#observe}\r\n* @callback module:enyo/ObserverSupport~ObserverSupport~Observer\r\n* @param {*} was - The previous value of the property that has changed.\r\n* @param {*} is - The current value of the property that has changed.\r\n* @param {String} prop - The name of the property that has changed.\r\n* @public\r\n*/\r\n\r\nfunction addObserver (path, fn, ctx, opts) {\r\n\t\r\n\tvar observers = this.getObservers(),\r\n\t\tchains = this.getChains(),\r\n\t\tparts = path.split('.'),\r\n\t\tprio = opts && opts.priority,\r\n\t\tentries,\r\n\t\tnoChain;\r\n\t\t\r\n\tnoChain = (opts && opts.noChain) ||\r\n\t\t\tchains[path] ||\r\n\t\t\tparts.length < 2 ||\r\n\t\t\t(parts.length === 2 && path[0] == '$');\r\n\t\r\n\tif (observers[path] && !observers.hasOwnProperty(path)) {\r\n\t\tobservers[path] = observers[path].slice();\r\n\t}\r\n\t\r\n\tentries = observers[path] || (observers[path] = []);\r\n\tentries[prio ? 'unshift' : 'push']({method: fn, ctx: ctx || this});\r\n\t\r\n\tif (!noChain) {\r\n\t\tthis.getChains()[path] = new ObserverChain(path, this);\r\n\t}\r\n\t\r\n\treturn this;\r\n}\r\n\r\nfunction removeObserver (obj, path, fn, ctx) {\r\n\tvar observers = obj.getObservers(path)\r\n\t\t, chains = obj.getChains()\r\n\t\t, idx, chain;\r\n\t\t\r\n\tif (observers && observers.length) {\r\n\t\tidx = observers.findIndex(function (ln) {\r\n\t\t\treturn ln.method === fn && (ctx? ln.ctx === ctx: true);\r\n\t\t});\r\n\t\tidx > -1 && observers.splice(idx, 1);\r\n\t}\r\n\t\r\n\tif ((chain = chains[path]) && !observers.length) {\r\n\t\tchain.destroy();\r\n\t}\r\n\t\r\n\treturn obj;\r\n}\r\n\r\nfunction notifyObservers (obj, path, was, is, opts) {\r\n\tif (obj.isObserving()) {\r\n\t\tvar observers = obj.getObservers(path);\r\n\t\t\r\n\t\tif (observers && observers.length) {\r\n\t\t\tfor (var i=0, ln; (ln=observers[i]); ++i) {\r\n\t\t\t\tif (typeof ln.method == \"string\") obj[ln.method](was, is, path, opts);\r\n\t\t\t\telse ln.method.call(ln.ctx || obj, was, is, path, opts);\r\n\t\t\t}\r\n\t\t}\r\n\t} else enqueue(obj, path, was, is, opts);\r\n\t\r\n\treturn obj;\r\n}\r\n\r\nfunction enqueue (obj, path, was, is, opts) {\r\n\tif (obj._notificationQueueEnabled) {\r\n\t\tvar queue = obj._notificationQueue || (obj._notificationQueue = {})\r\n\t\t\t, ln = queue[path] || (queue[path] = {});\r\n\t\r\n\t\tln.was = was;\r\n\t\tln.is = is;\r\n\t\tln.opts = opts;\r\n\t}\r\n}\r\n\r\nfunction flushQueue (obj) {\r\n\tvar queue = obj._notificationQueue\r\n\t\t, path, ln;\r\n\t\r\n\tif (queue) {\r\n\t\tobj._notificationQueue = null;\r\n\t\t\r\n\t\tfor (path in queue) {\r\n\t\t\tln = queue[path];\r\n\t\t\tobj.notify(path, ln.was, ln.is, ln.opts);\r\n\t\t}\r\n\t}\r\n}\r\n\t\r\n/**\r\n* Adds support for notifications on property changes. Most\r\n* [kinds]{@glossary kind} (including all kinds that inherit from\r\n* {@link module:enyo/CoreObject~Object}) already have this {@glossary mixin} applied.\r\n* This allows for\r\n* [observers]{@link module:enyo/ObserverSupport~ObserverSupport~Observer} to be\r\n* [declared]{@link module:enyo/ObserverSupport~ObserverSupport#observers} or \"implied\" (see below).\r\n*\r\n* Implied observers are not declared, but derived from their `name`. They take\r\n* the form `<property>Changed`, where `<property>` is the property to\r\n* [observe]{@link module:enyo/ObserverSupport~ObserverSupport#observe}. For example:\r\n*\r\n* ```javascript\r\n* var\r\n* \tkind = require('enyo/kind');\r\n*\r\n* module.exports = kind({\r\n* \tname: 'MyKind',\r\n*\r\n* \t// some local property\r\n* \tvalue: true,\r\n*\r\n* \t// and the implied observer of that property\r\n* \tvalueChanged: function (was, is) {\r\n* \t\t// do something now that it has changed\r\n* \t\tenyo.log('value was \"' + was + '\" but now it is \"' + is + '\"');\r\n* \t}\r\n* });\r\n*\r\n* var mine = new MyKind();\r\n* mine.set('value', false); // -> value was \"true\" but now it is \"false\"\r\n* ```\r\n*\r\n* Using the `observers` property for its declarative syntax, an observer may\r\n* observe any property (or properties), regardless of its `name`. For example:\r\n*\r\n* ```javascript\r\n* var\r\n* \tkind = require('enyo/kind');\r\n*\r\n* module.exports = kind({\r\n* \tname: 'MyKind',\r\n*\r\n* \t// some local property\r\n* \tvalue: true,\r\n*\r\n* \t// another local property\r\n* \tcount: 1,\r\n*\r\n* \t// declaring the observer\r\n* \tobservers: [\r\n* \t\t// the path can be a single string or an array of strings\r\n* \t\t{method: 'myObserver', path: ['value', 'count']}\r\n* \t],\r\n*\r\n* \t// now this observer will be notified of changes to both properties\r\n* \tmyObserver: function (was, is, prop) {\r\n* \t\t// do something now that it changed\r\n* \t\tenyo.log(prop + ' was \"' + was + '\" but now it is \"' + is + '\"');\r\n* \t}\r\n* });\r\n*\r\n* var mine = new MyKind();\r\n* mine.set('value', false); // -> value was \"true\" but now it is \"false\"\r\n* mine.set('count', 2); // -> count was \"1\" but now it is \"2\"\r\n* ```\r\n*\r\n* While observers may be [notified]{@link module:enyo/ObserverSupport~ObserverSupport#notify} of\r\n* changes to multiple properties, this is not a typical use case for implied\r\n* observers, since, by convention, they are only registered for the named\r\n* property.\r\n*\r\n* There is one additional way to use observers, if necessary. You may use the\r\n* API methods [observe()]{@link module:enyo/ObserverSupport~ObserverSupport#observe} and\r\n* [unobserve()]{@link module:enyo/ObserverSupport~ObserverSupport#unobserve} to dynamically\r\n* register and unregister observers as needed. For example:\r\n*\r\n* ```javascript\r\n* var\r\n* \tObject = require('enyo/CoreObject').Object;\r\n*\r\n* var object = new Object({value: true});\r\n* var observer = function (was, is) {\r\n* \tenyo.log('value was \"' + was + '\" but now it is \"' + is + '\"');\r\n* };\r\n*\r\n* object.observe('value', observer);\r\n* object.set('value', false); // -> value was \"true\" but now it is \"false\"\r\n* object.unobserve('value', observer);\r\n* object.set('value', true); // no output because there is no observer\r\n* ```\r\n*\r\n* Be sure to read the documentation for these API methods; proper usage of\r\n* these methods is important for avoiding common pitfalls and memory leaks.\r\n*\r\n* @mixin\r\n* @public\r\n*/\r\nvar ObserverSupport = {\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: \"ObserverSupport\",\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_observing: true,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_observeCount: 0,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_notificationQueue: null,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_notificationQueueEnabled: true,\r\n\t\r\n\t/**\r\n\t* Determines whether `_observing` is enabled. If\r\n\t* [stopNotifications()]{@link module:enyo/ObserverSupport~ObserverSupport#stopNotifications} has\r\n\t* been called, then this will return `false`.\r\n\t*\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#stopNotifications}\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#startNotifications}\r\n\t* @returns {Boolean} Whether or not the callee is observing.\r\n\t*/\r\n\tisObserving: function () {\r\n\t\treturn this._observing;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Returns an immutable list of [observers]{@link module:enyo/ObserverSupport~ObserverSupport~Observer}\r\n\t* for the given `path`, or all observers for the callee.\r\n\t*\r\n\t* @param {String} [path] - Path or property path for which\r\n\t* [observers]{@link module:enyo/ObserverSupport~ObserverSupport~Observer} will be returned. If not\r\n\t* specified, all observers for the callee will be returned.\r\n\t*\r\n\t* @returns {module:enyo/ObserverSupport~ObserverSupport~Observer[]} The immutable\r\n\t* [array]{@glossary Array} of observers.\r\n\t* @public\r\n\t*/\r\n\tgetObservers: function (path) {\r\n\t\tvar euid = this.euid || (this.euid = utils.uid('o')),\r\n\t\t\tret,\r\n\t\t\tloc;\r\n\t\t\t\r\n\t\tloc = observerTable[euid] || (observerTable[euid] = (\r\n\t\t\tthis._observers? Object.create(this._observers): {}\r\n\t\t));\r\n\t\t\r\n\t\tif (!path) return loc;\r\n\t\t\r\n\t\tret = loc[path];\r\n\t\t\r\n\t\t// if the special property exists...\r\n\t\tif (loc['*']) ret = ret ? ret.concat(loc['*']) : loc['*'].slice();\r\n\t\treturn ret;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetChains: function () {\r\n\t\treturn this._observerChains || (this._observerChains = {});\r\n\t},\r\n\t\r\n\t/**\r\n\t* @deprecated\r\n\t* @alias {@link module:enyo/ObserverSupport~ObserverSupport#observe}\r\n\t* @public\r\n\t*/\r\n\taddObserver: function () {\r\n\t\t// @NOTE: In this case we use apply because of internal variable use of parameters\r\n\t\treturn addObserver.apply(this, arguments);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Registers an [observer]{@link module:enyo/ObserverSupport~ObserverSupport~Observer} to be\r\n\t* [notified]{@link module:enyo/ObserverSupport~ObserverSupport#notify} when the given property has\r\n\t* been changed. It is important to note that it is possible to register the\r\n\t* same observer multiple times (although this is never the intention), so\r\n\t* care should be taken to avoid that scenario. It is also important to\r\n\t* understand how observers are stored and unregistered\r\n\t* ([unobserved]{@link module:enyo/ObserverSupport~ObserverSupport#unobserve}). The `ctx` (context)\r\n\t* parameter is stored with the observer reference. **If used when\r\n\t* registering, it should also be used when unregistering.**\r\n\t*\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#unobserve}\r\n\t* @param {String} path - The property or property path to observe.\r\n\t* @param {module:enyo/ObserverSupport~ObserverSupport~Observer} fn - The\r\n\t*\t[observer]{@link module:enyo/ObserverSupport~ObserverSupport~Observer} method that responds to changes.\r\n\t* @param {*} [ctx] - The `this` (context) under which to execute the observer.\r\n\t*\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tobserve: function () {\r\n\t\t// @NOTE: In this case we use apply because of internal variable use of parameters\r\n\t\treturn addObserver.apply(this, arguments);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @deprecated\r\n\t* @alias {@link module:enyo/ObserverSupport~ObserverSupport#unobserve}\r\n\t* @public\r\n\t*/\r\n\tremoveObserver: function (path, fn, ctx) {\r\n\t\treturn removeObserver(this, path, fn);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Unregisters an [observer]{@link module:enyo/ObserverSupport~ObserverSupport~Observer}. If a `ctx`\r\n\t* (context) was supplied to [observe()]{@link module:enyo/ObserverSupport~ObserverSupport#observe},\r\n\t* then it should also be supplied to this method.\r\n\t*\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#observe}\r\n\t* @param {String} path - The property or property path to unobserve.\r\n\t* @param {module:enyo/ObserverSupport~ObserverSupport~Observer} fn - The\r\n\t*\t[observer]{@link module:enyo/ObserverSupport~ObserverSupport~Observer} method that responds to changes.\r\n\t* @param {*} [ctx] - The `this` (context) under which to execute the observer.\r\n\t*\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tunobserve: function (path, fn, ctx) {\r\n\t\treturn removeObserver(this, path, fn, ctx);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Removes all [observers]{@link module:enyo/ObserverSupport~ObserverSupport~Observer} from the\r\n\t* callee. If a `path` parameter is provided, observers will only be removed\r\n\t* from that path (or property).\r\n\t*\r\n\t* @param {String} [path] - A property or property path from which to remove all\r\n\t*\t[observers]{@link module:enyo/ObserverSupport~ObserverSupport~Observer}.\r\n\t* @returns {this} The callee for chaining.\r\n\t*/\r\n\tremoveAllObservers: function (path) {\r\n\t\tvar euid = this.euid\r\n\t\t\t, loc = euid && observerTable[euid];\r\n\t\t\r\n\t\tif (loc) {\r\n\t\t\tif (path) {\r\n\t\t\t\tloc[path] = null;\r\n\t\t\t} else {\r\n\t\t\t\tdelete observerTable[euid];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @deprecated\r\n\t* @alias module:enyo/ObserverSupport~ObserverSupport#notify\r\n\t* @public\r\n\t*/\r\n\tnotifyObservers: function (path, was, is, opts) {\r\n\t\treturn notifyObservers(this, path, was, is, opts);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Triggers any [observers]{@link module:enyo/ObserverSupport~ObserverSupport~Observer} for the\r\n\t* given `path`. The previous and current values must be supplied. This\r\n\t* method is typically called automatically, but it may also be called\r\n\t* forcibly by [setting]{@link module:enyo/CoreObject~Object#set} a value with the\r\n\t* `force` option.\r\n\t*\r\n\t* @param {String} path - The property or property path to notify.\r\n\t* @param {*} was - The previous value.\r\n\t* @param {*} is - The current value.\r\n\t* @returns {this} The callee for chaining.\r\n\t*/\r\n\tnotify: function (path, was, is, opts) {\r\n\t\treturn notifyObservers(this, path, was, is, opts);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Stops all [notifications]{@link module:enyo/ObserverSupport~ObserverSupport#notify} from\r\n\t* propagating. By default, all notifications will be queued and flushed once\r\n\t* [startNotifications()]{@link module:enyo/ObserverSupport~ObserverSupport#startNotifications}\r\n\t* has been called. Setting the optional `noQueue` flag will also disable the\r\n\t* queue, or you can use the\r\n\t* [disableNotificationQueue()]{@link module:enyo/ObserverSupport~ObserverSupport#disableNotificationQueue} and\r\n\t* [enableNotificationQueue()]{@link module:enyo/ObserverSupport~ObserverSupport#enableNotificationQueue}\r\n\t* API methods. `startNotifications()` will need to be called the same number\r\n\t* of times that this method has been called.\r\n\t*\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#startNotifications}\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#disableNotificationQueue}\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#enableNotificationQueue}\r\n\t* @param {Boolean} [noQueue] - If `true`, this will also disable the notification queue.\r\n\t* @returns {this} The callee for chaining.\r\n\t*/\r\n\tstopNotifications: function (noQueue) {\r\n\t\tthis._observing = false;\r\n\t\tthis._observeCount++;\r\n\t\tnoQueue && this.disableNotificationQueue();\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Starts [notifications]{@link module:enyo/ObserverSupport~ObserverSupport#notify} if they have\r\n\t* been [disabled]{@link module:enyo/ObserverSupport~ObserverSupport#stopNotifications}. If the\r\n\t* notification queue was not disabled, this will automatically flush the\r\n\t* queue of all notifications that were encountered while stopped. This\r\n\t* method must be called the same number of times that\r\n\t* [stopNotifications()]{@link module:enyo/ObserverSupport~ObserverSupport#stopNotifications} was\r\n\t* called.\r\n\t*\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#stopNotifications}\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#disableNotificationQueue}\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#enableNotificationQueue}\r\n\t* @param {Boolean} [queue] - If `true` and the notification queue is disabled,\r\n\t* the queue will be re-enabled.\r\n\t* @returns {this} The callee for chaining.\r\n\t*/\r\n\tstartNotifications: function (queue) {\r\n\t\tthis._observeCount && this._observeCount--;\r\n\t\tthis._observeCount === 0 && (this._observing = true);\r\n\t\tqueue && this.enableNotificationQueue();\r\n\t\tthis.isObserving() && flushQueue(this);\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Re-enables the notification queue, if it was disabled.\r\n\t*\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#disableNotificationQueue}\r\n\t* @returns {this} The callee for chaining.\r\n\t*/\r\n\tenableNotificationQueue: function () {\r\n\t\tthis._notificationQueueEnabled = true;\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* If the notification queue is enabled (the default), it will be disabled\r\n\t* and any notifications in the queue will be removed.\r\n\t*\r\n\t* @see {@link module:enyo/ObserverSupport~ObserverSupport#enableNotificationQueue}\r\n\t* @returns {this} The callee for chaining.\r\n\t*/\r\n\tdisableNotificationQueue: function () {\r\n\t\tthis._notificationQueueEnabled = false;\r\n\t\tthis._notificationQueue = null;\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar chains, chain, path, entries, i;\r\n\t\t\t\r\n\t\t\t// if there are any observers that need to create dynamic chains\r\n\t\t\t// we look for and instance those now\r\n\t\t\tif (this._observerChains) {\r\n\t\t\t\tchains = this._observerChains;\r\n\t\t\t\tthis._observerChains = {};\r\n\t\t\t\tfor (path in chains) {\r\n\t\t\t\t\tentries = chains[path];\r\n\t\t\t\t\tfor (i = 0; (chain = entries[i]); ++i) this.observe(path, chain.method);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tvar chains = this._observerChains,\r\n\t\t\t\tpath,\r\n\t\t\t\tchain;\r\n\t\t\t\r\n\t\t\tsup.apply(this, arguments);\r\n\r\n\t\t\tthis.removeAllObservers();\r\n\t\t\tif (chains) {\r\n\t\t\t\tfor (path in chains) {\r\n\t\t\t\t\tchain = chains[path];\r\n\t\t\t\t\tchain.destroy();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._observerChains = null;\r\n\t\t\t}\r\n\t\t};\r\n\t})\r\n\t\r\n};\r\n\r\nmodule.exports = ObserverSupport;\r\n\r\n/**\r\n* Hijack the original so we can add additional default behavior.\r\n*\r\n* @private\r\n*/\r\nvar sup = kind.concatHandler;\r\n\r\n// @NOTE: It seems like a lot of work but it really won't happen that much and the more\r\n// we push to kind-time the better for initialization time\r\n\r\n/** @private */\r\nkind.concatHandler = function (ctor, props, instance) {\r\n\t\r\n\tsup.call(this, ctor, props, instance);\r\n\t\r\n\tif (props === ObserverSupport) return;\r\n\r\n\tvar proto = ctor.prototype || ctor\r\n\t\t, observers = proto._observers? Object.create(proto._observers): null\r\n\t\t, incoming = props.observers\r\n\t\t, chains = proto._observerChains && Object.create(proto._observerChains);\r\n\t\t\r\n\tif (!observers) {\r\n\t\tif (proto.kindName) observers = {};\r\n\t\telse return;\r\n\t}\r\n\t\t\r\n\tif (incoming && !(incoming instanceof Array)) {\r\n\t\t(function () {\r\n\t\t\tvar tmp = [], deps, name;\r\n\t\t\t// here is the slow iteration over the properties...\r\n\t\t\tfor (name in props.observers) {\r\n\t\t\t\t// points to the dependencies of the computed method\r\n\t\t\t\tdeps = props.observers[name];\r\n\t\t\t\t// create a single entry now for the method/computed with all dependencies\r\n\t\t\t\ttmp.push({method: name, path: deps});\r\n\t\t\t}\r\n\t\t\tincoming = tmp;\r\n\t\t}());\r\n\t\t// we need to ensure we don't modify the fixed array of a mixin or reused object\r\n\t\t// because it could wind up inadvertantly adding the same entry multiple times\r\n\t} else if (incoming) incoming = incoming.slice();\r\n\t\r\n\t// this scan is required to figure out what auto-observers might be present\r\n\tfor (var key in props) {\r\n\t\tif (key.slice(-7) == \"Changed\") {\r\n\t\t\tincoming || (incoming = []);\r\n\t\t\tincoming.push({method: key, path: key.slice(0, -7)});\r\n\t\t}\r\n\t}\r\n\t\r\n\tvar addObserverEntry = function (path, method) {\r\n\t\tvar obs;\r\n\t\t// we have to make sure that the path isn't a chain because if it is we add it\r\n\t\t// to the chains instead\r\n\t\tif (path.indexOf(\".\") > -1) {\r\n\t\t\tif (!chains) chains = {};\r\n\t\t\tobs = chains[path] || (chains[path] = []);\r\n\t\t\tobs.push({method: method});\r\n\t\t} else {\r\n\t\t\tif (observers[path] && !observers.hasOwnProperty(path)) observers[path] = observers[path].slice();\r\n\t\t\tobs = observers[path] || (observers[path] = []);\r\n\t\t\tif (!obs.find(function (ln) { return ln.method == method; })) obs.push({method: method});\r\n\t\t}\r\n\t};\r\n\t\r\n\tif (incoming) {\r\n\t\tincoming.forEach(function (ln) {\r\n\t\t\t// first we determine if the path itself is an array of paths to observe\r\n\t\t\tif (ln.path && ln.path instanceof Array) ln.path.forEach(function (en) { addObserverEntry(en, ln.method); });\r\n\t\t\telse addObserverEntry(ln.path, ln.method);\r\n\t\t});\r\n\t}\r\n\t\r\n\t// we clear the key so it will not be added to the prototype\r\n\t// delete props.observers;\r\n\t// we update the properties to whatever their new values may be\r\n\tproto._observers = observers;\r\n\tproto._observerChains = chains;\r\n};\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/CoreObject~Object} kind.\r\n* @module enyo/CoreObject\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tlogger = require('./logger'),\r\n\tutils = require('./utils');\r\n\r\nvar\r\n\tMixinSupport = require('./MixinSupport'),\r\n\tObserverSupport = require('./ObserverSupport'),\r\n\tBindingSupport = require('./BindingSupport');\r\n\r\n// ComputedSupport is applied to all kinds at creation time but must be require()'d somewhere to be\r\n// included in builds. This is that somewhere.\r\nrequire('./ComputedSupport');\r\n\r\n/**\r\n* Used by all [objects]{@link module:enyo/CoreObject~Object} and [subkinds]{@glossary subkind} when using the\r\n* {@link module:enyo/CoreObject~Object#log}, {@link module:enyo/CoreObject~Object#warn} and {@link module:enyo/CoreObject~Object#error} methods.\r\n*\r\n* @private\r\n*/\r\nfunction log (method, args) {\r\n\tif (logger.shouldLog(method)) {\r\n\t\ttry {\r\n\t\t\tthrow new Error();\r\n\t\t} catch(err) {\r\n\t\t\tlogger._log(method, [args.callee.caller.displayName + ': ']\r\n\t\t\t\t.concat(utils.cloneArray(args)));\r\n\t\t\tlogger.log(err.stack);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n* {@link module:enyo/CoreObject~Object} lies at the heart of the Enyo framework's implementations of property\r\n* publishing, computed properties (via the [ComputedSupport]{@link module:enyo/ComputedSupport}\r\n* {@glossary mixin}), and data binding (via the {@link module:enyo/BindingSupport~BindingSupport} mixin and\r\n* {@link module:enyo/Binding~Binding} object). It also provides several utility [functions]{@glossary Function}\r\n* for its [subkinds]{@glossary subkind}.\r\n*\r\n* @class Object\r\n* @mixes module:enyo/MixinSupport\r\n* @mixes module:enyo/ObserverSupport\r\n* @mixes module:enyo/BindingSupport\r\n* @public\r\n*/\r\nvar CoreObject = module.exports = kind(\r\n\t/** @lends module:enyo/CoreObject~Object.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Object',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\r\n\r\n\t/**\r\n\t* Will be `true` if the [destroy()]{@link module:enyo/CoreObject~Object#destroy} method has been called;\r\n\t* otherwise, `false`.\r\n\t*\r\n\t* @readonly\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tdestroyed: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MixinSupport, ObserverSupport, BindingSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: function (props) {\r\n\t\tthis.importProps(props);\r\n\t},\r\n\r\n\t/**\r\n\t* Imports the values from the given [object]{@glossary Object}. Automatically called\r\n\t* from the [constructor]{@link module:enyo/CoreObject~Object#constructor}.\r\n\t*\r\n\t* @param {Object} props - If provided, the [object]{@glossary Object} from which to\r\n\t*\tretrieve [keys/values]{@glossary Object.keys} to mix in.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\timportProps: function (props) {\r\n\t\tvar key;\r\n\r\n\t\tif (props) {\r\n\t\t\tkind.concatHandler(this, props, true);\r\n\t\t\t// if props is a default hash this is significantly faster than\r\n\t\t\t// requiring the hasOwnProperty check every time\r\n\t\t\tif (!props.kindName) {\r\n\t\t\t\tfor (key in props) {\r\n\t\t\t\t\tkind.concatenated.indexOf(key) === -1 && (this[key] = props[key]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (key in props) {\r\n\t\t\t\t\tif (kind.concatenated.indexOf(key) === -1 && props.hasOwnProperty(key)) {\r\n\t\t\t\t\t\tthis[key] = props[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Calls the [destroy()]{@link module:enyo/CoreObject~Object#destroy} method for the named {@link module:enyo/CoreObject~Object} \r\n\t* property.\r\n\t*\r\n\t* @param {String} name - The name of the property to destroy, if possible.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tdestroyObject: function (name) {\r\n\t\tif (this[name] && this[name].destroy) {\r\n\t\t\tthis[name].destroy();\r\n\t\t}\r\n\t\tthis[name] = null;\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Sends a log message to the [console]{@glossary console}, prepended with the name\r\n\t* of the {@glossary kind} and method from which `log()` was invoked. Multiple\r\n\t* {@glossary arguments} are coerced to {@glossary String} and\r\n\t* [joined with spaces]{@glossary Array.join}.\r\n\t*\r\n\t* ```javascript\r\n\t* var kind = require('enyo/kind'),\r\n\t*     Object = require('enyo/CoreObject');\r\n\t* kind({\r\n\t*\tname: 'MyObject',\r\n\t*\tkind: Object,\r\n\t*\thello: function() {\r\n\t*\t\tthis.log('says', 'hi');\r\n\t*\t\t// shows in the console: MyObject.hello: says hi\r\n\t*\t}\r\n\t* });\r\n\t* ```\r\n\t* @public\r\n\t*/\r\n\tlog: function () {\r\n\t\tvar acc = arguments.callee.caller,\r\n\t\t\tnom = ((acc ? acc.displayName : '') || '(instance method)') + ':',\r\n\t\t\targs = Array.prototype.slice.call(arguments);\r\n\t\targs.unshift(nom);\r\n\t\tlogger.log('log', args);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Same as [log()]{@link module:enyo/CoreObject~Object#log}, except that it uses the \r\n\t* console's [warn()]{@glossary console.warn} method (if it exists).\r\n\t*\r\n\t* @public\r\n\t*/\r\n\twarn: function () {\r\n\t\tlog('warn', arguments);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Same as [log()]{@link module:enyo/CoreObject~Object#log}, except that it uses the \r\n\t* console's [error()]{@glossary console.error} method (if it exists).\r\n\t*\r\n\t* @public\r\n\t*/\r\n\terror: function () {\r\n\t\tlog('error', arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves the value for the given path. The value may be retrieved as long as the given \r\n\t* path is resolvable relative to the given {@link module:enyo/CoreObject~Object}. See\r\n\t* [getPath()]{@link module:enyo/utils#getPath} for complete details.\r\n\t*\r\n\t* This method is backwards-compatible and will automatically call any existing getter\r\n\t* method that uses the \"getProperty\" naming convention. (Moving forward, however, Enyo code\r\n\t* should use [computed properties]{@link module:enyo/ComputedSupport} instead of relying on the\r\n\t* getter naming convention.)\r\n\t*\r\n\t* @param {String} path - The path from which to retrieve a value.\r\n\t* @returns {*} The value for the given path or [undefined]{@glossary undefined} if \r\n\t*\tthe path could not be completely resolved.\r\n\t* @public\r\n\t*/\r\n\tget: function () {\r\n\t\treturn utils.getPath.apply(this, arguments);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Updates the value for the given path. The value may be set as long as the\r\n\t* given path is resolvable relative to the given {@link module:enyo/CoreObject~Object}. See\r\n\t* [setPath()]{@link module:enyo/utils#setPath} for complete details.\r\n\t*\r\n\t* @param {String} path - The path for which to set the given value.\r\n\t* @param {*} value - The value to set.\r\n\t* @param {Object} [opts] - An options hash.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tset: function () {\r\n\t\treturn utils.setPath.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Binds a [callback]{@glossary callback} to this [object]{@link module:enyo/CoreObject~Object}.\r\n\t* If the object has been destroyed, the bound method will be aborted cleanly,\r\n\t* with no value returned.\r\n\t*\r\n\t* This method should generally be used instead of {@link module:enyo/utils#bind} for running\r\n\t* code in the context of an instance of {@link module:enyo/CoreObject~Object} or one of its\r\n\t* [subkinds]{@glossary subkind}.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tbindSafely: function () {\r\n\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\targs.unshift(this);\r\n\t\treturn utils.bindSafely.apply(null, args);\r\n\t},\r\n\t\r\n\t/**\r\n\t* An abstract method (primarily) that sets the [destroyed]{@link module:enyo/CoreObject~Object#destroyed} \r\n\t* property to `true`.\r\n\t*\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tdestroy: function () {\r\n\t\t\r\n\t\t// Since JS objects are never truly destroyed (GC'd) until all references are\r\n\t\t// gone, we might have some delayed action on this object that needs access\r\n\t\t// to this flag.\r\n\t\t// Using this.set to make the property observable\r\n\t\treturn this.set('destroyed', true);\r\n\t}\r\n});\r\n\r\n/**\r\n* @private\r\n*/\r\nCoreObject.concat = function (ctor, props) {\r\n\tvar pubs = props.published,\r\n\t\tcpy,\r\n\t\tprop;\r\n\t\t\r\n\tif (pubs) {\r\n\t\tcpy = ctor.prototype || ctor;\r\n\t\tfor (prop in pubs) {\r\n\t\t\t// need to make sure that even though a property is 'published'\r\n\t\t\t// it does not overwrite any computed properties\r\n\t\t\tif (props[prop] && typeof props[prop] == 'function') continue;\r\n\t\t\taddGetterSetter(prop, pubs[prop], cpy);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n* This method creates a getter/setter for a published property of an {@link module:enyo/CoreObject~Object}, but is\r\n* deprecated. It is maintained for purposes of backwards compatibility. The preferred method is \r\n* to mark public and protected (private) methods and properties using documentation or other \r\n* means and rely on the [get]{@link module:enyo/CoreObject~Object#get} and [set]{@link module:enyo/CoreObject~Object#set} methods of\r\n* {@link module:enyo/CoreObject~Object} instances.\r\n*\r\n* @private\r\n*/\r\nfunction addGetterSetter (prop, value, proto) {\r\n\t\r\n\t// so we don't need to re-execute this over and over and over...\r\n\tvar cap = utils.cap(prop),\r\n\t\tgetName = 'get' + cap,\r\n\t\tsetName = 'set' + cap,\r\n\t\tgetters = proto._getters || (proto._getters = {}),\r\n\t\tsetters = proto._setters || (proto._setters = {}),\r\n\t\tfn;\r\n\t\r\n\t// we assign the default value from the published block to the prototype\r\n\t// so it will be initialized properly\r\n\tproto[prop] = value;\r\n\t\r\n\t// check for a supplied getter and if there isn't one we create one otherwise\r\n\t// we mark the supplied getter in the tracking object so the global getPath will\r\n\t// know about it\r\n\tif (!(fn = proto[getName]) || typeof fn != 'function') {\r\n\t\tfn = proto[getName] = function () {\r\n\t\t\treturn utils.getPath.fast.call(this, prop);\r\n\t\t};\r\n\t\t\r\n\t\t// and we mark it as generated\r\n\t\tfn.generated = true;\r\n\t} else if (fn && typeof fn == 'function' && !fn.generated) getters[prop] = getName;\r\n\t\r\n\t// we need to do the same thing for the setters\r\n\tif (!(fn = proto[setName]) || typeof fn != 'function') {\r\n\t\tfn = proto[setName] = function (val) {\r\n\t\t\treturn utils.setPath.fast.call(this, prop, val);\r\n\t\t};\r\n\t\t\r\n\t\t// and we mark it as generated\r\n\t\tfn.generated = true;\r\n\t} else if (fn && typeof fn == 'function' && !fn.generated) setters[prop] = setName;\r\n}\r\n","require('enyo');\r\n\r\nvar\r\n\tutils = require('./utils'),\r\n\tkind = require('./kind');\r\n\t\r\nvar CoreObject = require('./CoreObject');\r\n\r\n/**\r\n* The {@link module:enyo/jobs} singleton provides a mechanism for queueing tasks\r\n* (i.e., functions) for execution in order of priority. The execution of the\r\n* current job stack may be blocked programmatically by setting a priority\r\n* level (run level) below which no jobs are executed.\r\n*\r\n* At the moment, only {@link module:enyo/Animator~Animator} uses this interface, setting a\r\n* priority of 4, which blocks all low priority tasks from executing during\r\n* animations. To maintain backward compatibility, jobs are assigned a priority\r\n* of 5 by default; thus they are not blocked by animations.\r\n*\r\n* Normally, application code will not use `enyo/jobs` directly, but will\r\n* instead use the [job()]{@link module:enyo/Component~Component#job} method of\r\n* {@link module:enyo/Component~Component}.\r\n*\r\n* @module enyo/jobs\r\n* @public\r\n*/\r\nmodule.exports = kind.singleton(\r\n\t/** @lends module:enyo/jobs */ {\r\n\t\r\n\tkind: CoreObject,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: /** @lends module:enyo/jobs~jobs */ {\r\n\t\t\r\n\t\t/**\r\n\t\t* The current priority level.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpriorityLevel: 0\r\n\t},\r\n\t\r\n\t/**\r\n\t* Prioritized by index.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_jobs: [ [], [], [], [], [], [], [], [], [], [] ],\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_priorities: {},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_namedJobs: {},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_magicWords: {\r\n\t\t'low': 3,\r\n\t\t'normal': 5,\r\n\t\t'high': 7\r\n\t},\r\n\t\r\n\t/**\r\n\t* Adds a [job]{@link module:enyo/job} to the job queue. If the current priority\r\n\t* level is higher than this job's priority, this job gets deferred until the\r\n\t* job level drops; if it is lower, this job is run immediately.\r\n\t*\r\n\t* @param {Function} job - The actual {@glossary Function} to execute as the\r\n\t* [job]{@link module:enyo/job}.\r\n\t* @param {Number} priority - The priority of the job.\r\n\t* @param {String} nom - The name of the job for later reference.\r\n\t* @public\r\n\t*/\r\n\tadd: function (job, priority, nom) {\r\n\t\tpriority = priority || 5;\r\n\r\n\t\t// magic words: low = 3, normal = 5, high = 7\r\n\t\tpriority = utils.isString(priority) ? this._magicWords[priority] : priority;\r\n\r\n\t\t// if a job of the same name exists, remove it first (replace it)\r\n\t\tif(nom){\r\n\t\t\tthis.remove(nom);\r\n\t\t\tthis._namedJobs[nom] = priority;\r\n\t\t}\r\n\r\n\t\t// if the job is of higher priority than the current priority level then\r\n\t\t// there's no point in queueing it\r\n\t\tif(priority >= this.priorityLevel){\r\n\t\t\tjob();\r\n\t\t} else {\r\n\t\t\tthis._jobs[priority - 1].push({fkt: job, name: nom});\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* Will remove the named [job]{@link module:enyo/job} from the queue.\r\n\t*\r\n\t* @param {String} nom - The name of the [job]{@link module:enyo/job} to remove.\r\n\t* @returns {Array} An {@glossary Array} that will contain the removed job if\r\n\t* it was found, or empty if it was not found.\r\n\t* @public\r\n\t*/\r\n\tremove: function (nom) {\r\n\t\tvar jobs = this._jobs[this._namedJobs[nom] - 1];\r\n\t\tif(jobs){\r\n\t\t\tfor(var j = jobs.length-1; j >= 0; j--){\r\n\t\t\t\tif(jobs[j].name === nom){\r\n\t\t\t\t\treturn jobs.splice(j, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* Adds a new priority level at which jobs will be executed. If it is higher than the\r\n\t* highest current priority, the priority level rises. Newly added jobs below that priority\r\n\t* level are deferred until the priority is removed (i.e., unregistered).\r\n\t*\r\n\t* @param {Number} priority - The priority value to register.\r\n\t* @param {String} id - The name of the priority.\r\n\t* @public\r\n\t*/\r\n\tregisterPriority: function(priority, id) {\r\n\t\tthis._priorities[id] = priority;\r\n\t\tthis.setPriorityLevel( Math.max(priority, this.priorityLevel) );\r\n\t},\r\n\t\r\n\t/**\r\n\t* Removes a priority level. If the removed priority was previously the\r\n\t* highest priority, the priority level drops to the next highest priority\r\n\t* and queued jobs with a higher priority are executed.\r\n\t*\r\n\t* @param {String} id - The name of the priority level to remove.\r\n\t* @public\r\n\t*/\r\n\tunregisterPriority: function (id) {\r\n\t\tvar highestPriority = 0;\r\n\r\n\t\t// remove priority\r\n\t\tdelete this._priorities[id];\r\n\r\n\t\t// find new highest current priority\r\n\t\tfor( var i in this._priorities ){\r\n\t\t\thighestPriority = Math.max(highestPriority, this._priorities[i]);\r\n\t\t}\r\n\r\n\t\tthis.setPriorityLevel( highestPriority );\r\n\t},\r\n\t\r\n\t/**\r\n\t* Tries to run next job if priority level has dropped.\r\n\t*\r\n\t* @type {module:enyo/ObserverSupport~ObserverSupport~Observer}\r\n\t* @private\r\n\t*/\r\n\tpriorityLevelChanged: function (was) {\r\n\t\tif(was > this.priorityLevel){\r\n\t\t\tthis._doJob();\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* Finds and executes the job of highest priority; in this way, all jobs with priority\r\n\t* greater than or equal to the current level are run, in order of their priority (highest\r\n\t* to lowest).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_doJob: function () {\r\n\t\tvar job;\r\n\t\t// find the job of highest priority above the current priority level\r\n\t\t// and remove from the job list\r\n\t\tfor (var i = 9; i >= this.priorityLevel; i--){\r\n\t\t\tif (this._jobs[i].length) {\r\n\t\t\t\tjob = this._jobs[i].shift();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// allow other events to pass through\r\n\t\tif (job) {\r\n\t\t\tjob.fkt();\r\n\t\t\tdelete this._namedJobs[job.name];\r\n\t\t\tsetTimeout(utils.bind(this, '_doJob'), 10);\r\n\t\t}\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Async~Async} kind.\r\n* @module enyo/Async\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\nvar\r\n\tCoreObject = require('./CoreObject');\r\n\r\n/**\r\n* An abstract [kind]{@glossary kind} designed to aid in handling asynchronous operations.\r\n* It represents a task that has not yet completed. Callback functions may be registered to be\r\n* notified when the task is complete.\r\n*\r\n* For more information, see the documentation on [Consuming Web\r\n* Services]{@linkplain $dev-guide/building-apps/managing-data/consuming-web-services.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @class Async\r\n* @extends module:enyo/CoreObject~Object\r\n* @public\r\n*/\r\nvar Async = module.exports = kind(\r\n\t/** @lends module:enyo/Async~Async.prototype */ {\r\n\t\r\n\tname: 'enyo.Async',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: CoreObject,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t\r\n\t\t/**\r\n\t\t* The number of milliseconds to wait after [execution]{@link module:enyo/Async~Async#go} begins\r\n\t\t* before failing with a timeout error. If set to `0` (the default), will not\r\n\t\t* automatically throw a timeout error.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @memberof module:enyo/Aysnc~Async.prototype\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttimeout: 0\r\n\t},\r\n\t\r\n\t/**\r\n\t* Will be `true` if an error has occurred and a handler calls the\r\n\t* [fail()]{@link module:enyo/Async~Async#fail} method. Can be cleared using\r\n\t* [recover()]{@link module:enyo/Async~Async#recover}.\r\n\t*\r\n\t* @readonly\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tfailed: false,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontext: null,\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.responders = [];\r\n\t\t\tthis.errorHandlers = [];\r\n\t\t\tthis.progressHandlers = [];\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tif (this.timeoutJob) {\r\n\t\t\t\tthis.clearTimeout();\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taccumulate: function (array, fn, ctx) {\r\n\t\tvar tmp;\r\n\t\t\r\n\t\t// to preserve backward compatibility we have to accept that the order of the arguments\r\n\t\t// might be different\r\n\t\tif (ctx && typeof ctx == 'function') {\r\n\t\t\ttmp = fn;\r\n\t\t\tfn = ctx;\r\n\t\t\tctx = tmp;\r\n\t\t}\r\n\t\t\r\n\t\t// we go ahead and bind the method to its context to preserve the original\r\n\t\t// implementation\r\n\t\tif (ctx) {\r\n\t\t\tif (typeof ctx == \"string\") {\r\n\t\t\t\tfn = utils.bind(fn, ctx);\r\n\t\t\t} else {\r\n\t\t\t\tfn = fn.bind(ctx);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// now store it for use later\r\n\t\tarray.push(fn);\r\n\t},\r\n\t\r\n\t/**\r\n\t* Registers a [function]{@glossary Function} to be fired when\r\n\t* [execution]{@link module:enyo/Async~Async#go} is completed successfully. Parameters may be\r\n\t* in any order, to preserve backward compatibility.\r\n\t*\r\n\t* @param {Function} fn - The callback to register.\r\n\t* @param {Object} [ctx] - The optional context under which to execute the callback.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tresponse: function (fn, ctx) {\r\n\t\tthis.accumulate(this.responders, fn, ctx);\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Registers a [function]{@glossary Function} to be fired when\r\n\t* [execution]{@link module:enyo/Async~Async#go} completes with an error. Parameters may be\r\n\t* in any order, to preserve backward compatibility.\r\n\t*\r\n\t* @param {Function} fn - The callback to register.\r\n\t* @param {Object} [ctx] - The optional context under which to execute the callback.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\terror: function (fn, ctx) {\r\n\t\tthis.accumulate(this.errorHandlers, fn, ctx);\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Registers a [function]{@glossary Function} to be fired on progress events.\r\n\t* Parameters may be in any order, to preserve backward compatibility.\r\n\t*\r\n\t* @param {Function} fn - The callback to register.\r\n\t* @param {Object} [ctx] - The optional context under which to execute the callback.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tprogress: function (fn, ctx) {\r\n\t\tthis.accumulate(this.progressHandlers, fn, ctx);\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\troute: function (async, value) {\r\n\t\tvar r = this.bindSafely('respond');\r\n\t\tasync.response(function (sender, value) {\r\n\t\t\tr(value);\r\n\t\t});\r\n\t\tvar f = this.bindSafely('fail');\r\n\t\tasync.error(function (sender, value) {\r\n\t\t\tf(value);\r\n\t\t});\r\n\t\tasync.go(value);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandle: function (value, handlers) {\r\n\t\tvar r = handlers.shift();\r\n\t\tif (r) {\r\n\t\t\tif (r instanceof Async) {\r\n\t\t\t\tthis.route(r, value);\r\n\t\t\t} else {\r\n\t\t\t\t// handler can return a new 'value'\r\n\t\t\t\tvar v = utils.call(this.context || this, r, [this, value]);\r\n\t\t\t\t// ... but only if it returns something other than undefined\r\n\t\t\t\tv = (v !== undefined) ? v : value;\r\n\t\t\t\t// next handler\r\n\t\t\t\t(this.failed ? this.fail : this.respond).call(this, v);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstartTimer: function () {\r\n\t\tthis.startTime = utils.perfNow();\r\n\t\tif (this.timeout) {\r\n\t\t\tthis.timeoutJob = setTimeout(this.bindSafely('timeoutComplete'), this.timeout);\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tendTimer: function () {\r\n\t\tif (this.timeoutJob) {\r\n\t\t\tthis.endTime = utils.perfNow();\r\n\t\t\tclearTimeout(this.timeoutJob);\r\n\t\t\tthis.timeoutJob = null;\r\n\t\t\tthis.latency = this.endTime - this.startTime;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttimeoutComplete: function () {\r\n\t\tthis.timedout = true;\r\n\t\tthis.fail('timeout');\r\n\t},\r\n\t\r\n\t/**\r\n\t* Triggers the handler chain for valid outcomes.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trespond: function (value) {\r\n\t\tthis.failed = false;\r\n\t\tthis.endTimer();\r\n\t\tthis.handle(value, this.responders);\r\n\t},\r\n\r\n\t/**\r\n\t* Fails the [task]{@link module:enyo/Async~Async} and triggers the error chain. May be called from any\r\n\t* handler.\r\n\t* \r\n\t* @param {*} err - The error value to pass to error handlers.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tfail: function (err) {\r\n\t\tthis.failed = true;\r\n\t\tthis.endTimer();\r\n\t\tthis.handle(err, this.errorHandlers);\r\n\t\t\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* Clears the error condition ([failed]{@link module:enyo/Async~Async#failed}) by setting it to `false`.\r\n\t* If called while responding to handlers, it will continue.\r\n\t*\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\trecover: function () {\r\n\t\tthis.failed = false;\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendProgress: function(current, min, max, sourceEvent) {\r\n\t\tvar event = utils.mixin({}, sourceEvent);\r\n\t\tevent.type = 'progress';\r\n\t\tevent.current = current;\r\n\t\tevent.min = min;\r\n\t\tevent.max = max;\r\n\t\tfor (var i = 0; i < this.progressHandlers.length; i++) {\r\n\t\t\tutils.call(this.context || this, this.progressHandlers[i], [this, event]);\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* Initiates the asynchronous routine, supplying the given value if it completes\r\n\t* successfully. This method is usually overloaded in [subkinds]{@glossary subkind}.\r\n\t*\r\n\t* @virtual\r\n\t* @param {*} - value The value to pass to responders.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tgo: function(value) {\r\n\t\tthis.sendProgress(0, 0, 1);\r\n\t\tutils.asyncMethod(this, function() {\r\n\t\t\tthis.sendProgress(1, 0, 1);\r\n\t\t\tthis.respond(value);\r\n\t\t});\r\n\t\treturn this;\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Component~Component} kind.\r\n* @module enyo/Component\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils'),\r\n\tlogger = require('./logger');\r\n\r\nvar\r\n\tCoreObject = require('./CoreObject'),\r\n\tApplicationSupport = require('./ApplicationSupport'),\r\n\tComponentBindingSupport = require('./ComponentBindingSupport'),\r\n\tJobs = require('./jobs');\r\n\r\nvar\r\n\tkindPrefix = {},\r\n\tunnamedCounter = 0;\r\n\t\r\n/**\r\n* @callback module:enyo/Component~Component~EventHandler\r\n* @param {module:enyo/Component~Component} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @param {Object} event - An [object]{@glossary Object} containing\r\n*\tevent information.\r\n* @returns {Boolean} A value indicating whether the event has been\r\n*\thandled or not. If `true`, then bubbling is stopped.\r\n*/\r\n\r\n/**\r\n* A [hash]{@glossary Object} of references to all the [components]{@link module:enyo/Component~Component}\r\n* owned by this component. This property is updated whenever a new\r\n* component is added; the new component may be accessed via its\r\n* [name]{@link module:enyo/Component~Component#name} property. We may also observe changes on\r\n* properties of components referenced by the `$` property.\r\n*\r\n* Component access via the `$` hash:\r\n* ```javascript\r\n* var Component = require('enyo/Component');\r\n* var c = new Component({\r\n*\tname: 'me',\r\n*\tcomponents: [\r\n*\t\t{kind: Component, name: 'other'}\r\n*\t]\r\n* });\r\n*\r\n* // We can now access 'other' on the $ hash of 'c', via c.$.other\r\n* ```\r\n*\r\n* Observing changes on a component referenced by the `$` property:\r\n* ```javascript\r\n* var c = new Component({\r\n*\tname: 'me',\r\n*\tcomponents: [\r\n*\t\t{kind: Component, name: 'other'}\r\n*\t]\r\n* });\r\n*\r\n* c.addObserver('$.other.active', function() {\r\n*\t// do something to respond to the \"active\" property of \"other\" changing\r\n* })\r\n*\r\n* c.$.other.set('active', true); // this will trigger the observer to run its callback\r\n* ```\r\n*\r\n* @name $\r\n* @type {Object}\r\n* @default null\r\n* @memberof module:enyo/Component~Component.prototype\r\n* @readonly\r\n* @public\r\n*/\r\n\r\n/**\r\n* If `true`, this [component's]{@link module:enyo/Component~Component} [owner]{@link module:enyo/Component~Component#owner} will\r\n* have a direct name reference to the owned component.\r\n*\r\n* @example\r\n* var Component = require('enyo/Component');\r\n* var c = new Component({\r\n*\tname: 'me',\r\n*\tcomponents: [\r\n*\t\t{kind: Component, name: 'other', publish: true}\r\n*\t]\r\n* });\r\n*\r\n* // We can now access 'other' directly, via c.other\r\n*\r\n* @name publish\r\n* @type {Boolean}\r\n* @default undefined\r\n* @memberOf module:enyo/Component~Component.prototype\r\n* @public\r\n*/\r\n\r\n/**\r\n* If `true`, the [layout]{@glossary layout} strategy will adjust the size of this\r\n* [component]{@link module:enyo/Component~Component} to occupy the remaining available space.\r\n*\r\n* @name fit\r\n* @type {Boolean}\r\n* @default undefined\r\n* @memberOf module:enyo/Component~Component.prototype\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:enyo/Component~Component} is the fundamental building block for Enyo applications.\r\n* Components are designed to fit together, allowing complex behaviors to\r\n* be fashioned from smaller bits of functionality.\r\n*\r\n* Component [constructors]{@glossary constructor} take a single\r\n* argument (sometimes called a [component configuration]{@glossary configurationBlock}),\r\n* a JavaScript [object]{@glossary Object} that defines various properties to be initialized on the\r\n* component.  For example:\r\n*\r\n* ```javascript\r\n* // create a new component, initialize its name property to 'me'\r\n* var Component = require('enyo/Component');\r\n* var c = new Component({\r\n*\tname: 'me'\r\n* });\r\n* ```\r\n*\r\n* When a component is instantiated, items configured in its\r\n* `components` property are instantiated, too:\r\n*\r\n* ```javascript\r\n* // create a new component, which itself has a component\r\n* var c = new Component({\r\n*\tname: 'me',\r\n*\tcomponents: [\r\n*\t\t{kind: Component, name: 'other'}\r\n*\t]\r\n* });\r\n* ```\r\n*\r\n* In this case, when `me` is created, `other` is also created, and we say that `me` owns `other`.\r\n* In other words, the [owner]{@link module:enyo/Component~Component#owner} property of `other` equals `me`.\r\n* Notice that you can specify the [kind]{@glossary kind} of `other` explicitly in its\r\n* configuration block, to tell `me` what constructor to use to create `other`.\r\n*\r\n* To move a component, use the `setOwner()` method to change the\r\n* component's owner. If you want a component to be unowned, use `setOwner(null)`.\r\n*\r\n* If you make changes to `Component`, be sure to add or update the appropriate\r\n* {@linkplain https://github.com/enyojs/enyo/tree/master/tools/test/core/tests unit tests}.\r\n*\r\n* For more information, see the documentation on\r\n* [Components]{@linkplain $dev-guide/key-concepts/components.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class Component\r\n* @extends module:enyo/CoreObject~Object\r\n* @mixes module:enyo/ApplicationSupport~ApplicationSupport\r\n* @mixes module:enyo/ComponentBindingSupport~ComponentBindingSupport\r\n* @public\r\n*/\r\nvar Component = module.exports = kind(\r\n\t/** @lends module:enyo/Component~Component.prototype */ {\r\n\r\n\tname: 'enyo.Component',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: CoreObject,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcachedBubble: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcachePoint: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished:\r\n\t\t/** @lends module:enyo/Component~Component.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* A unique name for the [component]{@link module:enyo/Component~Component} within its\r\n\t\t* [owner]{@link module:enyo/Component~Component#owner}. This is used to set the access name in the\r\n\t\t* owner's [$ hash]{@link module:enyo/Component~Component#$}. If not\r\n\t\t* specified, a default name will be provided based on the name of the\r\n\t\t* [object's]{@link module:enyo/CoreObject~Object} [kind]{@glossary kind}, with a numeric\r\n\t\t* suffix appended if more than one instance exists in the owner.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tname: '',\r\n\r\n\t\t/**\r\n\t\t* A unique id for the [component]{@link module:enyo/Component~Component}, usually automatically generated\r\n\t\t* based on its position within the component hierarchy, although\r\n\t\t* it may also be directly specified. {@link module:enyo/Control~Control} uses this `id` value for the\r\n\t\t* DOM [id]{@link module:enyo/Control~Control#id} attribute.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tid: '',\r\n\r\n\t\t/**\r\n\t\t* The [component]{@link module:enyo/Component~Component} that owns this component.\r\n\t\t* It is usually defined implicitly at creation time based on the\r\n\t\t* [createComponent()]{@link module:enyo/Component~Component#createComponent} call or\r\n\t\t* the `components` hash.\r\n\t\t*\r\n\t\t* @type {module:enyo/Component~Component}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\towner: null,\r\n\r\n\t\t/**\r\n\t\t* This can be a [hash]{@glossary Object} of features to apply to\r\n\t\t* [chrome]{@glossary chrome} [components]{@link module:enyo/Component~Component} of the base\r\n\t\t* [kind]{@glossary kind}. They are matched by [name]{@link module:enyo/Component~Component#name}\r\n\t\t* (if the component you wish to modify does not have a name, this will not work).\r\n\t\t* You can modify any properties of the component except for methods. Setting a\r\n\t\t* value for `componentOverrides` at runtime will have no effect.\r\n\t\t*\r\n\t\t* @type {Object}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcomponentOverrides: null\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [ApplicationSupport, ComponentBindingSupport],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttoString: function () {\r\n\t\treturn this.id + ' [' + this.kindName + ']';\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\t// initialize instance objects\r\n\t\t\tthis._componentNameMap = {};\r\n\t\t\tthis.$ = {};\r\n\t\t\tthis.cachedBubbleTarget = {};\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructed: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\t// perform initialization\r\n\t\t\tthis.create(props);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\t// stop and queue all of the notifications happening synchronously to allow\r\n\t\t// responders to only do single passes on work traversing the tree\r\n\t\tthis.stopNotifications();\r\n\t\tthis.ownerChanged();\r\n\t\tthis.initComponents();\r\n\t\t// release the kraken!\r\n\t\tthis.startNotifications();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinitComponents: function () {\r\n\t\t// The _components_ property in kind declarations is renamed to\r\n\t\t// _kindComponents_ by the Component subclass mechanism.  This makes it\r\n\t\t// easy for the developer to distinguish kindComponents from the components\r\n\t\t// in _this.components_, without having to worry about the actual difference.\r\n\t\t//\r\n\t\t// Specifically, the difference is that kindComponents are constructed as\r\n\t\t// owned by this control (whereas components in _this.components_ are not).\r\n\t\t// In addition, kindComponents are marked with the _isChrome: true_ flag.\r\n\t\tthis.createChrome(this.kindComponents);\r\n\t\tthis.createClientComponents(this.components);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateChrome: function (comps) {\r\n\t\tthis.createComponents(comps, {isChrome: true});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateClientComponents: function (comps) {\r\n\t\tthis.createComponents(comps, {owner: this.getInstanceOwner()});\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetInstanceOwner: function () {\r\n\t\treturn (!this.owner || this.owner.notInstanceOwner) ? this : this.owner;\r\n\t},\r\n\r\n\t/**\r\n\t* Removes this [component]{@link module:enyo/Component~Component} from its\r\n\t* [owner]{@link module:enyo/Component~Component#owner} (setting `owner` to `null`)\r\n\t* and does any necessary cleanup. The component is flagged with\r\n\t* `destroyed: true`. Usually, the component will be suitable for garbage\r\n\t* collection after being destroyed, unless user code keeps a reference\r\n\t* to it.\r\n\t*\r\n\t* @returns {this} The callee for chaining.\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.destroyComponents();\r\n\t\t\tthis.setOwner(null);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.stopAllJobs();\r\n\t\t\treturn this;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Destroys all owned [components]{@link module:enyo/Component~Component}.\r\n\t*\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tdestroyComponents: function () {\r\n\t\tvar comps = this.getComponents(),\r\n\t\t\tcomp,\r\n\t\t\ti;\r\n\r\n\t\tfor (i = 0; i < comps.length; ++i) {\r\n\t\t\tcomp = comps[i];\r\n\t\t\t// @todo: previous comment said list might be stale and ownership may have caused\r\n\t\t\t// components to be destroyed as a result of some inner-container...look into this\r\n\t\t\t// because that seems incorrect or avoidable\r\n\t\t\tif (!comp.destroyed) comp.destroy();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmakeId: function() {\r\n\t\tvar delim = '_', pre = this.owner && this.owner.getId(),\r\n\t\t\tbaseName = this.name || ('@@' + (++unnamedCounter));\r\n\t\treturn (pre ? pre + delim : '') + baseName;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\townerChanged: function (was) {\r\n\t\tif (was && was.removeComponent) was.removeComponent(this);\r\n\t\tif (this.owner && this.owner.addComponent) this.owner.addComponent(this);\r\n\t\tif (!this.id) this.id = this.makeId();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnameComponent: function (comp) {\r\n\t\tvar pre = prefixFromKindName(comp.kindName),\r\n\t\t\tlast = this._componentNameMap[pre] || 0,\r\n\t\t\tnom;\r\n\r\n\t\tdo {\r\n\t\t\tnom = pre + (++last > 1 ? String(last) : '');\r\n\t\t} while (this.$[nom]);\r\n\r\n\t\tthis._componentNameMap[pre] = Number(last);\r\n\t\t/*jshint -W093 */\r\n\t\treturn (comp.name = nom);\r\n\t},\r\n\r\n\t/**\r\n\t* Adds a [component]{@link module:enyo/Component~Component} to the list of components\r\n\t* owned by the current component (i.e., [this.$]{@link module:enyo/Component~Component#$}).\r\n\t*\r\n\t* @param {module:enyo/Component~Component} comp - The [component]{@link module:enyo/Component~Component} to add.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\taddComponent: function (comp) {\r\n\t\tvar nom = comp.get('name');\r\n\r\n\t\t// if there is no name we have to come up with a generic name\r\n\t\tif (!nom) nom = this.nameComponent(comp);\r\n\r\n\t\t// if there already was a component by that name we issue a warning\r\n\t\t// @todo: if we're going to name rules being violated we need to normalize this approach\r\n\t\t// and ensure we have one for every warning/error we throw\r\n\t\tif (this.$[nom]) this.warn(\r\n\t\t\t'Duplicate component name ' + nom + ' in owner ' + this.id + ' violates ' +\r\n\t\t\t'unique-name-under-owner rule, replacing existing component in the hash and ' +\r\n\t\t\t'continuing, but this is an error condition and should be fixed.'\r\n\t\t);\r\n\r\n\t\tthis.$[nom] = comp;\r\n\t\tthis.notify('$.' + nom, null, comp);\r\n\r\n\t\t// if the component has the `publish` true property then we also create a reference to\r\n\t\t// it directly on the owner (this)\r\n\t\tif (comp.publish) {\r\n\t\t\tthis[nom] = comp;\r\n\r\n\t\t\t// and to ensure that bindings are aware we have to notify them as well\r\n\t\t\tthis.notify(nom, null, comp);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Removes the passed-in [component]{@link module:enyo/Component~Component} from those known\r\n\t* to be owned by this component. The component will be removed from the\r\n\t* [$ hash]{@link module:enyo/Component~Component#$}, and from the [owner]{@link module:enyo/Component~Component#owner}\r\n\t* directly if [publish]{@link module:enyo/Component~Component#publish} is set to `true`.\r\n\t*\r\n\t* @param {module:enyo/Component~Component} comp - The component to remove.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tremoveComponent: function (comp) {\r\n\t\tvar nom = comp.get('name');\r\n\r\n\t\t// remove it from the hash if it existed\r\n\t\tdelete this.$[nom];\r\n\r\n\t\t// if it was published remove it from the component proper\r\n\t\tif (comp.publish) delete this[nom];\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns an [array]{@glossary Array} of owned [components]{@link module:enyo/Component~Component}; in\r\n\t* other words, converts the [$ hash]{@link module:enyo/Component~Component#$} into an array\r\n\t* and returns the array.\r\n\t*\r\n\t* @returns {module:enyo/Component~Component[]} The [components]{@link module:enyo/Component~Component} found in the\r\n\t*\t[$ hash]{@link module:enyo/Component~Component#$}.\r\n\t* @public\r\n\t*/\r\n\tgetComponents: function () {\r\n\t\treturn utils.values(this.$);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tadjustComponentProps: function (props) {\r\n\t\tif (this.defaultProps) utils.mixin(props, this.defaultProps, {ignore: true});\r\n\t\tprops.kind = props.kind || props.isa || this.defaultKind;\r\n\t\tprops.owner = props.owner || this;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_createComponent: function (props, ext) {\r\n\t\tvar def = ext ? utils.mixin({}, [ext, props]) : utils.clone(props);\r\n\r\n\t\t// always adjust the properties according to the needs of the kind and parent kinds\r\n\t\tthis.adjustComponentProps(def);\r\n\r\n\t\t// pass along for the final stage\r\n\t\treturn Component.create(def);\r\n\t},\r\n\r\n\t/**\r\n\t* Creates and returns a [component]{@link module:enyo/Component~Component} as defined by the combination of\r\n\t* a base and an additional property [hash]{@glossary Object}. The properties provided\r\n\t* in the standard property hash override those provided in the\r\n\t* additional property hash.\r\n\t*\r\n\t* The created component passes through initialization machinery\r\n\t* provided by the creating component, which may supply special\r\n\t* handling. Unless the [owner]{@link module:enyo/Component~Component#owner} is explicitly specified, the new\r\n\t* component will be owned by the instance on which this method is called.\r\n\t*\r\n\t* @example\r\n\t* // Create a new component named 'dynamic', owned by 'this'\r\n\t* // (will be available as this.$.dynamic).\r\n\t* this.createComponent({name: 'dynamic'});\r\n\t*\r\n\t* @example\r\n\t* // Create a new component named 'another' owned by 'other'\r\n\t* // (will be available as other.$.another).\r\n\t* this.createComponent({name: 'another'}, {owner: other});\r\n\t*\r\n\t* @param {Object} props - The declarative [kind]{@glossary kind} definition.\r\n\t* @param {Object} ext - Additional properties to be applied (defaults).\r\n\t* @returns {module:enyo/Component~Component} The instance created with the given parameters.\r\n\t* @public\r\n\t*/\r\n\tcreateComponent: function (props, ext) {\r\n\t\t// createComponent and createComponents both delegate to the protected method\r\n\t\t// (_createComponent), allowing overrides to customize createComponent and\r\n\t\t// createComponents separately.\r\n\t\treturn this._createComponent(props, ext);\r\n\t},\r\n\r\n\t/**\r\n\t* Creates [components]{@link module:enyo/Component~Component} as defined by the [arrays]{@glossary Array}\r\n\t* of base and additional property [hashes]{@glossary Object}. The standard and\r\n\t* additional property hashes are combined as described in\r\n\t* [createComponent()]{@link module:enyo/Component~Component#createComponent}.\r\n\t*\r\n\t* @example\r\n\t* // ask foo to create components 'bar' and 'zot', but set the owner of\r\n\t* // both components to 'this'.\r\n\t* this.$.foo.createComponents([\r\n\t*\t{name: 'bar'},\r\n\t*\t{name: 'zot'}\r\n\t* ], {owner: this});\r\n\t*\r\n\t* @param {Object[]} props The array of {@link module:enyo/Component~Component} definitions to be created.\r\n\t* @param {Object} ext - Additional properties to be supplied as defaults for each.\r\n\t* @returns {module:enyo/Component~Component[]} The array of [components]{@link module:enyo/Component~Component} that were\r\n\t*\tcreated.\r\n\t* @public\r\n\t*/\r\n\tcreateComponents: function (props, ext) {\r\n\t\tvar comps = [],\r\n\t\t\tcomp,\r\n\t\t\ti;\r\n\r\n\t\tif (props) {\r\n\t\t\tfor (i = 0; i < props.length; ++i) {\r\n\t\t\t\tcomp = props[i];\r\n\t\t\t\tcomps.push(this._createComponent(comp, ext));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn comps;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetBubbleTarget: function (nom, event) {\r\n\t\tif (event.delegate) return this.owner;\r\n\t\telse {\r\n\t\t\treturn (\r\n\t\t\t\tthis.bubbleTarget\r\n\t\t\t\t|| (this.cachedBubble && this.cachedBubbleTarget[nom])\r\n\t\t\t\t|| this.owner\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Bubbles an {@glossary event} up an [object]{@glossary Object} chain,\r\n\t* starting with `this`.\r\n\t*\r\n\t* A handler for an event may be specified. See {@link module:enyo/Component~Component~EventHandler}\r\n\t* for complete details.\r\n\t*\r\n\t* @param {String} nom - The name of the {@glossary event} to bubble.\r\n\t* @param {Object} [event] - The event [object]{@glossary Object} to be passed along\r\n\t* while bubbling.\r\n\t* @param {module:enyo/Component~Component} [sender=this] - The {@link module:enyo/Component~Component} responsible for\r\n\t*\tbubbling the event.\r\n\t* @returns {Boolean} `false` if unhandled or uninterrupted; otherwise, `true`.\r\n\t* @public\r\n\t*/\r\n\tbubble: function (nom, event, sender) {\r\n\t\tif (!this._silenced) {\r\n\t\t\tevent = event || {};\r\n\t\t\tevent.lastHandledComponent = null;\r\n\t\t\tevent.bubbling = true;\r\n\t\t\t// deliberately done this way\r\n\t\t\tif (event.originator == null) event.originator = sender || this;\r\n\t\t\treturn this.dispatchBubble(nom, event, sender || this);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* Bubbles an {@glossary event} up an [object]{@glossary Object} chain,\r\n\t* starting **above** `this`.\r\n\t*\r\n\t* A handler for an event may be specified. See {@link module:enyo/Component~Component~EventHandler}\r\n\t* for complete details.\r\n\t*\r\n\t* @param {String} nom - The name of the {@glossary event}.\r\n\t* @param {Object} [event] - The event properties to pass along while bubbling.\r\n\t* @returns {Boolean} `false` if unhandled or uninterrupted; otherwise, `true`.\r\n\t* @public\r\n\t*/\r\n\tbubbleUp: function (nom, event) {\r\n\t\tvar next;\r\n\r\n\t\tif (!this._silenced) {\r\n\t\t\tevent = event || {};\r\n\t\t\tevent.bubbling = true;\r\n\t\t\tnext = this.getBubbleTarget(nom, event);\r\n\t\t\tif (next) {\r\n\t\t\t\t// use delegate as sender if it exists to preserve illusion\r\n\t\t\t\t// that event is dispatched directly from that, but we still\r\n\t\t\t\t// have to bubble to get decorations\r\n\t\t\t\treturn next.dispatchBubble(nom, event, event.delegate || this);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* Sends an {@glossary event} to a named [delegate]{@glossary delegate}.\r\n\t* This [object]{@glossary Object} may dispatch an event to\r\n\t* itself via a [handler]{@link module:enyo/Component~Component~EventHandler}, or to its\r\n\t* [owner]{@link module:enyo/Component~Component#owner} via an event property, e.g.:\r\n\t*\r\n\t*\thandlers {\r\n\t*\t\t// 'tap' events dispatched to this.tapHandler\r\n\t*\t\tontap: 'tapHandler'\r\n\t*\t}\r\n\t*\r\n\t*\t// 'tap' events dispatched to 'tapHandler' delegate in this.owner\r\n\t*\tontap: 'tapHandler'\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdispatchEvent: function (nom, event, sender) {\r\n\t\tvar delegate,\r\n\t\t\tret;\r\n\r\n\t\tif (!this._silenced) {\r\n\t\t\t// if the event has a delegate associated with it we grab that\r\n\t\t\t// for reference\r\n\t\t\t// NOTE: This is unfortunate but we can't use a pooled object here because\r\n\t\t\t// we don't know where to release it\r\n\t\t\tdelegate = (event || (event = {})).delegate;\r\n\r\n\t\t\t// bottleneck event decoration w/ optimization to avoid call to empty function\r\n\t\t\tif (this.decorateEvent !== Component.prototype.decorateEvent) {\r\n\t\t\t\tthis.decorateEvent(nom, event, sender);\r\n\t\t\t}\r\n\r\n\t\t\t// first, handle any delegated events intended for this object\r\n\t\t\tif (delegate && delegate.owner === this) {\r\n\t\t\t\t// the most likely case is that we have a method to handle this\r\n\t\t\t\tif (this[nom] && 'function' === typeof this[nom]) {\r\n\t\t\t\t\treturn this.dispatch(nom, event, sender);\r\n\t\t\t\t}\r\n\t\t\t\t// but if we don't, just stop the event from going further\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// for non-delgated events, try the handlers block if possible\r\n\t\t\tif (!delegate) {\r\n\t\t\t\tvar bHandler = this.handlers && this.handlers[nom];\r\n\t\t\t\tvar bDelegatedFunction = this[nom] && utils.isString(this[nom]);\r\n\t\t\t\tvar cachePoint = this.cachePoint || bHandler || bDelegatedFunction || this.id === \"master\" ;\r\n\r\n\t\t\t\tif (event.bubbling) {\r\n\t\t\t\t\tif (event.lastHandledComponent && cachePoint) {\r\n\t\t\t\t\t\tevent.lastHandledComponent.cachedBubbleTarget[nom] = this;\r\n\t\t\t\t\t\tevent.lastHandledComponent = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!event.lastHandledComponent && this.id !== \"master\") {\r\n\t\t\t\t\t\tevent.lastHandledComponent = this;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (bHandler && this.dispatch(bHandler, event, sender)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif (bDelegatedFunction) {\r\n\t\t\t\t\t// we dispatch it up as a special delegate event with the\r\n\t\t\t\t\t// component that had the delegation string property stored in\r\n\t\t\t\t\t// the 'delegate' property\r\n\t\t\t\t\tevent.delegate = this;\r\n\t\t\t\t\tret = this.bubbleUp(this[nom], event, sender);\r\n\t\t\t\t\tdelete event.delegate;\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* Internal - try dispatching {@glossary event} to self; if that fails,\r\n\t* [bubble it up]{@link module:enyo/Component~Component#bubbleUp} the tree.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdispatchBubble: function (nom, event, sender) {\r\n\t\tif (!this._silenced) {\r\n\t\t\t// Try to dispatch from here, stop bubbling on truthy return value\r\n\t\t\tif (this.dispatchEvent(nom, event, sender)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t// Bubble to next target\r\n\t\t\treturn this.bubbleUp(nom, event, sender);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdecorateEvent: function (nom, event, sender) {\r\n\t\t// an event may float by us as part of a dispatchEvent chain\r\n\t\t// both call this method so intermediaries can decorate inEvent\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstopAllJobs: function () {\r\n\t\tvar job;\r\n\r\n\t\tif (this.__jobs) for (job in this.__jobs) this.stopJob(job);\r\n\t},\r\n\r\n\t/**\r\n\t* Dispatches the {@glossary event} to named [delegate]{@glossary delegate} `nom`,\r\n\t* if it exists. [Subkinds]{@glossary subkind} may re-route dispatches. Note that\r\n\t* both 'handlers' events and events delegated from owned controls arrive here.\r\n\t* If you need to handle these types of events differently, you may also need to\r\n\t* override [dispatchEvent()]{@link module:enyo/Component~Component#dispatchEvent}.\r\n\t*\r\n\t* @param {String} nom - The method name to dispatch the {@glossary event}.\r\n\t* @param {Object} [event] - The event [object]{@glossary Object} to pass along.\r\n\t* @param {module:enyo/Component~Component} [sender=this] - The originator of the event.\r\n\t* @public\r\n\t*/\r\n\tdispatch: function (nom, event, sender) {\r\n\t\tvar fn;\r\n\r\n\t\tif (!this._silenced) {\r\n\t\t\tfn = nom && this[nom];\r\n\t\t\tif (fn && typeof fn == 'function') {\r\n\t\t\t\t// @todo: deprecate sender\r\n\t\t\t\treturn fn.call(this, sender || this, event);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* Triggers the [handler]{@link module:enyo/Component~Component~EventHandler} for a given\r\n\t* {@glossary event} type.\r\n\t*\r\n\t* @example\r\n\t* myControl.triggerHandler('ontap');\r\n\t*\r\n\t* @param {String} nom - The name of the {@glossary event} to trigger.\r\n\t* @param {Object} [event] - The event object to pass along.\r\n\t* @param {module:enyo/Component~Component} [sender=this] - The originator of the event.\r\n\t* @returns {Boolean} `false` if unhandled or uninterrupted, `true` otherwise.\r\n\t* @public\r\n\t*/\r\n\ttriggerHandler: function () {\r\n\t\treturn this.dispatchEvent.apply(this, arguments);\r\n\t},\r\n\r\n\t/**\r\n\t* Sends a message to myself and all of my [components]{@link module:enyo/Component~Component}.\r\n\t* You can stop a waterfall into components owned by a receiving object\r\n\t* by returning a truthy value from the {@glossary event}\r\n\t* [handler]{@link module:enyo/Component~Component~EventHandler}.\r\n\t*\r\n\t* @param {String} nom - The name of the {@glossary event} to waterfall.\r\n\t* @param {Object} [event] - The event [object]{@glossary Object} to pass along.\r\n\t* @param {module:enyo/Component~Component} [sender=this] - The originator of the event.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\twaterfall: function(nom, event, sender) {\r\n\t\tif (!this._silenced) {\r\n\t\t\tevent = event || {};\r\n\t\t\tevent.bubbling = false;\r\n\r\n\t\t\t// give the locals an opportunity to interrupt the event\r\n\t\t\tif (this.dispatchEvent(nom, event, sender)) return true;\r\n\r\n\t\t\t// otherwise carry on\r\n\t\t\tthis.waterfallDown(nom, event, sender || this);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Sends a message to all of my [components]{@link module:enyo/Component~Component}, but not myself. You can\r\n\t* stop a [waterfall]{@link module:enyo/Component~Component#waterfall} into [components]{@link module:enyo/Component~Component}\r\n\t* owned by a receiving [object]{@glossary Object} by returning a truthy value from the\r\n\t* {@glossary event} [handler]{@link module:enyo/Component~Component~EventHandler}.\r\n\t*\r\n\t* @param {String} nom - The name of the {@glossary event}.\r\n\t* @param {Object} [event] - The event [object]{@glossary Object} to pass along.\r\n\t* @param {module:enyo/Component~Component} [sender=this] - The event originator.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\twaterfallDown: function(nom, event, sender) {\r\n\t\tvar comp;\r\n\t\tevent = event || {};\r\n\t\tevent.bubbling = false;\r\n\r\n\t\tif (!this._silenced) {\r\n\t\t\tfor (comp in this.$) this.$[comp].waterfall(nom, event, sender || this);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_silenced: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_silenceCount: 0,\r\n\r\n\t/**\r\n\t* Sets a flag that disables {@glossary event} propagation for this\r\n\t* [component]{@link module:enyo/Component~Component}. Also increments an internal counter that tracks\r\n\t* the number of times the [unsilence()]{@link module:enyo/Component~Component#unsilence} method must\r\n\t* be called before event propagation will continue.\r\n\t*\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tsilence: function () {\r\n\t\tthis._silenced = true;\r\n\t\tthis._silenceCount += 1;\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Determines if the [object]{@glossary Object} is currently\r\n\t* [silenced]{@link module:enyo/Component~Component#_silenced}, which will prevent propagation of\r\n\t* [events]{@glossary event} (of any kind).\r\n\t*\r\n\t* @returns {Boolean} `true` if silenced; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\tisSilenced: function () {\r\n\t\treturn this._silenced;\r\n\t},\r\n\r\n\t/**\r\n\t* Allows {@glossary event} propagation for this [component]{@link module:enyo/Component~Component}\r\n\t* if the internal silence counter is `0`; otherwise, decrements the counter by one.\r\n\t* For event propagation to resume, this method must be called one time each call to\r\n\t* [silence()]{@link module:enyo/Component~Component#silence}.\r\n\t*\r\n\t* @returns {Boolean} `true` if the {@link module:enyo/Component~Component} is now unsilenced completely;\r\n\t*\t`false` if it remains silenced.\r\n\t* @public\r\n\t*/\r\n\tunsilence: function () {\r\n\t\tif (0 !== this._silenceCount) --this._silenceCount;\r\n\t\tif (0 === this._silenceCount) this._silenced = false;\r\n\t\treturn !this._silenced;\r\n\t},\r\n\r\n\t/**\r\n\t* Creates a new [job]{@link module:enyo/job} tied to this instance of the\r\n\t* [component]{@link module:enyo/Component~Component}. If the component is\r\n\t* [destroyed]{@link module:enyo/Component~Component#destroy}, any jobs associated with it\r\n\t* will be stopped.\r\n\t*\r\n\t* If you start a job with the same name as a pending job,\r\n\t* the original job will be stopped; this can be useful for resetting\r\n\t* timeouts.\r\n\t*\r\n\t* You may supply a priority level (1-10) at which the job should be\r\n\t* executed. The default level is `5`. Setting the priority lower than `5` (or setting it to\r\n\t* the string `\"low\"`) will defer the job if an animation is in progress,\r\n\t* which can help to avoid stuttering.\r\n\t*\r\n\t* @param {String} nom - The name of the [job]{@link module:enyo/job} to start.\r\n\t* @param {(Function|String)} job - Either the name of a method or a\r\n\t*\t[function]{@glossary Function} to execute as the requested job.\r\n\t* @param {Number} wait - The number of milliseconds to wait before starting\r\n\t*\tthe job.\r\n\t* @param {Number} [priority=5] The priority value to be associated with this\r\n\t*\tjob.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tstartJob: function (nom, job, wait, priority) {\r\n\t\tvar jobs = (this.__jobs = this.__jobs || {});\r\n\t\tpriority = priority || 5;\r\n\t\t// allow strings as job names, they map to local method names\r\n\t\tif (typeof job == 'string') job = this[job];\r\n\t\t// stop any existing jobs with same name\r\n\t\tthis.stopJob(nom);\r\n\t\tjobs[nom] = setTimeout(this.bindSafely(function() {\r\n\t\t\tJobs.add(this.bindSafely(job), priority, nom);\r\n\t\t}), wait);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Stops a [component]{@link module:enyo/Component~Component}-specific [job]{@link module:enyo/job} before it has\r\n\t* been activated.\r\n\t*\r\n\t* @param {String} nom - The name of the [job]{@link module:enyo/job} to be stopped.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tstopJob: function (nom) {\r\n\t\tvar jobs = (this.__jobs = this.__jobs || {});\r\n\t\tif (jobs[nom]) {\r\n\t\t\tclearTimeout(jobs[nom]);\r\n\t\t\tdelete jobs[nom];\r\n\t\t}\r\n\t\tJobs.remove(nom);\r\n\t},\r\n\r\n\t/**\r\n\t* Executes the specified [job]{@link module:enyo/job} immediately, then prevents\r\n\t* any other calls to `throttleJob()` with the same job name from running for\r\n\t* the specified amount of time.\r\n\t*\r\n\t* @param {String} nom - The name of the [job]{@link module:enyo/job} to throttle.\r\n\t* @param {(Function|String)} job - Either the name of a method or a\r\n\t*\t[function]{@glossary Function} to execute as the requested job.\r\n\t* @param {Number} wait - The number of milliseconds to wait before executing the\r\n\t*\tjob again.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tthrottleJob: function (nom, job, wait) {\r\n\t\tvar jobs = (this.__jobs = this.__jobs || {});\r\n\t\t// if we still have a job with this name pending, return immediately\r\n\t\tif (!jobs[nom]) {\r\n\t\t\t// allow strings as job names, they map to local method names\r\n\t\t\tif (typeof job == 'string') job = this[job];\r\n\t\t\tjob.call(this);\r\n\t\t\tjobs[nom] = setTimeout(this.bindSafely(function() {\r\n\t\t\t\tthis.stopJob(nom);\r\n\t\t\t}), wait);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\nComponent.prototype.defaultKind = Component;\r\n\r\n/**\r\n* @private\r\n*/\r\nkind.setDefaultCtor(Component);\r\n\r\n/**\r\n* Creates new instances from [config]{@glossary configurationBlock}\r\n* [objects]{@glossary Object}. This method looks up the proper\r\n* [constructor]{@glossary constructor} based on the provided [kind]{@glossary kind}\r\n* attribute.\r\n*\r\n* @name module:enyo/Compoment~Component.create\r\n* @param {Object} props - The properties that define the [kind]{@glossary kind}.\r\n* @returns {*} An instance of the requested [kind]{@glossary kind}.\r\n* @public\r\n*/\r\nComponent.create = function (props) {\r\n\tvar theKind,\r\n\t\tCtor;\r\n\r\n\tif (!props.kind && props.hasOwnProperty('kind')) throw new Error(\r\n\t\t'enyo.create: Attempt to create a null kind. Check dependencies for [' + props.name + ']'\r\n\t);\r\n\r\n\ttheKind = props.kind || props.isa || kind.getDefaultCtor();\r\n\tCtor = kind.constructorForKind(theKind);\r\n\r\n\tif (!Ctor) {\r\n\t\tlogger.error('No constructor found for kind ' + theKind);\r\n\t\tCtor = Component;\r\n\t}\r\n\r\n\treturn new Ctor(props);\r\n};\r\n\r\n/**\r\n* @name module:enyo/Component~Component.subclass\r\n* @static\r\n* @private\r\n*/\r\nComponent.subclass = function (ctor, props) {\r\n\t// Note: To reduce API surface area, sub-components are declared only as\r\n\t// 'components' in both kind and instance declarations.\r\n\t//\r\n\t// However, 'components' from kind declarations must be handled separately\r\n\t// at creation time.\r\n\t//\r\n\t// We rename the property here to avoid having\r\n\t// to interrogate the prototype at creation time.\r\n\t//\r\n\tvar proto = ctor.prototype;\r\n\t//\r\n\tif (props.components) {\r\n\t\tproto.kindComponents = props.components;\r\n\t\tdelete proto.components;\r\n\t} else {\r\n\t\t// Feature to mixin overrides of super-kind component properties from named hash\r\n\t\t// (only applied when the sub-kind doesn't supply its own components block)\r\n\t\tif (props.componentOverrides) {\r\n\t\t\tproto.kindComponents = Component.overrideComponents(\r\n\t\t\t\tproto.kindComponents,\r\n\t\t\t\tprops.componentOverrides,\r\n\t\t\t\tproto.defaultKind\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n};\r\n\r\n/**\r\n* @name module:enyo/Component~Component.concat\r\n* @static\r\n* @private\r\n*/\r\nComponent.concat = function (ctor, props) {\r\n\tvar proto = ctor.prototype || ctor,\r\n\t\thandlers;\r\n\tif (props.handlers) {\r\n\t\thandlers = proto.handlers ? utils.clone(proto.handlers) : {};\r\n\t\tproto.handlers = utils.mixin(handlers, props.handlers);\r\n\t\tdelete props.handlers;\r\n\t}\r\n\tif (props.events) Component.publishEvents(proto, props);\r\n};\r\n\r\n/**\r\n* @name module:enyo/Component~Component.overrideComponents\r\n* @static\r\n* @private\r\n*/\r\nComponent.overrideComponents = function (components, overrides, defaultKind) {\r\n\tvar omitMethods = function (k, v) {\r\n\t\tvar isMethod = \r\n\t\t\t// If it's a function, then it's a method (unless it's\r\n\t\t\t// a constructor passed as value for 'kind')\r\n\t\t\t(utils.isFunction(v) && (k !== 'kind')) ||\r\n\t\t\t// If it isInherited(), then it's also a method (since\r\n\t\t\t// Inherited is an object wrapper for a function)\r\n\t\t\tkind.isInherited(v);\r\n\r\n\t\treturn !isMethod;\r\n\t};\r\n\tcomponents = utils.clone(components);\r\n\tfor (var i=0; i<components.length; i++) {\r\n\t\tvar c = utils.clone(components[i]);\r\n\t\tvar o = overrides[c.name];\r\n\t\tvar ctor = kind.constructorForKind(c.kind || defaultKind);\r\n\t\tif (o) {\r\n\r\n\t\t\t// NOTE: You cannot overload mixins, observers or computed properties from\r\n\t\t\t// component overrides\r\n\t\t\tkind.concatHandler(c, o);\r\n\t\t\tvar b = (c.kind && ((typeof c.kind == 'string' && utils.getPath(c.kind)) || (typeof c.kind == 'function' && c.kind))) || kind.getDefaultCtor();\r\n\t\t\twhile (b) {\r\n\t\t\t\tif (b.concat) { b.concat(c, o, true); }\r\n\t\t\t\tb = b.prototype.base;\r\n\t\t\t}\r\n\t\t\t// All others just mix in\r\n\t\t\tutils.mixin(c, o, {filter: omitMethods});\r\n\t\t}\r\n\t\tif (c.components) {\r\n\t\t\tc.components = Component.overrideComponents(c.components, overrides, ctor.prototype.defaultKind);\r\n\t\t}\r\n\t\tcomponents[i] = c;\r\n\t}\r\n\treturn components;\r\n};\r\n\r\n/**\r\n* @name module:enyo/Component~Component.publishEvents\r\n* @static\r\n* @private\r\n*/\r\nComponent.publishEvents = function (ctor, props) {\r\n\tvar events = props.events,\r\n\t\tevent,\r\n\t\tproto;\r\n\tif (events) {\r\n\t\tproto = ctor.prototype || ctor;\r\n\t\tfor (event in events) Component.addEvent(event, events[event], proto);\r\n\t}\r\n};\r\n\r\n/**\r\n* @name module:enyo/Component~Component.addEvent\r\n* @static\r\n* @private\r\n*/\r\nComponent.addEvent = function (nom, val, proto) {\r\n\tvar v, fn;\r\n\tif (!utils.isString(val)) {\r\n\t\tv = val.value;\r\n\t\tfn = val.caller;\r\n\t} else {\r\n\t\tif (nom.slice(0, 2) != 'on') {\r\n\t\t\tlogger.warn('enyo/Component.addEvent: event names must start with \"on\". ' + proto.kindName + ' ' +\r\n\t\t\t\t'event \"' + nom + '\" was auto-corrected to \"on' + nom + '\".');\r\n\t\t\tnom = 'on' + nom;\r\n\t\t}\r\n\t\tv = val;\r\n\t\tfn = 'do' + utils.cap(nom.slice(2));\r\n\t}\r\n\tproto[nom] = v;\r\n\tif (!proto[fn]) {\r\n\t\tproto[fn] = function(payload, other) {\r\n\t\t\t// bubble this event\r\n\r\n\t\t\t// if the second parameter exists then we use that - this is for a single case\r\n\t\t\t// where a named event delegates happent to point to an auto generated event\r\n\t\t\t// bubbler like this one - in that case the first parameter is actually the\r\n\t\t\t// sender\r\n\t\t\tvar e = other || payload;\r\n\t\t\tif (!e) {\r\n\t\t\t\te = {};\r\n\t\t\t}\r\n\t\t\tvar d = e.delegate;\r\n\t\t\t// delete payload.delegate;\r\n\t\t\te.delegate = undefined;\r\n\t\t\tif (!utils.exists(e.type)) {\r\n\t\t\t\te.type = nom;\r\n\t\t\t}\r\n\t\t\tthis.bubble(nom, e);\r\n\t\t\tif (d) {\r\n\t\t\t\te.delegate = d;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nfunction prefixFromKindName (nom) {\r\n\tvar pre = kindPrefix[nom],\r\n\t\tlast;\r\n\r\n\tif (!pre) {\r\n\t\tlast = nom.lastIndexOf('.');\r\n\t\tpre = (last >= 0) ? nom.slice(last+1) : nom;\r\n\t\tpre = pre.charAt(0).toLowerCase() + pre.slice(1);\r\n\t\tkindPrefix[nom] = pre;\r\n\t}\r\n\r\n\treturn pre;\r\n}\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Ajax~Ajax} kind.\r\n* @module enyo/Ajax\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils'),\r\n\tjson = require('./json'),\r\n\tlogger = require('./logger');\r\n\r\nvar\r\n\tAjaxProperties = require('./AjaxProperties'),\r\n\tAsync = require('./Async'),\r\n\t/*jshint -W079*/\r\n\t// this defaults to providing the native FormData if it exists\r\n\tFormData = require('./FormData'),\r\n\t/*jshint +W079*/\r\n\tXhr = require('./xhr');\r\n\t\r\n\r\n/**\r\n* A cache of response properties set on the {@link module:enyo/Ajax~Ajax} instance once it has completed\r\n* its request.\r\n*\r\n* @typedef {Object} module:enyo/Ajax~Ajax~xhrResponseType\r\n* @property {Number} status - The response status.\r\n* @property {Object} headers - The headers used for the request.\r\n* @property {String} body - The request body.\r\n* @public\r\n*/\r\n\r\n/**\r\n* A [kind]{@glossary kind} designed to expose the native\r\n* [XMLHttpRequest]{@glossary XMLHttpRequest} API. Available configuration options\r\n* are exposed by [enyo/AjaxProperties]{@link module:enyo/AjaxProperties}.\r\n*\r\n* This kind does not extend {@link module:enyo/Component~Component} and cannot be used\r\n* in the [components block]{@link module:enyo/Component~Component#components}.\r\n*\r\n* For more information, see the documentation on [Consuming Web\r\n* Services]{@linkplain $dev-guide/building-apps/managing-data/consuming-web-services.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @class Ajax\r\n* @extends module:enyo/Async~Async\r\n* @public\r\n*/\r\nvar Ajax = module.exports = kind(\r\n\t/** @lends module:enyo/Ajax~Ajax.prototype */ {\r\n\t\r\n\tname: 'enyo.Ajax',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Async,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: AjaxProperties,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function (inParams) {\r\n\t\t\tutils.mixin(this, inParams);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\t// explicilty release any XHR refs\r\n\t\t\tthis.xhr = null;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* This will be set once a request has completed (successfully or unsuccessfully).\r\n\t* It is a cache of the response values.\r\n\t*\r\n\t* @type module:enyo/Ajax~Ajax~xhrResponseType\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\txhrResponse: null,\r\n\t\r\n\t/**\r\n\t* Executes the request with the given options. The parameter may be a\r\n\t* [hash]{@glossary Object} of properties or a [string]{@glossary String}. Both\r\n\t* represent the query string, with the hash being serialized and the string\r\n\t* being used directly.\r\n\t*\r\n\t* ```javascript\r\n\t* var query = {q: 'searchTerm'}; // -> \"?q=searchTerm\"\r\n\t* ```\r\n\t*\r\n\t* To provide a `POST` body, see {@link module:enyo/AjaxProperties#postBody}.\r\n\t*\r\n\t* When the request is completed, it will set the\r\n\t* [xhrResponse]{@link module:enyo/Ajax~Ajax#xhrResponse} property.\r\n\t*\r\n\t* @see module:enyo/AjaxProperties\r\n\t* @see module:enyo/Ajax~Ajax~xhrResponse\r\n\t* @param {(Object|String)} [params] - A [string]{@glossary String} or\r\n\t*\t[hash]{@glossary Object} to be used as the query string.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tgo: function (params) {\r\n\t\tthis.failed = false;\r\n\t\tthis.startTimer();\r\n\t\tthis.request(params);\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trequest: function (params) {\r\n\t\tvar parts = this.url.split('?');\r\n\t\tvar uri = parts.shift() || '';\r\n\t\tvar args = parts.length ? (parts.join('?').split('&')) : [];\r\n\t\t//\r\n\t\tvar query = null;\r\n\t\t//\r\n\t\tif(utils.isString(params)){\r\n\t\t\t//If params parameter is a string, use it as request body\r\n\t\t\tquery = params;\r\n\t\t}\r\n\t\telse{\r\n\t\t\t//If params parameter is not a string, build a query from it\r\n\t\t\tif(params){\r\n\t\t\t\tquery = Ajax.objectToQuery(params);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//\r\n\t\tif (query) {\r\n\t\t\targs.push(query);\r\n\t\t\tquery = null;\r\n\t\t}\r\n\t\tif (this.cacheBust) {\r\n\t\t\targs.push(Math.random());\r\n\t\t}\r\n\t\t//\r\n\t\tvar url = args.length ? [uri, args.join('&')].join('?') : uri;\r\n\t\t//\r\n\t\tvar xhr_headers = {};\r\n\t\tvar body;\r\n\t\tif (this.method != 'GET') {\r\n\t\t\tbody = this.postBody;\r\n\t\t\tif (this.method === 'POST' && body instanceof FormData) {\r\n\t\t\t\tif (body.fake) {\r\n\t\t\t\t\txhr_headers['Content-Type'] = body.getContentType();\r\n\t\t\t\t\tbody = body.toString();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Nothing to do as the\r\n\t\t\t\t\t// content-type will be\r\n\t\t\t\t\t// automagically set according\r\n\t\t\t\t\t// to the FormData\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\txhr_headers['Content-Type'] = this.contentType;\r\n\t\t\t\tif (body instanceof Object) {\r\n\t\t\t\t\tif (this.contentType.match(/^application\\/json(;.*)?$/) !== null) {\r\n\t\t\t\t\t\tbody = JSON.stringify(body);\r\n\t\t\t\t\t} else if (this.contentType === 'application/x-www-form-urlencoded') {\r\n\t\t\t\t\t\tbody = Ajax.objectToQuery(body);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tbody = body.toString();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tutils.mixin(xhr_headers, this.headers);\r\n\t\t// don't pass in headers structure if there are no headers defined as this messes\r\n\t\t// up CORS code for IE9\r\n\t\tif (utils.keys(xhr_headers).length === 0) {\r\n\t\t\txhr_headers = undefined;\r\n\t\t}\r\n\t\t//\r\n\t\ttry {\r\n\t\t\tthis.xhr = Xhr.request({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: this.method,\r\n\t\t\t\tcallback: this.bindSafely('receive'),\r\n\t\t\t\tbody: body,\r\n\t\t\t\theaders: xhr_headers,\r\n\t\t\t\tsync: this.sync,\r\n\t\t\t\tusername: this.username,\r\n\t\t\t\tpassword: this.password,\r\n\t\t\t\txhrFields: utils.mixin({onprogress: this.bindSafely(this.updateProgress)}, this.xhrFields),\r\n\t\t\t\tmimeType: this.mimeType\r\n\t\t\t});\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\t// IE can throw errors here if the XHR would fail CORS checks,\r\n\t\t\t// so catch and turn into a failure.\r\n\t\t\tthis.fail(e);\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\treceive: function (inText, inXhr) {\r\n\t\tif (!this.failed && !this.destroyed) {\r\n\t\t\tvar body;\r\n\t\t\tif (inXhr.responseType === 'arraybuffer') {\r\n\t\t\t\tbody = inXhr.response;\r\n\t\t\t} else if (typeof inXhr.responseText === 'string') {\r\n\t\t\t\tbody = inXhr.responseText;\r\n\t\t\t} else {\r\n\t\t\t\t// IE carrying a binary\r\n\t\t\t\tbody = inXhr.responseBody;\r\n\t\t\t}\r\n\t\t\tthis.xhrResponse = {\r\n\t\t\t\tstatus: inXhr.status,\r\n\t\t\t\theaders: Ajax.parseResponseHeaders(inXhr),\r\n\t\t\t\tbody: body\r\n\t\t\t};\r\n\t\t\tif (this.isFailure(inXhr)) {\r\n\t\t\t\tthis.fail(inXhr.status);\r\n\t\t\t} else {\r\n\t\t\t\tthis.respond(this.xhrToResponse(inXhr));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfail: kind.inherit(function (sup) {\r\n\t\treturn function (inError) {\r\n\t\t\t// on failure, explicitly cancel the XHR to prevent\r\n\t\t\t// further responses.  cancellation also resets the\r\n\t\t\t// response headers & body,\r\n\t\t\tif (this.xhr) {\r\n\t\t\t\tXhr.cancel(this.xhr);\r\n\t\t\t\tthis.xhr = null;\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\txhrToResponse: function (inXhr) {\r\n\t\tif (inXhr) {\r\n\t\t\treturn this[(this.handleAs || 'text') + 'Handler'](inXhr);\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisFailure: function (inXhr) {\r\n\t\t// if any exceptions are thrown while checking fields in the xhr,\r\n\t\t// assume a failure.\r\n\t\ttry {\r\n\t\t\tif (inXhr.responseType === 'arraybuffer') {\r\n\t\t\t\t// if we are loading binary data, don't try to access inXhr.responseText\r\n\t\t\t\t// because that throws an exception on webkit. Instead, just look for\r\n\t\t\t\t// the response.\r\n\t\t\t\tif (inXhr.status === 0 && !inXhr.response) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar text = '';\r\n\t\t\t\t// work around IE9 bug where accessing responseText will thrown error\r\n\t\t\t\t// for binary requests.\r\n\t\t\t\tif (typeof inXhr.responseText === 'string') {\r\n\t\t\t\t\ttext = inXhr.responseText;\r\n\t\t\t\t}\r\n\t\t\t\t// Follow same failure policy as jQuery's Ajax code\r\n\t\t\t\t// CORS failures on FireFox will have status 0 and no responseText,\r\n\t\t\t\t// so treat that as failure.\r\n\t\t\t\tif (inXhr.status === 0 && text === '') {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Otherwise, status 0 may be good for local file access.  We treat the range\r\n\t\t\t// 1-199 and 300+ as failure (only 200-series code are OK).\r\n\t\t\treturn (inXhr.status !== 0) && (inXhr.status < 200 || inXhr.status >= 300);\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\txmlHandler: function (inXhr) {\r\n\t\treturn inXhr.responseXML;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttextHandler: function (inXhr) {\r\n\t\treturn inXhr.responseText;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tjsonHandler: function (inXhr) {\r\n\t\tvar r = inXhr.responseText;\r\n\t\ttry {\r\n\t\t\treturn r && json.parse(r);\r\n\t\t} catch (x) {\r\n\t\t\tlogger.warn('Ajax request set to handleAs JSON but data was not in JSON format');\r\n\t\t\treturn r;\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbinaryHandler: function (inXhr) {\r\n\t\treturn inXhr.response;\r\n\t}, \r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdateProgress: function (event) {\r\n\t\t// filter out 'input' as it causes exceptions on some Firefox versions\r\n\t\t// due to unimplemented internal APIs\r\n\t\tvar ev = {};\r\n\t\tfor (var k in event) {\r\n\t\t\tif (k !== 'input') {\r\n\t\t\t\tev[k] = event[k];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.sendProgress(event.loaded, 0, event.total, ev);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstatics: /** @lends module:enyo/Ajax~Ajax */ {\r\n\t\t/**\r\n\t\t* Takes an object and converts it to an encoded URI string. NOTE: It does not traverse into\r\n\t\t* objects or arrays, so nested objects will be rendered as the string 'object Object', which\r\n\t\t* is not terribly useful.\r\n\t\t* @public\r\n\t\t*/\r\n\t\tobjectToQuery: function (/*Object*/ map) {\r\n\t\t\tvar enc = encodeURIComponent;\r\n\t\t\tvar pairs = [];\r\n\t\t\tvar backstop = {};\r\n\t\t\tfor (var name in map){\r\n\t\t\t\tvar value = map[name];\r\n\t\t\t\tif (value != backstop[name]) {\r\n\t\t\t\t\tvar assign = enc(name) + '=';\r\n\t\t\t\t\tif (utils.isArray(value)) {\r\n\t\t\t\t\t\tfor (var i=0; i < value.length; i++) {\r\n\t\t\t\t\t\t\tpairs.push(assign + enc(value[i]));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpairs.push(assign + enc(value));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn pairs.join('&');\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprotectedStatics: {\r\n\t\tparseResponseHeaders: function (xhr) {\r\n\t\t\tvar headers = {};\r\n\t\t\tvar headersStr = [];\r\n\t\t\tif (xhr.getAllResponseHeaders) {\r\n\t\t\t\theadersStr = xhr.getAllResponseHeaders().split(/\\r?\\n/);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < headersStr.length; i++) {\r\n\t\t\t\tvar headerStr = headersStr[i];\r\n\t\t\t\tvar index = headerStr.indexOf(': ');\r\n\t\t\t\tif (index > 0) {\r\n\t\t\t\t\tvar key = headerStr.substring(0, index).toLowerCase();\r\n\t\t\t\t\tvar val = headerStr.substring(index + 2);\r\n\t\t\t\t\theaders[key] = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn headers;\r\n\t\t}\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Signals~Signals} kind.\r\n* @module enyo/Signals\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\nvar\r\n\tComponent = require('./Component');\r\n\r\n/**\r\n* {@link module:enyo/Signals~Signals} is a [component]{@link module:enyo/Component~Component} used to listen\r\n* to global messages.\r\n* \r\n* An object with a Signals component can listen to messages sent from anywhere\r\n* by declaring handlers for them.\r\n* \r\n* DOM [events]{@glossary event} that have no node targets are broadcast as\r\n* signals. These events include Window events, such as `onload` and\r\n* `onbeforeunload`, as well as events that occur directly on `document`, such\r\n* as `onkeypress` if `document` has the focus.\r\n* \r\n* For more information, see the documentation on [Event\r\n* Handling]{@linkplain $dev-guide/key-concepts/event-handling.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class Signals\r\n* @extends module:enyo/Component~Component\r\n* @public\r\n*/\r\nvar Signals = module.exports = kind(\r\n\t/** @lends module:enyo/Signals~Signals.prototype */ {\r\n\r\n\tname: 'enyo.Signals',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Component,\r\n\r\n\t/**\r\n\t* Needed because of early calls to bind DOM {@glossary event} listeners\r\n\t* to the [enyo.Signals.send()]{@link module:enyo/Signals~Signals#send} call.\r\n\t* \r\n\t* @private\r\n\t*/\r\n\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tSignals.addListener(this);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tSignals.removeListener(this);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnotify: function (msg, load) {\r\n\t\tthis.dispatchEvent(msg, load);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprotectedStatics: {\r\n\t\tlisteners: [],\r\n\t\taddListener: function(listener) {\r\n\t\t\tthis.listeners.push(listener);\r\n\t\t},\r\n\t\tremoveListener: function(listener) {\r\n\t\t\tutils.remove(listener, this.listeners);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstatics: \r\n\t\t/** @lends module:enyo/Signals~Signals.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* Broadcasts a global message to be consumed by subscribers.\r\n\t\t* \r\n\t\t* @param {String} msg - The message to send; usually the name of the\r\n\t\t*\t{@glossary event}.\r\n\t\t* @param {Object} load - An [object]{@glossary Object} containing any\r\n\t\t*\tassociated event properties to be accessed by subscribers.\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsend: function (msg, load) {\r\n\t\t\tutils.forEach(this.listeners, function(l) {\r\n\t\t\t\tl.notify(msg, load);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/MultipleDispatchComponent~MultipleDispatchComponent} kind.\r\n* @module enyo/MultipleDispatchComponent\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind');\r\n\r\nvar\r\n\tComponent = require('./Component'),\r\n\tMultipleDispatchSupport = require('./MultipleDispatchSupport');\r\n\r\n/**\r\n* {@link module:enyo/MultipleDispatchComponent~MultipleDispatchComponent} is a purely abstract\r\n* {@glossary kind} that simply provides a common ancestor for\r\n* {@link module:enyo/Component~Component} [objects]{@glossary Object} that need \r\n* the [MultipleDispatchSupport]{@link module:enyo/MultipleDispatchSupport~MultipleDispatchSupport}\r\n* {@glossary mixin}.\r\n*\r\n* @class MultipleDispatchComponent\r\n* @extends module:enyo/Component~Component\r\n* @mixes module:enyo/MultipleDispatchSupport~MultipleDispatchSupport\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/MultipleDispatchComponent~MultipleDispatchComponent */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Component,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: [MultipleDispatchSupport]\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/ScrollMath~ScrollMath} kind.\r\n* @module enyo/ScrollMath\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils'),\r\n\tplatform = require('./platform'),\r\n\tanimation = require('./animation');\r\n\r\nvar\r\n\tComponent = require('./Component');\r\n\r\n/**\r\n* Fires when a scrolling action starts.\r\n*\r\n* @event module:enyo/ScrollMath~ScrollMath#onScrollStart\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {module:enyo/Scroller~Scroller~ScrollEvent} event - An [object]{@glossary Object} containing\r\n*\tevent information.\r\n* @private\r\n*/\r\n\r\n/**\r\n* Fires while a scrolling action is in progress.\r\n*\r\n* @event module:enyo/ScrollMath~ScrollMath#onScroll\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {module:enyo/Scroller~Scroller~ScrollEvent} event - An [object]{@glossary Object} containing\r\n*\tevent information.\r\n* @private\r\n*/\r\n\r\n/**\r\n* Fires when a scrolling action stops.\r\n*\r\n* @event module:enyo/ScrollMath~ScrollMath#onScrollStop\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {module:enyo/Scroller~Scroller~ScrollEvent} event - An [object]{@glossary Object} containing\r\n*\tevent information.\r\n* @private\r\n*/\r\n\r\n/**\r\n* {@link module:enyo/ScrollMath~ScrollMath} implements a scrolling dynamics simulation. It is a\r\n* helper [kind]{@glossary kind} used by other [scroller]{@link module:enyo/Scroller~Scroller}\r\n* kinds, such as {@link module:enyo/TouchScrollStrategy~TouchScrollStrategy}.\r\n*\r\n* `enyo/ScrollMath` is not typically created in application code.\r\n*\r\n* @class ScrollMath\r\n* @protected\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/ScrollMath~ScrollMath.prototype */ {\r\n\r\n\tname: 'enyo.ScrollMath',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Component,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished:\r\n\t\t/** @lends module:enyo/ScrollMath~ScrollMath.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to enable vertical scrolling.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @private\r\n\t\t*/\r\n\t\tvertical: true,\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to enable horizontal scrolling.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @private\r\n\t\t*/\r\n\t\thorizontal: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonScrollStart: '',\r\n\t\tonScroll: '',\r\n\t\tonScrollStop: '',\r\n\t\tonStabilize: ''\r\n\t},\r\n\r\n\t/**\r\n\t* \"Spring\" damping returns the scroll position to a value inside the boundaries. Lower\r\n\t* values provide faster snapback.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tkSpringDamping: 0.93,\r\n\r\n\t/**\r\n\t* \"Drag\" damping resists dragging the scroll position beyond the boundaries. Lower values\r\n\t* provide more resistance.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tkDragDamping: 0.5,\r\n\r\n\t/**\r\n\t* \"Friction\" damping reduces momentum over time. Lower values provide more friction.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tkFrictionDamping: 0.97,\r\n\r\n\t/**\r\n\t* Additional \"friction\" damping applied when momentum carries the viewport into overscroll.\r\n\t* Lower values provide more friction.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tkSnapFriction: 0.9,\r\n\r\n\t/**\r\n\t* Scalar applied to `flick` event velocity.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tkFlickScalar: 15,\r\n\r\n\t/**\r\n\t* Limits the maximum allowable flick. On Android > 2, we limit this to prevent compositing\r\n\t* artifacts.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tkMaxFlick: platform.android > 2 ? 2 : 1e9,\r\n\r\n\t/**\r\n\t* The value used in [friction()]{@link module:enyo/ScrollMath~ScrollMath#friction} to determine if the delta\r\n\t* (e.g., y - y0) is close enough to zero to consider as zero.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tkFrictionEpsilon: platform.webos >= 4 ? 1e-1 : 1e-2,\r\n\r\n\t/**\r\n\t* Top snap boundary, generally `0`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttopBoundary: 0,\r\n\r\n\t/**\r\n\t* Right snap boundary, generally `(viewport width - content width)`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trightBoundary: 0,\r\n\r\n\t/**\r\n\t* Bottom snap boundary, generally `(viewport height - content height)`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tbottomBoundary: 0,\r\n\r\n\t/**\r\n\t* Left snap boundary, generally `0`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tleftBoundary: 0,\r\n\r\n\t/**\r\n\t* Animation time step.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tinterval: 20,\r\n\r\n\t/**\r\n\t* Flag to enable frame-based animation; if `false`, time-based animation is used.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfixedTime: true,\r\n\r\n\t/**\r\n\t* Simulation state.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tx0: 0,\r\n\r\n\t/**\r\n\t* Simulation state.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tx: 0,\r\n\r\n\t/**\r\n\t* Simulation state.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ty0: 0,\r\n\r\n\t/**\r\n\t* Simulation state.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ty: 0,\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.boundarySnapshot = {};\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.stop();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Simple Verlet integrator for simulating Newtonian motion.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tverlet: function () {\r\n\t\tvar x = this.x;\r\n\t\tthis.x += x - this.x0;\r\n\t\tthis.x0 = x;\r\n\t\t//\r\n\t\tvar y = this.y;\r\n\t\tthis.y += y - this.y0;\r\n\t\tthis.y0 = y;\r\n\t},\r\n\r\n\t/**\r\n\t* Boundary damping function. Returns damped `value` based on `coeff` on one side of\r\n\t* `origin`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdamping: function (val, origin, coeff, sign) {\r\n\t\tvar kEpsilon = 0.5;\r\n\t\t//\r\n\t\t// this is basically just value *= coeff (generally, coeff < 1)\r\n\t\t//\r\n\t\t// 'sign' and the conditional is to force the damping to only occur\r\n\t\t// on one side of the origin.\r\n\t\t//\r\n\t\tvar dv = val - origin;\r\n\t\t// Force close-to-zero to zero\r\n\t\tif (Math.abs(dv) < kEpsilon) {\r\n\t\t\treturn origin;\r\n\t\t}\r\n\t\treturn val*sign > origin*sign ? coeff * dv + origin : val;\r\n\t},\r\n\r\n\t/**\r\n\t* Dual-boundary damping function. Returns damped `value` based on `coeff` when exceeding\r\n\t* either boundary.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tboundaryDamping: function (val, aBoundary, bBoundary, coeff) {\r\n\t\treturn this.damping(this.damping(val, aBoundary, coeff, 1), bBoundary, coeff, -1);\r\n\t},\r\n\r\n\t/**\r\n\t* Simulation constraints (spring damping occurs here).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tconstrain: function () {\r\n\t\tvar b = this.getDampingBoundaries(),\r\n\t\t\ty = this.boundaryDamping(this.y, b.top, b.bottom, this.kSpringDamping),\r\n\t\t\tx = this.boundaryDamping(this.x, b.left, b.right, this.kSpringDamping);\r\n\r\n\t\tif (y != this.y) {\r\n\t\t\t// ensure snapping introduces no velocity, add additional friction\r\n\t\t\tthis.y0 = y - (this.y - this.y0) * this.kSnapFriction;\r\n\t\t\tthis.y = y;\r\n\t\t}\r\n\r\n\t\tif (x != this.x) {\r\n\t\t\tthis.x0 = x - (this.x - this.x0) * this.kSnapFriction;\r\n\t\t\tthis.x = x;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* The friction function.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfriction: function (ex, ex0, coeff) {\r\n\t\t// implicit velocity\r\n\t\tvar dp = this[ex] - this[ex0];\r\n\t\t// let close-to-zero collapse to zero (i.e. smaller than epsilon is considered zero)\r\n\t\tvar c = Math.abs(dp) > this.kFrictionEpsilon ? coeff : 0;\r\n\t\t// reposition using damped velocity\r\n\t\tthis[ex] = this[ex0] + c * dp;\r\n\t},\r\n\r\n\t/**\r\n\t* One unit of time for simulation.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tframe: 10,\r\n\t// piece-wise constraint simulation\r\n\tsimulate: function (t) {\r\n\t\twhile (t >= this.frame) {\r\n\t\t\tt -= this.frame;\r\n\t\t\tif (!this.dragging) {\r\n\t\t\t\tthis.constrain();\r\n\t\t\t}\r\n\t\t\tthis.verlet();\r\n\t\t\tthis.friction('y', 'y0', this.kFrictionDamping);\r\n\t\t\tthis.friction('x', 'x0', this.kFrictionDamping);\r\n\t\t}\r\n\t\treturn t;\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tgetDampingBoundaries: function() {\r\n\t\treturn this.haveBoundarySnapshot ?\r\n\t\t\tthis.boundarySnapshot :\r\n\t\t\t{\r\n\t\t\t\ttop : this.topBoundary,\r\n\t\t\t\tbottom : this.bottomBoundary,\r\n\t\t\t\tleft : this.leftBoundary,\r\n\t\t\t\tright : this.rightBoundary\r\n\t\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\ttakeBoundarySnapshot: function () {\r\n\t\tvar s;\r\n\r\n\t\tif (!this.haveBoundarySnapshot) {\r\n\t\t\ts = this.boundarySnapshot;\r\n\r\n\t\t\ts.top = this.topBoundary;\r\n\t\t\ts.bottom = this.bottomBoundary;\r\n\t\t\ts.left = this.leftBoundary;\r\n\t\t\ts.right = this.rightBoundary;\r\n\r\n\t\t\tthis.haveBoundarySnapshot = true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdiscardBoundarySnapshot: function() {\r\n\t\tthis.haveBoundarySnapshot = false;\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:enyo/ScrollMath~ScrollMath#onScrollStop\r\n\t* @private\r\n\t*/\r\n\tanimate: function () {\r\n\t\tthis.stop();\r\n\t\t// time tracking\r\n\t\tvar t0 = utils.perfNow(), t = 0;\r\n\t\t// delta tracking\r\n\t\tvar x0, y0;\r\n\t\t// animation handler\r\n\t\tvar fn = this.bindSafely(function() {\r\n\t\t\t// wall-clock time\r\n\t\t\tvar t1 = utils.perfNow();\r\n\t\t\t// schedule next frame\r\n\t\t\tthis.job = animation.requestAnimationFrame(fn);\r\n\t\t\t// delta from last wall clock time\r\n\t\t\tvar dt = t1 - t0;\r\n\t\t\t// record the time for next delta\r\n\t\t\tt0 = t1;\r\n\t\t\t// user drags override animation\r\n\t\t\tif (this.dragging) {\r\n\t\t\t\tthis.y0 = this.y = this.uy;\r\n\t\t\t\tthis.x0 = this.x = this.ux;\r\n\t\t\t\tthis.endX = this.endY = null;\r\n\t\t\t}\r\n\t\t\t// frame-time accumulator\r\n\t\t\t// min acceptable time is 16ms (60fps)\r\n\t\t\tt += Math.max(16, dt);\r\n\t\t\t// prevent snapping to originally desired scroll position if we are in overscroll\r\n\t\t\tif (this.isInOverScroll()) {\r\n\t\t\t\tthis.endX = null;\r\n\t\t\t\tthis.endY = null;\r\n\r\n\t\t\t\tthis.takeBoundarySnapshot();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.discardBoundarySnapshot();\r\n\r\n\t\t\t\t// alternate fixed-time step strategy:\r\n\t\t\t\tif (this.fixedTime) {\r\n\t\t\t\t\tt = this.interval;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// consume some t in simulation\r\n\t\t\tt = this.simulate(t);\r\n\t\t\t// scroll if we have moved, otherwise the animation is stalled and we can stop\r\n\t\t\tif (y0 != this.y || x0 != this.x) {\r\n\t\t\t\tthis.scroll();\r\n\t\t\t} else if (!this.dragging) {\r\n\t\t\t\t// set final values\r\n\t\t\t\tif (this.endX != null) {\r\n\t\t\t\t\tthis.x = this.x0 = this.endX;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.endY != null) {\r\n\t\t\t\t\tthis.y = this.y0 = this.endY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.stop();\r\n\t\t\t\tthis.scroll();\r\n\t\t\t\tthis.doScrollStop();\r\n\r\n\t\t\t\tthis.endX = null;\r\n\t\t\t\tthis.endY = null;\r\n\t\t\t}\r\n\t\t\ty0 = this.y;\r\n\t\t\tx0 = this.x;\r\n\t\t});\r\n\t\tthis.job = animation.requestAnimationFrame(fn);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstart: function () {\r\n\t\tif (!this.job) {\r\n\t\t\tthis.doScrollStart();\r\n\t\t\tthis.animate();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstop: function (fire) {\r\n\t\tvar job = this.job;\r\n\t\tif (job) {\r\n\t\t\tthis.job = animation.cancelAnimationFrame(job);\r\n\t\t}\r\n\t\tif (fire) {\r\n\t\t\tthis.doScrollStop();\r\n\r\n\t\t\tthis.endX = undefined;\r\n\t\t\tthis.endY = undefined;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Adjusts the scroll position to be valid, if necessary (e.g., after the scroll contents\r\n\t* have changed).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tstabilize: function (opts) {\r\n\t\tvar fire = !opts || opts.fire === undefined || opts.fire;\r\n\t\tvar y = Math.min(this.topBoundary, Math.max(this.bottomBoundary, this.y));\r\n\t\tvar x = Math.min(this.leftBoundary, Math.max(this.rightBoundary, this.x));\r\n\t\tif (y != this.y || x != this.x) {\r\n\t\t\tthis.y = this.y0 = y;\r\n\t\t\tthis.x = this.x0 = x;\r\n\t\t\tif (fire) {\r\n\t\t\t\tthis.doStabilize();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstartDrag: function (e) {\r\n\t\tthis.dragging = true;\r\n\t\t//\r\n\t\tthis.my = e.pageY;\r\n\t\tthis.py = this.uy = this.y;\r\n\t\t//\r\n\t\tthis.mx = e.pageX;\r\n\t\tthis.px = this.ux = this.x;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrag: function (e) {\r\n\t\tvar dy, dx, v, h;\r\n\t\tif (this.dragging) {\r\n\t\t\tv = this.canScrollY();\r\n\t\t\th = this.canScrollX();\r\n\r\n\t\t\tdy = v ? e.pageY - this.my : 0;\r\n\t\t\tthis.uy = dy + this.py;\r\n\t\t\t// provides resistance against dragging into overscroll\r\n\t\t\tthis.uy = this.boundaryDamping(this.uy, this.topBoundary, this.bottomBoundary, this.kDragDamping);\r\n\t\t\t//\r\n\t\t\tdx = h ? e.pageX - this.mx : 0;\r\n\t\t\tthis.ux = dx + this.px;\r\n\t\t\t// provides resistance against dragging into overscroll\r\n\t\t\tthis.ux = this.boundaryDamping(this.ux, this.leftBoundary, this.rightBoundary, this.kDragDamping);\r\n\t\t\t//\r\n\t\t\tthis.start();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragDrop: function () {\r\n\t\tif (this.dragging && !window.PalmSystem) {\r\n\t\t\tvar kSimulatedFlickScalar = 0.5;\r\n\t\t\tthis.y = this.uy;\r\n\t\t\tthis.y0 = this.y - (this.y - this.y0) * kSimulatedFlickScalar;\r\n\t\t\tthis.x = this.ux;\r\n\t\t\tthis.x0 = this.x - (this.x - this.x0) * kSimulatedFlickScalar;\r\n\t\t}\r\n\t\tthis.dragFinish();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragFinish: function () {\r\n\t\tthis.dragging = false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tflick: function (e) {\r\n\t\tvar v;\r\n\t\tif (this.canScrollY()) {\r\n\t\t\tv = e.yVelocity > 0 ? Math.min(this.kMaxFlick, e.yVelocity) : Math.max(-this.kMaxFlick, e.yVelocity);\r\n\t\t\tthis.y = this.y0 + v * this.kFlickScalar;\r\n\t\t}\r\n\t\tif (this.canScrollX()) {\r\n\t\t\tv = e.xVelocity > 0 ? Math.min(this.kMaxFlick, e.xVelocity) : Math.max(-this.kMaxFlick, e.xVelocity);\r\n\t\t\tthis.x = this.x0 + v * this.kFlickScalar;\r\n\t\t}\r\n\t\tthis.start();\r\n\t},\r\n\r\n\t/**\r\n\t* TODO: Refine and test newMousewheel, remove this\r\n\t* @private\r\n\t*/\r\n\tmousewheel: function (e) {\r\n\t\tvar dy = this.vertical ? e.wheelDeltaY || (!e.wheelDeltaX ? e.wheelDelta : 0) : 0,\r\n\t\t\tdx = this.horizontal ? e.wheelDeltaX : 0,\r\n\t\t\tshouldScroll = false;\r\n\t\tif ((dy > 0 && this.y < this.topBoundary) || (dy < 0 && this.y > this.bottomBoundary)) {\r\n\t\t\tthis.y = this.y0 = this.y0 + dy;\r\n\t\t\tshouldScroll = true;\r\n\t\t}\r\n\t\tif ((dx > 0 && this.x < this.leftBoundary) || (dx < 0 && this.x > this.rightBoundary)) {\r\n\t\t\tthis.x = this.x0 = this.x0 + dx;\r\n\t\t\tshouldScroll = true;\r\n\t\t}\r\n\t\tthis.stop(!shouldScroll);\r\n\t\tif (shouldScroll) {\r\n\t\t\tthis.start();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tnewMousewheel: function (e, opts) {\r\n\t\tvar rtl = opts && opts.rtl,\r\n\t\t\twdY = (e.wheelDeltaY === undefined) ? e.wheelDelta : e.wheelDeltaY,\r\n\t\t\tdY = wdY,\r\n\t\t\tdX = rtl ? -e.wheelDeltaX : e.wheelDeltaX,\r\n\t\t\tcanY = this.canScrollY(),\r\n\t\t\tcanX = this.canScrollX(),\r\n\t\t\tshouldScroll = false,\r\n\t\t\tm = 2,\r\n\t\t\t// TODO: Figure out whether we need to port the configurable\r\n\t\t\t// max / multiplier feature from Moonstone's implementation,\r\n\t\t\t// and (if so) how\r\n\t\t\t// max = 100,\r\n\t\t\tscr = this.isScrolling(),\r\n\t\t\tovr = this.isInOverScroll(),\r\n\t\t\trefY = (scr && this.endY !== null) ? this.endY : this.y,\r\n\t\t\trefX = (scr && this.endX !== null) ? this.endX : this.x,\r\n\t\t\ttY = refY,\r\n\t\t\ttX = refX;\r\n\r\n\t\tif (ovr) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// If we're getting strictly vertical mousewheel events over a scroller that\r\n\t\t// can only move horizontally, the user is probably using a one-dimensional\r\n\t\t// mousewheel and would like us to scroll horizontally instead\r\n\t\tif (dY && !dX && canX && !canY) {\r\n\t\t\tdX = dY;\r\n\t\t\tdY = 0;\r\n\t\t}\r\n\r\n\t\tif (dY && canY) {\r\n\t\t\ttY = -(refY + (dY * m));\r\n\t\t\tshouldScroll = true;\r\n\t\t}\r\n\t\tif (dX && canX) {\r\n\t\t\ttX = -(refX + (dX * m));\r\n\t\t\tshouldScroll = true;\r\n\t\t}\r\n\r\n\t\tif (shouldScroll) {\r\n\t\t\tthis.scrollTo(tX, tY, {allowOverScroll: true});\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:enyo/ScrollMath~ScrollMath#onScroll\r\n\t* @private\r\n\t*/\r\n\tscroll: function () {\r\n\t\tthis.doScroll();\r\n\t},\r\n\r\n\t// NOTE: Yip/Orvell method for determining scroller instantaneous velocity\r\n\t// FIXME: incorrect if called when scroller is in overscroll region\r\n\t// because does not account for additional overscroll damping.\r\n\r\n\t/**\r\n\t* Scrolls to the specified position.\r\n\t*\r\n\t* @param {Number} x - The `x` position in pixels.\r\n\t* @param {Number} y - The `y` position in pixels.\r\n\t* @param {Object} opts - TODO: Document. When behavior == 'instant', we skip animation.\r\n\t* @private\r\n\t*/\r\n\tscrollTo: function (x, y, opts) {\r\n\t\tvar animate = !opts || opts.behavior !== 'instant',\r\n\t\t\txSnap = this.xSnapIncrement,\r\n\t\t\tySnap = this.ySnapIncrement,\r\n\t\t\tallowOverScroll = opts && opts.allowOverScroll,\r\n\t\t\tmaxX = Math.abs(Math.min(0, this.rightBoundary)),\r\n\t\t\tmaxY = Math.abs(Math.min(0, this.bottomBoundary));\r\n\r\n\t\tif (typeof xSnap === 'number') {\r\n\t\t\tx = xSnap * Math.round(x / xSnap);\r\n\t\t}\r\n\r\n\t\tif (typeof ySnap === 'number') {\r\n\t\t\ty = ySnap * Math.round(y / ySnap);\r\n\t\t}\r\n\r\n\t\tif (!animate || !allowOverScroll) {\r\n\t\t\tx = Math.max(0, Math.min(x, maxX));\r\n\t\t\ty = Math.max(0, Math.min(y, maxY));\r\n\t\t}\r\n\r\n\t\tif (-x == this.x && -y == this.y) return;\r\n\r\n\t\tif (!animate) {\r\n\t\t\tthis.doScrollStart();\r\n\t\t\tthis.setScrollX(-x);\r\n\t\t\tthis.setScrollY(-y);\r\n\t\t\tthis.doScroll();\r\n\t\t\tthis.doScrollStop();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (y !== null) {\r\n\t\t\t\tthis.endY = -y;\r\n\t\t\t\tthis.y = this.y0 - (y + this.y0) * (1 - this.kFrictionDamping);\r\n\t\t\t}\r\n\t\t\tif (x !== null) {\r\n\t\t\t\tthis.endX = -x;\r\n\t\t\t\tthis.x = this.x0 - (x + this.x0) * (1 - this.kFrictionDamping);\r\n\t\t\t}\r\n\t\t\tthis.start();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the scroll position along the x-axis.\r\n\t*\r\n\t* @param {Number} x - The x-axis scroll position in pixels.\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tsetScrollX: function (x) {\r\n\t\tthis.x = this.x0 = x;\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the scroll position along the y-axis.\r\n\t*\r\n\t* @param {Number} y - The y-axis scroll position in pixels.\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tsetScrollY: function (y) {\r\n\t\tthis.y = this.y0 = y;\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the scroll position; defaults to setting this position along the y-axis.\r\n\t*\r\n\t* @param {Number} pos - The scroll position in pixels.\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tsetScrollPosition: function (pos) {\r\n\t\tthis.setScrollY(pos);\r\n\t},\r\n\r\n\tcanScrollX: function() {\r\n\t\treturn this.horizontal && this.rightBoundary < 0;\r\n\t},\r\n\r\n\tcanScrollY: function() {\r\n\t\treturn this.vertical && this.bottomBoundary < 0;\r\n\t},\r\n\r\n\r\n\t/**\r\n\t* Determines whether or not the [scroller]{@link module:enyo/Scroller~Scroller} is actively moving.\r\n\t*\r\n\t* @return {Boolean} `true` if actively moving; otherwise, `false`.\r\n\t* @private\r\n\t*/\r\n\tisScrolling: function () {\r\n\t\treturn Boolean(this.job);\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether or not the [scroller]{@link module:enyo/Scroller~Scroller} is in overscroll.\r\n\t*\r\n\t* @return {Boolean} `true` if in overscroll; otherwise, `false`.\r\n\t* @private\r\n\t*/\r\n\tisInOverScroll: function () {\r\n\t\treturn this.job && (this.x > this.leftBoundary || this.x < this.rightBoundary ||\r\n\t\t\tthis.y > this.topBoundary || this.y < this.bottomBoundary);\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Jsonp~JsonpRequest} kind.\r\n* @module enyo/Jsonp\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\nvar\r\n\tAsync = require('./Async'),\r\n\tAjax = require('./Ajax');\r\n\r\n/**\r\n* {@link module:enyo/Jsonp~JsonpRequest} is an [Async]{@link module:enyo/Async~Async} task specifically designed\r\n* to wrap {@glossary JSONP} requests to a remote server. Be sure to read about the use\r\n* cases for JSONP requests, along with the documentation on [Consuming Web\r\n* Services]{@linkplain $dev-guide/building-apps/managing-data/consuming-web-services.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @class JsonpRequest\r\n* @extends module:enyo/Async~Async\r\n* @public\r\n*/\r\nvar JsonpRequest = module.exports = kind(\r\n\t/** @lends module:enyo/Jsonp~JsonpRequest.prototype */ {\r\n\t\r\n\tname: 'enyo.JsonpRequest',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Async,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/** @lends module:enyo/Jsonp~JsonpRequest.prototype */\r\n\t\t\r\n\t\t/**\r\n\t\t* The URL for the service.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\turl: '',\r\n\t\t\r\n\t\t/**\r\n\t\t* The optional character set to use to interpret the return data.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcharset: null,\r\n\t\t\r\n\t\t/**\r\n\t\t* The name of the [function]{@glossary Function} that is included in the\r\n\t\t* encoded arguments and used to wrap the return value from the server.\r\n\t\t* This may also be set to `null` in some cases.\r\n\t\t*\r\n\t\t* @see module:enyo/Jsonp~JsonpRequest.overrideCallback\r\n\t\t* @type {String}\r\n\t\t* @default 'callback'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcallbackName: 'callback',\r\n\t\t\r\n\t\t/**\r\n\t\t* When `true`, a random number is appended as a parameter for GET requests\r\n\t\t* to (attempt to) force a new fetch of the resource instead of reusing a\r\n\t\t* local cache.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcacheBust: true,\r\n\t\t\r\n\t\t/**\r\n\t\t* In cases where a backend is inflexible with regard to\r\n\t\t* [callback]{@link module:enyo/Jsonp~JsonpRequest#callback} names, this property may be used to\r\n\t\t* specify a global [function]{@glossary Function} instead. Note that when using\r\n\t\t* this, it will replace any existing function with the given\r\n\t\t* name and only one [JsonpRequest]{@link module:enyo/Jsonp~JsonpRequest} using this property may\r\n\t\t* be active at a time.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\toverrideCallback: null\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprotectedStatics: {\r\n\t\t// Counter to allow creation of unique name for each JSONP request\r\n\t\tnextCallbackID: 0\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taddScriptElement: function () {\r\n\t\tvar script = document.createElement('script');\r\n\t\tscript.src = this.src;\r\n\t\tscript.async = 'async';\r\n\t\tif (this.charset) {\r\n\t\t\tscript.charset = this.charset;\r\n\t\t}\r\n\t\t// most modern browsers also have an onerror handler\r\n\t\tscript.onerror = this.bindSafely(function() {\r\n\t\t\t// we don't get an error code, so we'll just use the generic 400 error status\r\n\t\t\tthis.fail(400);\r\n\t\t});\r\n\t\t// add script before existing script to make sure it's in a valid part of document\r\n\t\t// http://www.jspatterns.com/the-ridiculous-case-of-adding-a-script-element/\r\n\t\tvar first = document.getElementsByTagName('script')[0];\r\n\t\tfirst.parentNode.insertBefore(script, first);\r\n\t\tthis.scriptTag = script;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tremoveScriptElement: function () {\r\n\t\tvar script = this.scriptTag;\r\n\t\tthis.scriptTag = null;\r\n\t\tscript.onerror = null;\r\n\t\tif (script.parentNode) {\r\n\t\t\tscript.parentNode.removeChild(script);\r\n\t\t}\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function (params) {\r\n\t\t\tutils.mixin(this, params);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* Initiates the asynchronous routine and will supply the given value if it completes\r\n\t* successfully. Overloaded from {@link module:enyo/Async~Async#go}.\r\n\t*\r\n\t* @param {*} value - The value to pass to responders.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tgo: function (value) {\r\n\t\tthis.startTimer();\r\n\t\tthis.jsonp(value);\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tjsonp: function (params) {\r\n\t\tvar callbackFunctionName = this.overrideCallback ||\r\n\t\t\t'enyo_jsonp_callback_' + (JsonpRequest.nextCallbackID++);\r\n\t\t//\r\n\t\tthis.src = this.buildUrl(params, callbackFunctionName);\r\n\t\tthis.addScriptElement();\r\n\t\t//\r\n\t\tglobal[callbackFunctionName] = this.bindSafely(this.respond);\r\n\t\t//\r\n\t\t// setup cleanup handlers for JSONP completion and failure\r\n\t\tvar cleanup = this.bindSafely(function() {\r\n\t\t\tthis.removeScriptElement();\r\n\t\t\tglobal[callbackFunctionName] = null;\r\n\t\t});\r\n\t\tthis.response(cleanup);\r\n\t\tthis.error(cleanup);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbuildUrl: function(params, fn) {\r\n\t\tvar parts = this.url.split('?');\r\n\t\tvar uri = parts.shift() || '';\r\n\t\tvar args = parts.length? parts.join('?').split('&'): [];\r\n\t\t//\r\n\t\tvar bodyArgs = this.bodyArgsFromParams(params, fn);\r\n\t\targs.push(bodyArgs);\r\n\t\tif (this.cacheBust) {\r\n\t\t\targs.push(Math.random());\r\n\t\t}\r\n\t\t//\r\n\t\treturn [uri, args.join('&')].join('?');\r\n\t},\r\n\t\r\n\t/**\r\n\t* If `params` is a string, we follow the convention of replacing the string\r\n\t* `'=?'` with the callback name. If `params` is an object (the more common\r\n\t* case), we add an argument using the `callbackName` published property.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tbodyArgsFromParams: function(params, fn) {\r\n\t\tif (utils.isString(params)) {\r\n\t\t\treturn params.replace('=?', '=' + fn);\r\n\t\t} else {\r\n\t\t\tparams = params ? utils.clone(params, true) : {};\r\n\t\t\tif (this.callbackName) {\r\n\t\t\t\tparams[this.callbackName] = fn;\r\n\t\t\t}\r\n\t\t\treturn Ajax.objectToQuery(params);\r\n\t\t}\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\nvar\r\n\tutils = require('./utils');\r\nvar\r\n\tComponent = require('./Component'),\r\n\tSignals = require('./Signals');\r\n\r\n/**\r\n* Default owner assigned to ownerless [UiComponents]{@link module:enyo/UiComponent~UiComponent},\r\n* to allow such UiComponents to be notified of important system events like window resize.\r\n*\r\n* NOTE: Ownerless [UiComponents]{@link module:enyo/UiComponent~UiComponent} will not be garbage collected unless \r\n* explicitly destroyed, as they will be referenced by `master`.\r\n*\r\n* @module enyo/master\r\n* @private\r\n*/\r\nvar master = module.exports = new Component({\r\n\tname: 'master',\r\n\tnotInstanceOwner: true,\r\n\teventFlags: {showingOnly: true}, // don't waterfall these events into hidden controls\r\n\tgetId: function () {\r\n\t\treturn '';\r\n\t},\r\n\tisDescendantOf: utils.nop,\r\n\tbubble: function (nom, event) {\r\n\t\t//enyo.log('master event: ' + nom);\r\n\t\tif (nom == 'onresize') {\r\n\t\t\t// Resize is special; waterfall this message.\r\n\t\t\t// This works because master is a Component, so it waterfalls\r\n\t\t\t// to its owned Components (i.e., master has no children).\r\n\t\t\tmaster.waterfallDown('onresize', this.eventFlags);\r\n\t\t\tmaster.waterfallDown('onpostresize', this.eventFlags);\r\n\t\t} else {\r\n\t\t\t// All other top-level events are sent only to interested Signal\r\n\t\t\t// receivers.\r\n\t\t\tSignals.send(nom, event);\r\n\t\t}\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Controller~Controller} kind.\r\n* @module enyo/Controller\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\nvar\r\n\tMultipleDispatchComponent = require('./MultipleDispatchComponent');\r\n\r\n/**\r\n* {@link module:enyo/Controller~Controller} is the base [kind]{@glossary kind} for all\r\n* controllers in Enyo. An abstract kind, `enyo/Controller` is a\r\n* [delegate]{@glossary delegate}/[component]{@link module:enyo/Component~Component} that\r\n* is designed to be a proxy for information.\r\n*\r\n* @class Controller\r\n* @extends module:enyo/MultipleDispatchComponent~MultipleDispatchComponent\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/Controller~Controller.prototype */ {\r\n\r\n\tname: 'enyo.Controller',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: MultipleDispatchComponent,\r\n\r\n\t/**\r\n\t* Set this flag to `true` to make this [controller]{@link module:enyo/Controller~Controller}\r\n\t* available globally, when instanced. When set to `true`, even the\r\n\t* [owner]{@link module:enyo/Component~Component#owner} (if any) cannot\r\n\t* [destroy]{@link module:enyo/Component~Component#destroy} it.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tglobal: false,\r\n\r\n\t/**\r\n\t* The default source of information for all instances of {@link module:enyo/Controller~Controller}\r\n\t* and its [subkinds]{@glossary subkind}. In some cases, this will be a\r\n\t* [computed property]{@link module:enyo/ComputedSupport} to facilitate overloading.\r\n\t* It may contain any type of data.\r\n\t*\r\n\t* @type {*}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tdata: null,\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\t// don't attempt to set a controller globally without a name\r\n\t\t\tif (this.global && this.name) {\r\n\t\t\t\tutils.setPath.call(global, this.name, this);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\t_isController: true\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/WebService~WebService} kind.\r\n* @module enyo/WebService\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\nvar\r\n\tComponent = require('./Component'),\r\n\tJsonpRequest = require('./Jsonp'),\r\n\tAjaxProperties = require('./AjaxProperties'),\r\n\tAjax = require('./Ajax');\r\n\r\n/**\r\n* Fires when a response is received.\r\n*\r\n* @event module:enyo/WebService~WebService#onResponse\r\n* @type {Object}\r\n* @property {module:enyo/Async~Async} ajax - The {@link module:enyo/Async~Async} instance associated with the request.\r\n* @property {*} data - Any response data associated with the request.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when an error is received.\r\n*\r\n* @event module:enyo/WebService~WebService#onError\r\n* @type {Object}\r\n* @property {module:enyo/Async~Async} ajax - The {@link module:enyo/Async~Async} instance associated with the request.\r\n* @property {*} data - Any response data associated with the request.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when the request progresses. This event is the raw\r\n* [ProgressEvent]{@glossary ProgressEvent}.\r\n*\r\n* @see {@glossary ProgressEvent}\r\n* @event module:enyo/WebService~WebService#onProgress\r\n* @type {Object}\r\n* @property {Boolean} lengthComputable - The read-only flag indicating whether the progress\r\n*\tis computable.\r\n* @property {Number} loaded - The read-only value of the downloaded resources.\r\n* @property {Number} total - The read-only value used to indicate how much of a resource\r\n* is left to be acquired.\r\n* @public\r\n*/\r\n\r\n/**\r\n* An internally-used class.\r\n*\r\n* @private\r\n*/\r\nvar AjaxComponent = kind({\r\n\tkind: Component,\r\n\tpublished: AjaxProperties\r\n});\r\n\r\n/**\r\n* A [component]{@link module:enyo/Component~Component} that performs [XHR]{@glossary XMLHttpRequest}\r\n* requests. Internally, it relies on the [Async]{@link module:enyo/Async~Async} subkinds\r\n* ({@link module:enyo/Ajax~Ajax} and {@link module:enyo/Jsonp~JsonpRequest}) to manage transactions.\r\n*\r\n* By default, {@link module:enyo/WebService~WebService} uses `enyo/Ajax` and publishes all of its\r\n* properties via the [enyo/AjaxProperties]{@link module:enyo/AjaxProperties} module.\r\n*\r\n* To use `enyo/Jsonp/JsonpRequest` instead of `enyo/Ajax`, set\r\n* [jsonp]{@link module:enyo/WebService~WebService#jsonp} to `true` (defaults to `false`).\r\n*\r\n* For more information, see the documentation on [Consuming Web\r\n* Services]{@linkplain $dev-guide/building-apps/managing-data/consuming-web-services.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @class WebService\r\n* @extends module:enyo/Component~Component\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/WebService~WebService.prototype */ {\r\n\t\r\n\tname: 'enyo.WebService',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: AjaxComponent,\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: {\r\n\t\t/** @lends module:enyo/WebService~WebService.prototype */\r\n\t\t\r\n\t\t/**\r\n\t\t* Indicates whether or not to use the [JSONP]{@glossary JSONP} protocol (and\r\n\t\t* {@link module:enyo/Jsonp~JsonpRequest} instead of {@link module:enyo/Ajax~Ajax}).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tjsonp: false,\r\n\t\t\r\n\t\t/**\r\n\t\t* When using [JSONP]{@glossary JSONP}, this is the name of the callback parameter.\r\n\t\t* Note that this not the name of a callback function, but only the name of the callback\r\n\t\t* parameter. Enyo will create an internal callback function as necessary.\r\n\t\t*\r\n\t\t* @see module:enyo/WebService~WebService.jsonp\r\n\t\t* @type {String}\r\n\t\t* @default 'callback'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcallbackName: 'callback',\r\n\t\t\r\n\t\t/**\r\n\t\t* When using [JSONP]{@glossary JSONP}, the optional character set to use to\r\n\t\t* interpret the return data.\r\n\t\t*\r\n\t\t* @see module:enyo/WebService~WebService.jsonp\r\n\t\t* @type {String}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcharset: null,\r\n\t\t\r\n\t\t/**\r\n\t\t* If set to a non-zero value, the number of milliseconds to wait after the\r\n\t\t* [send()]{@link module:enyo/WebService~WebService#send} call before failing with a timeout\r\n\t\t* error.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttimeout: 0\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonResponse: '',\r\n\t\tonError: '',\r\n\t\tonProgress: ''\r\n\t},\r\n\t\r\n\t/**\r\n\t* Sends an XHR request with the given parameters, returning the associated\r\n\t* {@link module:enyo/Async~Async} instance.\r\n\t*\r\n\t* @param {Object} params - The parameters to pass to the request.\r\n\t* @param {Object} [props] - The optional properties to override the\r\n\t*\t{@link module:enyo/AjaxProperties} of the request.\r\n\t* @returns {module:enyo/Async~Async} The associated {@link module:enyo/Async~Async} instance.\r\n\t* @public\r\n\t*/\r\n\tsend: function (params, props) {\r\n\t\treturn this.jsonp ? this.sendJsonp(params, props) : this.sendAjax(params, props);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendJsonp: function (params, props) {\r\n\t\tvar jsonp = new JsonpRequest();\r\n\t\tfor (var n in {'url':1, 'callbackName':1, 'charset':1, 'timeout':1}) {\r\n\t\t\tjsonp[n] = this[n];\r\n\t\t}\r\n\t\tutils.mixin(jsonp, props);\r\n\t\treturn this.sendAsync(jsonp, params);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendAjax: function (params, props) {\r\n\t\tvar ajax = new Ajax(props);\r\n\t\tfor (var n in AjaxProperties) {\r\n\t\t\tajax[n] = this[n];\r\n\t\t}\r\n\t\tajax.timeout = this.timeout;\r\n\t\tutils.mixin(ajax, props);\r\n\t\treturn this.sendAsync(ajax, params);\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendAsync: function (ajax, params) {\r\n\t\treturn ajax.go(params).response(this, 'response').error(this, 'error').progress(this, 'progress');\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tresponse: function (sender, data) {\r\n\t\tthis.doResponse({ajax: sender, data: data});\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\terror: function (sender, data) {\r\n\t\tthis.doError({ajax: sender, data: data});\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprogress: function (sender, event) {\r\n\t\tthis.doProgress(event);\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/UiComponent~UiComponent} kind.\r\n* @module enyo/UiComponent\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils'),\r\n\tmaster = require('./master');\r\n\r\nvar\r\n\tComponent = require('./Component');\r\n\r\n/**\r\n* The configurable options used by {@link module:enyo/UiComponent~UiComponent} when updating\r\n* components.\r\n*\r\n* @typedef {Object} enyo/UiComponent~UiComponent~UpdateComponentsOptions\r\n* @property {Boolean} [silent] - If `true`, component properties will be updated silently i.e. they\r\n*\twill be set directly, rather than via the generic `set` method.\r\n*/\r\n\r\n/**\r\n* {@link module:enyo/UiComponent~UiComponent} implements a container strategy suitable for presentation layers.\r\n*\r\n* `UiComponent` itself is abstract. Concrete [subkinds]{@glossary subkind} include\r\n* {@link module:enyo/Control~Control} (for HTML/DOM) and\r\n* {@link module:canvas/Control~Control} (for Canvas contexts).\r\n*\r\n* @class UiComponent\r\n* @extends module:enyo/Component~Component\r\n* @public\r\n*/\r\nvar UiComponent = module.exports = kind(\r\n\t/** @lends module:enyo/UiComponent~UiComponent.prototype */ {\r\n\r\n\tname: 'enyo.UiComponent',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Component,\r\n\r\n\tstatics:\r\n\t\t/** @lends module:enyo/UiComponent~UiComponent */ {\r\n\r\n\t\t/**\r\n\t\t* The default set of keys which are effectively \"ignored\" when determining whether or not\r\n\t\t* the this control has changed in such a way that warrants a complete re-render. When\r\n\t\t* {@link module:enyo/UiComponent~UiComponent#updateComponents} is invoked on a parent\r\n\t\t* component, this set of stateful keys is utilized by default, if no stateful keys are\r\n\t\t* provided by us.\r\n\t\t*\r\n\t\t* @type {String[]}\r\n\t\t* @default ['content', active', 'disabled']\r\n\t\t* @private\r\n\t\t*/\r\n\t\tstatefulKeys: [\r\n\t\t\t'content',\r\n\t\t\t'active',\r\n\t\t\t'disabled'\r\n\t\t],\r\n\r\n\t\t/**\r\n\t\t* Finds static properties by walking up the inheritance chain, until the property is found.\r\n\t\t* By default this will return the property from {@link module:enyo/UiComponent} if the\r\n\t\t* property is not found anywhere along the chain.\r\n\t\t*\r\n\t\t* @param {module:enyo/kind} kind - The kind which we are attempting to retrieve the property\r\n\t\t*\tfrom; if the property is not found on this kind, its parent kind will be examined.\r\n\t\t* @param {String} prop - The property we are trying to retrieve.\r\n\t\t* @returns {String[]} The array of stateful key strings.\r\n\t\t* @public\r\n\t\t*/\r\n\t\tfindStatic: function (kind, prop) {\r\n\t\t\tif (kind) {\r\n\t\t\t\tif (kind[prop]) return kind[prop];\r\n\t\t\t\treturn UiComponent.findStatic(kind.kind, prop);\r\n\t\t\t} else {\r\n\t\t\t\treturn UiComponent[prop];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished:\r\n\t\t/** @lends module:enyo/UiComponent~UiComponent.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* The [UiComponent]{@link module:enyo/UiComponent~UiComponent} that physically contains this\r\n\t\t* [component]{@link module:enyo/Component~Component} in the DOM.\r\n\t\t*\r\n\t\t* @type {module:enyo/UiComponent~UiComponent}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcontainer: null,\r\n\r\n\t\t/**\r\n\t\t* The [UiComponent]{@link module:enyo/UiComponent~UiComponent} that owns this\r\n\t\t* [component]{@link module:enyo/Component~Component} for purposes of {@glossary event}\r\n\t\t* propagation.\r\n\t\t*\r\n\t\t* @type {module:enyo/UiComponent~UiComponent}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tparent: null,\r\n\r\n\t\t/**\r\n\t\t* The [UiComponent]{@link module:enyo/UiComponent~UiComponent} that will physically contain new items added\r\n\t\t* by calls to [createComponent()]{@link module:enyo/UiComponent~UiComponent#createComponent}.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'client'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcontrolParentName: 'client',\r\n\r\n\t\t/**\r\n\t\t* A {@glossary kind} used to manage the size and placement of child\r\n\t\t* [components]{@link module:enyo/Component~Component}.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tlayoutKind: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonresize: 'handleResize'\r\n\t},\r\n\r\n\t/**\r\n\t* When set, provides a [control]{@link module:enyo/Control~Control} reference used to indicate where a\r\n\t* newly-created [component]{@link module:enyo/Component~Component} should be added in the\r\n\t* [UiComponent's]{@link module:enyo/UiComponent~UiComponent} [array]{@glossary Array} of children. This is\r\n\t* typically used when creating children dynamically (rather than at design time). If set\r\n\t* to `null`, the new control will be added at the beginning of the array; if set to a\r\n\t* specific existing control, the new control will be added before the specified\r\n\t* control. If left as `undefined`, the default behavior is to add the new control\r\n\t* at the end of the array.\r\n\t*\r\n\t* @type {module:enyo/Control~Control}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\taddBefore: undefined,\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.controls = this.controls || [];\r\n\t\t\tthis.children = this.children || [];\r\n\t\t\tthis.containerChanged();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.layoutKindChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\t// Destroys all non-chrome controls (regardless of owner).\r\n\t\t\tthis.destroyClientControls();\r\n\t\t\t// Removes us from our container.\r\n\t\t\tthis.setContainer(null);\r\n\t\t\t// Destroys chrome controls owned by this.\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\timportProps: kind.inherit(function (sup) {\r\n\t\treturn function(inProps) {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (!this.owner) {\r\n\t\t\t\tthis.owner = master;\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Creates [components]{@link module:enyo/Component~Component} as defined by the [arrays]{@glossary Array}\r\n\t* of base and additional property [hashes]{@glossary Object}. The standard and\r\n\t* additional property hashes are combined as described in\r\n\t* {@link module:enyo/Component~Component#createComponent}.\r\n\t*\r\n\t* ```\r\n\t* // ask foo to create components 'bar' and 'zot', but set the owner of\r\n\t* // both components to 'this'.\r\n\t* this.$.foo.createComponents([\r\n\t*\t{name: 'bar'},\r\n\t*\t{name: 'zot'}\r\n\t* ], {owner: this});\r\n\t* ```\r\n\t*\r\n\t* As implemented, [controlParentName]{@link module:enyo/UiComponent~UiComponent#controlParentName} only works\r\n\t* to identify an owned control created via `createComponents()`\r\n\t* (i.e., usually in our `components` block). To attach a `controlParent` via other means,\r\n\t* one must call [discoverControlParent()]{@link module:enyo/UiComponent~UiComponent#discoverControlParent} or\r\n\t* set `controlParent` directly.\r\n\t*\r\n\t* We could call `discoverControlParent()` in\r\n\t* [addComponent()]{@link module:enyo/Component~Component#addComponent}, but that would\r\n\t* cause a lot of useless checking.\r\n\t*\r\n\t* @param {Object[]} props The array of {@link module:enyo/Component~Component} definitions to be created.\r\n\t* @param {Object} ext - Additional properties to be supplied as defaults for each.\r\n\t* @returns {module:enyo/Component~Component[]} The array of components that were created.\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\t//\r\n\tcreateComponents: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tvar results = sup.apply(this, arguments);\r\n\t\t\tthis.discoverControlParent();\r\n\t\t\treturn results;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* An alternative component update path that attempts to intelligently update only the\r\n\t* relevant portions of the component which have changed.\r\n\t*\r\n\t* @param {Object[]} props - An array of kind definitions to be set as the child components of\r\n\t*\tthis component.\r\n\t* @param {Object} [ext] - Additional properties to be supplied as defaults for components, when\r\n\t*\tbeing created or recreated. These properties have no bearing on the diff computation of the\r\n\t*\tchild components.\r\n\t* @param {module:enyo/UiComponent~UpdateComponentsOptions} [opts] - Additional options for how\r\n\t*\tthe update operation should behave.\r\n\t* @returns {Boolean} - Whether or not the component should be re-rendered.\r\n\t* @wip\r\n\t* @public\r\n\t*/\r\n\tupdateComponents: function (props, ext, opts) {\r\n\t\tvar allStatefulKeys = {},\r\n\t\t\tisChanged = this.computeComponentsDiff(props, allStatefulKeys),\r\n\t\t\tprop, controls, control, keys, key, idxKey, idxProp, kind;\r\n\r\n\t\tif (isChanged) {\r\n\t\t\tthis.destroyClientControls();\r\n\t\t\tthis.createComponents(props, ext);\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tcontrols = this.getClientControls();\r\n\t\t\tfor (idxProp = 0; idxProp < props.length; idxProp++) {\r\n\t\t\t\tprop = props[idxProp];\r\n\t\t\t\tcontrol = controls[idxProp];\r\n\t\t\t\tkind = prop.kind || this.defaultKind;\r\n\t\t\t\tkeys = allStatefulKeys[idxProp];\r\n\r\n\t\t\t\tfor (idxKey = 0; idxKey < keys.length; idxKey++) { // for each key, determine if there is a change\r\n\t\t\t\t\tkey = keys[idxKey];\r\n\t\t\t\t\tif (prop[key] != control[key]) {\r\n\t\t\t\t\t\tif (opts && opts.silent) control[key] = prop[key];\r\n\t\t\t\t\t\telse control.set(key, prop[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomputeComponentsDiff: function (comps, allStatefulKeys) {\r\n\t\tvar hash = this.computeComponentsHash(comps, allStatefulKeys),\r\n\t\t\tisChanged = false;\r\n\r\n\t\tif (this._compHash) isChanged = this._compHash != hash;\r\n\t\telse isChanged = true;\r\n\r\n\t\tthis._compHash = hash;\r\n\r\n\t\treturn isChanged;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomputeComponentsHash: function (comps, allStatefulKeys) {\r\n\t\tvar keyCount = 0,\r\n\t\t\thash, str, filtered, chr, len, idx;\r\n\r\n\t\t// http://jsperf.com/json-parse-and-iteration-vs-array-map\r\n\t\tfiltered = comps.map(this.bindSafely(function (comp, itemIdx) {\r\n\t\t\tvar kind = comp.kind || this.defaultKind,\r\n\t\t\t\tkeys = UiComponent.findStatic(kind, 'statefulKeys'),\r\n\t\t\t\tobjKeys = Object.keys(comp),\r\n\t\t\t\tobj = {},\r\n\t\t\t\tidx, key, value;\r\n\r\n\t\t\tallStatefulKeys[itemIdx] = keys; // cache statefulKeys\r\n\r\n\t\t\tfor (idx = 0; idx < objKeys.length; idx++) {\r\n\t\t\t\tkey = objKeys[idx];\r\n\r\n\t\t\t\tif (keys.indexOf(key) == -1) { // ignore stateful keys\r\n\t\t\t\t\tvalue = comp[key];\r\n\t\t\t\t\tif (typeof value == 'function') value = (value.prototype && value.prototype.kindName) || value.toString();\r\n\t\t\t\t\tobj[key] = value;\r\n\t\t\t\t\tkeyCount++;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn obj;\r\n\t\t}));\r\n\r\n\t\t// Adapted from http://stackoverflow.com/a/7616484\r\n\t\tstr = JSON.stringify(filtered) + keyCount;\r\n\t\thash = 0;\r\n\r\n\t\tfor (idx = 0, len = str.length; idx < len; idx++) {\r\n\t\t\tchr = str.charCodeAt(idx);\r\n\t\t\thash = ((hash << 5) - hash) + chr;\r\n\t\t\thash |= 0; // Convert to 32bit integer\r\n\t\t}\r\n\r\n\t\treturn hash;\r\n\t},\r\n\r\n\t/**\r\n\t* Determines and sets the current [control's]{@link module:enyo/Control~Control} parent.\r\n\t*\r\n\t* @protected\r\n\t*/\r\n\tdiscoverControlParent: function () {\r\n\t\tthis.controlParent = this.$[this.controlParentName] || this.controlParent;\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tadjustComponentProps: kind.inherit(function (sup) {\r\n\t\treturn function(inProps) {\r\n\t\t\t// Components we create have us as a container by default.\r\n\t\t\tinProps.container = inProps.container || this;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Containment\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcontainerChanged: function (container) {\r\n\t\tif (container) {\r\n\t\t\tcontainer.removeControl(this);\r\n\t\t}\r\n\t\tif (this.container) {\r\n\t\t\tthis.container.addControl(this, this.addBefore);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Parentage\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tparentChanged: function (oldParent) {\r\n\t\tif (oldParent && oldParent != this.parent) {\r\n\t\t\toldParent.removeChild(this);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether the [control]{@link module:enyo/Control~Control} is a descendant of\r\n\t* another control.\r\n\t*\r\n\t* Note: Oddly, a control is considered to be a descendant of itself.\r\n\t*\r\n\t* @method\r\n\t* @param {module:enyo/Control~Control} ancestor - The [control]{@link module:enyo/Control~Control} whose lineage\r\n\t*\twill be checked to determine whether the current control is a descendant.\r\n\t* @public\r\n\t*/\r\n\tisDescendantOf: function (ancestor) {\r\n\t\tvar p = this;\r\n\t\twhile (p && p!=ancestor) {\r\n\t\t\tp = p.parent;\r\n\t\t}\r\n\t\treturn ancestor && (p === ancestor);\r\n\t},\r\n\r\n\t/**\r\n\t* Returns all controls.\r\n\t*\r\n\t* @method\r\n\t* @returns {module:enyo/Control~Control[]} An [array]{@glossary Array} of [controls]{@link module:enyo/Control~Control}.\r\n\t* @public\r\n\t*/\r\n\tgetControls: function () {\r\n\t\treturn this.controls;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns all non-chrome controls.\r\n\t*\r\n\t* @method\r\n\t* @returns {module:enyo/Control~Control[]} An [array]{@glossary Array} of [controls]{@link module:enyo/Control~Control}.\r\n\t* @public\r\n\t*/\r\n\tgetClientControls: function () {\r\n\t\tvar results = [];\r\n\t\tfor (var i=0, cs=this.controls, c; (c=cs[i]); i++) {\r\n\t\t\tif (!c.isChrome) {\r\n\t\t\t\tresults.push(c);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn results;\r\n\t},\r\n\r\n\t/**\r\n\t* Destroys \"client controls\", the same set of [controls]{@link module:enyo/Control~Control} returned by\r\n\t* [getClientControls()]{@link module:enyo/UiComponent~UiComponent#getClientControls}.\r\n\t*\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tdestroyClientControls: function () {\r\n\t\tvar c$ = this.getClientControls();\r\n\t\tfor (var i=0, c; (c=c$[i]); i++) {\r\n\t\t\tc.destroy();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\taddControl: function (ctl, before) {\r\n\t\t// Called to add an already created control to the object's control list. It is\r\n\t\t// not used to create controls and should likely not be called directly.\r\n\t\t// It can be overridden to detect when controls are added.\r\n\t\tif (before !== undefined) {\r\n\t\t\tvar idx = (before === null) ? 0 : this.indexOfControl(before);\r\n\t\t\tthis.controls.splice(idx, 0, ctl);\r\n\t\t} else {\r\n\t\t\tthis.controls.push(ctl);\r\n\t\t}\r\n\t\t// When we add a Control, we also establish a parent.\r\n\t\tthis.addChild(ctl, before);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tremoveControl: function (ctl) {\r\n\t\t// Called to remove a control from the object's control list. As with addControl it\r\n\t\t// can be overridden to detect when controls are removed.\r\n\t\t// When we remove a Control, we also remove it from its parent.\r\n\t\tctl.setParent(null);\r\n\t\treturn utils.remove(ctl, this.controls);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tindexOfControl: function (ctl) {\r\n\t\treturn utils.indexOf(ctl, this.controls);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tindexOfClientControl: function (ctl) {\r\n\t\treturn utils.indexOf(ctl, this.getClientControls());\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tindexInContainer: function () {\r\n\t\treturn this.container.indexOfControl(this);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tclientIndexInContainer: function () {\r\n\t\treturn this.container.indexOfClientControl(this);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcontrolAtIndex: function (idx) {\r\n\t\treturn this.controls[idx];\r\n\t},\r\n\r\n\t/**\r\n\t* Determines what the following sibling [control]{@link module:enyo/Control~Control} is for the current\r\n\t* [control]{@link module:enyo/Control~Control}.\r\n\t*\r\n\t* @method\r\n\t* @returns {module:enyo/Control~Control | null} The [control]{@link module:enyo/Control~Control} that is the] following\r\n\t*\tsibling. If no following sibling exists, we return `null`.\r\n\t* @public\r\n\t*/\r\n\tgetNextControl: function () {\r\n\t\tvar comps = this.getParent().children,\r\n\t\t\tcomp,\r\n\t\t\tsibling,\r\n\t\t\ti;\r\n\r\n\t\tfor (i = comps.length - 1; i >= 0; i--) {\r\n\t\t\tcomp = comps[i];\r\n\t\t\tif (comp === this) return sibling ? sibling : null;\r\n\t\t\tif (comp.generated) sibling = comp;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t},\r\n\r\n\t/**\r\n\t* Children\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\taddChild: function (child, before) {\r\n\t\t// if before is undefined, add to the end of the child list.\r\n\t\t// If it's null, add to front of list, otherwise add before the\r\n\t\t// specified control.\r\n\t\t//\r\n\t\t// allow delegating the child to a different container\r\n\t\tif (this.controlParent /*&& !child.isChrome*/) {\r\n\t\t\t// this.controlParent might have a controlParent, and so on; seek the ultimate parent\r\n\t\t\tthis.controlParent.addChild(child, before);\r\n\t\t} else {\r\n\t\t\t// NOTE: addChild drives setParent.\r\n\t\t\t// It's the opposite for setContainer, where containerChanged (in Containable)\r\n\t\t\t// drives addControl.\r\n\t\t\t// Because of the way 'parent' is derived from 'container', this difference is\r\n\t\t\t// helpful for implementing controlParent.\r\n\t\t\t// By the same token, since 'parent' is derived from 'container', setParent is\r\n\t\t\t// not intended to be called by client code. Therefore, the lack of parallelism\r\n\t\t\t// should be private to this implementation.\r\n\t\t\t// Set the child's parent property to this\r\n\t\t\tchild.setParent(this);\r\n\t\t\t// track in children array\r\n\t\t\tif (before !== undefined) {\r\n\t\t\t\tvar idx = (before === null) ? 0 : this.indexOfChild(before);\r\n\t\t\t\tthis.children.splice(idx, 0, child);\r\n\t\t\t} else {\r\n\t\t\t\tthis.children.push(child);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tremoveChild: function (child) {\r\n\t\treturn utils.remove(child, this.children);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tindexOfChild: function (child) {\r\n\t\treturn utils.indexOf(child, this.children);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tlayoutKindChanged: function () {\r\n\t\tif (this.layout) {\r\n\t\t\tthis.layout.destroy();\r\n\t\t}\r\n\t\tthis.layout = kind.createFromKind(this.layoutKind, this);\r\n\t\tif (this.generated) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tflow: function () {\r\n\t\tif (this.layout) {\r\n\t\t\tthis.layout.flow();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* CAVEAT: currently we use the entry point for both post-render layout work *and*\r\n\t* post-resize layout work.\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\treflow: function () {\r\n\t\tif (this.layout) {\r\n\t\t\tthis.layout.reflow();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Call after this [control]{@link module:enyo/Control~Control} has been resized to allow it to process the\r\n\t* size change. To respond to a resize, override `handleResize()` instead. Acts as syntactic\r\n\t* sugar for `waterfall('onresize')`.\r\n\t*\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tresize: function () {\r\n\t\tthis.waterfall('onresize');\r\n\t\tthis.waterfall('onpostresize');\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\thandleResize: function () {\r\n\t\t// FIXME: once we are in the business of reflowing layouts on resize, then we have an\r\n\t\t// inside/outside problem: some scenarios will need to reflow before child\r\n\t\t// controls reflow, and some will need to reflow after. Even more complex scenarios\r\n\t\t// have circular dependencies, and can require multiple passes or other resolution.\r\n\t\t// When we can rely on CSS to manage reflows we do not have these problems.\r\n\t\tthis.reflow();\r\n\t},\r\n\r\n\t/**\r\n\t* Sends a message to all of my descendants, but not myself. You can stop a\r\n\t* [waterfall]{@link module:enyo/Component~Component#waterfall} into [components]{@link module:enyo/Component~Component}\r\n\t* owned by a receiving [object]{@glossary Object} by returning a truthy value from the\r\n\t* {@glossary event} [handler]{@link module:enyo/Component~Component~EventHandler}.\r\n\t*\r\n\t* @method\r\n\t* @param {String} nom - The name of the {@glossary event}.\r\n\t* @param {Object} [event] - The event object to pass along.\r\n\t* @param {module:enyo/Component~Component} [sender=this] - The event's originator.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\twaterfallDown: function (nom, event, sender) {\r\n\t\tevent = event || {};\r\n\t\t// Note: Controls will generally be both in a $ hash and a child list somewhere.\r\n\t\t// Attempt to avoid duplicated messages by sending only to components that are not\r\n\t\t// UiComponent, as those components are guaranteed not to be in a child list.\r\n\t\t// May cause a problem if there is a scenario where a UiComponent owns a pure\r\n\t\t// Component that in turn owns Controls.\r\n\t\t//\r\n\t\t// waterfall to all pure components\r\n\t\tfor (var n in this.$) {\r\n\t\t\tif (!(this.$[n] instanceof UiComponent)) {\r\n\t\t\t\tthis.$[n].waterfall(nom, event, sender);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// waterfall to my children\r\n\t\tfor (var i=0, cs=this.children, c; (c=cs[i]); i++) {\r\n\t\t\tc.waterfall(nom, event, sender);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tgetBubbleTarget: function (nom, event) {\r\n\t\tif (event.delegate) return this.owner;\r\n\t\telse {\r\n\t\t\treturn (\r\n\t\t\t\tthis.bubbleTarget\r\n\t\t\t\t|| (this.cachedBubble && this.cachedBubbleTarget[nom])\r\n\t\t\t\t|| this.parent\r\n\t\t\t\t|| this.owner\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tbubbleTargetChanged: function (was) {\r\n\t\tif (was && this.cachedBubble && this.cachedBubbleTarget) {\r\n\t\t\tfor (var n in this.cachedBubbleTarget) {\r\n\t\t\t\tif (this.cachedBubbleTarget[n] === was) delete this.cachedBubbleTarget[n];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n","/**\r\n* Contains dispatcher methods\r\n* @module enyo/dispatcher\r\n* @private\r\n*/\r\nrequire('enyo');\r\n\r\nvar\r\n\tlogger = require('./logger'),\r\n\tmaster = require('./master'),\r\n\tutils = require('./utils');\r\n\r\nvar\r\n\tDom = require('./dom');\r\n\r\n/**\r\n * An [object]{@glossary Object} describing the the last known coordinates of the cursor or\r\n * user-interaction point in touch environments.\r\n *\r\n * @typedef {Object} module:enyo/dispatcher~CursorCoordinates\r\n * @property {Number} clientX - The horizontal coordinate within the application's client area.\r\n * @property {Number} clientY - The vertical coordinate within the application's client area.\r\n * @property {Number} pageX - The X coordinate of the cursor relative to the viewport, including any\r\n *   scroll offset.\r\n * @property {Number} pageY - The Y coordinate of the cursor relative to the viewport, including any\r\n *   scroll offset.\r\n * @property {Number} screenX - The X coordinate of the cursor relative to the screen, not including\r\n *   any scroll offset.\r\n * @property {Number} screenY - The Y coordinate of the cursor relative to the screen, not including\r\n *   any scroll offset.\r\n */\r\n\r\n/**\r\n* @private\r\n*/\r\nvar dispatcher = module.exports = dispatcher = {\r\n\r\n\t$: {},\r\n\r\n\t/**\r\n\t* These events come from document\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tevents: ['mousedown', 'mouseup', 'mouseover', 'mouseout', 'mousemove', 'mousewheel',\r\n\t\t'click', 'dblclick', 'change', 'keydown', 'keyup', 'keypress', 'input',\r\n\t\t'paste', 'copy', 'cut', 'webkitTransitionEnd', 'transitionend', 'webkitAnimationEnd', 'animationend',\r\n\t\t'webkitAnimationStart', 'animationstart', 'webkitAnimationIteration', 'animationiteration'],\r\n\r\n\t/**\r\n\t* These events come from window\r\n\t*\r\n\t* @private\r\n\t*/\r\n\twindowEvents: ['resize', 'load', 'unload', 'message', 'hashchange', 'popstate', 'focus', 'blur'],\r\n\r\n\t/**\r\n\t* Feature plugins (aka filters)\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfeatures: [],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconnect: function() {\r\n\t\tvar d = dispatcher, i, n;\r\n\t\tfor (i=0; (n=d.events[i]); i++) {\r\n\t\t\td.listen(document, n);\r\n\t\t}\r\n\t\tfor (i=0; (n=d.windowEvents[i]); i++) {\r\n\t\t\t// Chrome Packaged Apps don't like \"unload\"\r\n\t\t\tif(n === 'unload' &&\r\n\t\t\t\t(typeof global.chrome === 'object') &&\r\n\t\t\t\tglobal.chrome.app) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\td.listen(window, n);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tlisten: function(inListener, inEventName, inHandler) {\r\n\t\tinListener.addEventListener(inEventName, inHandler || dispatch, false);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstopListening: function(inListener, inEventName, inHandler) {\r\n\t\tinListener.removeEventListener(inEventName, inHandler || dispatch, false);\r\n\t},\r\n\r\n\t/**\r\n\t* Fires an event for Enyo to listen for.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdispatch: function(e) {\r\n\t\t// Find the control who maps to e.target, or the first control that maps to an ancestor of e.target.\r\n\t\tvar c = this.findDispatchTarget(e.target) || this.findDefaultTarget();\r\n\t\t// Cache the original target\r\n\t\te.dispatchTarget = c;\r\n\t\t// support pluggable features return true to abort immediately or set e.preventDispatch to avoid processing.\r\n\t\tfor (var i=0, fn; (fn=this.features[i]); i++) {\r\n\t\t\tif (fn.call(this, e) === true) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (c && !e.preventDispatch) {\r\n\t\t\treturn this.dispatchBubble(e, c);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Takes an event target and finds the corresponding Enyo control.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfindDispatchTarget: function(inNode) {\r\n\t\tvar t, n = inNode;\r\n\t\t// FIXME: Mozilla: try/catch is here to squelch \"Permission denied to access property xxx from a non-chrome context\"\r\n\t\t// which appears to happen for scrollbar nodes in particular. It's unclear why those nodes are valid targets if\r\n\t\t// it is illegal to interrogate them. Would like to trap the bad nodes explicitly rather than using an exception block.\r\n\t\ttry {\r\n\t\t\twhile (n) {\r\n\t\t\t\tif ((t = this.$[n.id])) {\r\n\t\t\t\t\t// there could be multiple nodes with this id, the relevant node for this event is n\r\n\t\t\t\t\t// we don't push this directly to t.node because sometimes we are just asking what\r\n\t\t\t\t\t// the target 'would be' (aka, calling findDispatchTarget from handleMouseOverOut)\r\n\t\t\t\t\tt.eventNode = n;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tn = n.parentNode;\r\n\t\t\t}\r\n\t\t} catch(x) {\r\n\t\t\tlogger.log(x, n);\r\n\t\t}\r\n\t\treturn t;\r\n\t},\r\n\r\n\t/**\r\n\t* Returns the default Enyo control for events.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfindDefaultTarget: function() {\r\n\t\treturn master;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdispatchBubble: function(e, c) {\r\n\t\tvar type = e.type;\r\n\t\ttype = e.customEvent ? type : 'on' + type;\r\n\t\treturn c.bubble(type, e, c);\r\n\t}\r\n};\r\n\r\n/**\r\n* Called in the context of an event.\r\n*\r\n* @name module:enyo/dispatcher.iePreventDefault\r\n* @static\r\n* @method\r\n* @private\r\n*/\r\ndispatcher.iePreventDefault = function() {\r\n\ttry {\r\n\t\tthis.returnValue = false;\r\n\t}\r\n\tcatch(e) {\r\n\t\t// do nothing\r\n\t}\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nfunction dispatch (inEvent) {\r\n\treturn dispatcher.dispatch(inEvent);\r\n}\r\n\r\n/**\r\n* @name module:enyo/dispatcher.bubble\r\n* @static\r\n* @method\r\n* @private\r\n*/\r\ndispatcher.bubble = function(inEvent) {\r\n\tif (inEvent) {\r\n\t\tdispatcher.dispatch(inEvent);\r\n\t}\r\n};\r\n\r\n// This string is set on event handlers attributes for DOM elements that\r\n// don't normally bubble (like onscroll) so that they can participate in the\r\n// Enyo event system.\r\ndispatcher.bubbler = 'enyo.bubble(arguments[0])';\r\n\r\n// The code below helps make Enyo compatible with Google Packaged Apps\r\n// Content Security Policy(http://developer.chrome.com/extensions/contentSecurityPolicy.html),\r\n// which, among other things, forbids the use of inline scripts.\r\n// We replace online scripting with equivalent means, leaving dispatcher.bubbler\r\n// for backward compatibility.\r\n(function() {\r\n\tvar bubbleUp = function() {\r\n\t\tdispatcher.bubble(arguments[0]);\r\n\t};\r\n\r\n\t/**\r\n\t* Makes given events bubble on a specified Enyo control.\r\n\t*\r\n\t* @name: module:enyo/dispatcher.makeBubble\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdispatcher.makeBubble = function() {\r\n\t\tvar args = Array.prototype.slice.call(arguments, 0),\r\n\t\t\tcontrol = args.shift();\r\n\r\n\t\tif((typeof control === 'object') && (typeof control.hasNode === 'function')) {\r\n\t\t\tutils.forEach(args, function(event) {\r\n\t\t\t\tif(this.hasNode()) {\r\n\t\t\t\t\tdispatcher.listen(this.node, event, bubbleUp);\r\n\t\t\t\t}\r\n\t\t\t}, control);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Removes the event listening and bubbling initiated by\r\n\t* [makeBubble()]{@link module:enyo/dispatcher.makeBubble} on a specific control.\r\n\t*\r\n\t* @name: module:enyo/dispatcher.unmakeBubble\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdispatcher.unmakeBubble = function() {\r\n\t\tvar args = Array.prototype.slice.call(arguments, 0),\r\n\t\t\tcontrol = args.shift();\r\n\r\n\t\tif((typeof control === 'object') && (typeof control.hasNode === 'function')) {\r\n\t\t\tutils.forEach(args, function(event) {\r\n\t\t\t\tif(this.hasNode()) {\r\n\t\t\t\t\tdispatcher.stopListening(this.node, event, bubbleUp);\r\n\t\t\t\t}\r\n\t\t\t}, control);\r\n\t\t}\r\n\t};\r\n})();\r\n\r\n/**\r\n* @private\r\n*/\r\n// FIXME: we need to create and initialize dispatcher someplace else to allow overrides\r\nDom.requiresWindow(dispatcher.connect);\r\n\r\n/**\r\n* Generates a tapped event for a raw-click event.\r\n*\r\n* @private\r\n*/\r\ndispatcher.features.push(\r\n\tfunction (e) {\r\n\t\tif ('click' === e.type) {\r\n\t\t\tif (e.clientX === 0 && e.clientY === 0 && !e.detail) {\r\n\t\t\t\t// this allows the click to dispatch as well\r\n\t\t\t\t// but note the tap event will fire first\r\n\t\t\t\tvar cp = utils.clone(e);\r\n\t\t\t\tcp.type = 'tap';\r\n\t\t\t\tcp.preventDefault = utils.nop;\r\n\t\t\t\tdispatcher.dispatch(cp);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n);\r\n\r\n/**\r\n* Instead of having multiple `features` pushed and handled in separate methods\r\n* for these events, we handle them uniformly here to expose the last known\r\n* interaction coordinates as accurately as possible.\r\n*\r\n* @private\r\n*/\r\nvar _xy = {};\r\ndispatcher.features.push(\r\n\tfunction (e) {\r\n\t\tif (\r\n\t\t\t(e.type == 'mousemove')  ||\r\n\t\t\t(e.type == 'tap')        ||\r\n\t\t\t(e.type == 'click')      ||\r\n\t\t\t(e.type == 'touchmove')\r\n\t\t) {\r\n\t\t\tvar evt = (e.type == 'touchmove') ? e.touches[0] : e;\r\n\t\t\t_xy.clientX = evt.clientX;\r\n\t\t\t_xy.clientY = evt.clientY;\r\n\t\t\t// note only ie8 does not support pageX/pageY\r\n\t\t\t_xy.pageX   = evt.pageX;\r\n\t\t\t_xy.pageY   = evt.pageY;\r\n\t\t\t// note ie8 and opera report these values incorrectly\r\n\t\t\t_xy.screenX = evt.screenX;\r\n\t\t\t_xy.screenY = evt.screenY;\r\n\t\t}\r\n\t}\r\n);\r\n\r\n/**\r\n* Retrieves the last known coordinates of the cursor or user-interaction point\r\n* in touch environments. Returns an immutable object with the `clientX`,\r\n* `clientY`, `pageX`, `pageY`, `screenX`, and `screenY` properties. It is\r\n* important to note that IE8 and Opera have improper reporting for the\r\n* `screenX` and `screenY` properties (they both use CSS pixels as opposed to\r\n* device pixels).\r\n*\r\n* @returns {module:enyo/dispatcher~CursorCoordinates} An [object]{@glossary Object} describing the\r\n*\tthe last known coordinates of the cursor or user-interaction point in touch environments.\r\n* @public\r\n*/\r\ndispatcher.getPosition = function () {\r\n\treturn utils.clone(_xy);\r\n};\r\n\r\n\r\n/**\r\n* Key mapping feature: Adds a `keySymbol` property to key [events]{@glossary event},\r\n* based on a global key mapping. Use\r\n* [registerKeyMap()]{@link module:enyo/dispatcher.registerKeyMap} to add\r\n* keyCode-to-keySymbol mappings via a simple hash. This method may be called\r\n* multiple times from different libraries to mix different maps into the global\r\n* mapping table; if conflicts arise, the last-in wins.\r\n*\r\n* ```\r\n* dispatcher.registerKeyMap({\r\n* \t415 : 'play',\r\n* \t413 : 'stop',\r\n* \t19  : 'pause',\r\n* \t412 : 'rewind',\r\n* \t417 : 'fastforward'\r\n* });\r\n* ```\r\n*\r\n* @private\r\n*/\r\ndispatcher.features.push(function(e) {\r\n\tif ((e.type === 'keydown') || (e.type === 'keyup') || (e.type === 'keypress')) {\r\n\t\te.keySymbol = this.keyMap[e.keyCode];\r\n\t\t// Dispatch key events to be sent via Signals\r\n\t\tvar c = this.findDefaultTarget();\r\n\t\tif (e.dispatchTarget !== c) {\r\n\t\t\tthis.dispatchBubble(e, c);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nutils.mixin(dispatcher, {\r\n\tkeyMap: {},\r\n\tregisterKeyMap: function(map) {\r\n\t\tutils.mixin(this.keyMap, map);\r\n\t}\r\n});\r\n\r\n\r\n/**\r\n* Event modal capture feature. Capture events to a specific control via\r\n* [capture(inControl, inShouldForward)]{@linkcode module:enyo/dispatcher.capture};\r\n* release events via [release()]{@link module:enyo/dispatcher.release}.\r\n*\r\n* @private\r\n*/\r\ndispatcher.features.push(function(e) {\r\n\tif (this.captureTarget) {\r\n\t\tvar c = e.dispatchTarget;\r\n\t\tvar eventName = (e.customEvent ? '' : 'on') + e.type;\r\n\t\tvar handlerName = this.captureEvents[eventName];\r\n\t\tvar handlerScope = this.captureHandlerScope || this.captureTarget;\r\n\t\tvar handler = handlerName && handlerScope[handlerName];\r\n\t\tvar shouldCapture = handler && !(c && c.isDescendantOf && c.isDescendantOf(this.captureTarget));\r\n\t\tif (shouldCapture) {\r\n\t\t\tvar c1 = e.captureTarget = this.captureTarget;\r\n\t\t\t// NOTE: We do not want releasing capture while an event is being processed to alter\r\n\t\t\t// the way the event propagates. Therefore decide if the event should forward\r\n\t\t\t// before the capture target receives the event (since it may release capture).\r\n\t\t\te.preventDispatch = handler && handler.apply(handlerScope, [c1, e]) && !this.autoForwardEvents[e.type];\r\n\t\t}\r\n\t}\r\n});\r\n\r\n//\r\n//        NOTE: This object is a plug-in; these methods should\r\n//        be called on `enyo/dispatcher`, and not on the plug-in itself.\r\n//\r\nutils.mixin(dispatcher, {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tautoForwardEvents: {leave: 1, resize: 1},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcaptures: [],\r\n\r\n\t/**\r\n\t* Captures [events]{@glossary event} for `inTarget`, where `inEvents` is specified as a\r\n\t* hash of event names mapped to callback handler names to be called on `inTarget` (or,\r\n\t* optionally, `inScope`). The callback is called when any of the captured events are\r\n\t* dispatched outside of the capturing control. Returning `true` from the callback stops\r\n\t* dispatch of the event to the original `dispatchTarget`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tcapture: function(inTarget, inEvents, inScope) {\r\n\t\tvar info = {target: inTarget, events: inEvents, scope: inScope};\r\n\t\tthis.captures.push(info);\r\n\t\tthis.setCaptureInfo(info);\r\n\t},\r\n\r\n\t/**\r\n\t* Removes the specified target from the capture list.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\trelease: function(inTarget) {\r\n\t\tfor (var i = this.captures.length - 1; i >= 0; i--) {\r\n\t\t\tif (this.captures[i].target === inTarget) {\r\n\t\t\t\tthis.captures.splice(i,1);\r\n\t\t\t\tthis.setCaptureInfo(this.captures[this.captures.length-1]);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the information for a captured {@glossary event}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsetCaptureInfo: function(inInfo) {\r\n\t\tthis.captureTarget = inInfo && inInfo.target;\r\n\t\tthis.captureEvents = inInfo && inInfo.events;\r\n\t\tthis.captureHandlerScope = inInfo && inInfo.scope;\r\n\t}\r\n});\r\n\r\n\r\n(function () {\r\n\t/**\r\n\t* Dispatcher preview feature\r\n\t*\r\n\t* Allows {@link module:enyo/Control~Control} ancestors of the {@glossary event} target\r\n\t* a chance (eldest first) to react by implementing `previewDomEvent`.\r\n\t*\r\n\t* @todo Revisit how/if we document this\r\n\t* @private\r\n\t*/\r\n\tvar fn = 'previewDomEvent';\r\n\tvar preview = {\r\n\r\n\t\tfeature: function(e) {\r\n\t\t\tpreview.dispatch(e, e.dispatchTarget);\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t* @returns {(Boolean|undefined)} Handlers return `true` to abort preview and prevent default\r\n\t\t*\tevent processing.\r\n\t\t*/\r\n\t\tdispatch: function(evt, control) {\r\n\t\t\tvar i, l,\r\n\t\t\tlineage = this.buildLineage(control);\r\n\t\t\tfor (i=0; (l=lineage[i]); i++) {\r\n\t\t\t\tif (l[fn] && l[fn](evt) === true) {\r\n\t\t\t\t\tevt.preventDispatch = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t* We ascend, making a list of Enyo [controls]{@link module:enyo/Control~Control}.\r\n\t\t*\r\n\t\t* Note that a control is considered to be its own ancestor.\r\n\t\t*/\r\n\t\tbuildLineage: function(control) {\r\n\t\t\tvar lineage = [],\r\n\t\t\t\tc = control;\r\n\t\t\twhile (c) {\r\n\t\t\t\tlineage.unshift(c);\r\n\t\t\t\tc = c.parent;\r\n\t\t\t}\r\n\t\t\treturn lineage;\r\n\t\t}\r\n\t};\r\n\r\n\tdispatcher.features.push(preview.feature);\r\n})();\r\n","/**\r\n* Mixin for adding WAI-ARIA attributes to controls\r\n*\r\n* @module enyo/AccessibilitySupport\r\n*/\r\n\r\nvar\r\n\tdispatcher = require('../dispatcher'),\r\n\tkind = require('../kind'),\r\n\tplatform = require('../platform'),\r\n\tutils = require('../utils');\r\n\r\nvar defaultObservers = [\r\n\t{from: 'accessibilityDisabled', method: function () {\r\n\t\tthis.setAriaAttribute('aria-hidden', this.accessibilityDisabled ? 'true' : null);\r\n\t}},\r\n\t{from: 'accessibilityLive', method: function () {\r\n\t\tvar live = this.accessibilityLive === true && 'assertive' || this.accessibilityLive || null;\r\n\t\tthis.setAriaAttribute('aria-live', live);\r\n\t}},\r\n\t{path: ['accessibilityAlert', 'accessibilityRole'], method: function () {\r\n\t\tvar role = this.accessibilityAlert && 'alert' || this.accessibilityRole || null;\r\n\t\tthis.setAriaAttribute('role', role);\r\n\t}},\r\n\t{path: ['content', 'accessibilityHint', 'accessibilityLabel', 'tabIndex'], method: function () {\r\n\t\tvar focusable = this.accessibilityLabel || this.content || this.accessibilityHint || false,\r\n\t\t\tprefix = this.accessibilityLabel || this.content || null,\r\n\t\t\tlabel = this.accessibilityHint && prefix && (prefix + ' ' + this.accessibilityHint) ||\r\n\t\t\t\t\tthis.accessibilityHint ||\r\n\t\t\t\t\tthis.accessibilityLabel ||\r\n\t\t\t\t\tnull;\r\n\r\n\t\tthis.setAriaAttribute('aria-label', label);\r\n\r\n\t\t// A truthy or zero tabindex will be set directly\r\n\t\tif (this.tabIndex || this.tabIndex === 0) {\r\n\t\t\tthis.setAriaAttribute('tabindex', this.tabIndex);\r\n\t\t}\r\n\t\t// The webOS browser will only read nodes with a non-null tabindex so if the node has\r\n\t\t// readable content, make it programmably focusable.\r\n\t\telse if (focusable && this.tabIndex === undefined && platform.webos) {\r\n\t\t\tthis.setAriaAttribute('tabindex', -1);\r\n\t\t}\r\n\t\t// Otherwise, remove it\r\n\t\telse {\r\n\t\t\tthis.setAriaAttribute('tabindex', null);\r\n\t\t}\r\n\t}}\r\n];\r\n\r\n/**\r\n* Prevents browser-initiated scrolling of contained controls into view when\r\n* those controls are explicitly focused.\r\n*\r\n* @private\r\n*/\r\nfunction preventScroll (node, rtl) {\r\n\tif (node) {\r\n\t\tdispatcher.listen(node, 'scroll', function () {\r\n\t\t\tnode.scrollTop = 0;\r\n\t\t\t// TODO: This probably won't work cross-browser, as the different\r\n\t\t\t// browser engines appear to treat scrollLeft differently in RTL.\r\n\t\t\t// See ENYO-2841.\r\n\t\t\tnode.scrollLeft = rtl ? node.scrollWidth : 0;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction updateAriaAttributes (all) {\r\n\tvar i, l, obs;\r\n\r\n\tfor (i = 0, l = this._ariaObservers.length; i < l; i++) {\r\n\t\tobs = this._ariaObservers[i];\r\n\t\tif ((all || obs.pending) && obs.method) {\r\n\t\t\tobs.method();\r\n\t\t\tobs.pending = false;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction registerAriaUpdate (obj) {\r\n\tvar fn;\r\n\tif (!obj.pending) {\r\n\t\tobj.pending = true;\r\n\t\tfn = this.bindSafely(updateAriaAttributes);\r\n\t\tif (!this.accessibilityDefer) {\r\n\t\t\tfn();\r\n\t\t} else {\r\n\t\t\tthis.startJob('updateAriaAttributes', fn, 16);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction toAriaAttribute (from, to) {\r\n\tvar value = this[from];\r\n\tthis.setAriaAttribute(to, value === undefined ? null : value);\r\n}\r\n\r\nfunction staticToAriaAttribute (to, value) {\r\n\tthis.setAriaAttribute(to, value);\r\n}\r\n\r\nfunction initAriaObservers (control) {\r\n\tvar conf = control._ariaObservers,\r\n\t\ti, l, fn;\r\n\r\n\tcontrol._ariaObservers = [];\r\n\tfor (i = 0, l = defaultObservers.length; i < l; i++) {\r\n\t\tinitAriaObserver(control, defaultObservers[i]);\r\n\t}\r\n\tif (conf) {\r\n\t\tfor (i = 0, l = conf.length; i < l; i++) {\r\n\t\t\tinitAriaObserver(control, conf[i]);\r\n\t\t}\r\n\t}\r\n\r\n\t// setup disabled observer and kickoff first run of observers\r\n\tfn = updateAriaAttributes.bind(control, true);\r\n\tcontrol.addObserver('accessibilityDisabled', fn);\r\n\tfn();\r\n}\r\n\r\nfunction initAriaObserver (control, c) {\r\n\tvar\r\n\t\t// path can either source from 'path' or 'from' (for binding-style configs)\r\n\t\tpath = c.path || c.from,\r\n\r\n\t\t// method is either:\r\n\t\t// \t\t'method', if it exists, or\r\n\t\t// \t\tstaticToAriaAttribute if 'to' and 'value' exist - static binding-style config, or\r\n\t\t// \t\ttoAriaAttribute if a 'to' path exists - binding-style config\r\n\t\tmethod = c.method && control.bindSafely(c.method) ||\r\n\t\t\t\t!path && c.to && c.value !== undefined && control.bindSafely(staticToAriaAttribute, c.to, c.value) ||\r\n\t\t\t\tc.to && control.bindSafely(toAriaAttribute, path, c.to) ||\r\n\t\t\t\tnull,\r\n\r\n\t\t// import the relevant and pre-validated parts into the instance-level config\r\n\t\tconfig = {\r\n\t\t\tpath: path,\r\n\t\t\tmethod: method,\r\n\t\t\tpending: false\r\n\t\t},\r\n\r\n\t\t// pre-bind the register method as it's used multiple times when 'path' is an array\r\n\t\tfn = registerAriaUpdate.bind(control, config),\r\n\r\n\t\t// iterator\r\n\t\tl;\r\n\r\n\tcontrol._ariaObservers.push(config);\r\n\tif (utils.isArray(path)) {\r\n\t\tfor (l = path.length - 1; l >= 0; --l) {\r\n\t\t\tcontrol.addObserver(path[l], fn);\r\n\t\t}\r\n\t}\r\n\telse if (path) {\r\n\t\tcontrol.addObserver(path, fn);\r\n\t}\r\n}\r\n\r\n/**\r\n* @mixin\r\n*/\r\nvar AccessibilitySupport = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.AccessibilitySupport',\r\n\r\n\t/**\r\n\t* `accessibilityLabel` is used for accessibility voice readout. If\r\n\t* `accessibilityLabel` is set, the screen reader will read the label when the\r\n\t* control is focused.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\taccessibilityLabel: '',\r\n\r\n\t/**\r\n\t* `accessibilityHint` is used to provide additional information regarding the\r\n\t* control. If `accessibilityHint` is set, the screen reader will read the\r\n\t* hint content when the control is focused.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\taccessibilityHint: '',\r\n\r\n\t/**\r\n\t* The `role` of the control. May be superseded by a truthy `accessibilityAlert` value.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: '',\r\n\r\n\t/**\r\n\t* `accessibilityAlert` affects the handling of alert message or page\r\n\t* description content. If `true`, aria role will be set to \"alert\" and the\r\n\t* screen reader will automatically read the content of `accessibilityLabel`,\r\n\t* regardless of focus state; if `false` (the default), the label will be read\r\n\t* when the control receives focus. Note that if you use `accessibilityAlert`,\r\n\t* the previous role will be replaced with \"alert\" role.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\taccessibilityAlert: false,\r\n\r\n\t/**\r\n\t* `accessibilityLive` affects the handling of dynamic content that updates\r\n\t* without a page reload. If `true`, the screen reader will read the content of\r\n\t* `accessibilityLabel` when the content changes; if `false` (the default), the\r\n\t* label will be read when the control gains focus.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\taccessibilityLive: false,\r\n\r\n\t/**\r\n\t* `accessibilityDisabled` is used to prevent voice readout. If `true`, the\r\n\t* screen reader will not read the label for the control. Note that this is not\r\n\t* working on HTML form elements which can get focus without tabindex.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\taccessibilityDisabled: false,\r\n\r\n\t/**\r\n\t* When `true`, `onscroll` events will be observed and scrolling will be\r\n\t* prevented by resetting the node's `scrollTop` and `scrollLeft` values. This\r\n\t* prevents inadvertent layout issues introduced by the browser's scrolling\r\n\t* contained controls into view when focused.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\taccessibilityPreventScroll: false,\r\n\r\n\t/**\r\n\t* The `tabindex` of the control. When `undefined` on webOS, it will be set to\r\n\t* `-1` to enable screen reading. A value of `null` (or `undefined` on\r\n\t* non-webOS) ensures that no `tabindex` will be set.\r\n\t*\r\n\t* @type {Number}\r\n\t* @default undefined\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tinitAriaObservers(this);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* If `accessibilityDisabled` is `false`, sets the specified node attribute;\r\n\t* otherwise, removes it.\r\n\t*\r\n\t* @param {String} name  Attribute name\r\n\t* @param {String} value Attribute value\r\n\t* @public\r\n\t*/\r\n\tsetAriaAttribute: function (name, value) {\r\n\t\t// if the control is disabled, don't set any aria properties except aria-hidden\r\n\t\tif (this.accessibilityDisabled && name != 'aria-hidden') {\r\n\t\t\tvalue = null;\r\n\t\t}\r\n\t\t// if the value is defined and non-null, cast it to a String\r\n\t\telse if (value !== undefined && value !== null) {\r\n\t\t\tvalue = String(value);\r\n\t\t}\r\n\t\t// prevent invalidating attributes unnecessarily by checking current value first. avoids\r\n\t\t// resetting values on alert-able properties (e.g. aria-valuenow).\r\n\t\tif (this.getAttribute(name) !== value) {\r\n\t\t\tthis.setAttribute(name, value);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (this.accessibilityPreventScroll) {\r\n\t\t\t\tpreventScroll(this.hasNode(), this.rtl);\r\n\t\t\t}\r\n\t\t};\r\n\t})\r\n};\r\n\r\nvar sup = kind.concatHandler;\r\nkind.concatHandler = function (ctor, props, instance) {\r\n\tsup.call(this, ctor, props, instance);\r\n\r\n\tvar proto = ctor.prototype || ctor,\r\n\t\tariaObservers = proto._ariaObservers && proto._ariaObservers.slice(),\r\n\t\tincoming = props.ariaObservers;\r\n\r\n\tif (incoming && incoming instanceof Array) {\r\n\t\tif (ariaObservers) {\r\n\t\t\tariaObservers.push.apply(ariaObservers, incoming);\r\n\t\t} else {\r\n\t\t\tariaObservers = incoming.slice();\r\n\t\t}\r\n\t}\r\n\r\n\tproto._ariaObservers = ariaObservers;\r\n};\r\n\r\nmodule.exports = AccessibilitySupport;","var\r\n\tdispatcher = require('../dispatcher'),\r\n\tutils = require('../utils'),\r\n\tready = require('../ready'),\r\n\tSignals = require('../Signals');\r\n\r\n/**\r\n* Normalizes and provides fullscreen support for [controls]{@link module:enyo/Control~Control},\r\n* based on the [fullscreen]{@glossary fullscreen} API.\r\n*\r\n* @module enyo/Control/fullscreen\r\n* @public\r\n*/\r\nmodule.exports = function (Control) {\r\n\tvar floatingLayer = Control.floatingLayer;\r\n\tvar fullscreen = {\r\n\t\t\r\n\t\t/**\r\n\t\t* Reference to the current fullscreen [control]{@link module:enyo/Control~Control}.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tfullscreenControl: null,\r\n\r\n\t\t/**\r\n\t\t* Reference to the current fullscreen element (fallback for platforms\r\n\t\t* without native support).\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tfullscreenElement: null,\r\n\r\n\t\t/** \r\n\t\t* Reference to that [control]{@link module:enyo/Control~Control} that requested fullscreen.\r\n\t\t* \r\n\t\t* @private\r\n\t\t*/\r\n\t\trequestor: null,\r\n\r\n\t\t/** \r\n\t\t* Native accessor used to get reference to the current fullscreen element.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\telementAccessor:\r\n\t\t\t('fullscreenElement' in document) ? 'fullscreenElement' :\r\n\t\t\t('mozFullScreenElement' in document) ? 'mozFullScreenElement' :\r\n\t\t\t('webkitFullscreenElement' in document) ? 'webkitFullscreenElement' :\r\n\t\t\tnull,\r\n\r\n\t\t/** \r\n\t\t* Native accessor used to request fullscreen.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\trequestAccessor:\r\n\t\t\t('requestFullscreen' in document.documentElement) ? 'requestFullscreen' :\r\n\t\t\t('mozRequestFullScreen' in document.documentElement) ? 'mozRequestFullScreen' :\r\n\t\t\t('webkitRequestFullscreen' in document.documentElement) ? 'webkitRequestFullscreen' :\r\n\t\t\tnull,\r\n\r\n\t\t/** \r\n\t\t* Native accessor used to cancel fullscreen.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tcancelAccessor:\r\n\t\t\t('cancelFullScreen' in document) ? 'cancelFullScreen' :\r\n\t\t\t('mozCancelFullScreen' in document) ? 'mozCancelFullScreen' :\r\n\t\t\t('webkitCancelFullScreen' in document) ? 'webkitCancelFullScreen' :\r\n\t\t\tnull,\r\n\r\n\t\t/**\r\n\t\t* Determines whether the platform supports the [fullscreen]{@glossary fullscreen} API.\r\n\t\t* \r\n\t\t* @returns {Boolean} Returns `true` if platform supports all of the \r\n\t\t*\t[fullscreen]{@glossary fullscreen} API, `false` otherwise.\r\n\t\t* @public\r\n\t\t*/\r\n\t\tnativeSupport: function() {\r\n\t\t\treturn (this.elementAccessor !== null && this.requestAccessor !== null && this.cancelAccessor !== null);\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t* Normalizes `getFullscreenElement()`.\r\n\t\t*\r\n\t\t* @public\r\n\t\t*/\r\n\t\tgetFullscreenElement: function() {\r\n\t\t\treturn (this.nativeSupport()) ? document[this.elementAccessor] : this.fullscreenElement;\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t* Returns current fullscreen [control]{@link module:enyo/Control~Control}.\r\n\t\t*\r\n\t\t* @public\r\n\t\t*/\r\n\t\tgetFullscreenControl: function() {\r\n\t\t\treturn this.fullscreenControl;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Normalizes `requestFullscreen()`.\r\n\t\t*\r\n\t\t* @public\r\n\t\t*/\r\n\t\trequestFullscreen: function(ctl) {\r\n\t\t\tif (this.getFullscreenControl() || !(ctl.hasNode())) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.requestor = ctl;\r\n\r\n\t\t\t// Only use native request if platform supports all of the API\r\n\t\t\tif (this.nativeSupport()) {\r\n\t\t\t\tctl.hasNode()[this.requestAccessor]();\r\n\t\t\t} else {\r\n\t\t\t\tthis.fallbackRequestFullscreen();\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t* Normalizes `cancelFullscreen()`.\r\n\t\t*\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcancelFullscreen: function() {\r\n\t\t\tif (this.nativeSupport()) {\r\n\t\t\t\tdocument[this.cancelAccessor]();\r\n\t\t\t} else {\r\n\t\t\t\tthis.fallbackCancelFullscreen();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t* Fallback support for setting fullscreen element (done by browser on platforms with\r\n\t\t* native support).\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tsetFullscreenElement: function(node) {\r\n\t\t\tthis.fullscreenElement = node;\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t* Sets current fullscreen [control]{@link module:enyo/Control~Control}.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tsetFullscreenControl: function(ctl) {\r\n\t\t\tthis.fullscreenControl = ctl;\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t* Fallback fullscreen request for platforms without fullscreen support.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tfallbackRequestFullscreen: function() {\r\n\t\t\tvar control = this.requestor;\r\n\r\n\t\t\tif (!control) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Get before node to allow us to exit floating layer to the proper position\r\n\t\t\tcontrol.prevAddBefore = control.parent.controlAtIndex(control.indexInContainer() + 1);\r\n\r\n\t\t\t// Render floating layer if we need to\r\n\t\t\tif (!floatingLayer.hasNode()) {\r\n\t\t\t\tfloatingLayer.render();\r\n\t\t\t}\r\n\r\n\t\t\tcontrol.addClass('enyo-fullscreen');\r\n\t\t\tcontrol.appendNodeToParent(floatingLayer.hasNode());\r\n\t\t\tcontrol.resize();\r\n\r\n\t\t\tthis.setFullscreenControl(control);\r\n\t\t\tthis.setFullscreenElement(control.hasNode());\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t* Fallback cancel fullscreen for platforms without fullscreen support.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tfallbackCancelFullscreen: function() {\r\n\t\t\tvar control = this.fullscreenControl,\r\n\t\t\t\tbeforeNode,\r\n\t\t\t\tparentNode\r\n\t\t\t;\r\n\r\n\t\t\tif (!control) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Find beforeNode based on _this.addBefore_ and _this.prevAddBefore_\r\n\t\t\tbeforeNode = (control.prevAddBefore) ? control.prevAddBefore.hasNode() : null;\r\n\t\t\tparentNode = control.parent.hasNode();\r\n\t\t\tcontrol.prevAddBefore = null;\r\n\r\n\t\t\tcontrol.removeClass('enyo-fullscreen');\r\n\r\n\t\t\tif (!beforeNode) {\r\n\t\t\t\tcontrol.appendNodeToParent(parentNode);\r\n\t\t\t} else {\r\n\t\t\t\tcontrol.insertNodeInParent(parentNode, beforeNode);\r\n\t\t\t}\r\n\r\n\t\t\tcontrol.resize();\r\n\r\n\t\t\tthis.setFullscreenControl(null);\r\n\t\t\tthis.setFullscreenElement(null);\r\n\t\t},\r\n\r\n\t\t/** \r\n\t\t* Listens for fullscreen change {@glossary event} and broadcasts it as a\r\n\t\t* normalized event.\r\n\t\t*\r\n\t\t* @private\r\n\t\t*/\r\n\t\tdetectFullscreenChangeEvent: function() {\r\n\t\t\tthis.setFullscreenControl(this.requestor);\r\n\t\t\tthis.requestor = null;\r\n\r\n\t\t\t// Broadcast change\r\n\t\t\tSignals.send('onFullscreenChange');\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t* Normalizes platform-specific fullscreen change [events]{@glossary event}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tready(function() {\r\n\t\tdocument.addEventListener('webkitfullscreenchange', utils.bind(fullscreen, 'detectFullscreenChangeEvent'), false);\r\n\t\tdocument.addEventListener('mozfullscreenchange',    utils.bind(fullscreen, 'detectFullscreenChangeEvent'), false);\r\n\t\tdocument.addEventListener('fullscreenchange',       utils.bind(fullscreen, 'detectFullscreenChangeEvent'), false);\r\n\t});\r\n\r\n\t/**\r\n\t* If this platform doesn't have native support for fullscreen, add an escape handler to mimic \r\n\t* native behavior.\r\n\t*/\r\n\tif(!fullscreen.nativeSupport()) {\r\n\t\tdispatcher.features.push(\r\n\t\t\tfunction(e) {\r\n\t\t\t\tif (e.type === 'keydown' && e.keyCode === 27) {\r\n\t\t\t\t\tfullscreen.cancelFullscreen();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\treturn fullscreen;\r\n};","var\r\n\tdispatcher = require('../dispatcher'),\r\n\tutils = require('../utils');\r\n\r\nvar\r\n\tgestureUtil = require('./util');\r\n\r\n/**\r\n* Enyo supports a cross-platform set of drag [events]{@glossary event}. These\r\n* events allow users to write a single set of event handlers for applications\r\n* that run on both mobile and desktop platforms.\r\n*\r\n* The following events are provided:\r\n*\r\n* * 'dragstart'\r\n* * 'dragfinish'\r\n* * 'drag'\r\n* * 'drop'\r\n* * 'dragover'\r\n* * 'dragout'\r\n* * 'hold'\r\n* * 'release'\r\n* * 'holdpulse'\r\n* * 'flick'\r\n*\r\n* For more information on these events, see the documentation on\r\n* [Event Handling]{@linkplain $dev-guide/key-concepts/event-handling.html} in\r\n* the Enyo Developer Guide.\r\n*\r\n* Used internally by {@link module:enyo/gesture}\r\n*\r\n* @module enyo/gesture/drag\r\n* @public\r\n*/\r\nmodule.exports = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tholdPulseDefaultConfig: {\r\n\t\tfrequency: 200,\r\n\t\tevents: [{name: 'hold', time: 200}],\r\n\t\tresume: false,\r\n\t\tpreventTap: false,\r\n\t\tmoveTolerance: 16,\r\n\t\tendHold: 'onMove'\r\n\t},\r\n\r\n\t/**\r\n\t* Call this method to specify the framework's 'holdPulse' behavior, which\r\n\t* determines the nature of the events generated when a user presses and holds\r\n\t* on a user interface element.\r\n\t*\r\n\t* By default, an `onhold` event fires after 200 ms. After that, an `onholdpulse`\r\n\t* event fires every 200 ms until the user stops holding, at which point a\r\n\t* `onrelease` event fires.\r\n\t*\r\n\t* To change the default behavior, call this method and pass it a holdPulse\r\n\t* configuration object. The holdPulse configuration object has a number of\r\n\t* properties.\r\n\t*\r\n\t* You can specify a set of custom hold events by setting the `events` property\r\n\t* to an array containing one or more objects. Each object specifies a custom\r\n\t* hold event, in the form of a `name` / `time` pair. Notes:\r\n\t*\r\n\t*  * Your custom event names should not include the 'on' prefix; that will be\r\n\t*    added automatically by the framework.\r\n\t*\r\n\t*  * Times should be specified in milliseconds.\r\n\t*\r\n\t*  * Your `events` array overrides the framework defaults entirely, so if you\r\n\t*    want the standard `hold` event to fire at 200 ms (in addition to whatever\r\n\t*    custom events you define), you'll need to redefine it yourself as part of\r\n\t*    your `events` array.\r\n\t*\r\n\t* Regardless of how many custom hold events you define, `onholdpulse` events\r\n\t* will start firing after the first custom hold event fires, and continue until\r\n\t* the user stops holding. Likewise, only one `onrelease` event will fire,\r\n\t* regardless of how many custom hold events you define.\r\n\t*\r\n\t* The`frequency` parameter determines not only how often `holdpulse` events are\r\n\t* sent, but the frequency with which the hold duration is measured. This means\r\n\t* that the value you set for `frequency` should always be a common factor of the\r\n\t* times you set for your custom hold events, to ensure accurate event timing.\r\n\t*\r\n\t* You can use the `endHold` property to specify the circumstances under which a\r\n\t* hold is considered to end. Set `endHold` to `onMove` (the default) if you want\r\n\t* the hold to end as soon as the user's finger or pointer moves. Set `endHold`\r\n\t* to `onLeave` if you want the hold to end only when the finger or pointer\r\n\t* leaves the element altogether. When specifying `onMove`, you can also provide\r\n\t* a `moveTolerance` value (default: `16`) that determines how tolerant you want\r\n\t* to be of small movements when deciding whether a hold has ended. The higher\r\n\t* the value, the further a user's finger or pointer may move without causing\r\n\t* the hold to end.\r\n\t*\r\n\t* The `resume` parameter (default: `false`) specifies whether a hold\r\n\t* that has ended due to finger / pointer movement should be resumed if the\r\n\t* user's finger or pointer moves back inside the tolerance threshold (in the\r\n\t* case of `endHold: onMove`) or back over the element (in the case of\r\n\t* `endHold: onLeave`).\r\n\t*\r\n\t* Finally, the `preventTap` paramenter (default: `false`) allows you to prevent\r\n\t* an `ontap` event from firing when the hold is released.\r\n\t*\r\n\t* Here is an example:\r\n\t*\r\n\t* ```\r\n\t* gesture.drag.configureHoldPulse({\r\n\t*     frequency: 100,\r\n\t*     events: [\r\n\t*         {name: 'hold', time: 200},\r\n\t*         {name: 'longpress', time: 500}\r\n\t*     ],\r\n\t*     endHold: 'onLeave',\r\n\t*     resume: true,\r\n\t*     preventTap: true\r\n\t* });\r\n\t* ```\r\n\t* For comparison, here are the out-of-the-box defaults:\r\n\t*\r\n\t* ```\r\n\t* gesture.drag.configureHoldPulse({\r\n\t*     frequency: 200,\r\n\t*     events: [\r\n\t*         {name: 'hold', time: 200}\r\n\t*     ],\r\n\t*     endHold: 'onMove',\r\n\t*     moveTolerance: 16,\r\n\t*     resume: false,\r\n\t*     preventTap: false\r\n\t* });\r\n\t* ```\r\n\t*\r\n\t* The settings you provide via this method will be applied globally, affecting\r\n\t* every Control. Note that you can also override the defaults on a case-by-case\r\n\t* basis by handling the `down` event for any Control and calling the\r\n\t* `configureHoldPulse` method exposed by the event itself. That method works\r\n\t* exactly like this one, except that the settings you provide will apply only to\r\n\t* holds on that particular Control.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tconfigureHoldPulse: function (config) {\r\n\t\t// TODO: Might be nice to do some validation, error handling\r\n\r\n\t\t// _holdPulseConfig represents the current, global `holdpulse` settings, if the default\r\n\t\t// settings have been overridden in some way.\r\n\t\tthis._holdPulseConfig = this._holdPulseConfig || utils.clone(this.holdPulseDefaultConfig, true);\r\n\t\tutils.mixin(this._holdPulseConfig, config);\r\n\t},\r\n\r\n\t/**\r\n\t* Resets the `holdPulse` behavior to the default settings.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tresetHoldPulseConfig: function () {\r\n\t\tthis._holdPulseConfig = null;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tholdPulseConfig: {},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttrackCount: 5,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tminFlick: 0.1,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tminTrack: 8,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdown: function(e) {\r\n\t\t// tracking if the mouse is down\r\n\t\t//enyo.log('tracking ON');\r\n\t\t// Note: 'tracking' flag indicates interest in mousemove, it's turned off\r\n\t\t// on mouseup\r\n\t\t// make sure to stop dragging in case the up event was not received.\r\n\t\tthis.stopDragging(e);\r\n\t\tthis.target = e.target;\r\n\t\tthis.startTracking(e);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmove: function(e) {\r\n\t\tif (this.tracking) {\r\n\t\t\tthis.track(e);\r\n\t\t\t// If the mouse is not down and we're tracking a drag, abort.\r\n\t\t\t// this error condition can occur on IE/Webkit after interaction with a scrollbar.\r\n\t\t\tif (!e.which) {\r\n\t\t\t\tthis.stopDragging(e);\r\n\t\t\t\tthis.endHold();\r\n\t\t\t\tthis.tracking = false;\r\n\t\t\t\t//enyo.log('gesture.drag: mouse must be down to drag.');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.dragEvent) {\r\n\t\t\t\tthis.sendDrag(e);\r\n\t\t\t} else if (this.holdPulseConfig.endHold === 'onMove') {\r\n\t\t\t\tif (this.dy*this.dy + this.dx*this.dx >= this.holdPulseConfig.moveTolerance) { // outside of target\r\n\t\t\t\t\tif (this.holdJob) { // only stop/cancel hold job if it currently exists\r\n\t\t\t\t\t\tif (this.holdPulseConfig.resume) { // pause hold to potentially resume later\r\n\t\t\t\t\t\t\tthis.suspendHold();\r\n\t\t\t\t\t\t} else { // completely cancel hold\r\n\t\t\t\t\t\t\tthis.endHold();\r\n\t\t\t\t\t\t\tthis.sendDragStart(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.holdPulseConfig.resume && !this.holdJob) { // when moving inside target, only resume hold job if it was previously paused\r\n\t\t\t\t\tthis.resumeHold();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tup: function(e) {\r\n\t\tthis.endTracking(e);\r\n\t\tthis.stopDragging(e);\r\n\t\tthis.endHold();\r\n\t\tthis.target = null;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tenter: function(e) {\r\n\t\t// resume hold when re-entering original target when using 'onLeave' endHold value\r\n\t\tif (this.holdPulseConfig.resume && this.holdPulseConfig.endHold === 'onLeave' && this.target && e.target === this.target) {\r\n\t\t\tthis.resumeHold();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tleave: function(e) {\r\n\t\tif (this.dragEvent) {\r\n\t\t\tthis.sendDragOut(e);\r\n\t\t} else if (this.holdPulseConfig.endHold === 'onLeave') {\r\n\t\t\tif (this.holdPulseConfig.resume) { // pause hold to potentially resume later\r\n\t\t\t\tthis.suspendHold();\r\n\t\t\t} else { // completely cancel hold\r\n\t\t\t\tthis.endHold();\r\n\t\t\t\tthis.sendDragStart(e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstopDragging: function(e) {\r\n\t\tif (this.dragEvent) {\r\n\t\t\tthis.sendDrop(e);\r\n\t\t\tvar handled = this.sendDragFinish(e);\r\n\t\t\tthis.dragEvent = null;\r\n\t\t\treturn handled;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmakeDragEvent: function(inType, inTarget, inEvent, inInfo) {\r\n\t\tvar adx = Math.abs(this.dx), ady = Math.abs(this.dy);\r\n\t\tvar h = adx > ady;\r\n\t\t// suggest locking if off-axis < 22.5 degrees\r\n\t\tvar l = (h ? ady/adx : adx/ady) < 0.414;\r\n\t\tvar e = {};\r\n\t\t// var e = {\r\n\t\te.type = inType;\r\n\t\te.dx = this.dx;\r\n\t\te.dy = this.dy;\r\n\t\te.ddx = this.dx - this.lastDx;\r\n\t\te.ddy = this.dy - this.lastDy;\r\n\t\te.xDirection = this.xDirection;\r\n\t\te.yDirection = this.yDirection;\r\n\t\te.pageX = inEvent.pageX;\r\n\t\te.pageY = inEvent.pageY;\r\n\t\te.clientX = inEvent.clientX;\r\n\t\te.clientY = inEvent.clientY;\r\n\t\te.horizontal = h;\r\n\t\te.vertical = !h;\r\n\t\te.lockable = l;\r\n\t\te.target = inTarget;\r\n\t\te.dragInfo = inInfo;\r\n\t\te.ctrlKey = inEvent.ctrlKey;\r\n\t\te.altKey = inEvent.altKey;\r\n\t\te.metaKey = inEvent.metaKey;\r\n\t\te.shiftKey = inEvent.shiftKey;\r\n\t\te.srcEvent = inEvent.srcEvent;\r\n\t\t// };\r\n\t\te.preventDefault = gestureUtil.preventDefault;\r\n\t\te.disablePrevention = gestureUtil.disablePrevention;\r\n\t\treturn e;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendDragStart: function(e) {\r\n\t\t//enyo.log('dragstart');\r\n\t\tthis.dragEvent = this.makeDragEvent('dragstart', this.target, e);\r\n\t\tdispatcher.dispatch(this.dragEvent);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendDrag: function(e) {\r\n\t\t//enyo.log('sendDrag to ' + this.dragEvent.target.id + ', over to ' + e.target.id);\r\n\t\t// send dragOver event to the standard event target\r\n\t\tvar synth = this.makeDragEvent('dragover', e.target, e, this.dragEvent.dragInfo);\r\n\t\tdispatcher.dispatch(synth);\r\n\t\t// send drag event to the drag source\r\n\t\tsynth.type = 'drag';\r\n\t\tsynth.target = this.dragEvent.target;\r\n\t\tdispatcher.dispatch(synth);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendDragFinish: function(e) {\r\n\t\t//enyo.log('dragfinish');\r\n\t\tvar synth = this.makeDragEvent('dragfinish', this.dragEvent.target, e, this.dragEvent.dragInfo);\r\n\t\tsynth.preventTap = function() {\r\n\t\t\tif (e.preventTap) {\r\n\t\t\t\te.preventTap();\r\n\t\t\t}\r\n\t\t};\r\n\t\tdispatcher.dispatch(synth);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendDragOut: function(e) {\r\n\t\tvar synth = this.makeDragEvent('dragout', e.target, e, this.dragEvent.dragInfo);\r\n\t\tdispatcher.dispatch(synth);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendDrop: function(e) {\r\n\t\tvar synth = this.makeDragEvent('drop', e.target, e, this.dragEvent.dragInfo);\r\n\t\tsynth.preventTap = function() {\r\n\t\t\tif (e.preventTap) {\r\n\t\t\t\te.preventTap();\r\n\t\t\t}\r\n\t\t};\r\n\t\tdispatcher.dispatch(synth);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstartTracking: function(e) {\r\n\t\tthis.tracking = true;\r\n\t\t// note: use clientX/Y to be compatible with ie8\r\n\t\tthis.px0 = e.clientX;\r\n\t\tthis.py0 = e.clientY;\r\n\t\t// this.flickInfo = {startEvent: e, moves: []};\r\n\t\tthis.flickInfo = {};\r\n\t\tthis.flickInfo.startEvent = e;\r\n\t\t// FIXME: so we're trying to reuse objects where possible, should\r\n\t\t// do the same in scenarios like this for arrays\r\n\t\tthis.flickInfo.moves = [];\r\n\t\tthis.track(e);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttrack: function(e) {\r\n\t\tthis.lastDx = this.dx;\r\n\t\tthis.lastDy = this.dy;\r\n\t\tthis.dx = e.clientX - this.px0;\r\n\t\tthis.dy = e.clientY - this.py0;\r\n\t\tthis.xDirection = this.calcDirection(this.dx - this.lastDx, 0);\r\n\t\tthis.yDirection = this.calcDirection(this.dy - this.lastDy, 0);\r\n\t\t//\r\n\t\tvar ti = this.flickInfo;\r\n\t\tti.moves.push({\r\n\t\t\tx: e.clientX,\r\n\t\t\ty: e.clientY,\r\n\t\t\tt: utils.perfNow()\r\n\t\t});\r\n\t\t// track specified # of points\r\n\t\tif (ti.moves.length > this.trackCount) {\r\n\t\t\tti.moves.shift();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tendTracking: function() {\r\n\t\tthis.tracking = false;\r\n\t\tvar ti = this.flickInfo;\r\n\t\tvar moves = ti && ti.moves;\r\n\t\tif (moves && moves.length > 1) {\r\n\t\t\t// note: important to use up time to reduce flick\r\n\t\t\t// velocity based on time between move and up.\r\n\t\t\tvar l = moves[moves.length-1];\r\n\t\t\tvar n = utils.perfNow();\r\n\t\t\t// take the greatest of flick between each tracked move and last move\r\n\t\t\tfor (var i=moves.length-2, dt=0, x1=0, y1=0, x=0, y=0, sx=0, sy=0, m; (m=moves[i]); i--) {\r\n\t\t\t\t// this flick (this move - last move) / (this time - last time)\r\n\t\t\t\tdt = n - m.t;\r\n\t\t\t\tx1 = (l.x - m.x) / dt;\r\n\t\t\t\ty1 = (l.y - m.y) / dt;\r\n\t\t\t\t// establish flick direction\r\n\t\t\t\tsx = sx || (x1 < 0 ? -1 : (x1 > 0 ? 1 : 0));\r\n\t\t\t\tsy = sy || (y1 < 0 ? -1 : (y1 > 0 ? 1 : 0));\r\n\t\t\t\t// if either axis is a greater flick than previously recorded use this one\r\n\t\t\t\tif ((x1 * sx > x * sx) || (y1 * sy > y * sy)) {\r\n\t\t\t\t\tx = x1;\r\n\t\t\t\t\ty = y1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar v = Math.sqrt(x*x + y*y);\r\n\t\t\tif (v > this.minFlick) {\r\n\t\t\t\t// generate the flick using the start event so it has those coordinates\r\n\t\t\t\tthis.sendFlick(ti.startEvent, x, y, v);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.flickInfo = null;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcDirection: function(inNum, inDefault) {\r\n\t\treturn inNum > 0 ? 1 : (inNum < 0 ? -1 : inDefault);\r\n\t},\r\n\r\n\t/**\r\n\t* Translate the old format for holdPulseConfig to the new one, to\r\n\t* preserve backward compatibility.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tnormalizeHoldPulseConfig: function (oldOpts) {\r\n\t\tvar nOpts = utils.clone(oldOpts);\r\n\t\tnOpts.frequency = nOpts.delay;\r\n\t\tnOpts.events = [{name: 'hold', time: nOpts.delay}];\r\n\t\treturn nOpts;\r\n\t},\r\n\r\n\t/**\r\n\t* Method to override holdPulseConfig for a given gesture. This method isn't\r\n\t* accessed directly from gesture.drag, but exposed by the `down` event.\r\n\t* See `prepareHold()`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_configureHoldPulse: function(opts) {\r\n\t\tvar nOpts = (opts.delay === undefined) ?\r\n\t\t\topts :\r\n\t\t\tthis.normalizeHoldPulseConfig(opts);\r\n\t\tutils.mixin(this.holdPulseConfig, nOpts);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tprepareHold: function(e) {\r\n\t\t// quick copy as the prototype of the new overridable config\r\n\t\tthis.holdPulseConfig = utils.clone(this._holdPulseConfig || this.holdPulseDefaultConfig, true);\r\n\r\n\t\t// expose method for configuring holdpulse options\r\n\t\te.configureHoldPulse = this._configureHoldPulse.bind(this);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tbeginHold: function(e) {\r\n\t\tvar ce;\r\n\t\t// cancel any existing hold since it's possible in corner cases to get a down without an up\r\n\t\tthis.endHold();\r\n\t\tthis.holdStart = utils.perfNow();\r\n\t\tthis._holdJobFunction = utils.bind(this, 'handleHoldPulse');\r\n\t\t// clone the event to ensure it stays alive on IE upon returning to event loop\r\n\t\tce = this._holdJobEvent = utils.clone(e);\r\n\t\tce.srcEvent = utils.clone(e.srcEvent);\r\n\t\tce.downEvent = e;\r\n\t\tthis._pulsing = false;\r\n\t\tthis._unsent = utils.clone(this.holdPulseConfig.events);\r\n\t\tthis._unsent.sort(this.sortEvents);\r\n\t\tthis._next = this._unsent.shift();\r\n\t\tif (this._next) {\r\n\t\t\tthis.holdJob = setInterval(this._holdJobFunction, this.holdPulseConfig.frequency);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tresumeHold: function() {\r\n\t\tthis.handleHoldPulse();\r\n\t\tthis.holdJob = setInterval(this._holdJobFunction, this.holdPulseConfig.frequency);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsortEvents: function(a, b) {\r\n\t\t\tif (a.time < b.time) return -1;\r\n\t\t\tif (a.time > b.time) return 1;\r\n\t\t\treturn 0;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tendHold: function() {\r\n\t\tvar e = this._holdJobEvent;\r\n\t\tthis.suspendHold();\r\n\t\tif (e && this._pulsing) {\r\n\t\t\tthis.sendRelease(e);\r\n\t\t}\r\n\t\tthis._pulsing = false;\r\n\t\tthis._unsent = null;\r\n\t\tthis._holdJobFunction = null;\r\n\t\tthis._holdJobEvent = null;\r\n\t\tthis._next = null;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsuspendHold: function() {\r\n\t\tclearInterval(this.holdJob);\r\n\t\tthis.holdJob = null;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleHoldPulse: function() {\r\n\t\tvar holdTime = utils.perfNow() - this.holdStart,\r\n\t\t\thje = this._holdJobEvent,\r\n\t\t\te;\r\n\t\tthis.maybeSendHold(hje, holdTime);\r\n\t\tif (this._pulsing) {\r\n\t\t\te = gestureUtil.makeEvent('holdpulse', hje);\r\n\t\t\te.holdTime = holdTime;\r\n\t\t\tdispatcher.dispatch(e);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmaybeSendHold: function(inEvent, inHoldTime) {\r\n\t\tvar n = this._next;\r\n\t\twhile (n && n.time <= inHoldTime) {\r\n\t\t\tvar e = gestureUtil.makeEvent(n.name, inEvent);\r\n\t\t\tif (!this._pulsing && this.holdPulseConfig.preventTap) {\r\n\t\t\t\tinEvent.downEvent.preventTap();\r\n\t\t\t}\r\n\t\t\tthis._pulsing = true;\r\n\t\t\tdispatcher.dispatch(e);\r\n\t\t\tn = this._next = this._unsent && this._unsent.shift();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendRelease: function(inEvent) {\r\n\t\tvar e = gestureUtil.makeEvent('release', inEvent);\r\n\t\tdispatcher.dispatch(e);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendFlick: function(inEvent, inX, inY, inV) {\r\n\t\tvar e = gestureUtil.makeEvent('flick', inEvent);\r\n\t\te.xVelocity = inX;\r\n\t\te.yVelocity = inY;\r\n\t\te.velocity = inV;\r\n\t\tdispatcher.dispatch(e);\r\n\t}\r\n};\r\n","var\r\n\tdispatcher = require('../dispatcher'),\r\n\tutils = require('../utils');\r\n\r\n/**\r\n* The extended {@glossary event} [object]{@glossary Object} that is provided when we\r\n* emulate iOS multitouch gesture events on non-iOS devices.\r\n*\r\n* @typedef {Object} module:enyo/gesture/touchGestures~EmulatedGestureEvent\r\n* @property {Number} pageX - The x-coordinate of the center point between fingers.\r\n* @property {Number} pageY - The y-coordinate of the center point between fingers.\r\n* @property {Number} rotation - The degrees of rotation from the beginning of the gesture.\r\n* @property {Number} scale - The percent change of distance between fingers.\r\n*/\r\n\r\n/**\r\n* @module enyo/gesture/touchGestures\r\n* @private\r\n*/\r\nmodule.exports = {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\torderedTouches: [],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgesture: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttouchstart: function (e) {\r\n\t\t// some devices can send multiple changed touches on start and end\r\n\t\tvar i,\r\n\t\t\tchangedTouches = e.changedTouches,\r\n\t\t\tlength = changedTouches.length;\r\n\r\n\t\tfor (i = 0; i < length; i++) {\r\n\t\t\tvar id = changedTouches[i].identifier;\r\n\r\n\t\t\t// some devices can send multiple touchstarts\r\n\t\t\tif (utils.indexOf(id, this.orderedTouches) < 0) {\r\n\t\t\t\tthis.orderedTouches.push(id);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (e.touches.length >= 2 && !this.gesture) {\r\n\t\t\tvar p = this.gesturePositions(e);\r\n\r\n\t\t\tthis.gesture = this.gestureVector(p);\r\n\t\t\tthis.gesture.angle = this.gestureAngle(p);\r\n\t\t\tthis.gesture.scale = 1;\r\n\t\t\tthis.gesture.rotation = 0;\r\n\t\t\tvar g = this.makeGesture('gesturestart', e, {vector: this.gesture, scale: 1, rotation: 0});\r\n\t\t\tdispatcher.dispatch(g);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttouchend: function (e) {\r\n\t\t// some devices can send multiple changed touches on start and end\r\n\t\tvar i,\r\n\t\t\tchangedTouches = e.changedTouches,\r\n\t\t\tlength = changedTouches.length;\r\n\r\n\t\tfor (i = 0; i < length; i++) {\r\n\t\t\tutils.remove(changedTouches[i].identifier, this.orderedTouches);\r\n\t\t}\r\n\r\n\t\tif (e.touches.length <= 1 && this.gesture) {\r\n\t\t\tvar t = e.touches[0] || e.changedTouches[e.changedTouches.length - 1];\r\n\r\n\t\t\t// gesture end sends last rotation and scale, with the x/y of the last finger\r\n\t\t\tdispatcher.dispatch(this.makeGesture('gestureend', e, {vector: {xcenter: t.pageX, ycenter: t.pageY}, scale: this.gesture.scale, rotation: this.gesture.rotation}));\r\n\t\t\tthis.gesture = null;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttouchmove: function (e) {\r\n\t\tif (this.gesture) {\r\n\t\t\tvar g = this.makeGesture('gesturechange', e);\r\n\t\t\tthis.gesture.scale = g.scale;\r\n\t\t\tthis.gesture.rotation = g.rotation;\r\n\t\t\tdispatcher.dispatch(g);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfindIdentifiedTouch: function (touches, id) {\r\n\t\tfor (var i = 0, t; (t = touches[i]); i++) {\r\n\t\t\tif (t.identifier === id) {\r\n\t\t\t\treturn t;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgesturePositions: function (e) {\r\n\t\tvar first = this.findIdentifiedTouch(e.touches, this.orderedTouches[0]);\r\n\t\tvar last = this.findIdentifiedTouch(e.touches, this.orderedTouches[this.orderedTouches.length - 1]);\r\n\t\tvar fx = first.pageX, lx = last.pageX, fy = first.pageY, ly = last.pageY;\r\n\t\t// center the first touch as 0,0\r\n\t\tvar x = lx - fx, y = ly - fy;\r\n\t\tvar h = Math.sqrt(x*x + y*y);\r\n\t\treturn {x: x, y: y, h: h, fx: fx, lx: lx, fy: fy, ly: ly};\r\n\t},\r\n\r\n\t/**\r\n\t* Finds rotation angle.\r\n\t* \r\n\t* @private\r\n\t*/\r\n\tgestureAngle: function (positions) {\r\n\t\tvar p = positions;\r\n\t\t// yay math!, rad -> deg\r\n\t\tvar a = Math.asin(p.y / p.h) * (180 / Math.PI);\r\n\t\t// fix for range limits of asin (-90 to 90)\r\n\t\t// Quadrants II and III\r\n\t\tif (p.x < 0) {\r\n\t\t\ta = 180 - a;\r\n\t\t}\r\n\t\t// Quadrant IV\r\n\t\tif (p.x > 0 && p.y < 0) {\r\n\t\t\ta += 360;\r\n\t\t}\r\n\t\treturn a;\r\n\t},\r\n\r\n\t/**\r\n\t* Finds bounding box.\r\n\t* \r\n\t* @private\r\n\t*/\r\n\tgestureVector: function (positions) {\r\n\t\t// the least recent touch and the most recent touch determine the bounding box of the gesture event\r\n\t\tvar p = positions;\r\n\t\t// center the first touch as 0,0\r\n\t\treturn {\r\n\t\t\tmagnitude: p.h,\r\n\t\t\txcenter: Math.abs(Math.round(p.fx + (p.x / 2))),\r\n\t\t\tycenter: Math.abs(Math.round(p.fy + (p.y / 2)))\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmakeGesture: function (type, e, cache) {\r\n\t\tvar vector, scale, rotation;\r\n\t\tif (cache) {\r\n\t\t\tvector = cache.vector;\r\n\t\t\tscale = cache.scale;\r\n\t\t\trotation = cache.rotation;\r\n\t\t} else {\r\n\t\t\tvar p = this.gesturePositions(e);\r\n\t\t\tvector = this.gestureVector(p);\r\n\t\t\tscale = vector.magnitude / this.gesture.magnitude;\r\n\t\t\t// gestureEvent.rotation is difference from the starting angle, clockwise\r\n\t\t\trotation = (360 + this.gestureAngle(p) - this.gesture.angle) % 360;\r\n\t\t}\r\n\t\tvar event = utils.clone(e);\r\n\t\treturn utils.mixin(event, {\r\n\t\t\ttype: type,\r\n\t\t\tscale: scale,\r\n\t\t\tpageX: vector.xcenter,\r\n\t\t\tpageY: vector.ycenter,\r\n\t\t\trotation: rotation\r\n\t\t});\r\n\t}\r\n};\r\n","/**\r\n* @module enyo/gesture\r\n*/\r\n\r\n\r\nvar\r\n\tdispatcher = require('../dispatcher'),\r\n\tdom = require('../dom'),\r\n\tplatform = require('../platform'),\r\n\tutils = require('../utils');\r\n\r\nvar\r\n\tdrag = require('./drag'),\r\n\ttouchGestures = require('./touchGestures'),\r\n\tgestureUtil = require('./util');\r\n\r\n/**\r\n* Enyo supports a set of normalized events that work similarly across all supported platforms.\r\n* These events are provided so that users can write a single set of event handlers for\r\n* applications that run on both mobile and desktop platforms. They are needed because desktop\r\n* and mobile platforms handle basic input differently.\r\n*\r\n* For more information on normalized input events and their associated properties, see the\r\n* documentation on [Event Handling]{@linkplain $dev-guide/key-concepts/event-handling.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @public\r\n*/\r\nvar gesture = module.exports = {\r\n\t/**\r\n\t* Handles \"down\" [events]{@glossary event}, including `mousedown` and `keydown`. This is\r\n\t* responsible for the press-and-hold key repeater.\r\n\t*\r\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\r\n\t* @public\r\n\t*/\r\n\tdown: function(evt) {\r\n\t\tvar e = gestureUtil.makeEvent('down', evt);\r\n\r\n\t\t// prepare for hold\r\n\t\tdrag.prepareHold(e);\r\n\r\n\t\t// enable prevention of tap event\r\n\t\te.preventTap = function() {\r\n\t\t\te._tapPrevented = true;\r\n\t\t};\r\n\r\n\t\tdispatcher.dispatch(e);\r\n\t\tthis.downEvent = e;\r\n\r\n\t\t// start hold, now that control has had a chance\r\n\t\t// to override the holdPulse configuration\r\n\t\tdrag.beginHold(e);\r\n\t},\r\n\r\n\t/**\r\n\t* Handles `mousemove` [events]{@glossary event}.\r\n\t*\r\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\r\n\t* @public\r\n\t*/\r\n\tmove: function(evt) {\r\n\t\tvar e = gestureUtil.makeEvent('move', evt);\r\n\t\t// include delta and direction v. down info in move event\r\n\t\te.dx = e.dy = e.horizontal = e.vertical = 0;\r\n\t\tif (e.which && this.downEvent) {\r\n\t\t\te.dx = evt.clientX - this.downEvent.clientX;\r\n\t\t\te.dy = evt.clientY - this.downEvent.clientY;\r\n\t\t\te.horizontal = Math.abs(e.dx) > Math.abs(e.dy);\r\n\t\t\te.vertical = !e.horizontal;\r\n\t\t}\r\n\t\tdispatcher.dispatch(e);\r\n\t},\r\n\r\n\t/**\r\n\t* Handles \"up\" [events]{@glossary event}, including `mouseup` and `keyup`.\r\n\t*\r\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\r\n\t* @public\r\n\t*/\r\n\tup: function(evt) {\r\n\t\tvar e = gestureUtil.makeEvent('up', evt);\r\n\r\n\t\t// We have added some logic to synchronize up and down events in certain scenarios (i.e.\r\n\t\t// clicking multiple buttons with a mouse) and to generally guard against any potential\r\n\t\t// asymmetry, but a full solution would be to maintain a map of up/down events as an\r\n\t\t// ideal solution, for future work.\r\n\t\te._tapPrevented = this.downEvent && this.downEvent._tapPrevented && this.downEvent.which == e.which;\r\n\t\te.preventTap = function() {\r\n\t\t\te._tapPrevented = true;\r\n\t\t};\r\n\r\n\t\tdispatcher.dispatch(e);\r\n\t\tif (!e._tapPrevented && this.downEvent && this.downEvent.which == 1) {\r\n\t\t\tvar target = this.findCommonAncestor(this.downEvent.target, evt.target);\r\n\r\n\t\t\t// the common ancestor of the down/up events is the target of the tap\r\n\t\t\tif(target) {\r\n\t\t\t\tif(this.supportsDoubleTap(target)) {\r\n\t\t\t\t\tthis.doubleTap(e, target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sendTap(e, target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.downEvent && this.downEvent.which == e.which) {\r\n\t\t\tthis.downEvent = null;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Handles `mouseover` [events]{@glossary event}.\r\n\t*\r\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\r\n\t* @public\r\n\t*/\r\n\tover: function(evt) {\r\n\t\tvar e = gestureUtil.makeEvent('enter', evt);\r\n\t\tdispatcher.dispatch(e);\r\n\t},\r\n\r\n\t/**\r\n\t* Handles `mouseout` [events]{@glossary event}.\r\n\t*\r\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\r\n\t* @public\r\n\t*/\r\n\tout: function(evt) {\r\n\t\tvar e = gestureUtil.makeEvent('leave', evt);\r\n\t\tdispatcher.dispatch(e);\r\n\t},\r\n\r\n\t/**\r\n\t* Generates `tap` [events]{@glossary event}.\r\n\t*\r\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\r\n\t* @public\r\n\t*/\r\n\tsendTap: function(evt, target) {\r\n\t\tvar e = gestureUtil.makeEvent('tap', evt);\r\n\t\te.target = target;\r\n\t\tdispatcher.dispatch(e);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttapData: {\r\n\t\tid: null,\r\n\t\ttimer: null,\r\n\t\tstart: 0\r\n\t},\r\n\r\n\t/**\r\n\t* Global configuration for double tap support. If this is true, all tap events for Controls\r\n\t* that do not have {@link module:enyo/Control~Control#doubleTapEnabled} explicitly set to false will be\r\n\t* delayed by the {@link module:enyo/Control~Control#doubleTapInterval}.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default  false\r\n\t* @public\r\n\t*/\r\n\tdoubleTapEnabled: false,\r\n\r\n\t/**\r\n\t* Determines if the provided target node supports double tap events\r\n\t*\r\n\t* @param {Node} target\r\n\t* @return {Boolean}\r\n\t* @private\r\n\t*/\r\n\tsupportsDoubleTap: function(target) {\r\n\t\tvar obj = dispatcher.findDispatchTarget(target);\r\n\r\n\t\tif(obj) {\r\n\t\t\t// Control.doubleTapEnabled is a tri-value property. The default is 'inherit'\r\n\t\t\t// which takes its cue from gesture's doubleTapEnabled. Values of true or false\r\n\t\t\t// override the default. So, if the global is true, any truthy value on Control\r\n\t\t\t// results in true. If the global is false, only an explicit true on Control\r\n\t\t\t// results in true.\r\n\t\t\treturn this.doubleTapEnabled? !!obj.doubleTapEnabled : obj.doubleTapEnabled === true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdoubleTap: function(evt, t) {\r\n\t\tvar obj = dispatcher.findDispatchTarget(t);\r\n\r\n\t\tif(this.tapData.id !== obj.id) {\t// this is the first tap\r\n\t\t\tthis.resetTapData(true);\r\n\r\n\t\t\tthis.tapData.id = obj.id;\r\n\t\t\tthis.tapData.event = evt;\r\n\t\t\tthis.tapData.target = t;\r\n\t\t\tthis.tapData.timer = setTimeout(utils.bind(this, \"resetTapData\", true), obj.doubleTapInterval);\r\n\t\t\tthis.tapData.start = utils.perfNow();\r\n\t\t} else {\t\t\t\t\t\t\t// this is the double tap\r\n\t\t\tvar e2 = gestureUtil.makeEvent('doubletap', evt);\r\n\t\t\te2.target = t;\r\n\t\t\te2.tapInterval = utils.perfNow() - this.tapData.start;\r\n\t\t\tthis.resetTapData(false);\r\n\t\t\tdispatcher.dispatch(e2);\r\n\t\t}\r\n\t},\r\n\r\n\tresetTapData: function(sendTap) {\r\n\t\tvar data = this.tapData;\r\n\r\n\t\tif(sendTap && data.id) {\r\n\t\t\tthis.sendTap(data.event, data.target);\r\n\t\t}\r\n\r\n\t\tclearTimeout(data.timer);\r\n\t\tdata.id = data.start = data.event = data.target = data.timer = null;\r\n\t},\r\n\r\n\t/**\r\n\t* Given two [DOM nodes]{@glossary Node}, searches for a shared ancestor (looks up\r\n\t* the hierarchic [DOM]{@glossary DOM} tree of [nodes]{@glossary Node}). The shared\r\n\t* ancestor node is returned.\r\n\t*\r\n\t* @param {Node} controlA - Control one.\r\n\t* @param {Node} controlB - Control two.\r\n\t* @returns {(Node|undefined)} The shared ancestor.\r\n\t* @public\r\n\t*/\r\n\tfindCommonAncestor: function(controlA, controlB) {\r\n\t\tvar p = controlB;\r\n\t\twhile (p) {\r\n\t\t\tif (this.isTargetDescendantOf(controlA, p)) {\r\n\t\t\t\treturn p;\r\n\t\t\t}\r\n\t\t\tp = p.parentNode;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Given two controls, returns `true` if the `child` is inside the `parent`.\r\n\t*\r\n\t* @param {Node} child - The child to search for.\r\n\t* @param {Node} parent - The expected parent.\r\n\t* @returns {(Boolean|undefined)} `true` if the `child` is actually a child of `parent`.\r\n\t*/\r\n\tisTargetDescendantOf: function(child, parent) {\r\n\t\tvar c = child;\r\n\t\twhile(c) {\r\n\t\t\tif (c == parent) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tc = c.parentNode;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @todo I'd rather refine the public API of gesture rather than simply forwarding the internal\r\n\t*   drag module but this will work in the interim. - ryanjduffy\r\n\t*\r\n\t* Known Consumers:\r\n\t*  - Spotlight.onAcceleratedKey - (prepare|begin|end)Hold()\r\n\t*  - Moonstone - configureHoldPulse()\r\n\t*/\r\n\tdrag: drag\r\n};\r\n\r\n/**\r\n* Contains various methods for gesture events.\r\n*\r\n* @type {object}\r\n* @public\r\n*/\r\nmodule.exports.events = {\r\n\t/**\r\n\t* Shortcut to [gesture.down()]{@link module:enyo/gesture#down}.\r\n\t*\r\n\t* @memberof! module:enyo/gesture#\r\n\t* @method events.mousedown\r\n\t* @public\r\n\t*/\r\n\tmousedown: function(e) {\r\n\t\tgesture.down(e);\r\n\t},\r\n\r\n\t/**\r\n\t* Shortcut to [gesture.up()]{@link module:enyo/gesture#up}.\r\n\t*\r\n\t* @memberof! module:enyo/gesture#\r\n\t* @method events.mouseup\r\n\t* @public\r\n\t*/\r\n\tmouseup: function(e) {\r\n\t\tgesture.up(e);\r\n\t},\r\n\r\n\t/**\r\n\t* Shortcut to [gesture.move()]{@link module:enyo/gesture#move}.\r\n\t*\r\n\t* @memberof! module:enyo/gesture#\r\n\t* @method events.mousemove\r\n\t* @public\r\n\t*/\r\n\tmousemove:  function(e) {\r\n\t\tgesture.move(e);\r\n\t},\r\n\r\n\t/**\r\n\t* Shortcut to [gesture.over()]{@link module:enyo/gesture#over}.\r\n\t*\r\n\t* @memberof! module:enyo/gesture#\r\n\t* @method events.mouseover\r\n\t* @public\r\n\t*/\r\n\tmouseover:  function(e) {\r\n\t\tgesture.over(e);\r\n\t},\r\n\r\n\t/**\r\n\t* Shortcut to [gesture.out()]{@link module:enyo/gesture#out}.\r\n\t*\r\n\t* @memberof! module:enyo/gesture#\r\n\t* @method events.mouseout\r\n\t* @public\r\n\t*/\r\n\tmouseout:  function(e) {\r\n\t\tgesture.out(e);\r\n\t}\r\n};\r\n\r\n// Firefox mousewheel handling\r\ndom.requiresWindow(function() {\r\n\tif (document.addEventListener) {\r\n\t\tdocument.addEventListener('DOMMouseScroll', function(inEvent) {\r\n\t\t\tvar e = utils.clone(inEvent),\r\n\t\t\t\tisVertical = e.VERTICAL_AXIS == e.axis,\r\n\t\t\t\twheelDelta;\r\n\t\t\te.preventDefault = function() {\r\n\t\t\t\tinEvent.preventDefault();\r\n\t\t\t};\r\n\t\t\te.type = 'mousewheel';\r\n\r\n\t\t\twheelDelta = e.detail * -40;\r\n\t\t\te.wheelDeltaY = isVertical ? wheelDelta : 0;\r\n\t\t\te.wheelDeltaX = isVertical ? 0 : wheelDelta;\r\n\r\n\t\t\tdispatcher.dispatch(e);\r\n\t\t}, false);\r\n\t}\r\n});\r\n\r\n/**\r\n* @private\r\n*/\r\nvar handlers = {\r\n\ttouchstart: true,\r\n\ttouchmove: true,\r\n\ttouchend: true\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\ndispatcher.features.push(function (e) {\r\n\tvar type = e.type;\r\n\r\n\t// NOTE: beware of properties in gesture.events and drag inadvertently mapped to event types\r\n\tif (gesture.events[type]) {\r\n\t\tgesture.events[type](e);\r\n\t}\r\n\tif (!platform.gesture && platform.touch && handlers[type]) {\r\n\t\ttouchGestures[type](e);\r\n\t}\r\n\tif (drag[type]) {\r\n\t\tdrag[type](e);\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Control~Control} kind.\r\n* @module enyo/Control\r\n*/\r\n\r\nvar\r\n\tkind = require('../kind'),\r\n\tutils = require('../utils'),\r\n\tplatform = require('../platform'),\r\n\tdispatcher = require('../dispatcher'),\r\n\toptions = require('../options'),\r\n\troots = require('../roots');\r\n\r\nvar\r\n\tAccessibilitySupport = require('../AccessibilitySupport'),\r\n\tUiComponent = require('../UiComponent'),\r\n\tHTMLStringDelegate = require('../HTMLStringDelegate'),\r\n\tDom = require('../dom');\r\n\r\nvar\r\n\tfullscreen = require('./fullscreen'),\r\n\tFloatingLayer = require('./floatingLayer');\r\n\r\n// While the namespace isn't needed here, gesture is required for ontap events for which Control\r\n// has a handler. Bringing them all in now for the time being.\r\nrequire('../gesture');\r\n\r\nvar nodePurgatory;\r\n\r\n/**\r\n* Called by `Control.teardownRender()`. In certain circumstances,\r\n* we need to temporarily keep a DOM node around after tearing down\r\n* because we're still acting on a stream of touch events emanating\r\n* from the node. See `Control.retainNode()` for more information.\r\n*\r\n* @private\r\n*/\r\nfunction storeRetainedNode (control) {\r\n\tvar p = getNodePurgatory(),\r\n\t\tn = control._retainedNode;\r\n\tif (n) {\r\n\t\tp.appendChild(n);\r\n\t}\r\n\tcontrol._retainedNode = null;\r\n}\r\n\r\n/**\r\n* Called (via a callback) when it's time to release a DOM node\r\n* that we've retained.\r\n*\r\n* @private\r\n*/\r\nfunction releaseRetainedNode (retainedNode) {\r\n\tvar p = getNodePurgatory();\r\n\tif (retainedNode) {\r\n\t\tp.removeChild(retainedNode);\r\n\t}\r\n}\r\n\r\n/**\r\n* Lazily add a hidden `<div>` to `document.body` to serve as a\r\n* container for retained DOM nodes.\r\n*\r\n* @private\r\n*/\r\nfunction getNodePurgatory () {\r\n\tvar p = nodePurgatory;\r\n\tif (!p) {\r\n\t\tp = nodePurgatory = document.createElement(\"div\");\r\n\t\tp.id = \"node_purgatory\";\r\n\t\tp.style.display = \"none\";\r\n\t\tdocument.body.appendChild(p);\r\n\t}\r\n\treturn p;\r\n}\r\n\r\n/**\r\n* {@link module:enyo/Control~Control} is a [component]{@link module:enyo/UiComponent~UiComponent} that controls\r\n* a [DOM]{@glossary DOM} [node]{@glossary Node} (i.e., an element in the user\r\n* interface). Controls are generally visible and the user often interacts with\r\n* them directly. While things like buttons and input boxes are obviously\r\n* controls, in Enyo, a control may be as simple as a text item or as complex\r\n* as an entire application. Both inherit the same basic core capabilities from\r\n* this kind.\r\n*\r\n* For more information, see the documentation on\r\n* [Controls]{@linkplain $dev-guide/key-concepts/controls.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* **If you make changes to `enyo/Control`, be sure to add or update the\r\n* appropriate unit tests.**\r\n*\r\n* @class Control\r\n* @extends module:enyo/UiComponent~UiComponent\r\n* @ui\r\n* @public\r\n*/\r\nvar Control = module.exports = kind(\r\n\t/** @lends module:enyo/Control~Control.prototype */ {\r\n\r\n\tname: 'enyo.Control',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: UiComponent,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmixins: options.accessibility ? [AccessibilitySupport] : null,\r\n\r\n\t/**\r\n\t* @type {String}\r\n\t* @default 'module:enyo/Control~Control'\r\n\t* @public\r\n\t*/\r\n\tdefaultKind: null, // set after the fact\r\n\r\n\t/**\r\n\t* The [DOM node]{@glossary DOM} tag name that should be created.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'div'\r\n\t* @public\r\n\t*/\r\n\ttag: 'div',\r\n\r\n\t/**\r\n\t* A [hash]{@glossary Object} of attributes to be applied to the created\r\n\t* [DOM]{@glossary DOM} node.\r\n\t*\r\n\t* @type {Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tattributes: null,\r\n\r\n\t/**\r\n\t* [Boolean]{@glossary Boolean} flag indicating whether this element should\r\n\t* \"fit\", or fill its container's size.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tfit: null,\r\n\r\n\t/**\r\n\t* [Boolean]{@glossary Boolean} flag indicating whether HTML is allowed in\r\n\t* this control's [content]{@link module:enyo/Control~Control#content} property. If `false`\r\n\t* (the default), HTML will be encoded into [HTML entities]{@glossary entity}\r\n\t* (e.g., `&lt;` and `&gt;`) for literal visual representation.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tallowHtml: false,\r\n\r\n\t/**\r\n\t* Mimics the HTML `style` attribute.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\tstyle: '',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkindStyle: '',\r\n\r\n\t/**\r\n\t* Mimics the HTML `class` attribute.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\tclasses: '',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkindClasses: '',\r\n\r\n\t/**\r\n\t* [Classes]{@link module:enyo/Control~Control#classes} that are applied to all controls.\r\n\t*\r\n\t* @type {String}\r\n\t* @default ''\r\n\t* @public\r\n\t*/\r\n\tcontrolClasses: '',\r\n\r\n\t/**\r\n\t* The text-based content of the Control. If the [allowHtml]{@link module:enyo/Control~Control#allowHtml}\r\n\t* flag is set to `true`, you may set this property to an HTML string.\r\n\t* @public\r\n\t*/\r\n\tcontent: '',\r\n\r\n\t/**\r\n\t* If true or 'inherit' and enyo/gesture#doubleTabEnabled == true, will fire a doubletap\r\n\t* event, and will temporarily suppress a single tap while waiting for a double tap.\r\n\t*\r\n\t* @type {String|Boolean}\r\n\t* @default 'inherit'\r\n\t* @public\r\n\t*/\r\n\tdoubleTapEnabled: 'inherit',\r\n\r\n\t/**\r\n\t* Time in milliseconds to wait to detect a double tap\r\n\t*\r\n\t* @type {Number}\r\n\t* @default 300\r\n\t* @public\r\n\t*/\r\n\tdoubleTapInterval: 300,\r\n\r\n\t/**\r\n\t* If set to `true`, the [control]{@link module:enyo/Control~Control} will not be rendered until its\r\n\t* [showing]{@link module:enyo/Control~Control#showing} property has been set to `true`. This can be used\r\n\t* directly or is used by some widgets to control when children are rendered.\r\n\t*\r\n\t* It is important to note that setting this to `true` will _force_\r\n\t* [canGenerate]{@link module:enyo/Control~Control#canGenerate} and [showing]{@link module:enyo/Control~Control#showing}\r\n\t* to be `false`. Arbitrarily modifying the values of these properties prior to its initial\r\n\t* render may have unexpected results.\r\n\t*\r\n\t* Once a control has been shown/rendered with `renderOnShow` `true` the behavior will not\r\n\t* be used again.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\trenderOnShow: false,\r\n\r\n\t/**\r\n\t* @todo Find out how to document \"handlers\".\r\n\t* @public\r\n\t*/\r\n\thandlers: {\r\n\t\tontap: 'tap',\r\n\t\tonShowingChanged: 'showingChangedHandler'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstrictlyInternalEvents: {onenter: 1, onleave: 1},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tisInternalEvent: function (event) {\r\n\t\tvar rdt = dispatcher.findDispatchTarget(event.relatedTarget);\r\n\t\treturn rdt && rdt.isDescendantOf(this);\r\n\t},\r\n\r\n\t// .................................\r\n\t// DOM NODE MANIPULATION API\r\n\r\n\t/**\r\n\t* Gets the bounds for this control. The `top` and `left` properties returned\r\n\t* by this method represent the control's positional distance in pixels from\r\n\t* either A) the first parent of this control that is absolutely or relatively\r\n\t* positioned, or B) the `document.body`.\r\n\t*\r\n\t* This is a shortcut convenience method for {@link module:enyo/dom#getBounds}.\r\n\t*\r\n\t* @returns {Object} An [object]{@glossary Object} containing `top`, `left`,\r\n\t* `width`, and `height` properties.\r\n\t* @public\r\n\t*/\r\n\tgetBounds: function () {\r\n\t\tvar node = this.hasNode(),\r\n\t\t\tbounds = node && Dom.getBounds(node);\r\n\r\n\t\treturn bounds || {left: undefined, top: undefined, width: undefined, height: undefined};\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the absolute/relative position and/or size for this control. Values\r\n\t* of `null` or `undefined` for the `bounds` properties will be ignored. You\r\n\t* may optionally specify a `unit` (i.e., a valid CSS measurement unit) as a\r\n\t* [string]{@glossary String} to be applied to each of the position/size\r\n\t* assignments.\r\n\t*\r\n\t* @param {Object} bounds - An [object]{@glossary Object}, optionally\r\n\t* containing one or more of the following properties: `width`, `height`,\r\n\t* `top`, `right`, `bottom`, and `left`.\r\n\t* @param {String} [unit='px']\r\n\t* @public\r\n\t*/\r\n\tsetBounds: function (bounds, unit) {\r\n\t\tvar newStyle = '',\r\n\t\t\textents = ['width', 'height', 'left', 'top', 'right', 'bottom'],\r\n\t\t\ti = 0,\r\n\t\t\tval,\r\n\t\t\text;\r\n\r\n\t\t// if no unit is supplied, we default to pixels\r\n\t\tunit = unit || 'px';\r\n\r\n\t\tfor (; (ext = extents[i]); ++i) {\r\n\t\t\tval = bounds[ext];\r\n\t\t\tif (val || val === 0) {\r\n\t\t\t\tnewStyle += (ext + ':' + val + (typeof val == 'string' ? '' : unit) + ';');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.set('style', this.style + newStyle);\r\n\t},\r\n\r\n\t/**\r\n\t* Gets the bounds for this control. The `top` and `left` properties returned\r\n\t* by this method represent the control's positional distance in pixels from\r\n\t* `document.body`. To get the bounds relative to this control's parent(s),\r\n\t* use [getBounds()]{@link module:enyo/Control~Control#getBounds}.\r\n\t*\r\n\t* This is a shortcut convenience method for {@link module:enyo/dom#getAbsoluteBounds}.\r\n\t*\r\n\t* @returns {Object} An [object]{@glossary Object} containing `top`, `left`,\r\n\t* `width`, and `height` properties.\r\n\t* @public\r\n\t*/\r\n\tgetAbsoluteBounds: function () {\r\n\t\tvar node = this.hasNode(),\r\n\t\t\tbounds = node && Dom.getAbsoluteBounds(node);\r\n\r\n\t\treturn bounds || {\r\n\t\t\tleft: undefined,\r\n\t\t\ttop: undefined,\r\n\t\t\twidth: undefined,\r\n\t\t\theight: undefined,\r\n\t\t\tbottom: undefined,\r\n\t\t\tright: undefined\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* Shortcut method to set [showing]{@link module:enyo/Control~Control#showing} to `true`.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tshow: function () {\r\n\t\tthis.set('showing', true);\r\n\t},\r\n\r\n\t/**\r\n\t* Shortcut method to set [showing]{@link module:enyo/Control~Control#showing} to `false`.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\thide: function () {\r\n\t\tthis.set('showing', false);\r\n\t},\r\n\r\n\t/**\r\n\t* Sets this control to be [focused]{@glossary focus}.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tfocus: function () {\r\n\t\tif (this.hasNode()) this.node.focus();\r\n\t},\r\n\r\n\t/**\r\n\t* [Blurs]{@glossary blur} this control. (The opposite of\r\n\t* [focus()]{@link module:enyo/Control~Control#focus}.)\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tblur: function () {\r\n\t\tif (this.hasNode()) this.node.blur();\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether this control currently has the [focus]{@glossary focus}.\r\n\t*\r\n\t* @returns {Boolean} Whether this control has focus. `true` if the control\r\n\t* has focus; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\thasFocus: function () {\r\n\t\tif (this.hasNode()) return document.activeElement === this.node;\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether this control's [DOM node]{@glossary Node} has been created.\r\n\t*\r\n\t* @returns {Boolean} Whether this control's [DOM node]{@glossary Node} has\r\n\t* been created. `true` if it has been created; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\thasNode: function () {\r\n\t\treturn this.generated && (this.node || this.findNodeById());\r\n\t},\r\n\r\n\t/**\r\n\t* Gets the requested property (`name`) from the control's attributes\r\n\t* [hash]{@glossary Object}, from its cache of node attributes, or, if it has\r\n\t* yet to be cached, from the [node]{@glossary Node} itself.\r\n\t*\r\n\t* @param {String} name - The attribute name to get.\r\n\t* @returns {(String|null)} The value of the requested attribute, or `null`\r\n\t* if there isn't a [DOM node]{@glossary Node} yet.\r\n\t* @public\r\n\t*/\r\n\tgetAttribute: function (name) {\r\n\t\tvar node;\r\n\r\n\t\t// TODO: This is a fixed API assuming that no changes will happen to the DOM that\r\n\t\t// do not use it...original implementation of this method used the node's own\r\n\t\t// getAttribute method every time it could but we really only need to do that if we\r\n\t\t// weren't the ones that set the value to begin with -- in slow DOM situations this\r\n\t\t// could still be faster but it needs to be verified\r\n\t\tif (this.attributes.hasOwnProperty(name)) return this.attributes[name];\r\n\t\telse {\r\n\t\t\tnode = this.hasNode();\r\n\r\n\t\t\t// we store the value so that next time we'll know what it is\r\n\t\t\t/*jshint -W093 */\r\n\t\t\treturn (this.attributes[name] = (node ? node.getAttribute(name) : null));\r\n\t\t\t/*jshint +W093 */\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Assigns an attribute to a control's [node]{@glossary Node}. Assigning\r\n\t* `name` a value of `null`, `false`, or the empty string `(\"\")` will remove\r\n\t* the attribute from the node altogether.\r\n\t*\r\n\t* @param {String} name - Attribute name to assign/remove.\r\n\t* @param {(String|Number|null)} value - The value to assign to `name`\r\n\t* @returns {this} Callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tsetAttribute: function (name, value) {\r\n\t\tvar attrs = this.attributes,\r\n\t\t\tnode = this.hasNode(),\r\n\t\t\tdelegate = this.renderDelegate || Control.renderDelegate;\r\n\r\n\t\tif (name) {\r\n\t\t\tattrs[name] = value;\r\n\r\n\t\t\tif (node) {\r\n\t\t\t\tif (value == null || value === false || value === '') {\r\n\t\t\t\t\tnode.removeAttribute(name);\r\n\t\t\t\t} else node.setAttribute(name, value);\r\n\t\t\t}\r\n\r\n\t\t\tdelegate.invalidate(this, 'attributes');\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Reads the `name` property directly from the [node]{@glossary Node}. You\r\n\t* may provide a default (`def`) to use if there is no node yet.\r\n\t*\r\n\t* @param {String} name - The [node]{@glossary Node} property name to get.\r\n\t* @param {*} def - The default value to apply if there is no node.\r\n\t* @returns {String} The value of the `name` property, or `def` if the node\r\n\t* was not available.\r\n\t* @public\r\n\t*/\r\n\tgetNodeProperty: function (name, def) {\r\n\t\treturn this.hasNode() ? this.node[name] : def;\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the value of a property (`name`) directly on the [node]{@glossary Node}.\r\n\t*\r\n\t* @param {String} name - The [node]{@glossary Node} property name to set.\r\n\t* @param {*} value - The value to assign to the property.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tsetNodeProperty: function (name, value) {\r\n\t\tif (this.hasNode()) this.node[name] = value;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Appends additional content to this control.\r\n\t*\r\n\t* @param {String} content - The new string to add to the end of the `content`\r\n\t* property.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\taddContent: function (content) {\r\n\t\treturn this.set('content', this.get('content') + content);\r\n\t},\r\n\r\n\t// .................................\r\n\r\n\t// .................................\r\n\t// STYLE/CLASS API\r\n\r\n\t/**\r\n\t* Determines whether this control has the class `name`.\r\n\t*\r\n\t* @param {String} name - The name of the class (or classes) to check for.\r\n\t* @returns {Boolean} Whether the control has the class `name`.\r\n\t* @public\r\n\t*/\r\n\thasClass: function (name) {\r\n\t\treturn name && (' ' + this.classes + ' ').indexOf(' ' + name + ' ') > -1;\r\n\t},\r\n\r\n\t/**\r\n\t* Adds the specified class to this control's list of classes.\r\n\t*\r\n\t* @param {String} name - The name of the class to add.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\taddClass: function (name) {\r\n\t\tvar classes = this.classes || '';\r\n\r\n\t\t// NOTE: Because this method accepts a string and for efficiency does not wish to\r\n\t\t// parse it to determine if it is actually multiple classes we later pull a trick\r\n\t\t// to keep it normalized and synchronized with our attributes hash and the node's\r\n\t\tif (name && !this.hasClass(name)) {\r\n\r\n\t\t\t// this is hooked\r\n\t\t\tthis.set('classes', classes + (classes ? (' ' + name) : name));\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Removes the specified class from this control's list of classes.\r\n\t*\r\n\t* **Note: It is not advisable to pass a string of multiple, space-delimited\r\n\t* class names into this method. Instead, call the method once for each class\r\n\t* name that you want to remove.**\r\n\t*\r\n\t* @param {String} name - The name of the class to remove.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tremoveClass: function (name) {\r\n\t\tvar classes = this.classes;\r\n\r\n\t\tif (name) {\r\n\t\t\tthis.set('classes', (' ' + classes + ' ').replace(' ' + name + ' ', ' ').trim());\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Adds or removes the specified class conditionally, based on the state\r\n\t* of the `add` argument.\r\n\t*\r\n\t* @param {String} name - The name of the class to add or remove.\r\n\t* @param {Boolean} add - If `true`, `name` will be added as a class; if\r\n\t* `false`, it will be removed.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\taddRemoveClass: function (name, add) {\r\n\t\treturn name ? this[add ? 'addClass' : 'removeClass'](name) : this;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclassesChanged: function () {\r\n\t\tvar classes = this.classes,\r\n\t\t\tnode = this.hasNode(),\r\n\t\t\tattrs = this.attributes,\r\n\t\t\tdelegate = this.renderDelegate || Control.renderDelegate;\r\n\r\n\t\tif (node) {\r\n\t\t\tif (classes || this.kindClasses) {\r\n\t\t\t\tnode.setAttribute('class', classes || this.kindClasses);\r\n\t\t\t} else node.removeAttribute('class');\r\n\r\n\t\t\tthis.classes = classes = node.getAttribute('class');\r\n\t\t}\r\n\r\n\t\t// we need to update our attributes.class value and flag ourselves to be\r\n\t\t// updated\r\n\t\tattrs['class'] = classes;\r\n\r\n\t\t// we want to notify the delegate that the attributes have changed in case it wants\r\n\t\t// to handle this is some special way\r\n\t\tdelegate.invalidate(this, 'attributes');\r\n\t},\r\n\r\n\t/**\r\n\t* Applies a CSS style directly to the control. Use the `prop` argument to\r\n\t* specify the CSS property name you'd like to set, and `value` to specify\r\n\t* the desired value. Setting `value` to `null` will remove the CSS property\r\n\t* `prop` altogether.\r\n\t*\r\n\t* @param {String} prop - The CSS property to assign.\r\n\t* @param {(String|Number|null|undefined)} value - The value to assign to\r\n\t* `prop`. Setting a value of `null`, `undefined`, or the empty string `(\"\")`\r\n\t* will remove the property `prop` from the control.\r\n\t* @returns {this} Callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tapplyStyle: function (prop, value) {\r\n\r\n\t\t// NOTE: This method deliberately avoids calling set('style', ...) for performance\r\n\t\t// as it will have already been parsed by the browser so we pass it on via the\r\n\t\t// notification system which is the same\r\n\r\n\t\t// TODO: Wish we could delay this potentially...\r\n\t\t// if we have a node we render the value immediately and update our style string\r\n\t\t// in the process to keep them synchronized\r\n\t\tvar node = this.hasNode(),\r\n\t\t\tstyle = this.style,\r\n\t\t\tdelegate = this.renderDelegate || Control.renderDelegate;\r\n\r\n\t\t// FIXME: This is put in place for a Firefox bug where setting a style value of a node\r\n\t\t// via its CSSStyleDeclaration object (by accessing its node.style property) does\r\n\t\t// not work when using a CSS property name that contains one or more dash, and requires\r\n\t\t// setting the property via the JavaScript-style property name. This fix should be\r\n\t\t// removed once this issue has been resolved in the Firefox mainline and its variants\r\n\t\t// (it is currently resolved in the 36.0a1 nightly):\r\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1083457\r\n\t\tif (node && (platform.firefox < 35 || platform.firefoxOS || platform.androidFirefox)) {\r\n\t\t\tprop = prop.replace(/-([a-z])/gi, function(match, submatch) {\r\n\t\t\t\treturn submatch.toUpperCase();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (value !== null && value !== '' && value !== undefined) {\r\n\t\t\t// update our current cached value\r\n\t\t\tif (node) {\r\n\t\t\t\tnode.style[prop] = value;\r\n\r\n\t\t\t\t// cssText is an internal property used to help know when to sync and not\r\n\t\t\t\t// sync with the node in styleChanged\r\n\t\t\t\tthis.style = this.cssText = node.style.cssText;\r\n\r\n\t\t\t\t// otherwise we have to try and prepare it for the next time it is rendered we\r\n\t\t\t\t// will need to update it because it will not be synchronized\r\n\t\t\t} else this.set('style', style + (' ' + prop + ':' + value + ';'));\r\n\t\t} else {\r\n\r\n\t\t\t// in this case we are trying to clear the style property so if we have the node\r\n\t\t\t// we let the browser handle whatever the value should be now and otherwise\r\n\t\t\t// we have to parse it out of the style string and wait to be rendered\r\n\r\n\t\t\tif (node) {\r\n\t\t\t\tnode.style[prop] = '';\r\n\t\t\t\tthis.style = this.cssText = node.style.cssText;\r\n\r\n\t\t\t\t// we need to invalidate the style for the delegate\r\n\t\t\t\tdelegate.invalidate(this, 'style');\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// this is a rare case to nullify the style of a control that is not\r\n\t\t\t\t// rendered or does not have a node\r\n\t\t\t\tstyle = style.replace(new RegExp(\r\n\t\t\t\t\t// This looks a lot worse than it is. The complexity stems from needing to\r\n\t\t\t\t\t// match a url container that can have other characters including semi-\r\n\t\t\t\t\t// colon and also that the last property may/may-not end with one\r\n\t\t\t\t\t'\\\\s*' + prop + '\\\\s*:\\\\s*[a-zA-Z0-9\\\\ ()_\\\\-\\'\"%,]*(?:url\\\\(.*\\\\)\\\\s*[a-zA-Z0-9\\\\ ()_\\\\-\\'\"%,]*)?\\\\s*(?:;|;?$)',\r\n\t\t\t\t\t'gi'\r\n\t\t\t\t),'');\r\n\t\t\t\tthis.set('style', style);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// we need to invalidate the style for the delegate -- regardless of whether or\r\n\t\t// not the node exists to ensure that the tag is updated properly the next time\r\n\t\t// it is rendered\r\n\t\tdelegate.invalidate(this, 'style');\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Allows the addition of several CSS properties and values at once, via a\r\n\t* single string, similar to how the HTML `style` attribute works.\r\n\t*\r\n\t* @param {String} css - A string containing one or more valid CSS styles.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\taddStyles: function (css) {\r\n\t\tvar key,\r\n\t\t\tnewStyle = '';\r\n\r\n\t\tif (typeof css == 'object') {\r\n\t\t\tfor (key in css) newStyle += (key + ':' + css[key] + ';');\r\n\t\t} else newStyle = css || '';\r\n\r\n\t\tthis.set('style', this.style + newStyle);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstyleChanged: function () {\r\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\r\n\r\n\t\t// if the cssText internal string doesn't match then we know style was set directly\r\n\t\tif (this.cssText !== this.style) {\r\n\r\n\t\t\t// we need to render the changes and synchronize - this means that the style\r\n\t\t\t// property was set directly so we will reset it prepending it with the original\r\n\t\t\t// style (if any) for the kind and keeping whatever the browser is keeping\r\n\t\t\tif (this.hasNode()) {\r\n\t\t\t\tthis.node.style.cssText = this.kindStyle + (this.style || '');\r\n\t\t\t\t// now we store the parsed version\r\n\t\t\t\tthis.cssText = this.style = this.node.style.cssText;\r\n\t\t\t}\r\n\r\n\t\t\t// we need to ensure that the delegate has an opportunity to handle this change\r\n\t\t\t// separately if it needs to\r\n\t\t\tdelegate.invalidate(this, 'style');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves a control's CSS property value. This doesn't just pull the\r\n\t* assigned value of `prop`; it returns the browser's understanding of `prop`,\r\n\t* the \"computed\" value. If the control isn't been rendered yet, and you need\r\n\t* a default value (such as `0`), include it in the arguments as `def`.\r\n\t*\r\n\t* @param {String} prop - The property name to get.\r\n\t* @param {*} [def] - An optional default value, in case the control isn't\r\n\t* rendered yet.\r\n\t* @returns {(String|Number)} The computed value of `prop`, as the browser\r\n\t* sees it.\r\n\t* @public\r\n\t*/\r\n\tgetComputedStyleValue: function (prop, def) {\r\n\t\treturn this.hasNode() ? Dom.getComputedStyleValue(this.node, prop) : def;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfindNodeById: function () {\r\n\t\treturn this.id && (this.node = Dom.byId(this.id));\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tidChanged: function (was) {\r\n\t\tif (was) Control.unregisterDomEvents(was);\r\n\t\tif (this.id) {\r\n\t\t\tControl.registerDomEvents(this.id, this);\r\n\t\t\tthis.setAttribute('id', this.id);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontentChanged: function () {\r\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\r\n\t\tdelegate.invalidate(this, 'content');\r\n\t},\r\n\r\n\t/**\r\n\t* If the control has been generated, re-flows the control.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tbeforeChildRender: function () {\r\n\t\t// if we are generated, we should flow before rendering a child;\r\n\t\t// if not, the render context isn't ready anyway\r\n\t\tif (this.generated) this.flow();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowingChanged: function (was) {\r\n\t\tvar nextControl;\r\n\t\t// if we are changing from not showing to showing we attempt to find whatever\r\n\t\t// our last known value for display was or use the default\r\n\t\tif (!was && this.showing) {\r\n\t\t\tthis.applyStyle('display', this._display || '');\r\n\r\n\t\t\t// note the check for generated and canGenerate as changes to canGenerate will force\r\n\t\t\t// us to ignore the renderOnShow value so we don't undo whatever the developer was\r\n\t\t\t// intending\r\n\t\t\tif (!this.generated && !this.canGenerate && this.renderOnShow) {\r\n\t\t\t\tnextControl = this.getNextControl();\r\n\t\t\t\tif (nextControl && !this.addBefore) this.addBefore = nextControl;\r\n\t\t\t\tthis.set('canGenerate', true);\r\n\t\t\t\tthis.render();\r\n\t\t\t}\r\n\r\n\t\t\tthis.sendShowingChangedEvent(was);\r\n\t\t}\r\n\r\n\t\t// if we are supposed to be hiding the control then we need to cache our current\r\n\t\t// display state\r\n\t\telse if (was && !this.showing) {\r\n\t\t\tthis.sendShowingChangedEvent(was);\r\n\t\t\t// we can't truly cache this because it _could_ potentially be set to multiple\r\n\t\t\t// values throughout its lifecycle although that seems highly unlikely...\r\n\t\t\tthis._display = this.hasNode() ? this.node.style.display : '';\r\n\t\t\tthis.applyStyle('display', 'none');\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trenderOnShowChanged: function () {\r\n\t\t// ensure that the default value assigned to showing is actually a boolean\r\n\t\t// and that it is only true if the renderOnShow is also false\r\n\t\tthis.showing = ((!!this.showing) && !this.renderOnShow);\r\n\t\t// we want to check and make sure that the canGenerate value is correct given\r\n\t\t// the state of renderOnShow\r\n\t\tthis.canGenerate = (this.canGenerate && !this.renderOnShow);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsendShowingChangedEvent: function (was) {\r\n\t\tvar waterfall = (was === true || was === false),\r\n\t\t\tparent = this.parent;\r\n\r\n\t\t// make sure that we don't trigger the waterfall when this method\r\n\t\t// is arbitrarily called during _create_ and it should only matter\r\n\t\t// that it changed if our parent's are all showing as well\r\n\t\tif (waterfall && (parent ? parent.getAbsoluteShowing(true) : true)) {\r\n\t\t\tthis.waterfall('onShowingChanged', {originator: this, showing: this.showing});\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Returns `true` if this control and all parents are showing.\r\n\t*\r\n\t* @param {Boolean} ignoreBounds - If `true`, it will not force a layout by retrieving\r\n\t*\tcomputed bounds and rely on the return from [showing]{@link module:enyo/Control~Control#showing}\r\n\t* exclusively.\r\n\t* @returns {Boolean} Whether the control is showing (visible).\r\n\t* @public\r\n\t*/\r\n\tgetAbsoluteShowing: function (ignoreBounds) {\r\n\t\tvar bounds = !ignoreBounds ? this.getBounds() : null,\r\n\t\t\tparent = this.parent;\r\n\r\n\t\tif (!this.generated || this.destroyed || !this.showing || (bounds &&\r\n\t\t\tbounds.height === 0 && bounds.width === 0)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (parent && parent.getAbsoluteShowing) {\r\n\r\n\t\t\t// we actually don't care what the parent says if it is the floating layer\r\n\t\t\tif (!this.parentNode || (this.parentNode !== Control.floatingLayer.hasNode())) {\r\n\t\t\t\treturn parent.getAbsoluteShowing(ignoreBounds);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Handles the `onShowingChanged` event that is waterfalled by controls when\r\n\t* their `showing` value is modified. If the control is not showing itself\r\n\t* already, it will not continue the waterfall. Overload this method to\r\n\t* provide additional handling for this event.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tshowingChangedHandler: function (sender, event) {\r\n\t\t// If we have deferred a reflow, do it now...\r\n\t\tif (this.showing && this._needsReflow) {\r\n\t\t\tthis.reflow();\r\n\t\t}\r\n\r\n\t\t// Then propagate `onShowingChanged` if appropriate\r\n\t\treturn sender === this ? false : !this.showing;\r\n\t},\r\n\r\n\t/**\r\n\t* Overriding reflow() so that we can take `showing` into\r\n\t* account and defer reflowing accordingly.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\treflow: function () {\r\n\t\tif (this.layout) {\r\n\t\t\tthis._needsReflow = this.showing ? this.layout.reflow() : true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfitChanged: function () {\r\n\t\tthis.parent.reflow();\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether we are in fullscreen mode or not.\r\n\t*\r\n\t* @returns {Boolean} Whether we are currently in fullscreen mode.\r\n\t* @public\r\n\t*/\r\n\tisFullscreen: function () {\r\n\t\treturn (this.hasNode() && this.node === Control.Fullscreen.getFullscreenElement());\r\n\t},\r\n\r\n\t/**\r\n\t* Requests that this control be displayed fullscreen (like a video\r\n\t* container). If the request is granted, the control fills the screen and\r\n\t* `true` is returned; if the request is denied, the control is not resized\r\n\t* and `false` is returned.\r\n\t*\r\n\t* @returns {Boolean} `true` on success; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\trequestFullscreen: function () {\r\n\t\tif (!this.hasNode()) return false;\r\n\r\n\t\tif (Control.Fullscreen.requestFullscreen(this)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t* Ends fullscreen mode for this control.\r\n\t*\r\n\t* @returns {Boolean} If the control was in fullscreen mode before this\r\n\t* method was called, it is taken out of that mode and `true` is returned;\r\n\t* otherwise, `false` is returned.\r\n\t* @public\r\n\t*/\r\n\tcancelFullscreen: function() {\r\n\t\tif (this.isFullscreen()) {\r\n\t\t\tControl.Fullscreen.cancelFullscreen();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t// .................................\r\n\r\n\t// .................................\r\n\t// RENDER-SCHEME API\r\n\r\n\t/**\r\n\t* Indicates whether the control is allowed to be generated, i.e., rendered\r\n\t* into the [DOM]{@glossary DOM} tree.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tcanGenerate: true,\r\n\r\n\t/**\r\n\t* Indicates whether the control is visible.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tshowing: true,\r\n\r\n\t/**\r\n\t* The [node]{@glossary Node} that this control will be rendered into.\r\n\t*\r\n\t* @type {module:enyo/Control~Control}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\trenderDelegate: null,\r\n\r\n\t/**\r\n\t* Indicates whether the control has been generated yet.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @private\r\n\t*/\r\n\tgenerated: false,\r\n\r\n\t/**\r\n\t* Forces the control to be rendered. You should use this sparingly, as it\r\n\t* can be costly, but it may be necessary in cases where a control or its\r\n\t* contents have been updated surreptitiously.\r\n\t*\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\trender: function () {\r\n\r\n\t\t// prioritize the delegate set for this control otherwise use the default\r\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\r\n\r\n\t\t// the render delegate acts on the control\r\n\t\tdelegate.render(this);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* Takes this control and drops it into a (new/different)\r\n\t* [DOM node]{@glossary Node}. This will replace any existing nodes in the\r\n\t* target `parentNode`.\r\n\t*\r\n\t* @param {Node} parentNode - The new parent of this control.\r\n\t* @param {Boolean} preventRooting - If `true`, this control will not be treated as a root\r\n\t*\tview and will not be added to the set of roots.\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\trenderInto: function (parentNode, preventRooting) {\r\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate,\r\n\t\t\tnoFit = this.fit === false;\r\n\r\n\t\t// attempt to retrieve the parentNode\r\n\t\tparentNode = Dom.byId(parentNode);\r\n\r\n\t\t// teardown in case of previous render\r\n\t\tdelegate.teardownRender(this);\r\n\r\n\t\tif (parentNode == document.body && !noFit) this.setupBodyFitting();\r\n\t\telse if (this.fit) this.addClass('enyo-fit enyo-clip');\r\n\r\n\t\t// for IE10 support, we want full support over touch actions in enyo-rendered areas\r\n\t\tthis.addClass('enyo-no-touch-action');\r\n\r\n\t\t// add css to enable hw-accelerated scrolling on non-android platforms\r\n\t\t// ENYO-900, ENYO-901\r\n\t\tthis.setupOverflowScrolling();\r\n\r\n\t\t// if there are unflushed body classes we flush them now...\r\n\t\tDom.flushBodyClasses();\r\n\r\n\t\t// we inject this as a root view because, well, apparently that is just an assumption\r\n\t\t// we've been making...\r\n\t\tif (!preventRooting) {\r\n\t\t\troots.addToRoots(this);\r\n\t\t}\r\n\r\n\t\t// now let the delegate render it the way it needs to\r\n\t\tdelegate.renderInto(this, parentNode);\r\n\r\n\t\tDom.updateScaleFactor();\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* A function that fires after the control has rendered. This performs a\r\n\t* reflow.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\trendered: function () {\r\n\t\tvar child,\r\n\t\t\ti = 0;\r\n\r\n\t\t// CAVEAT: Currently we use one entry point ('reflow') for\r\n\t\t// post-render layout work *and* post-resize layout work.\r\n\t\tthis.reflow();\r\n\r\n\t\tfor (; (child = this.children[i]); ++i) {\r\n\t\t\tif (child.generated) child.rendered();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* You should generally not need to call this method in your app code.\r\n\t* It is used internally by some Enyo UI libraries to handle a rare\r\n\t* issue that sometimes arises when using a virtualized list or repeater\r\n\t* on a touch device.\r\n\t*\r\n\t* This issue occurs when a gesture (e.g. a drag) originates with a DOM\r\n\t* node that ends up being destroyed in mid-gesture as the list updates.\r\n\t* When the node is destroyed, the stream of DOM events representing the\r\n\t* gesture stops, causing the associated action to stop or otherwise\r\n\t* fail.\r\n\t*\r\n\t* You can prevent this problem from occurring by calling `retainNode`\r\n\t* on the {@link module:enyo/Control~Control} from which the gesture originates. Doing\r\n\t* so will cause Enyo to keep the DOM node around (hidden from view)\r\n\t* until you explicitly release it. You should call `retainNode` in the\r\n\t* event handler for the event that starts the gesture.\r\n\t*\r\n\t* `retainNode` returns a function that you must call when the gesture\r\n\t* ends to release the node. Make sure you call this function to avoid\r\n\t* \"leaking\" the DOM node (failing to remove it from the DOM).\r\n\t*\r\n\t* @param {Node} node - Optional. Defaults to the node associated with\r\n\t* the Control (`Control.node`). You can generally omit this parameter\r\n\t* when working with {@link module:enyo/DataList~DataList} or {@link module:enyo/DataGridList~DataGridList},\r\n\t* but should generally pass in the event's target node (`event.target`)\r\n\t* when working with {@link module:layout/List~List}. (Because {@link module:layout/List~List} is\r\n\t* based on the Flyweight pattern, the event's target node is often not\r\n\t* the node currently associated with the Control at the time the event\r\n\t* occurs.)\r\n\t* @returns {Function} Keep a reference to this function and call it\r\n\t* to release the node when the gesture has ended.\r\n\t* @public\r\n\t*/\r\n\tretainNode: function(node) {\r\n\t\tvar control = this,\r\n\t\t\tretainedNode = this._retainedNode = (node || this.hasNode());\r\n\t\treturn function() {\r\n\t\t\tif (control && (control._retainedNode == retainedNode)) {\r\n\t\t\t\tcontrol._retainedNode = null;\r\n\t\t\t} else {\r\n\t\t\t\treleaseRetainedNode(retainedNode);\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* If a Control needs to do something before it and its children's DOM nodes\r\n\t* are torn down, it can implement this lifecycle method, which is called automatically\r\n\t* by the framework and takes no arguments.\r\n\t*\r\n\t* @type {Function}\r\n\t* @protected\r\n\t*/\r\n\tbeforeTeardown: null,\r\n\r\n\t/**\r\n\t* @param {Boolean} [cache] - Whether or not we are tearing down as part of a destroy\r\n\t*\toperation, or if we are just caching. If `true`, the `showing` and `canGenerate`\r\n\t*\tproperties of the control will not be reset.\r\n\t* @private\r\n\t*/\r\n\tteardownRender: function (cache) {\r\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\r\n\r\n\t\tif (this._retainedNode) {\r\n\t\t\tstoreRetainedNode(this);\r\n\t\t}\r\n\r\n\t\tdelegate.teardownRender(this, cache);\r\n\r\n\t\t// if the original state was set with renderOnShow true then we need to reset these\r\n\t\t// values as well to coordinate the original intent\r\n\t\tif (this.renderOnShow && !cache) {\r\n\t\t\tthis.set('showing', false);\r\n\t\t\tthis.set('canGenerate', false);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tteardownChildren: function () {\r\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\r\n\r\n\t\tdelegate.teardownChildren(this);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taddNodeToParent: function () {\r\n\t\tvar pn;\r\n\r\n\t\tif (this.node) {\r\n\t\t\tpn = this.getParentNode();\r\n\t\t\tif (pn) {\r\n\t\t\t\tif (this.addBefore !== undefined) {\r\n\t\t\t\t\tthis.insertNodeInParent(pn, this.addBefore && this.addBefore.hasNode());\r\n\t\t\t\t} else this.appendNodeToParent(pn);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tappendNodeToParent: function(parentNode) {\r\n\t\tparentNode.appendChild(this.node);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tinsertNodeInParent: function(parentNode, beforeNode) {\r\n\t\tparentNode.insertBefore(this.node, beforeNode || parentNode.firstChild);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tremoveNodeFromDom: function() {\r\n\t\tvar node = this.hasNode();\r\n\t\tif (node) {\r\n\t\t\tDom.removeNode(node);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetParentNode: function () {\r\n\t\treturn this.parentNode || (this.parent && (\r\n\t\t\tthis.parent.hasNode() || this.parent.getParentNode())\r\n\t\t);\r\n\t},\r\n\r\n\t// .................................\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\tvar attrs = props && props.attributes;\r\n\r\n\t\t\t// ensure that we both keep an instance copy of defined attributes but also\r\n\t\t\t// update the hash with any additional instance definitions at runtime\r\n\t\t\tthis.attributes = this.attributes ? utils.clone(this.attributes) : {};\r\n\t\t\tif (attrs) {\r\n\t\t\t\tutils.mixin(this.attributes, attrs);\r\n\t\t\t\tdelete  props.attributes;\r\n\t\t\t}\r\n\r\n\t\t\treturn sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\tvar classes;\r\n\r\n\t\t\t// initialize the styles for this instance\r\n\t\t\tthis.style = this.kindStyle + this.style;\r\n\r\n\t\t\t// set initial values based on renderOnShow\r\n\t\t\tthis.renderOnShowChanged();\r\n\r\n\t\t\t// super initialization\r\n\t\t\tsup.apply(this, arguments);\r\n\r\n\t\t\t// ensure that if we aren't showing -> true then the correct style\r\n\t\t\t// is applied - note that there might be issues with this because we are\r\n\t\t\t// trying not to have to parse out any other explicit display value during\r\n\t\t\t// initialization and we can't check because we haven't rendered yet\r\n\t\t\tif (!this.showing) this.style += ' display: none;';\r\n\r\n\t\t\t// try and make it so we only need to call the method once during\r\n\t\t\t// initialization and only then when we have something to add\r\n\t\t\tclasses = this.kindClasses;\r\n\t\t\tif (classes && this.classes) classes += (' ' + this.classes);\r\n\t\t\telse if (this.classes) classes = this.classes;\r\n\r\n\t\t\t// if there are known classes needed to be applied from the kind\r\n\t\t\t// definition and the instance definition (such as a component block)\r\n\t\t\tthis.classes = this.attributes['class'] = classes ? classes.trim() : classes;\r\n\r\n\t\t\t// setup the id for this control if we have one\r\n\t\t\tthis.idChanged();\r\n\t\t\tthis.contentChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Destroys the control and removes it from the [DOM]{@glossary DOM}. Also\r\n\t* removes the control's ability to receive bubbled events.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\t// if the control has been rendered we ensure it is removed from the DOM\r\n\t\t\tthis.removeNodeFromDom();\r\n\r\n\t\t\t// ensure no other bubbled events can be dispatched to this control\r\n\t\t\tdispatcher.$[this.id] = null;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdispatchEvent: kind.inherit(function (sup) {\r\n\t\treturn function (name, event, sender) {\r\n\t\t\t// prevent dispatch and bubble of events that are strictly internal (e.g.\r\n\t\t\t// enter/leave)\r\n\t\t\tif (this.strictlyInternalEvents[name] && this.isInternalEvent(event)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taddChild: kind.inherit(function (sup) {\r\n\t\treturn function (control) {\r\n\t\t\tcontrol.addClass(this.controlClasses);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tremoveChild: kind.inherit(function (sup) {\r\n\t\treturn function (control) {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tcontrol.removeClass(this.controlClasses);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tset: kind.inherit(function (sup) {\r\n\t\treturn function (path, value, opts) {\r\n\t\t\t// this should be updated if a better api for hooking becomes available but for\r\n\t\t\t// now we just do this directly to ensure that the showing value is actually\r\n\t\t\t// a boolean\r\n\t\t\tif (path == 'showing') {\r\n\t\t\t\treturn sup.call(this, path, !! value, opts);\r\n\t\t\t} else return sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t// .................................\r\n\t// BACKWARDS COMPATIBLE API, LEGACY METHODS AND PUBLIC PROPERTY\r\n\t// METHODS OR PROPERTIES THAT PROBABLY SHOULD NOT BE HERE BUT ARE ANYWAY\r\n\r\n\t/**\r\n\t* Apparently used by Ares 2 still but we have the property embedded in the kind...\r\n\t*\r\n\t* @deprecated\r\n\t* @private\r\n\t*/\r\n\tisContainer: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trtl: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetupBodyFitting: function () {\r\n\t\tDom.applyBodyFit();\r\n\t\tthis.addClass('enyo-fit enyo-clip');\r\n\t},\r\n\r\n\t/*\r\n\t* If the platform is Android or Android-Chrome, don't include the css rule\r\n\t* `-webkit-overflow-scrolling: touch`, as it is not supported in Android and leads to\r\n\t* overflow issues (ENYO-900 and ENYO-901). Similarly, BB10 has issues repainting\r\n\t* out-of-viewport content when `-webkit-overflow-scrolling` is used (ENYO-1396).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsetupOverflowScrolling: function () {\r\n\t\tif(platform.android || platform.androidChrome || platform.blackberry) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tDom.addBodyClass('webkitOverflowScrolling');\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the control's directionality based on its content, or an optional `stringInstead`.\r\n\t*\r\n\t* @param {String} [stringInstead] An alternate string for consideration may be sent instead,\r\n\t*\tin-case the string to test the directionality of the control is stored in `this.value`,\r\n\t*\tor some other property, for example.\r\n\t* @private\r\n\t*/\r\n\tdetectTextDirectionality: function (stringInstead) {\r\n\t\t// If an argument was supplied at all, use it, even if it's undefined.\r\n\t\t// Values that are null or undefined, or are numbers, arrays, and some objects are safe\r\n\t\t// to be tested.\r\n\t\tvar str = (arguments.length) ? stringInstead : this.content;\r\n\t\tif (str || str === 0) {\r\n\t\t\tthis.rtl = utils.isRtl(str);\r\n\t\t\tthis.applyStyle('direction', this.rtl ? 'rtl' : 'ltr');\r\n\t\t} else {\r\n\t\t\tthis.applyStyle('direction', null);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// .................................\r\n\r\n\t// .................................\r\n\t// DEPRECATED\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tgetTag: function () {\r\n\t\treturn this.tag;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tsetTag: function (tag) {\r\n\t\tvar was = this.tag;\r\n\r\n\t\tif (tag && typeof tag == 'string') {\r\n\t\t\tthis.tag = tag;\r\n\t\t\tif (was !== tag) this.notify('tag', was, tag);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tgetAttributes: function () {\r\n\t\treturn this.attributes;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tsetAttributes: function (attrs) {\r\n\t\tvar was = this.attributes;\r\n\r\n\t\tif (typeof attrs == 'object') {\r\n\t\t\tthis.attributes = attrs;\r\n\t\t\tif (attrs !== was) this.notify('attributes', was, attrs);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tgetClasses: function () {\r\n\t\treturn this.classes;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tsetClasses: function (classes) {\r\n\t\tvar was = this.classes;\r\n\r\n\t\tthis.classes = classes;\r\n\t\tif (was != classes) this.notify('classes', was, classes);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tgetStyle: function () {\r\n\t\treturn this.style;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tsetStyle: function (style) {\r\n\t\tvar was = this.style;\r\n\r\n\t\tthis.style = style;\r\n\t\tif (was != style) this.notify('style', was, style);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tgetContent: function () {\r\n\t\treturn this.content;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tsetContent: function (content) {\r\n\t\tvar was = this.content;\r\n\t\tthis.content = content;\r\n\r\n\t\tif (was != content) this.notify('content', was, content);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tgetShowing: function () {\r\n\t\treturn this.showing;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tsetShowing: function (showing) {\r\n\t\tvar was = this.showing;\r\n\r\n\t\t// force the showing property to always be a boolean value\r\n\t\tthis.showing = !! showing;\r\n\r\n\t\tif (was != showing) this.notify('showing', was, showing);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tgetAllowHtml: function () {\r\n\t\treturn this.allowHtml;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tsetAllowHtml: function (allow) {\r\n\t\tvar was = this.allowHtml;\r\n\t\tthis.allowHtml = !! allow;\r\n\r\n\t\tif (was !== allow) this.notify('allowHtml', was, allow);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tgetCanGenerate: function () {\r\n\t\treturn this.canGenerate;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tsetCanGenerate: function (can) {\r\n\t\tvar was = this.canGenerate;\r\n\t\tthis.canGenerate = !! can;\r\n\r\n\t\tif (was !== can) this.notify('canGenerate', was, can);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tgetFit: function () {\r\n\t\treturn this.fit;\r\n\t},\r\n\r\n\t/**\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tsetFit: function (fit) {\r\n\t\tvar was = this.fit;\r\n\t\tthis.fit = !! fit;\r\n\r\n\t\tif (was !== fit) this.notify('fit', was, fit);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t* @ares\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tgetIsContainer: function () {\r\n\t\treturn this.isContainer;\r\n\t},\r\n\r\n\t/**\r\n\t* @ares\r\n\t* @deprecated\r\n\t* @public\r\n\t*/\r\n\tsetIsContainer: function (isContainer) {\r\n\t\tvar was = this.isContainer;\r\n\t\tthis.isContainer = !! isContainer;\r\n\r\n\t\tif (was !== isContainer) this.notify('isContainer', was, isContainer);\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t// .................................\r\n\r\n});\r\n\r\n/**\r\n* @static\r\n* @public\r\n*/\r\nkind.setDefaultCtor(Control);\r\n\r\n/**\r\n* @static\r\n* @public\r\n*/\r\nControl.renderDelegate = HTMLStringDelegate;\r\n\r\n/**\r\n* @private\r\n*/\r\nControl.registerDomEvents = function (id, control) {\r\n\tdispatcher.$[id] = control;\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nControl.unregisterDomEvents = function (id) {\r\n\tdispatcher.$[id] = null;\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nControl.normalizeCssStyleString = function (style) {\r\n\treturn style ? (\r\n\t\t(\";\" + style)\r\n\t\t// add a semi-colon if it's not the last character (also trim possible unnecessary whitespace)\r\n\t\t.replace(/([^;])\\s*$/, \"$1;\")\r\n\t\t// ensure we have one space after each colon or semi-colon\r\n\t\t.replace(/\\s*;\\s*([\\w-]+)\\s*:\\s*/g, \"; $1: \")\r\n\t\t// remove first semi-colon and space\r\n\t\t.substr(2).trim()\r\n\t) : \"\";\r\n};\r\n\r\n/**\r\n* @private\r\n*/\r\nControl.concat = function (ctor, props, instance) {\r\n\tvar proto = ctor.prototype || ctor,\r\n\t\tattrs,\r\n\t\tstr;\r\n\r\n\tif (props.classes) {\r\n\t\tif (instance) {\r\n\t\t\tstr = (proto.classes ? (proto.classes + ' ') : '') + props.classes;\r\n\t\t\tproto.classes = str;\r\n\t\t} else {\r\n\t\t\tstr = (proto.kindClasses || '') + (proto.classes ? (' ' + proto.classes) : '');\r\n\t\t\tproto.kindClasses = str;\r\n\t\t\tproto.classes = props.classes;\r\n\t\t}\r\n\t\tdelete props.classes;\r\n\t}\r\n\r\n\tif (props.style) {\r\n\t\tif (instance) {\r\n\t\t\tstr = (proto.style ? proto.style : '') + props.style;\r\n\t\t\tproto.style = Control.normalizeCssStyleString(str);\r\n\t\t} else {\r\n\t\t\tstr = proto.kindStyle ? proto.kindStyle : '';\r\n\t\t\tstr += proto.style ? (';' + proto.style) : '';\r\n\t\t\tstr += props.style;\r\n\r\n\t\t\t// moved it all to kindStyle so that it will be available whenever instanced\r\n\t\t\tproto.kindStyle = Control.normalizeCssStyleString(str);\r\n\t\t}\r\n\t\tdelete props.style;\r\n\t}\r\n\r\n\tif (props.attributes) {\r\n\t\tattrs = proto.attributes;\r\n\t\tproto.attributes = attrs ? utils.mixin({}, [attrs, props.attributes]) : props.attributes;\r\n\t\tdelete props.attributes;\r\n\t}\r\n};\r\n\r\nControl.prototype.defaultKind = Control;\r\n\r\n// Control has to be *completely* set up before creating the floating layer setting up the\r\n// fullscreen object because fullscreen depends on floating layer which depends on Control.\r\n\r\n/**\r\n* @static\r\n* @public\r\n*/\r\nControl.FloatingLayer = FloatingLayer(Control);\r\n\r\n/**\r\n* @static\r\n* @public\r\n*/\r\nControl.floatingLayer = new Control.FloatingLayer({id: 'floatingLayer'});\r\n\r\n/**\r\n* @static\r\n* @public\r\n*/\r\nControl.Fullscreen = fullscreen(Control);\r\n","/**\r\n* This module has no exports. It merely extends {@link module:enyo/gesture} to enable touch events.\r\n*\r\n* @private\r\n* @module enyo/touch\r\n*/\r\nrequire('enyo');\r\n\r\nvar\r\n\tutils = require('./utils'),\r\n\tgesture = require('./gesture'),\r\n\tdispatcher = require('./dispatcher'),\r\n\tplatform = require('./platform');\r\n\r\nvar\r\n\tDom = require('./dom'),\r\n\tJob = require('./job');\r\n\r\nfunction dispatch (e) {\r\n\treturn dispatcher.dispatch(e);\r\n}\r\n\r\n/**\r\n* @private\r\n*/\r\nDom.requiresWindow(function() {\r\n\r\n\t/**\r\n\t* Add touch-specific gesture feature\r\n\t* \r\n\t* @private\r\n\t*/\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tvar oldevents = gesture.events;\r\n\t\r\n\t/**\r\n\t* @ignore\r\n\t*/\r\n\tgesture.events.touchstart = function (e) {\r\n\t\t// for duration of this touch, only handle touch events.  Old event\r\n\t\t// structure will be restored during touchend.\r\n\t\tgesture.events = touchGesture;\r\n\t\tgesture.events.touchstart(e);\r\n\t};\r\n\t\r\n\t/**\r\n\t* @ignore\r\n\t*/\r\n\tvar touchGesture = {\r\n\r\n\t\t/**\r\n\t\t* @ignore\r\n\t\t* @private\r\n\t\t*/\r\n\t\t_touchCount: 0,\r\n\r\n\t\t/**\r\n\t\t* @ignore\r\n\t\t* @private\r\n\t\t*/\r\n\t\ttouchstart: function (e) {\r\n\t\t\tthis._touchCount += e.changedTouches.length;\r\n\t\t\tthis.excludedTarget = null;\r\n\t\t\tvar event = this.makeEvent(e);\r\n\t\t\t//store the finger which generated the touchstart event\r\n\t\t\tthis.currentIdentifier = event.identifier;\r\n\t\t\tgesture.down(event);\r\n\t\t\t// generate a new event object since over is a different event\r\n\t\t\tevent = this.makeEvent(e);\r\n\t\t\tthis.overEvent = event;\r\n\t\t\tgesture.over(event);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @ignore\r\n\t\t* @private\r\n\t\t*/\r\n\t\ttouchmove: function (e) {\r\n\t\t\tJob.stop('resetGestureEvents');\r\n\t\t\t// NOTE: allow user to supply a node to exclude from event\r\n\t\t\t// target finding via the drag event.\r\n\t\t\tvar de = gesture.drag.dragEvent;\r\n\t\t\tthis.excludedTarget = de && de.dragInfo && de.dragInfo.node;\r\n\t\t\tvar event = this.makeEvent(e);\r\n\t\t\t// do not generate the move event if this touch came from a different\r\n\t\t\t// finger than the starting touch\r\n\t\t\tif (this.currentIdentifier !== event.identifier) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tgesture.move(event);\r\n\t\t\t// prevent default document scrolling if enyo.bodyIsFitting == true\r\n\t\t\t// avoid window scrolling by preventing default on this event\r\n\t\t\t// note: this event can be made unpreventable (native scrollers do this)\r\n\t\t\tif (Dom.bodyIsFitting) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\t// synthesize over and out (normally generated via mouseout)\r\n\t\t\tif (this.overEvent && this.overEvent.target != event.target) {\r\n\t\t\t\tthis.overEvent.relatedTarget = event.target;\r\n\t\t\t\tevent.relatedTarget = this.overEvent.target;\r\n\t\t\t\tgesture.out(this.overEvent);\r\n\t\t\t\tgesture.over(event);\r\n\t\t\t}\r\n\t\t\tthis.overEvent = event;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @ignore\r\n\t\t* @private\r\n\t\t*/\r\n\t\ttouchend: function (e) {\r\n\t\t\tgesture.up(this.makeEvent(e));\r\n\t\t\t// NOTE: in touch land, there is no distinction between\r\n\t\t\t// a pointer enter/leave and a drag over/out.\r\n\t\t\t// While it may make sense to send a leave event when a touch\r\n\t\t\t// ends, it does not make sense to send a dragout.\r\n\t\t\t// We avoid this by processing out after up, but\r\n\t\t\t// this ordering is ad hoc.\r\n\t\t\tgesture.out(this.overEvent);\r\n\t\t\t// reset the event handlers back to the mouse-friendly ones after\r\n\t\t\t// a short timeout. We can't do this directly in this handler\r\n\t\t\t// because it messes up Android to handle the mouseup event.\r\n\t\t\t// FIXME: for 2.1 release, conditional on platform being\r\n\t\t\t// desktop Chrome, since we're seeing issues in PhoneGap with this\r\n\t\t\t// code.\r\n\t\t\tthis._touchCount -= e.changedTouches.length;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* Use `mouseup()` after touches are done to reset {@glossary event} handling \r\n\t\t* back to default; this works as long as no one did a `preventDefault()` on\r\n\t\t* the touch events.\r\n\t\t* \r\n\t\t* @ignore\r\n\t\t* @private\r\n\t\t*/\r\n\t\tmouseup: function () {\r\n\t\t\tif (this._touchCount === 0) {\r\n\t\t\t\tthis.sawMousedown = false;\r\n\t\t\t\tgesture.events = oldevents;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @ignore\r\n\t\t* @private\r\n\t\t*/\r\n\t\tmakeEvent: function (e) {\r\n\t\t\tvar event = utils.clone(e.changedTouches[0]);\r\n\t\t\tevent.srcEvent = e;\r\n\t\t\tevent.target = this.findTarget(event);\r\n\t\t\t// normalize \"mouse button\" info\r\n\t\t\tevent.which = 1;\r\n\t\t\t//enyo.log(\"target for \" + inEvent.type + \" at \" + e.pageX + \", \" + e.pageY + \" is \" + (e.target ? e.target.id : \"none\"));\r\n\t\t\treturn event;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @ignore\r\n\t\t* @private\r\n\t\t*/\r\n\t\tcalcNodeOffset: function (node) {\r\n\t\t\tif (node.getBoundingClientRect) {\r\n\t\t\t\tvar o = node.getBoundingClientRect();\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft: o.left,\r\n\t\t\t\t\ttop: o.top,\r\n\t\t\t\t\twidth: o.width,\r\n\t\t\t\t\theight: o.height\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @ignore\r\n\t\t* @private\r\n\t\t*/\r\n\t\tfindTarget: function (e) {\r\n\t\t\treturn document.elementFromPoint(e.clientX, e.clientY);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* NOTE: Will find only 1 element under the touch and will fail if an element is \r\n\t\t* positioned outside the bounding box of its parent.\r\n\t\t* \r\n\t\t* @ignore\r\n\t\t* @private\r\n\t\t*/\r\n\t\tfindTargetTraverse: function (node, x, y) {\r\n\t\t\tvar n = node || document.body;\r\n\t\t\tvar o = this.calcNodeOffset(n);\r\n\t\t\tif (o && n != this.excludedTarget) {\r\n\t\t\t\tvar adjX = x - o.left;\r\n\t\t\t\tvar adjY = y - o.top;\r\n\t\t\t\t//enyo.log(\"test: \" + n.id + \" (left: \" + o.left + \", top: \" + o.top + \", width: \" + o.width + \", height: \" + o.height + \")\");\r\n\t\t\t\tif (adjX>0 && adjY>0 && adjX<=o.width && adjY<=o.height) {\r\n\t\t\t\t\t//enyo.log(\"IN: \" + n.id + \" -> [\" + adjX + \",\" + adjY + \" in \" + o.width + \"x\" + o.height + \"] (children: \" + n.childNodes.length + \")\");\r\n\t\t\t\t\tvar target;\r\n\t\t\t\t\tfor (var n$=n.childNodes, i=n$.length-1, c; (c=n$[i]); i--) {\r\n\t\t\t\t\t\ttarget = this.findTargetTraverse(c, x, y);\r\n\t\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\t\treturn target;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn n;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t* @ignore\r\n\t\t* @private\r\n\t\t*/\r\n\t\tconnect: function () {\r\n\t\t\tutils.forEach(['touchstart', 'touchmove', 'touchend', 'gesturestart', 'gesturechange', 'gestureend'], function(e) {\r\n\t\t\t\t// on iOS7 document.ongesturechange is never called\r\n\t\t\t\tdocument.addEventListener(e, dispatch, false);\r\n\t\t\t});\r\n\r\n\t\t\tif (platform.androidChrome <= 18 || platform.silk === 2) {\r\n\t\t\t\t// HACK: on Chrome for Android v18 on devices with higher density displays,\r\n\t\t\t\t// document.elementFromPoint expects screen coordinates, not document ones\r\n\t\t\t\t// bug also appears on Kindle Fire HD\r\n\t\t\t\tthis.findTarget = function(e) {\r\n\t\t\t\t\treturn document.elementFromPoint(e.screenX, e.screenY);\r\n\t\t\t\t};\r\n\t\t\t} else if (!document.elementFromPoint) {\r\n\t\t\t\tthis.findTarget = function(e) {\r\n\t\t\t\t\treturn this.findTargetTraverse(null, e.clientX, e.clientY);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\ttouchGesture.connect();\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/ViewController~ViewController} kind.\r\n* @module enyo/ViewController\r\n*/\r\n\r\n// needed so that the default kind is Control instead of Component, if it isn't required elsewhere\r\nrequire('./Control');\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\n\r\nvar\r\n\tController = require('./Controller'),\r\n\tUiComponent = require('./UiComponent');\r\n\r\nvar\r\n\tDom = require('./dom');\r\n\r\n/**\r\n* {@link module:enyo/ViewController~ViewController} is designed to manage the lifecycle of a particular view\r\n* ({@link module:enyo/Control~Control}) that it owns. It is capable of controlling when a view is inserted into\r\n* the DOM and where, managing [events]{@glossary event} bubbled from the view, and isolating (or\r\n* encapsulating) the entire view hierarchy below it. Alternatively, it may be implemented as a\r\n* [component]{@link module:enyo/Component~Component} in a larger hierarchy, in which case it will inject its view\r\n* into its parent rather than directly into the DOM. And, of course, a ViewController may be\r\n* used as the `controller` property of another view, although this usage will (by default)\r\n* result in the removal of its own view from the {@link module:enyo/Component~Component} bubbling hierarchy.\r\n*\r\n* Note that `enyo/ViewController` may have components defined in its\r\n* `components` [array]{@glossary Array}, but these components should\r\n* not be instances of `enyo/Control`.\r\n*\r\n* @class ViewController\r\n* @extends module:enyo/Controller~Controller\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/ViewController~ViewController.prototype */ {\r\n\r\n\tname: 'enyo.ViewController',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Controller,\r\n\r\n\t/**\r\n\t* The `view` property may either be a [constructor]{@glossary constructor}, an\r\n\t* instance of {@link module:enyo/Control~Control}, an [object]{@glossary Object}\r\n\t* description of the view ([object literal/hash]), or `null` if it will be\r\n\t* set later. Setting this property to a constructor or string naming a kind\r\n\t* will automatically create an instance of that kind according to this\r\n\t* controller's settings. If the `view` is set to an instance, it will be\r\n\t* rendered according to the properties of the controller. If this property\r\n\t* is a constructor, it will be preserved in the\r\n\t* [viewKind]{@link module:enyo/ViewController~ViewController#viewKind} property. Once\r\n\t* initialization is complete, the instance of this controller's view will be\r\n\t* available via this property.\r\n\t*\r\n\t* @type {Control|Function|Object}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tview: null,\r\n\r\n\t/**\r\n\t* The preserved [kind]{@glossary kind} for this controller's view. You may\r\n\t* set this to a [constructor]{@glossary constructor} (or the\r\n\t* [view]{@link module:enyo/ViewController~ViewController#view} property). In either case, if a\r\n\t* view is set explicitly or this property is used, the constructor will be\r\n\t* available via this property.\r\n\t*\r\n\t* @type {Function}\r\n\t* @default null\r\n\t* @public\r\n\t*/\r\n\tviewKind: null,\r\n\r\n\t/**\r\n\t* Designates where the controller's view will render. This should be a\r\n\t* string consisting of either `'document.body'` (the default) or the DOM id\r\n\t* of a node (either inserted by an {@link module:enyo/Control~Control} or static HTML\r\n\t* already in the `document.body`). If the controller has a parent (because\r\n\t* it was instantiated as a component in an `enyo/Control`, this property\r\n\t* will be ignored and the view will instead be rendered in the parent. This\r\n\t* will not happen if the controller is a component of {@link module:enyo/Component~Component}\r\n\t* or is set as the `controller` property of an `enyo/Control`.\r\n\t*\r\n\t* @type {String}\r\n\t* @default 'document.body'\r\n\t* @public\r\n\t*/\r\n\trenderTarget: 'document.body',\r\n\r\n\t/**\r\n\t* When the view of the controller has its [destroy()]{@link module:enyo/Control~Control#destroy}\r\n\t* method called, it automatically triggers its own removal from the controller's\r\n\t* [view]{@link module:enyo/ViewController~ViewController#view} property. By default, the controller\r\n\t* will not create a new view (from [viewKind]{@link module:enyo/ViewController~ViewController#viewKind})\r\n\t* automatically unless this flag is set to `true`.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tresetView: false,\r\n\r\n\t/**\r\n\t* Renders the controller's view, if possible. If the controller is a\r\n\t* component of a [UiComponent]{@link module:enyo/UiComponent~UiComponent}, the view will be\r\n\t* rendered into its container; otherwise, the view will be rendered into the\r\n\t* controller's [renderTarget]{@link module:enyo/ViewController~ViewController#renderTarget}. If\r\n\t* the view is already rendered, this method will do nothing.\r\n\t*\r\n\t* @param {String} [target] - When specified, this value will be used instead of\r\n\t*\t[renderTarget]{@link module:enyo/ViewController~ViewController#renderTarget}.\r\n\t* @public\r\n\t*/\r\n\trender: function (target) {\r\n\t\tvar v = this.view,\r\n\t\t\tt = target || this.renderTarget;\r\n\t\tif (v) {\r\n\t\t\tif (v.hasNode() && v.generated) { return; }\r\n\t\t\t// here we test to see if we need to render it into our target node or the container\r\n\t\t\tif (this.container) {\r\n\t\t\t\tv.render();\r\n\t\t\t} else {\r\n\t\t\t\tv.renderInto(Dom.byId(t) || utils.getPath.call(window, t));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Renders the view into the specified `target` and sets the\r\n\t* [renderTarget]{@link module:enyo/ViewController~ViewController#renderTarget} property to\r\n\t* `target`.\r\n\t*\r\n\t* @param {String} target - Where the view will be rendered into.\r\n\t* @public\r\n\t*/\r\n\trenderInto: function (target) {\r\n\t\tthis.render((this.renderTarget=target));\r\n\t},\r\n\r\n\t/**\r\n\t* Responds to changes in the controller's [view]{@link module:enyo/ViewController~ViewController#view}\r\n\t* property during initialization or whenever `set('view', ...)` is called.\r\n\t* If a [constructor]{@glossary constructor} is found, it will be instanced\r\n\t* or resolved from a [string]{@glossary String}. If a previous view exists\r\n\t* and the controller is its [owner]{@link module:enyo/Component~Component#owner}, it will be\r\n\t* destroyed; otherwise, it will simply be removed.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tviewChanged: function (previous) {\r\n\t\tif (previous) {\r\n\t\t\tprevious.set('bubbleTarget', null);\r\n\t\t\tif (previous.owner === this && !previous.destroyed) {\r\n\t\t\t\tprevious.destroy();\r\n\t\t\t}\r\n\t\t\tif (previous.destroyed && !this.resetView) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar v = this.view;\r\n\r\n\t\t// if it is a function we need to instance it\r\n\t\tif (typeof v == 'function') {\r\n\t\t\t// save the constructor for later\r\n\t\t\tthis.viewKind = v;\r\n\t\t\tv = null;\r\n\t\t}\r\n\r\n\t\tif ((!v && this.viewKind) || (v && typeof v == 'object' && !(v instanceof UiComponent))) {\r\n\t\t\tvar d = (typeof v == 'object' && v !== null && !v.destroyed && v) || {kind: this.viewKind},\r\n\t\t\t\ts = this;\r\n\t\t\t// in case it isn't set...\r\n\t\t\td.kind = d.kind || this.viewKind || kind.getDefaultCtor();\r\n\t\t\tv = this.createComponent(d, {\r\n\t\t\t\towner: this,\r\n\t\t\t\t// if this controller is a component of a UiComponent kind then it\r\n\t\t\t\t// will have assigned a container that we can add to the child\r\n\t\t\t\t// so it will register as a child and control to be rendered in the\r\n\t\t\t\t// correct location\r\n\t\t\t\tcontainer: this.container || null,\r\n\t\t\t\tbubbleTarget: this\r\n\t\t\t});\r\n\t\t\tv.extend({\r\n\t\t\t\tdestroy: kind.inherit(function (sup) {\r\n\t\t\t\t\treturn function () {\r\n\t\t\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t\t\t\t// if the bubble target is the view contorller then we need to\r\n\t\t\t\t\t\t// let it know we've been destroyed\r\n\t\t\t\t\t\tif (this.bubbleTarget === s) {\r\n\t\t\t\t\t\t\tthis.bubbleTarget.set('view', null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t} else if (v && v instanceof UiComponent) {\r\n\t\t\t// make sure we grab the constructor from an instance so we know what kind\r\n\t\t\t// it was to recreate later if necessary\r\n\t\t\tif (!this.viewKind) {\r\n\t\t\t\tthis.viewKind = v.ctor;\r\n\t\t\t}\r\n\t\t\tv.set('bubbleTarget', this);\r\n\t\t}\r\n\t\tthis.view = v;\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.viewChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tthis.view = null;\r\n\t\t\tthis.viewKind = null;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t/**\r\n\t\tThe `controller` can't be the instance owner of its child view for event\r\n\t\tpropagation reasons. When this flag is `true`, it ensures that events will\r\n\t\tnot be handled multiple times (by the `controller` and its `view`\r\n\t\tseparately).\r\n\t*/\r\n\tnotInstanceOwner: true\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Repeater~Repeater} kind.\r\n* @module enyo/Repeater\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils');\r\nvar\r\n\tControl = require('./Control');\r\n\r\n/**\r\n* The extended {@glossary event} [object]{@glossary Object} that is provided\r\n* when the [onSetupItem]{@link module:enyo/Repeater~Repeater#onSetupItem} event is fired.\r\n*\r\n* @typedef {Object} module:enyo/Repeater~Repeater~SetupItemEvent\r\n* @property {Number} index - The item's index.\r\n* @property {Object} item - The item control, for decoration.\r\n*/\r\n\r\n/**\r\n* Fires when each item is created.\r\n*\r\n* @event module:enyo/Repeater~Repeater#onSetupItem\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {module:enyo/Repeater~Repeater~SetupItemEvent} event - An [object]{@glossary Object} containing\r\n*\tevent information.\r\n* @public\r\n*/\r\n\t\r\n/**\r\n* Sometimes client [controls]{@link module:enyo/Control~Control} are intermediated with null-controls.\r\n* These overrides reroute [events]{@glossary event} from such controls to the nominal\r\n* [delegate]{@glossary delegate}, as would happen in the absence of intermediation.\r\n* \r\n* @class OwnerProxy\r\n* @extends module:enyo/Control~Control\r\n* @private\r\n*/\r\nvar OwnerProxy = kind(\r\n\t/** @lends module:enyo/OwnerProxy~OwnerProxy.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttag: null,\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdecorateEvent: kind.inherit(function (sup) {\r\n\t\treturn function(inEventName, inEvent, inSender) {\r\n\t\t\tif (inEvent) {\r\n\t\t\t\t// preserve an existing index property.\r\n\t\t\t\tif (utils.exists(inEvent.index)) {\r\n\t\t\t\t\t// if there are nested indices, store all of them in an array\r\n\t\t\t\t\t// but leave the innermost one in the index property\r\n\t\t\t\t\tinEvent.indices = inEvent.indices || [inEvent.index];\r\n\t\t\t\t\tinEvent.indices.push(this.index);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// for a single level, just decorate the index property\r\n\t\t\t\t\tinEvent.index = this.index;\r\n\t\t\t\t}\r\n\t\t\t\t// update delegate during bubbling to account for proxy\r\n\t\t\t\t// by moving the delegate up to the repeater level\r\n\t\t\t\tif (inEvent.delegate && inEvent.delegate.owner === this) {\r\n\t\t\t\t\tinEvent.delegate = this.owner;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t})\r\n});\r\n\r\n/**\r\n* {@link module:enyo/Repeater~Repeater} is a simple [control]{@link module:enyo/Control~Control} for making lists of items.\r\n*\r\n* The [components]{@link module:enyo/Component~Component} of a repeater are copied for each item created,\r\n* and are wrapped in a control that keeps the state of the item index.\r\n* \r\n* ```javascript\r\n* var\r\n* \tkind = require('enyo/kind'),\r\n* \tImage = require('enyo/Image'),\r\n* \tRepeater = require('enyo/Repeater');\r\n*\r\n* {kind: Repeater, count: 2, onSetupItem: 'setImageSource', components: [\r\n* \t{kind: Image}\r\n* ]}\r\n*\r\n* setImageSource: function(inSender, inEvent) {\r\n* \tvar index = inEvent.index;\r\n* \tvar item = inEvent.item;\r\n* \titem.$.image.setSrc(this.imageSources[index]);\r\n* \treturn true;\r\n* }\r\n* ```\r\n*\r\n* Be sure to return `true` from your `onSetupItem` handler to avoid having other \r\n* {@glossary event} handlers further up the tree try to modify your item control.\r\n* \r\n* For more information, see the documentation on\r\n* [Lists]{@linkplain $dev-guide/building-apps/layout/lists.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class Repeater\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/Repeater~Repeater.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Repeater',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: \r\n\t\t/** @lends module:enyo/Repeater~Repeater.prototype */ {\r\n\t\t\r\n\t\t/**\r\n\t\t* The number of items to be repeated.\r\n\t\t* \r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcount: 0\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonSetupItem: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.countChanged();\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tinitComponents: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.itemComponents = this.components || this.kindComponents;\r\n\t\t\tthis.components = this.kindComponents = null;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcountChanged: function () {\r\n\t\tthis.build();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\titemAtIndex: function (idx) {\r\n\t\treturn this.controlAtIndex(idx);\r\n\t},\r\n\r\n\t/** \r\n\t* Renders the [collection]{@link module:enyo/Collection~Collection} of items. This will delete any\r\n\t* existing items and recreate the [repeater]{@link module:enyo/Repeater~Repeater} if called after\r\n\t* the repeater has been rendered. This is called automatically when the\r\n\t* [count]{@link module:enyo/Repeater~Repeater#count} property changes. To set the `count` property\r\n\t* and force a re-render, such as when a [data model]{@link module:enyo/Model~Model} changes,\r\n\t* use `set('count', newCount, true)`, where the last parameter forces the change\r\n\t* handler to be called, even if the `count` remains the same.\r\n\t*\r\n\t* @fires module:enyo/Repeater~Repeater#onSetupItem\r\n\t* @public\r\n\t*/\r\n\tbuild: function () {\r\n\t\tthis.destroyClientControls();\r\n\t\tfor (var i=0, c; i<this.count; i++) {\r\n\t\t\tc = this.createComponent({kind: OwnerProxy, index: i});\r\n\t\t\t// do this as a second step so 'c' is the owner of the created components\r\n\t\t\tc.createComponents(this.itemComponents);\r\n\t\t\t// invoke user's setup code\r\n\t\t\tthis.doSetupItem({index: i, item: c});\r\n\t\t}\r\n\t\tthis.render();\r\n\t},\r\n\t/**\r\n\t* Renders a specific item in the [collection]{@link module:enyo/Collection~Collection}. This does not\r\n\t* destroy the item, but just calls the `onSetupItem` {@glossary event} handler again\r\n\t* for it, so any state stored in the item is preserved.\r\n\t*\r\n\t* @param {Number} idx - The index of the item to render.\r\n\t* @fires module:enyo/Repeater~Repeater#onSetupItem\r\n\t* @public\r\n\t*/\r\n\trenderRow: function (idx) {\r\n\t\tvar c = this.itemAtIndex(idx);\r\n\t\tthis.doSetupItem({index: idx, item: c});\r\n\t},\r\n\r\n\t/**\r\n\t* A legacy method that sets the number of items to be repeated and effectively forces a \r\n\t* rebuild of the [repeater]{@link module:enyo/Repeater~Repeater}, regardless of whether or not the count has\r\n\t* changed.\r\n\t*\r\n\t* @param {Number} count - The number of items to be repeated.\r\n\t* @public\r\n\t*/\r\n\tsetCount: function (count) {\r\n\t\tthis.set('count', count, {force: true});\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default list\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityRole\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: 'list'\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Image~Image} kind.\r\n* @module enyo/Image\r\n*/\r\n\r\nvar\r\n\tkind = require('../kind'),\r\n\tri = require('../resolution'),\r\n\tdispatcher = require('../dispatcher'),\r\n\tpath = require('../pathResolver');\r\nvar\r\n\tControl = require('../Control');\r\n\r\n/**\r\n* Fires when the [image]{@link module:enyo/Image~Image} has loaded.\r\n*\r\n* @event module:enyo/Image~Image#onload\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {Object} event - An [object]{@glossary Object} containing event information.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when there has been an error while loading the [image]{@link module:enyo/Image~Image}.\r\n*\r\n* @event module:enyo/Image~Image#onerror\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {Object} event - An [object]{@glossary Object} containing event information.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:enyo/Image~Image} implements an HTML [&lt;img&gt;]{@glossary img} element and, optionally,\r\n* [bubbles]{@link module:enyo/Component~Component#bubble} the [onload]{@link module:enyo/Image~Image#onload} and\r\n* [onerror]{@link module:enyo/Image~Image#onerror} [events]{@glossary event}. Image dragging is suppressed by\r\n* default, so as not to interfere with touch interfaces.\r\n*\r\n* When [sizing]{@link module:enyo/Image~Image#sizing} is used, the control will not have a natural size and must be\r\n* manually sized using CSS `height` and `width`. Also, when [placeholder]{@link module:enyo/Image~Image#placeholder} is used\r\n* without `sizing`, you may wish to specify the size, as the image will not have a\r\n* natural size until the image loads, causing the placeholder to not be visible.\r\n*\r\n* {@link module:enyo/Image~Image} also has support for multi-resolution images. If you are developing assets\r\n* for specific screen sizes, HD (720p), FHD (1080p), UHD (4k), for example, you may provide\r\n* specific image assets in a hash/object format to the `src` property, instead of the usual\r\n* string. The image sources will be used automatically when the screen resolution is less than\r\n* or equal to those screen types. For more informaton on our resolution support, and how to\r\n* enable this feature, see the documentation for {@link module:enyo/resolution}.\r\n*\r\n* ```\r\n* // Take advantage of the multi-rez mode\r\n* var\r\n* \tkind = require('enyo/kind'),\r\n* \tImage = require('enyo/Image');\r\n*\r\n* {kind: Image, src: {\r\n*\t'hd': 'http://lorempixel.com/64/64/city/1/',\r\n*\t'fhd': 'http://lorempixel.com/128/128/city/1/',\r\n*\t'uhd': 'http://lorempixel.com/256/256/city/1/'\r\n* }, alt: 'Multi-rez'},\r\n*\r\n* // Standard string `src`\r\n* {kind: Image, src: 'http://lorempixel.com/128/128/city/1/', alt: 'Large'}\r\n* ```\r\n*\r\n* @class Image\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/Image~Image.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Image',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* When `true`, no [onload]{@link module:enyo/Image~Image#onload} or\r\n\t* [onerror]{@link module:enyo/Image~Image#onerror} {@glossary event} handlers will be\r\n\t* created.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tnoEvents: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished:\r\n\t\t/** @lends module:enyo/Image~Image.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* Maps to the `src` attribute of an [&lt;img&gt; tag]{@glossary img}. This also supports\r\n\t\t* a multi-resolution hash object. For more details and examples, see the description of\r\n\t\t* {@link module:enyo/Image~Image} above, or the documentation for {@link module:enyo/resolution}.\r\n\t\t*\r\n\t\t* @type {String|module:enyo/resolution#selectSrc~src}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsrc: '',\r\n\r\n\t\t/**\r\n\t\t* Maps to the `alt` attribute of an [&lt;img&gt; tag]{@glossary img}.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\talt: '',\r\n\r\n\t\t/**\r\n\t\t* By default, the [image]{@link module:enyo/Image~Image} is rendered using an `<img>` tag.\r\n\t\t* When this property is set to `'cover'` or `'constrain'`, the image will be\r\n\t\t* rendered using a `<div>`, utilizing `background-image` and `background-size`.\r\n\t\t*\r\n\t\t* Set this property to `'contain'` to letterbox the image in the available\r\n\t\t* space, or `'cover'` to cover the available space with the image (cropping the\r\n\t\t* larger dimension).  Note that when `sizing` is set, the control must be\r\n\t\t* explicitly sized.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tsizing: '',\r\n\r\n\t\t/**\r\n\t\t* When [sizing]{@link module:enyo/Image~Image#sizing} is used, this property sets the positioning of\r\n\t\t* the [image]{@link module:enyo/Image~Image} within the bounds, corresponding to the\r\n\t\t* [`background-position`]{@glossary backgroundPosition} CSS property.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'center'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tposition: 'center',\r\n\r\n\t\t/**\r\n\t\t* Provides a default image displayed while the URL specified by `src` is loaded or when that\r\n\t\t* image fails to load.\r\n\t\t*\r\n\t\t* Note that the placeholder feature is not designed for use with images that contain transparent\r\n\t\t* or semi-transparent pixels. Specifically, for performance reasons, the placeholder image is not\r\n\t\t* removed when the image itself loads, but is simply covered by the image. This means that the\r\n\t\t* placeholder will show through any transparent or semi-transparent pixels in the image.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tplaceholder: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttag: 'img',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'enyo-image',\r\n\r\n\t/**\r\n\t* `src` copied here to avoid overwriting the user-provided value when loading values\r\n\t*\r\n\t* @private\r\n\t*/\r\n\t_src: null,\r\n\r\n\t/**\r\n\t* @type {Object}\r\n\t* @property {Boolean} draggable - This attribute will take one of the following\r\n\t*\t[String]{@glossary String} values: 'true', 'false' (the default), or 'auto'.\r\n\t* Setting Boolean `false` will remove the attribute.\r\n\t* @public\r\n\t*/\r\n\tattributes: {\r\n\t\tdraggable: 'false'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonerror: 'handleError'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tobservers: [\r\n\t\t{method: 'updateSource', path: ['_src', 'placeholder']}\r\n\t],\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tif (this.noEvents) {\r\n\t\t\t\tdelete this.attributes.onload;\r\n\t\t\t\tdelete this.attributes.onerror;\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.altChanged();\r\n\t\t\tthis.sizingChanged();\r\n\t\t\tthis.srcChanged();\r\n\t\t\tthis.positionChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Cache the value of user-provided `src` value in `_src`\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tsrcChanged: function () {\r\n\t\tthis.set('_src', this.src);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taltChanged: function () {\r\n\t\tthis.setAttribute('alt', this.alt);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsizingChanged: function (was) {\r\n\t\tthis.tag = this.sizing ? 'div' : 'img';\r\n\t\tthis.addRemoveClass('sized', !!this.sizing);\r\n\t\tif (was) {\r\n\t\t\tthis.removeClass(was);\r\n\t\t}\r\n\t\tif (this.sizing) {\r\n\t\t\tthis.addClass(this.sizing);\r\n\t\t}\r\n\t\tthis.updateSource();\r\n\t\tif (this.generated) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpositionChanged: function () {\r\n\t\tif (this.sizing) {\r\n\t\t\tthis.applyStyle('background-position', this.position);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandleError: function () {\r\n\t\tif (this.placeholder) {\r\n\t\t\tthis.set('_src', null);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the Image's src or background-image based on the values of _src and placeholder\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tupdateSource: function (was, is, prop) {\r\n\t\tvar src = ri.selectSrc(this._src),\r\n\t\t\tsrcUrl = src ? 'url(\\'' + path.rewrite(src) + '\\')' : null,\r\n\t\t\tplUrl = this.placeholder ? 'url(\\'' + path.rewrite(this.placeholder) + '\\')' : null,\r\n\t\t\turl;\r\n\r\n\t\tif (this.sizing) {\r\n\t\t\t// use either both urls, src, placeholder, or 'none', in that order\r\n\t\t\turl = srcUrl && plUrl && (srcUrl + ',' + plUrl) || srcUrl || plUrl || 'none';\r\n\t\t\tthis.applyStyle('background-image', url);\r\n\t\t} else {\r\n\t\t\t// when update source\r\n\t\t\tif (!prop || prop == 'placeholder') {\r\n\t\t\t\tthis.applyStyle('background-image', plUrl);\r\n\t\t\t}\r\n\t\t\tthis.setAttribute('src', src);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @fires module:enyo/Image~Image#onload\r\n\t* @fires module:enyo/Image~Image#onerror\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tdispatcher.makeBubble(this, 'load', 'error');\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @lends module:enyo/Image~Image\r\n\t* @private\r\n\t*/\r\n\tstatics: {\r\n\t\t/**\r\n\t\t* A globally accessible data URL that describes a simple\r\n\t\t* placeholder image that may be used in samples and applications\r\n\t\t* until final graphics are provided. As an SVG image, it will\r\n\t\t* expand to fill the desired width and height set in the style.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @public\r\n\t\t*/\r\n\t\tplaceholder:\r\n\t\t\t'data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC' +\r\n\t\t\t'9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cmVjdCB3aWR0aD0iMTAw' +\r\n\t\t\t'JSIgaGVpZ2h0PSIxMDAlIiBzdHlsZT0ic3Ryb2tlOiAjNDQ0OyBzdHJva2Utd2lkdGg6IDE7IGZpbGw6ICNhYW' +\r\n\t\t\t'E7IiAvPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjEwMCUiIHkyPSIxMDAlIiBzdHlsZT0ic3Ryb2tlOiAjNDQ0' +\r\n\t\t\t'OyBzdHJva2Utd2lkdGg6IDE7IiAvPjxsaW5lIHgxPSIxMDAlIiB5MT0iMCIgeDI9IjAiIHkyPSIxMDAlIiBzdH' +\r\n\t\t\t'lsZT0ic3Ryb2tlOiAjNDQ0OyBzdHJva2Utd2lkdGg6IDE7IiAvPjwvc3ZnPg=='\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default img\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityRole\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: 'img'\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/ScrollStrategy~ScrollStrategy} kind.\r\n* @module enyo/ScrollStrategy\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tdispatcher = require('./dispatcher');\r\n\r\nvar\r\n\tControl = require('./Control');\r\n\r\n/**\r\n* {@link module:enyo/ScrollStrategy~ScrollStrategy} is a helper [kind]{@glossary kind} that implements a default \r\n* scrolling strategy for an {@link module:enyo/Scroller~Scroller}.\r\n* \r\n* `enyo/ScrollStrategy` is not typically created in application code. Instead, it is specified \r\n* as the value of the [strategyKind]{@link module:enyo/Scroller~Scroller#strategyKind} property of an\r\n* `enyo/Scroller` or {@link module:layout/List~List}, or is used by the framework implicitly.\r\n*\r\n* @class ScrollStrategy\r\n* @protected\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/ScrollStrategy~ScrollStrategy.prototype */ {\r\n\r\n\tname: 'enyo.ScrollStrategy',\r\n\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttag: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: \r\n\t\t/** @lends module:enyo/ScrollStrategy~ScrollStrategy.prototype */ {\r\n\t\t\r\n\t\t/**\r\n\t\t* Specifies how to vertically scroll.  Acceptable values are `'scroll'`, `'auto'`,\r\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\r\n\t\t* scroll strategy.\r\n\t\t* \r\n\t\t* @type {String}\r\n\t\t* @default 'default'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvertical: 'default',\r\n\t\t\r\n\t\t/**\r\n\t\t* Specifies how to horizontally scroll.  Acceptable values are `'scroll'`, `'auto'`,\r\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\r\n\t\t* scroll strategy.\r\n\t\t* \r\n\t\t* @type {String}\r\n\t\t* @default 'default'\r\n\t\t* @public\r\n\t\t*/\r\n\t\thorizontal: 'default',\r\n\t\t\r\n\t\t/**\r\n\t\t* The horizontal scroll position.\r\n\t\t* \r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrollLeft: 0,\r\n\t\t\r\n\t\t/**\r\n\t\t* The vertical scroll position.\r\n\t\t* \r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrollTop: 0,\r\n\t\t\r\n\t\t/**\r\n\t\t* Maximum height of the scroll content.\r\n\t\t* \r\n\t\t* @type {Number}\r\n\t\t* @default null\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmaxHeight: null,\r\n\t\t\r\n\t\t/**\r\n\t\t* Indicates whether mouse wheel may be used to move the [scroller]{@link module:enyo/Scroller~Scroller}.\r\n\t\t* \r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuseMouseWheel: true\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonScrollStart: '',\r\n\t\tonScrollStop: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tondragstart: 'dragstart',\r\n\t\tondragfinish: 'dragfinish',\r\n\t\tondown: 'down',\r\n\t\tonmove: 'move',\r\n\t\tonmousewheel: 'mousewheel',\r\n\t\tonscroll: 'domScroll'\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.horizontalChanged();\r\n\t\t\tthis.verticalChanged();\r\n\t\t\tthis.maxHeightChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tdispatcher.makeBubble(this.container, 'scroll');\r\n\t\t\tthis.scrollNode = this.calcScrollNode();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tteardownRender: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.scrollNode = null;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcScrollNode: function () {\r\n\t\treturn this.container.hasNode();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thorizontalChanged: function () {\r\n\t\tthis.container.applyStyle('overflow-x', this.horizontal == 'default' ? 'auto' : this.horizontal);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tverticalChanged: function () {\r\n\t\tthis.container.applyStyle('overflow-y', this.vertical == 'default' ? 'auto' : this.vertical);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmaxHeightChanged: function () {\r\n\t\tthis.container.applyStyle('max-height', this.maxHeight);\r\n\t},\r\n\r\n\t/** \r\n\t* Scrolls to the specified position.\r\n\t*\r\n\t* @param {Number} x - The `x` position in pixels.\r\n\t* @param {Number} y - The `y` position in pixels.\r\n\t* @public\r\n\t*/\r\n\tscrollTo: function (x, y) {\r\n\t\tif (this.scrollNode) {\r\n\t\t\tthis.setScrollLeft(x);\r\n\t\t\tthis.setScrollTop(y);\r\n\t\t}\r\n\t},\r\n\r\n\t/** \r\n\t* Ensures that the given node is visible in the [scroller's]{@link module:enyo/Scroller~Scroller} viewport.\r\n\t*\r\n\t* @param {Node} node - The node to make visible in the [scroller's]{@link module:enyo/Scroller~Scroller}\r\n\t*\tviewport.\r\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\r\n\t*\tscroller.\r\n\t* @public\r\n\t*/\r\n\tscrollToNode: function (node, alignWithTop) {\r\n\t\tif (this.scrollNode) {\r\n\t\t\tvar sb = this.getScrollBounds();\r\n\t\t\tvar n = node;\r\n\t\t\tvar b = {height: n.offsetHeight, width: n.offsetWidth, top: 0, left: 0};\r\n\t\t\twhile (n && n.parentNode && n.id != this.scrollNode.id) {\r\n\t\t\t\tb.top += n.offsetTop;\r\n\t\t\t\tb.left += n.offsetLeft;\r\n\t\t\t\tn = n.parentNode;\r\n\t\t\t}\r\n\t\t\t// By default, the element is scrolled to align with the top of the scroll area.\r\n\t\t\tthis.setScrollTop(Math.min(sb.maxTop, alignWithTop === false ? b.top - sb.clientHeight + b.height : b.top));\r\n\t\t\tthis.setScrollLeft(Math.min(sb.maxLeft, alignWithTop === false ? b.left - sb.clientWidth + b.width : b.left));\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls the given [control]{@link module:enyo/Control~Control} into view.\r\n\t*\r\n\t* @param {module:enyo/Control~Control} ctl - The [control]{@link module:enyo/Control~Control} to make visible in the\r\n\t*\t[scroller's]{@link module:enyo/Scroller~Scroller} viewport.\r\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\r\n\t*\tscroller.\r\n\t* @public\r\n\t*/\r\n\tscrollIntoView: function (ctl, alignWithTop) {\r\n\t\tif (ctl.hasNode()) {\r\n\t\t\tctl.node.scrollIntoView(alignWithTop);\r\n\t\t}\r\n\t},\r\n\tisInView: function(inNode) {\r\n\t\tvar sb = this.getScrollBounds();\r\n\t\tvar ot = inNode.offsetTop;\r\n\t\tvar oh = inNode.offsetHeight;\r\n\t\tvar ol = inNode.offsetLeft;\r\n\t\tvar ow = inNode.offsetWidth;\r\n\t\treturn (ot >= sb.top && ot + oh <= sb.top + sb.clientHeight) && (ol >= sb.left && ol + ow <= sb.left + sb.clientWidth);\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the vertical scroll position.\r\n\t*\r\n\t* @param {Number} top - The vertical scroll position in pixels.\r\n\t* @public\r\n\t*/\r\n\tsetScrollTop: function (top) {\r\n\t\tthis.scrollTop = top;\r\n\t\tif (this.scrollNode) {\r\n\t\t\tthis.scrollNode.scrollTop = this.scrollTop;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the horizontal scroll position.\r\n\t*\r\n\t* @param {Number} left - The horizontal scroll position in pixels.\r\n\t* @public\r\n\t*/\r\n\tsetScrollLeft: function (left) {\r\n\t\tthis.scrollLeft = left;\r\n\t\tif (this.scrollNode) {\r\n\t\t\tthis.scrollNode.scrollLeft = this.scrollLeft;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves the horizontal scroll position.\r\n\t*\r\n\t* @returns {Number} The horizontal scroll position in pixels.\r\n\t* @public\r\n\t*/\r\n\tgetScrollLeft: function () {\r\n\t\treturn this.scrollNode ? this.scrollNode.scrollLeft : this.scrollLeft;\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves the vertical scroll position.\r\n\t*\r\n\t* @returns {Number} The vertical scroll position in pixels.\r\n\t* @private\r\n\t*/\r\n\tgetScrollTop: function () {\r\n\t\treturn this.scrollNode ? this.scrollNode.scrollTop : this.scrollTop;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\t_getScrollBounds: function () {\r\n\t\tvar s = this.getScrollSize(), cn = this.container.hasNode();\r\n\t\tvar b = {\r\n\t\t\tleft: this.getScrollLeft(),\r\n\t\t\ttop: this.getScrollTop(),\r\n\t\t\tclientHeight: cn ? cn.clientHeight : 0,\r\n\t\t\tclientWidth: cn ? cn.clientWidth : 0,\r\n\t\t\theight: s.height,\r\n\t\t\twidth: s.width\r\n\t\t};\r\n\t\tb.maxLeft = Math.max(0, b.width - b.clientWidth);\r\n\t\tb.maxTop = Math.max(0, b.height - b.clientHeight);\r\n\t\treturn b;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetScrollSize: function () {\r\n\t\tvar n = this.scrollNode;\r\n\t\treturn {width: n ? n.scrollWidth : 0, height: n ? n.scrollHeight : 0};\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves the scroll boundaries of the [scroller]{@link module:enyo/Scroller~Scroller}.\r\n\t* \r\n\t* @returns {module:enyo/Scroller~Scroller~BoundaryObject} An [object]{@glossary Object} describing the\r\n\t*\tscroll boundaries.\r\n\t* @public\r\n\t*/\r\n\tgetScrollBounds: function () {\r\n\t\treturn this._getScrollBounds();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcStartInfo: function () {\r\n\t\tvar sb = this.getScrollBounds();\r\n\t\tvar y = this.getScrollTop(), x = this.getScrollLeft();\r\n\t\tthis.canVertical = sb.maxTop > 0 && this.vertical != 'hidden';\r\n\t\tthis.canHorizontal = sb.maxLeft > 0 && this.horizontal != 'hidden';\r\n\t\tthis.startEdges = {\r\n\t\t\ttop: y === 0,\r\n\t\t\tbottom: y === sb.maxTop,\r\n\t\t\tleft: x === 0,\r\n\t\t\tright: x === sb.maxLeft\r\n\t\t};\r\n\t},\r\n\r\n\t// NOTE: down, move, and drag handlers are needed only for native touch scrollers\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshouldDrag: function (e) {\r\n\t\tvar requestV = e.vertical;\r\n\t\treturn (requestV && this.canVertical  || !requestV && this.canHorizontal) /*&& !this.isOobVerticalScroll(event)*/;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragstart: function (sender, e) {\r\n\t\tthis.dragging = this.shouldDrag(e);\r\n\t\tif (this.dragging) {\r\n\t\t\treturn this.preventDragPropagation;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdragfinish: function (sender, e) {\r\n\t\tif (this.dragging) {\r\n\t\t\tthis.dragging = false;\r\n\t\t\te.preventTap();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Avoid allowing scroll when starting at a vertical boundary to prevent iOS from window \r\n\t* scrolling.\r\n\t* \r\n\t* @private\r\n\t*/\r\n\tdown: function (sender, e) {\r\n\t\tif (this.isScrolling()) {\r\n\t\t\te.preventTap();\r\n\t\t}\r\n\t\tthis.calcStartInfo();\r\n\t},\r\n\r\n\t/**\r\n\t* NOTE: Mobile native [scrollers]{@link module:enyo/Scroller~Scroller} need `touchmove`. Indicate this by \r\n\t* setting the `requireTouchmove` property to `true`.\r\n\t* \r\n\t* @private\r\n\t*/\r\n\tmove: function (sender, e) {\r\n\t\tif (e.which && (this.canVertical && e.vertical || this.canHorizontal && e.horizontal)) {\r\n\t\t\te.disablePrevention();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmousewheel: function (sender, e) {\r\n\t\t//* We disable mouse wheel scrolling by preventing the default\r\n\t\tif (!this.useMouseWheel) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdomScroll: function(sender, e) {\r\n\t\tif (!this._scrolling) {\r\n\t\t\tthis.doScrollStart();\r\n\t\t}\r\n\t\tthis._scrolling = true;\r\n\t\tthis.startJob('stopScrolling', function() {\r\n\t\t\tthis._scrolling = false;\r\n\t\t\tthis.doScrollStop();\r\n\t\t}, 100);\r\n\t},\r\n\r\n\t/**\r\n\t* @public\r\n\t*/\r\n\tisScrolling: function() {\r\n\t\treturn this._scrolling;\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/ScrollThumb~ScrollThumb} kind.\r\n* @module enyo/ScrollThumb\r\n*/\r\n\r\nvar\r\n\tkind = require('../kind');\r\n\r\nvar\r\n\tControl = require('../Control'),\r\n\tDom = require('../dom');\r\n\r\n/**\r\n* {@link module:enyo/ScrollThumb~ScrollThumb} is a helper [kind]{@glossary kind} used by \r\n* {@link module:enyo/TouchScrollStrategy~TouchScrollStrategy} and {@link module:enyo/TranslateScrollStrategy~TranslateScrollStrategy} to\r\n* display a small visual scroll indicator.\r\n* \r\n* `enyo/ScrollThumb` is not typically created in application code.\r\n*\r\n* @class ScrollThumb\r\n* @protected\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/ScrollThumb~ScrollThumb.prototype */ {\r\n\t\r\n\tname: 'enyo.ScrollThumb',\r\n\t\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* The orientation of the scroll indicator bar; 'v' for vertical or 'h' for horizontal.\r\n\t* \r\n\t* @type {String}\r\n\t* @default 'v'\r\n\t* @public\r\n\t*/\r\n\taxis: 'v',\r\n\r\n\t/**\r\n\t* Minimum size of the indicator.\r\n\t* \r\n\t* @private\r\n\t*/\r\n\tminSize: 4,\r\n\r\n\t/**\r\n\t* Size of the indicator's corners.\r\n\t* \r\n\t* @private\r\n\t*/\r\n\tcornerSize: 6,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'enyo-thumb',\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tvar v = this.axis == 'v';\r\n\t\t\tthis.dimension = v ? 'height' : 'width';\r\n\t\t\tthis.offset = v ? 'top' : 'left';\r\n\t\t\tthis.translation = v ? 'translateY' : 'translateX';\r\n\t\t\tthis.positionMethod = v ? 'getScrollTop' : 'getScrollLeft';\r\n\t\t\tthis.sizeDimension = v ? 'clientHeight' : 'clientWidth';\r\n\t\t\tthis.addClass('enyo-' + this.axis + 'thumb');\r\n\t\t\tthis.transform = Dom.canTransform();\r\n\t\t\tif (Dom.canAccelerate()) {\r\n\t\t\t\tDom.transformValue(this, 'translateZ', 0);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/** \r\n\t* Syncs the scroll indicator bar to the [scroller]{@link module:enyo/Scroller~Scroller} size and position,\r\n\t* as determined by the passed-in scroll strategy.\r\n\t*\r\n\t* @param {module:enyo/ScrollStrategy~ScrollStrategy} strategy - The scroll strategy to be synced with.\r\n\t* @public\r\n\t*/\r\n\tsync: function (strategy) {\r\n\t\tthis.scrollBounds = strategy._getScrollBounds();\r\n\t\tthis.update(strategy);\r\n\t},\r\n\r\n\t/**\r\n\t* Updates the scroll indicator bar based on the scroll bounds of the strategy, the available\r\n\t* scroll area, and whether there is overscrolling. If the scroll indicator bar is not\r\n\t* needed, it will be not be displayed.\r\n\t* \r\n\t* @param {module:enyo/ScrollStrategy~ScrollStrategy} strategy - The scroll strategy to update from.\r\n\t* @public\r\n\t*/\r\n\tupdate: function (strategy) {\r\n\t\tif (this.showing) {\r\n\t\t\tvar d = this.dimension, o = this.offset;\r\n\t\t\tvar bd = this.scrollBounds[this.sizeDimension], sbd = this.scrollBounds[d];\r\n\t\t\tvar overs = 0, overp = 0, over = 0;\r\n\t\t\tif (bd >= sbd) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (strategy.isOverscrolling()) {\r\n\t\t\t\tover = strategy.getOverScrollBounds()['over' + o];\r\n\t\t\t\tovers = Math.abs(over);\r\n\t\t\t\toverp = Math.max(over, 0);\r\n\t\t\t}\r\n\t\t\tvar sbo = strategy[this.positionMethod]() - over;\r\n\t\t\t// calc size & position\r\n\t\t\tvar bdc = bd - this.cornerSize;\r\n\t\t\tvar s = Math.floor((bd * bd / sbd) - overs);\r\n\t\t\ts = Math.max(this.minSize, s);\r\n\t\t\tvar p = Math.floor((bdc * sbo / sbd) + overp);\r\n\t\t\tp = Math.max(0, Math.min(bdc - this.minSize, p));\r\n\t\t\t// apply thumb styling\r\n\t\t\tthis.needed = s < bd;\r\n\t\t\tif (this.needed && this.hasNode()) {\r\n\t\t\t\tif (this._pos !== p) {\r\n\t\t\t\t\tthis._pos = p;\r\n\t\t\t\t\tif(!this.transform) {\r\n\t\t\t\t\t\t//adjust top/left for browsers that don't support translations\r\n\t\t\t\t\t\tif(this.axis=='v') {\r\n\t\t\t\t\t\t\tthis.setBounds({top:p + 'px'});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.setBounds({left:p + 'px'});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tDom.transformValue(this, this.translation, p + 'px');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this._size !== s) {\r\n\t\t\t\t\tthis._size = s;\r\n\t\t\t\t\tthis.applyStyle(d, s + 'px');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* We implement `setShowing()` and cancel the [delayHide()]{@link module:enyo/ScrollThumb~ScrollThumb#delayHide} \r\n\t* because [showing]{@link module:enyo/Control~Control#showing} is not changed while we execute\r\n\t* `delayHide()`.\r\n\t*\r\n\t* @param {Boolean} showing - If `true`, displays the {@link module:enyo/ScrollThumb~ScrollThumb} if appropriate;\r\n\t*\totherwise, hides the ScrollThumb.\r\n\t* @public\r\n\t*/\r\n\tsetShowing: function (showing) {\r\n\t\tif (showing && showing != this.showing) {\r\n\t\t\tif (this.scrollBounds[this.sizeDimension] >= this.scrollBounds[this.dimension]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.cancelDelayHide();\r\n\t\t}\r\n\t\tif (showing != this.showing) {\r\n\t\t\tvar last = this.showing;\r\n\t\t\tthis.showing = showing;\r\n\t\t\tthis.showingChanged(last);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Delays automatic hiding of the {@link module:enyo/ScrollThumb~ScrollThumb}.\r\n\t*\r\n\t* @param {Number} delay - The number of milliseconds to delay hiding of the\r\n\t*\t{@link module:enyo/ScrollThumb~ScrollThumb}.\r\n\t* @public\r\n\t*/\r\n\tdelayHide: function (delay) {\r\n\t\tif (this.showing) {\r\n\t\t\tthis.startJob('hide', this.hide, delay || 0);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Cancels any pending [delayHide()]{@link module:enyo/ScrollThumb~ScrollThumb#delayHide} jobs.\r\n\t* \r\n\t* @public\r\n\t*/\r\n\tcancelDelayHide: function () {\r\n\t\tthis.stopJob('hide');\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Scrim~Scrim} kind.\r\n* @module enyo/Scrim\r\n*/\r\n\r\nvar\r\n\tkind = require('../kind'),\r\n\tutils = require('../utils');\r\n\r\nvar\r\n\tControl = require('../Control');\r\n\r\n/**\r\n* {@link module:enyo/Scrim~Scrim} provides an overlay that will prevent taps from propagating\r\n* to the controls that it covers.  A scrim may be \"floating\" or \"non-floating\".\r\n* A floating scrim will fill the entire viewport, while a non-floating scrim will\r\n* be constrained by the dimensions of its container.\r\n*\r\n* The scrim should have a CSS class of `enyo-scrim-transparent`,\r\n* `enyo-scrim-translucent`, or any other class that has\r\n* `pointer-events: auto` in its style properties.\r\n*\r\n* You may specify the `z-index` at which you want the scrim to appear by calling\r\n* [showAtZIndex()]{@link module:enyo/Scrim~Scrim#showAtZIndex}. If you do so, you must call\r\n* [hideAtZIndex()]{@link module:enyo/Scrim~Scrim#hideAtZIndex} with the same value to hide the\r\n* scrim.\r\n*\r\n* @class Scrim\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nvar Scrim = module.exports = kind(\r\n\t/** @lends module:enyo/Scrim~Scrim.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Scrim',\r\n\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* Current visibility state\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @private\r\n\t*/\r\n\tshowing: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'enyo-scrim enyo-fit',\r\n\r\n\t/**\r\n\t* If `true`, the scrim is rendered in a floating layer outside of other\r\n\t* controls. This can be used to guarantee that the scrim will be shown\r\n\t* on top of other controls.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default  false\r\n\t* @public\r\n\t*/\r\n\tfloating: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreate: function () {\r\n\t\tthis.inherited(arguments);\r\n\t\tthis.zStack = [];\r\n\t\tif (this.floating) {\r\n\t\t\tthis.setParent(Control.floatingLayer);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowingChanged: function () {\r\n\t\t// auto render when shown.\r\n\t\tif (this.floating && this.showing && !this.hasNode()) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t\tthis.inherited(arguments);\r\n\t\t//this.addRemoveClass(this.showingClassName, this.showing);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\taddZIndex: function (zIndex) {\r\n\t\tif (utils.indexOf(zIndex, this.zStack) < 0) {\r\n\t\t\tthis.zStack.push(zIndex);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tremoveZIndex: function (control) {\r\n\t\tutils.remove(control, this.zStack);\r\n\t},\r\n\r\n\t/**\r\n\t* Shows scrim at the specified z-index. Note that if you call\r\n\t* `showAtZIndex()`, you must call [hideAtZIndex()]{@link module:enyo/Scrim~Scrim#hideAtZIndex}\r\n\t* to properly unwind the z-index stack.\r\n\t*\r\n\t* @param  {Number} zIndex - z-index for the scrim\r\n\t* @public\r\n\t*/\r\n\tshowAtZIndex: function (zIndex) {\r\n\t\tthis.addZIndex(zIndex);\r\n\t\tif (zIndex !== undefined) {\r\n\t\t\tthis.setZIndex(zIndex);\r\n\t\t}\r\n\t\tthis.show();\r\n\t},\r\n\r\n\t/**\r\n\t* Hides scrim at the specified z-index.\r\n\t*\r\n\t* @param  {Number} zIndex - z-index of the scrim\r\n\t* @public\r\n\t*/\r\n\thideAtZIndex: function (zIndex) {\r\n\t\tthis.removeZIndex(zIndex);\r\n\t\tif (!this.zStack.length) {\r\n\t\t\tthis.hide();\r\n\t\t} else {\r\n\t\t\tvar z = this.zStack[this.zStack.length-1];\r\n\t\t\tthis.setZIndex(z);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsetZIndex: function (zIndex) {\r\n\t\tthis.zIndex = zIndex;\r\n\t\tthis.applyStyle('z-index', zIndex);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmake: function () {\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\n/**\r\n* Scrim singleton exposing a subset of the Scrim API;\r\n* it is replaced with a proper {@link module:enyo/Scrim~Scrim} instance.\r\n*\r\n* @class ScrimSingleton\r\n* @private\r\n*/\r\nvar ScrimSingleton = kind(\r\n\t/** @lends module:enyo/Scrim~ScrimSingleton.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: null,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tconstructor: function (ScrimKind, name, props) {\r\n\t\tthis.instanceName = name;\r\n\t\tthis.ScrimKind = ScrimKind;\r\n\t\tthis.ScrimKind[this.instanceName] = this;\r\n\t\tthis.props = props || {};\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmake: function () {\r\n\t\tvar s = this.ScrimKind[this.instanceName] = new Scrim(this.props);\r\n\t\treturn s;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowAtZIndex: function (zIndex) {\r\n\t\tvar s = this.make();\r\n\t\ts.showAtZIndex(zIndex);\r\n\t},\r\n\r\n\t/**\r\n\t* In case somebody does this out of order\r\n\t*\r\n\t* @private\r\n\t*/\r\n\thideAtZIndex: utils.nop,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshow: function () {\r\n\t\tvar s = this.make();\r\n\t\ts.show();\r\n\t}\r\n});\r\n\r\nnew ScrimSingleton(Scrim, 'scrim', {floating: true, classes: 'enyo-scrim-translucent'});\r\nnew ScrimSingleton(Scrim, 'scrimTransparent', {floating: true, classes: 'enyo-scrim-transparent'});\r\nScrim.ScrimSingleton = ScrimSingleton;\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/GroupItem~GroupItem} kind.\r\n* @module enyo/GroupItem\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind');\r\nvar\r\n\tControl = require('./Control');\r\n\r\n/**\r\n* Fires when the [active state]{@link module:enyo/GroupItem~GroupItem#active} has changed.\r\n*\r\n* @event module:enyo/GroupItem~GroupItem#onActivate\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {Object} event - An [object]{@glossary Object} containing event information.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:enyo/GroupItem~GroupItem} is the base [kind]{@glossary kind} for the\r\n* [Grouping]{@link module:enyo/Group~Group} API. It manages the\r\n* [active state]{@link module:enyo/GroupItem~GroupItem#active} of the [component]{@link module:enyo/Component~Component}\r\n* (or the [inheriting]{@glossary subkind} component). A subkind may call `setActive()` \r\n* to set the [active]{@link module:enyo/GroupItem~GroupItem#active} property to the desired state; this\r\n* will additionally [bubble]{@link module:enyo/Component~Component#bubble} an \r\n* [onActivate]{@link module:enyo/GroupItem~GroupItem#onActivate} {@glossary event}, which may\r\n* be handled as needed by the containing components. This is useful for creating\r\n* groups of items whose state should be managed collectively.\r\n*\r\n* For an example of how this works, see the {@link module:enyo/Group~Group} kind, which enables the\r\n* creation of radio groups from arbitrary components that\tsupport the Grouping API.\r\n*\r\n* @class GroupItem\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/Groupitem~Groupitem.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.GroupItem',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: \r\n\t\t/** @lends module:enyo/Groupitem~Groupitem.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* Will be `true` if the item is currently selected.\r\n\t\t* \r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tactive: false\r\n\t},\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.activeChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @fires module:enyo/GroupItem~GroupItem#onActivate\r\n\t* @private\r\n\t*/\r\n\tactiveChanged: function () {\r\n\t\tthis.bubble('onActivate');\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Application~Application} kind.\r\n* @module enyo/Application\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils'),\r\n\tmaster = require('./master');\r\n\r\nvar \r\n\tViewController = require('./ViewController'),\r\n\tController = require('./Controller');\r\n\r\nvar \r\n\tapplications = {};\r\n\r\n/**\r\n* {@link module:enyo/Application~Application} is a type of {@link module:enyo/ViewController~ViewController} that\r\n* encapsulates a collection of [controllers]{@link module:enyo/Controller~Controller} and a\r\n* hierarchy of [controls]{@link module:enyo/Control~Control}. There may be multiple instances\r\n* of an [application]{@link module:enyo/Application~Application} at a given time, with unique\r\n* names and target [DOM nodes]{@glossary Node}. Within a given application, a\r\n* reference to the application is available on all [components]{@link module:enyo/Component~Component}\r\n* via the [app]{@link module:enyo/ApplicationSupport#app} property.\r\n*\r\n* @class Application\r\n* @extends module:enyo/ViewController~ViewController\r\n* @public\r\n*/\r\nexports = module.exports = kind(\r\n\t/** @lends module:enyo/Application~Application.prototype */ {\r\n\t\r\n\tname: 'enyo.Application',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ViewController,\r\n\t\r\n\t/**\r\n\t* If set to `true` (the default), the [application's]{@link module:enyo/Application~Application}\r\n\t* [start()]{@link module:enyo/Application~Application#start} method will automatically be called\r\n\t* once its [create()]{@link module:enyo/Application~Application#create} method has completed\r\n\t* execution. Set this to `false` if additional setup (or an asynchronous\r\n\t* {@glossary event}) is required before starting.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tautoStart: true,\r\n\t\r\n\t/**\r\n\t* If set to `true` (the default), the [application]{@link module:enyo/Application~Application} will immediately\r\n\t* [render]{@link module:enyo/Application~Application#render} its [view]{@link module:enyo/ViewController~ViewController#view} when\r\n\t* the [start()]{@link module:enyo/Application~Application#start} method has completed execution. Set this to\r\n\t* `false` to delay rendering if additional setup (or an asynchronous {@glossary event}) is\r\n\t* required before rendering.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\trenderOnStart: true,\r\n\t\r\n\t/**\r\n\t* The `defaultKind` for {@link module:enyo/Application~Application} is {@link module:enyo/Controller~Controller}.\r\n\t*\r\n\t* @type {Object}\r\n\t* @default module:enyo/Controller~Controller\r\n\t* @public\r\n\t*/\r\n\tdefaultKind: Controller,\r\n\r\n\t/**\r\n\t* A [bindable]{@link module:enyo/BindingSupport~BindingSupport}, read-only property that indicates whether the\r\n\t* [view]{@link module:enyo/ViewController~ViewController#view} has been rendered.\r\n\t*\r\n\t* @readonly\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\tviewReady: false,\r\n\t\r\n\t/**\r\n\t* An abstract method to allow for additional setup to take place after the application has\r\n\t* completed its initialization and is ready to be rendered. Overload this method to suit\r\n\t* your app's specific requirements.\r\n\t*\r\n\t* @returns {this} The callee for chaining.\r\n\t* @public\r\n\t*/\r\n\tstart: function () {\r\n\t\tif (this.renderOnStart) this.render();\r\n\t\treturn this;\r\n\t},\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trender: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\t// call the super method render() from ViewController\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (this.view && this.view.generated) this.set('viewReady', true);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tconstructor: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\tif (props && typeof props.name == 'string') {\r\n\t\t\t\tutils.setPath(props.name, this);\r\n\t\t\t\t// since applications are stored by their id's we set it\r\n\t\t\t\t// to the name if it exists\r\n\t\t\t\tthis.id = (props && props.name);\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\t// we alias the `controllers` property to the `$` property to preserve\r\n\t\t\t// backwards compatibility for the deprecated API for now\r\n\t\t\tthis.controllers = this.$;\r\n\t\t\tapplications[this.id || this.makeId()] = this;\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* Allows normal creation flow and then executes the application's \r\n\t* [start()]{@link module:enyo/Application~Application#start} method if the\r\n\t* [autoStart]{@link module:enyo/Application~Application#autoStart} property is `true`.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\t// ensure that we create() all of the components before continuing\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (this.autoStart) this.start();\r\n\t\t\t\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* Ensures that all [components]{@link module:enyo/Component~Component} created by this application have \r\n\t* their [app]{@link module:enyo/ApplicationSupport#app} property set correctly.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tadjustComponentProps: kind.inherit(function (sup) {\r\n\t\treturn function (props) {\r\n\t\t\tprops.app = this;\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* Cleans up the registration for the application.\r\n\t*\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tdelete applications[this.id];\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\t\r\n\t/**\r\n\t* Ensures that [events]{@glossary event} bubbling from the views will reach \r\n\t* {@link module:enyo/master} as expected.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\towner: master\r\n});\r\n\r\n/**\r\n* Any {@link module:enyo/Application~Application} instances will be available by name from this \r\n* [object]{@glossary Object}. If no name is provided for an \r\n* [application]{@link module:enyo/Application~Application}, a name will be generated for it.\r\n*\r\n* @public\r\n* @type {Object}\r\n* @default {}\r\n*/\r\nexports.applications = applications;\r\n","require('enyo');\r\nrequire('./touch');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/TouchScrollStrategy~TouchScrollStrategy} kind.\r\n* @module enyo/TouchScrollStrategy\r\n*/\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tutils = require('./utils'),\r\n\tdispatcher = require('./dispatcher'),\r\n\tplatform = require('./platform');\r\n\r\nvar\r\n\tScrollMath = require('./ScrollMath'),\r\n\tScrollStrategy = require('./ScrollStrategy'),\r\n\tScrollThumb = require('./ScrollThumb'),\r\n\tDom = require('./dom');\r\n\r\n/**\r\n* Fires when dragging has started, allowing drags to propagate to parent\r\n* [scrollers]{@link module:enyo/Scroller~Scroller}.\r\n*\r\n* @event module:enyo/TouchScrollStrategy~TouchScrollStrategy#onShouldDrag\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {module:enyo/Scroller~ScrollEvent} event - An [object]{@glossary Object} containing\r\n*\tevent information.\r\n* @private\r\n*/\r\n\r\n/**\r\n* {@link module:enyo/TouchScrollStrategy~TouchScrollStrategy} is a helper [kind]{@glossary kind} for implementing a\r\n* touch-based [scroller]{@link module:enyo/Scroller~Scroller}. It integrates the scrolling simulation provided\r\n* by {@link module:enyo/ScrollMath~ScrollMath} into an `enyo/Scroller`.\r\n*\r\n* `enyo/TouchScrollStrategy` is not typically created in application code. Instead, it is\r\n* specified as the value of the [strategyKind]{@link module:enyo/Scroller~Scroller#strategyKind} property\r\n* of an `enyo/Scroller` or {@link module:layout/List~List}, or is used by the framework implicitly.\r\n*\r\n* @class TouchScrollStrategy\r\n* @extends module:enyo/ScrollStrategy~ScrollStrategy\r\n* @protected\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/TouchScrollStrategy~TouchScrollStrategy.prototype */ {\r\n\r\n\tname: 'enyo.TouchScrollStrategy',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ScrollStrategy,\r\n\r\n\t/**\r\n\t\tIf `true` (the default), the scroller will overscroll and bounce back at the edges.\r\n\t*/\r\n\toverscroll: true,\r\n\r\n\t/**\r\n\t\tIf `true` (the default), the scroller will not propagate `dragstart`\r\n\t\tevents that cause it to start scrolling.\r\n\t*/\r\n\tpreventDragPropagation: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished:\r\n\t\t/** @lends module:enyo/TouchScrollStrategy~TouchScrollStrategy.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* Specifies how to vertically scroll.  Acceptable values are `'scroll'`, `'auto'`,\r\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\r\n\t\t* scroll strategy.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'default'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvertical: 'default',\r\n\r\n\t\t/**\r\n\t\t* Specifies how to horizontally scroll.  Acceptable values are `'scroll'`, `'auto'`,\r\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\r\n\t\t* scroll strategy.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'default'\r\n\t\t* @public\r\n\t\t*/\r\n\t\thorizontal: 'default',\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to display a scroll thumb.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tthumb: true,\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to display a transparent overlay while scrolling. This can help improve\r\n\t\t* performance of complex, large scroll regions on some platforms (e.g., Android).\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrim: false,\r\n\r\n\t\t/**\r\n\t\t* Indicates whether to allow drag [events]{@glossary event} to be sent while gesture\r\n\t\t* events are happening simultaneously.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdragDuringGesture: true,\r\n\r\n\t\t/**\r\n\t\t* Facades animation time step from [ScrollMath]{@link module:enyo/ScrollMath~ScrollMath}.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 20\r\n\t\t* @public\r\n\t\t*/\r\n\t\tinterval: 20,\r\n\r\n\t\t/**\r\n\t\t* Facades animation interval type from [ScrollMath]{@link module:enyo/ScrollMath~ScrollMath}.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tfixedTime: true,\r\n\r\n\t\t/**\r\n\t\t* Facades one unit of time for simulation from [ScrollMath]{@link module:enyo/ScrollMath~ScrollMath}.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 10\r\n\t\t* @public\r\n\t\t*/\r\n\t\tframe: 10,\r\n\r\n\t\t/**\r\n\t\t* Indicates whether default [events]{@glossary event} (e.g., native scrolling\r\n\t\t* events) should be suppressed.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tpreventDefault: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonShouldDrag: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonflick: 'flick',\r\n\t\tonShouldDrag: 'shouldDrag',\r\n\t\tondrag: 'drag'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{kind: ScrollMath, onScrollStart: 'scrollMathStart', onScroll: 'scrollMathScroll', onScrollStop: 'scrollMathStop', onStabilize: 'scrollMathStabilize'},\r\n\t\t{name: 'vthumb', kind: ScrollThumb, axis: 'v', showing: false},\r\n\t\t{name: 'hthumb', kind: ScrollThumb, axis: 'h', showing: false}\r\n\t],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrimTools: [{name: 'scrim', classes: 'enyo-fit', style: 'z-index: 1;', showing: false}],\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'client', classes: 'enyo-touch-scroller enyo-touch-scroller-client'}\r\n\t],\r\n\r\n\t/**\r\n\t* Flag indicating whether the list is currently reordering.\r\n\t*\r\n\t* @readonly\r\n\t* @public\r\n\t*/\r\n\tlistReordering: false,\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.transform = Dom.canTransform();\r\n\t\t\tif(!this.transform) {\r\n\t\t\t\tif(this.overscroll) {\r\n\t\t\t\t\t//so we can adjust top/left if browser can't handle translations\r\n\t\t\t\t\tthis.$.client.applyStyle('position', 'relative');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.accel = Dom.canAccelerate();\r\n\t\t\tvar containerClasses = 'enyo-touch-strategy-container';\r\n\t\t\t// note: needed for ios to avoid incorrect clipping of thumb\r\n\t\t\t// and need to avoid on Android as it causes problems hiding the thumb\r\n\t\t\tif (platform.ios && this.accel) {\r\n\t\t\t\tcontainerClasses += ' enyo-composite';\r\n\t\t\t}\r\n\t\t\tthis.scrimChanged();\r\n\t\t\tthis.intervalChanged();\r\n\t\t\tthis.fixedTimeChanged();\r\n\t\t\tthis.frameChanged();\r\n\t\t\tthis.container.addClass(containerClasses);\r\n\t\t\tthis.translation = this.accel ? 'translate3d' : 'translate';\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tinitComponents: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.createChrome(this.tools);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.container.removeClass('enyo-touch-strategy-container');\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tdispatcher.makeBubble(this.$.client, 'scroll');\r\n\t\t\tthis.calcBoundaries();\r\n\t\t\tthis.syncScrollMath();\r\n\t\t\tif (this.thumb) {\r\n\t\t\t\tthis.alertThumbs();\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrimChanged: function () {\r\n\t\tif (this.scrim && !this.$.scrim) {\r\n\t\t\tthis.makeScrim();\r\n\t\t}\r\n\t\tif (!this.scrim && this.$.scrim) {\r\n\t\t\tthis.$.scrim.destroy();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmakeScrim: function () {\r\n\t\t// reset control parent so scrim doesn't go into client.\r\n\t\tvar cp = this.controlParent;\r\n\t\tthis.controlParent = null;\r\n\t\tthis.createChrome(this.scrimTools);\r\n\t\tthis.controlParent = cp;\r\n\t\tvar cn = this.container.hasNode();\r\n\t\t// render scrim in container, strategy has no dom.\r\n\t\tif (cn) {\r\n\t\t\tthis.$.scrim.parentNode = cn;\r\n\t\t\tthis.$.scrim.render();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether or not the scroller is actively moving.\r\n\t*\r\n\t* @return {Boolean} `true` if actively moving; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\tisScrolling: function () {\r\n\t\tvar m = this.$.scrollMath;\r\n\t\treturn m ? m.isScrolling() : this.scrolling;\r\n\t},\r\n\r\n\t/**\r\n\t* Determines whether or not the scroller is in overscroll.\r\n\t*\r\n\t* @return {Boolean} `true` if in overscroll; otherwise, `false`.\r\n\t* @public\r\n\t*/\r\n\tisOverscrolling: function () {\r\n\t\tvar m = this.$.scrollMath || this;\r\n\t\treturn (this.overscroll) ? Boolean(m.isInOverScroll()) : false;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdomScroll: function () {\r\n\t\tif (!this.isScrolling()) {\r\n\t\t\tthis.calcBoundaries();\r\n\t\t\tthis.syncScrollMath();\r\n\t\t\tif (this.thumb) {\r\n\t\t\t\tthis.alertThumbs();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thorizontalChanged: function () {\r\n\t\tthis.$.scrollMath.horizontal = (this.horizontal != 'hidden');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tverticalChanged: function () {\r\n\t\tthis.$.scrollMath.vertical = (this.vertical != 'hidden');\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmaxHeightChanged: function () {\r\n\t\tthis.$.client.applyStyle('max-height', this.maxHeight);\r\n\t\t// note: previously used enyo-fit here but IE would reset scroll position when the scroll thumb\r\n\t\t// was hidden; in general IE resets scrollTop when there are 2 abs position siblings, one has\r\n\t\t// scrollTop and the other is hidden.\r\n\t\tthis.$.client.addRemoveClass('enyo-scrollee-fit', !this.maxHeight);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tthumbChanged: function () {\r\n\t\tthis.hideThumbs();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tintervalChanged: function () {\r\n\t\tif (this.$.scrollMath) {\r\n\t\t\tthis.$.scrollMath.interval = this.interval;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tfixedTimeChanged: function () {\r\n\t\tif (this.$.scrollMath) {\r\n\t\t\tthis.$.scrollMath.fixedTime = this.fixedTime;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tframeChanged: function () {\r\n\t\tif (this.$.scrollMath) {\r\n\t\t\tthis.$.scrollMath.frame = this.frame;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Stops any active scroll movement.\r\n\t*\r\n\t* @todo Doc update made while merging, need official documentation update!\r\n\t*\r\n\t* @param {Boolean} emit - Whether or not to fire the `onScrollStop` event.\r\n\t* @public\r\n\t*/\r\n\tstop: function (emit) {\r\n\t\tif (this.isScrolling()) {\r\n\t\t\tthis.$.scrollMath.stop(emit);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Adjusts the scroll position to be valid, if necessary (e.g., after the scroll contents\r\n\t* have changed).\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tstabilize: function () {\r\n\t\tif(this.$.scrollMath) {\r\n\t\t\tthis.$.scrollMath.stabilize();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to a specific position within the scroll area.\r\n\t*\r\n\t* @param {Number} x - The `x` position in pixels.\r\n\t* @param {Number} y - The `y` position in pixels.\r\n\t* @public\r\n\t*/\r\n\tscrollTo: function (x, y) {\r\n\t\tthis.stop(true);\r\n\t\tthis.$.scrollMath.scrollTo(x, y || y === 0 ? y : null);\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls the given [control]{@link module:enyo/Control~Control} into view.\r\n\t*\r\n\t* @param {module:enyo/Control~Control} ctl - The [control]{@link module:enyo/Control~Control} to make visible in the\r\n\t*\t[scroller's]{@link module:enyo/Scroller~Scroller} viewport.\r\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\r\n\t*\tscroller.\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tscrollIntoView: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.stop(true);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Sets the horizontal scroll position.\r\n\t*\r\n\t* @param {Number} left - The horizontal scroll position in pixels.\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tsetScrollLeft: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.stop(true);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Sets the vertical scroll position.\r\n\t*\r\n\t* @param {Number} top - The vertical scroll position in pixels.\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tsetScrollTop: kind.inherit(function (sup) {\r\n\t\treturn function(top) {\r\n\t\t\tthis.stop(true);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Retrieves the horizontal scroll position.\r\n\t*\r\n\t* @returns {Number} The horizontal scroll position in pixels.\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tgetScrollLeft: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\treturn this.isScrolling() ? this.scrollLeft : sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Retrieves the vertical scroll position.\r\n\t*\r\n\t* @returns {Number} The vertical scroll position in pixels.\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tgetScrollTop: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\treturn this.isScrolling() ? this.scrollTop : sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcScrollNode: function () {\r\n\t\treturn this.$.client.hasNode();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcAutoScrolling: function () {\r\n\t\tvar v = (this.vertical == 'auto');\r\n\t\tvar h = (this.horizontal == 'auto') || (this.horizontal == 'default');\r\n\t\tif ((v || h) && this.scrollNode) {\r\n\t\t\tvar b = this.getScrollBounds();\r\n\t\t\tif (v) {\r\n\t\t\t\tthis.$.scrollMath.vertical = b.height > b.clientHeight;\r\n\t\t\t}\r\n\t\t\tif (h) {\r\n\t\t\t\tthis.$.scrollMath.horizontal = b.width > b.clientWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshouldDrag: function (sender, e) {\r\n\t\tthis.calcAutoScrolling();\r\n\t\tvar requestV = e.vertical;\r\n\t\tvar canH = this.$.scrollMath.horizontal && !requestV;\r\n\t\tvar canV = this.$.scrollMath.vertical && requestV;\r\n\t\tvar down = e.dy < 0, right = e.dx < 0;\r\n\t\tvar oobV = (!down && this.startEdges.top || down && this.startEdges.bottom);\r\n\t\tvar oobH = (!right && this.startEdges.left || right && this.startEdges.right);\r\n\t\t// we would scroll if not at a boundary\r\n\t\tif (!e.boundaryDragger && (canH || canV)) {\r\n\t\t\te.boundaryDragger = this;\r\n\t\t}\r\n\t\t// include boundary exclusion\r\n\t\tif ((!oobV && canV) || (!oobH && canH)) {\r\n\t\t\te.dragger = this;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tflick: function (sender, e) {\r\n\t\tvar onAxis = Math.abs(e.xVelocity) > Math.abs(e.yVelocity) ? this.$.scrollMath.horizontal : this.$.scrollMath.vertical;\r\n\t\tif (onAxis && this.dragging) {\r\n\t\t\tthis.$.scrollMath.flick(e);\r\n\t\t\treturn this.preventDragPropagation;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdown: kind.inherit(function (sup) {\r\n\t\treturn function (sender, e) {\r\n\t\t\tif (!this.isOverscrolling()) {\r\n\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmove: function (sender, e) {\r\n\t},\r\n\r\n\t// Special synthetic DOM events served up by the Gesture system\r\n\r\n\t/**\r\n\t* @fires module:enyo/TouchScrollStrategy~TouchScrollStrategy#onShouldDrag\r\n\t* @private\r\n\t*/\r\n\tdragstart: function (sender, e) {\r\n\t\t// Ignore drags sent from multi-touch events\r\n\t\tif(!this.dragDuringGesture && e.srcEvent.touches && e.srcEvent.touches.length > 1) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t// note: allow drags to propagate to parent scrollers via data returned in the shouldDrag event.\r\n\t\tthis.doShouldDrag(e);\r\n\t\tthis.dragging = (e.dragger == this || (!e.dragger && e.boundaryDragger == this));\r\n\t\tif (this.dragging) {\r\n\t\t\tif(this.preventDefault){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\t// note: needed because show/hide changes\r\n\t\t\t// the position so sync'ing is required when\r\n\t\t\t// dragging begins (needed because show/hide does not trigger onscroll)\r\n\t\t\tthis.syncScrollMath();\r\n\t\t\tthis.$.scrollMath.startDrag(e);\r\n\t\t\tif (this.preventDragPropagation) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdrag: function (sender, e) {\r\n\t\t// if the list is doing a reorder, don't scroll\r\n\t\tif(this.listReordering) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.dragging) {\r\n\t\t\tif(this.preventDefault){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\tthis.$.scrollMath.drag(e);\r\n\t\t\tif (this.scrim) {\r\n\t\t\t\tthis.$.scrim.show();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdragfinish: function (sender, e) {\r\n\t\tif (this.dragging) {\r\n\t\t\te.preventTap();\r\n\t\t\tthis.$.scrollMath.dragFinish();\r\n\t\t\tthis.dragging = false;\r\n\t\t\tif (this.scrim) {\r\n\t\t\t\tthis.$.scrim.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmousewheel: function (sender, e) {\r\n\t\tif (!this.dragging && this.useMouseWheel) {\r\n\t\t\tthis.calcBoundaries();\r\n\t\t\tthis.syncScrollMath();\r\n\t\t\tthis.stabilize();\r\n\t\t\tif (this.$.scrollMath.mousewheel(e)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollMathStart: function () {\r\n\t\tif (this.scrollNode && !this.isScrolling()) {\r\n\t\t\tthis.scrolling = true;\r\n\t\t\tif (!this.isOverscrolling()) {\r\n\t\t\t\tthis.calcBoundaries();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollMathScroll: function (sender) {\r\n\t\tif(!this.overscroll) {\r\n\t\t\t//don't overscroll past edges\r\n\t\t\tthis.effectScroll(-Math.min(sender.leftBoundary, Math.max(sender.rightBoundary, sender.x)),\r\n\t\t\t\t\t-Math.min(sender.topBoundary, Math.max(sender.bottomBoundary, sender.y)));\r\n\t\t} else {\r\n\t\t\tthis.effectScroll(-sender.x, -sender.y);\r\n\t\t}\r\n\t\tif (this.thumb) {\r\n\t\t\tthis.showThumbs();\r\n\t\t\tthis.delayHideThumbs(100);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollMathStop: function () {\r\n\t\tthis.scrolling = false;\r\n\t\tthis.effectScrollStop();\r\n\t\tif (this.thumb) {\r\n\t\t\tthis.delayHideThumbs(100);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollMathStabilize: function (sender) {\r\n\t\tthis.effectScroll(-sender.x, -sender.y);\r\n\t\tif (this.thumb) {\r\n\t\t\tthis.showThumbs();\r\n\t\t\tthis.delayHideThumbs(100);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcBoundaries: function () {\r\n\t\tvar s = this.$.scrollMath || this, b = this._getScrollBounds();\r\n\t\ts.bottomBoundary = b.clientHeight - b.height;\r\n\t\ts.rightBoundary = b.clientWidth - b.width;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tsyncScrollMath: function () {\r\n\t\tvar m = this.$.scrollMath;\r\n\t\tif(m) {\r\n\t\t\tm.setScrollX(-this.getScrollLeft());\r\n\t\t\tm.setScrollY(-this.getScrollTop());\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teffectScroll: function (x, y) {\r\n\t\tif (this.scrollNode) {\r\n\t\t\tthis.scrollLeft = this.scrollNode.scrollLeft = x;\r\n\t\t\tthis.scrollTop = this.scrollNode.scrollTop = y;\r\n\t\t\tthis.effectOverscroll(x !== null? Math.round(x): x, y !== null? Math.round(y): y);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teffectScrollStop: function () {\r\n\t\tthis.effectOverscroll(null, null);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teffectOverscroll: function (x, y) {\r\n\t\tvar n = this.scrollNode;\r\n\t\tvar xt = '0', yt = '0', zt = this.accel ? ',0' : '';\r\n\t\tif (y !== null && Math.abs(y - n.scrollTop) > 1) {\r\n\t\t\tyt = (n.scrollTop - y);\r\n\t\t}\r\n\t\tif (x !== null && Math.abs(x - n.scrollLeft) > 1) {\r\n\t\t\txt = (n.scrollLeft - x);\r\n\t\t}\r\n\t\tif(!this.transform) {\r\n\t\t\t//adjust top/left if browser can't handle translations\r\n\t\t\tthis.$.client.setBounds({left:xt + 'px', top:yt + 'px'});\r\n\t\t} else {\r\n\t\t\tDom.transformValue(this.$.client, this.translation, xt + 'px, ' + yt + 'px' + zt);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves the overscroll boundaries of the [scroller]{@link module:enyo/Scroller~Scroller}.\r\n\t*\r\n\t* @returns {module:enyo/Scroller~OverscrollBoundaryObject} An [object]{@glossary Object}\r\n\t*\tdescribing the overscroll boundaries.\r\n\t* @public\r\n\t*/\r\n\tgetOverScrollBounds: function () {\r\n\t\tvar m = this.$.scrollMath || this;\r\n\t\treturn {\r\n\t\t\toverleft: Math.min(m.leftBoundary - m.x, 0) || Math.max(m.rightBoundary - m.x, 0),\r\n\t\t\tovertop: Math.min(m.topBoundary - m.y, 0) || Math.max(m.bottomBoundary - m.y, 0)\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\t_getScrollBounds: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tvar r = sup.apply(this, arguments);\r\n\t\t\tutils.mixin(r, this.getOverScrollBounds());\r\n\t\t\treturn r;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Retrieves the scroll boundaries of the [scroller]{@link module:enyo/Scroller~Scroller}.\r\n\t*\r\n\t* @returns {module:enyo/Scroller~BoundaryObject} An [object]{@glossary Object} describing the\r\n\t*\tscroll boundaries.\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tgetScrollBounds: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.stop(true);\r\n\t\t\treturn sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* This method exists primarily to support an internal use case for\r\n\t* [enyo/DataList]{@link module:enyo/DataList~DataList}. It is intended to be called by the\r\n\t* [scroller]{@link module:enyo/Scroller~Scroller} that owns this strategy.\r\n\t*\r\n\t* Triggers a remeasurement of the scroller's metrics (specifically, the\r\n\t* size of its viewport, the size of its contents and the difference between\r\n\t* the two, which determines the extent to which the scroller may scroll).\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tremeasure: function () {\r\n\t\tthis.calcBoundaries();\r\n\t\tif (this.thumb) {\r\n\t\t\tthis.syncThumbs();\r\n\t\t}\r\n\t\tthis.stabilize();\r\n\t},\r\n\r\n\t/**\r\n\t* Displays the scroll indicators and sets the auto-hide timeout.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\talertThumbs: function () {\r\n\t\tthis.showThumbs();\r\n\t\tthis.delayHideThumbs(500);\r\n\t},\r\n\r\n\t/**\r\n\t* Syncs the vertical and horizontal scroll indicators.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tsyncThumbs: function () {\r\n\t\tthis.$.vthumb.sync(this);\r\n\t\tthis.$.hthumb.sync(this);\r\n\t},\r\n\tupdateThumbs: function () {\r\n\t\tthis.$.vthumb.update(this);\r\n\t\tthis.$.hthumb.update(this);\r\n\t},\r\n\r\n\t/**\r\n\t* Syncs and shows both the vertical and horizontal scroll indicators. We only sync after we\r\n\t* have checked if the vertical and/or horizontal scroll indicators are to be shown, so that\r\n\t* {@link module:enyo/ScrollThumb~ScrollThumb#update} accurately makes calculations when the indicators are\r\n\t* visible.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tshowThumbs: function () {\r\n\t\tif (this.horizontal != 'hidden') {\r\n\t\t\tthis.$.hthumb.show();\r\n\t\t}\r\n\t\tif (this.vertical != 'hidden') {\r\n\t\t\tthis.$.vthumb.show();\r\n\t\t}\r\n\t\tthis.syncThumbs();\r\n\t},\r\n\r\n\t/**\r\n\t* Hides the vertical and horizontal scroll indicators.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\thideThumbs: function () {\r\n\t\tthis.$.vthumb.hide();\r\n\t\tthis.$.hthumb.hide();\r\n\t},\r\n\r\n\t/**\r\n\t* Hides the vertical and horizontal scroll indicators asynchronously.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tdelayHideThumbs: function (delay) {\r\n\t\tthis.$.vthumb.delayHide(delay);\r\n\t\tthis.$.hthumb.delayHide(delay);\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Popup~Popup} kind.\r\n* @module enyo/Popup\r\n*/\r\n\r\n\r\n\r\nvar\r\n\tkind = require('../kind'),\r\n\tutils = require('../utils'),\r\n\tdispatcher = require('../dispatcher');\r\nvar\r\n\tControl = require('../Control'),\r\n\tSignals = require('../Signals'),\r\n\tScrim = require('../Scrim'),\r\n\tDom = require('../dom');\r\n\r\n/**\r\n* Fires after the [popup]{@link module:enyo/Popup~Popup} is shown.\r\n*\r\n* @event module:enyo/Popup~Popup#onShow\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {Object} event - An [object]{@glossary Object} containing event information.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires after the [popup]{@link module:enyo/Popup~Popup} is hidden.\r\n*\r\n* @event module:enyo/Popup~Popup#onHide\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {Object} event - An [object]{@glossary Object} containing event information.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:enyo/Popup~Popup} is a [control]{@link module:enyo/Control~Control} used to display certain content\r\n* on top of other content.\r\n*\r\n* Popups are initially hidden on creation; they may be shown by calling the\r\n* [show()]{@link module:enyo/Control~Control#show} method and re-hidden by calling\r\n* [hide()]{@link module:enyo/Control~Control#hide}. Popups may be centered using the\r\n* [centered]{@link module:enyo/Popup~Popup#centered} property; if not centered, they should\r\n* be given a specific position.\r\n*\r\n* A popup may be optionally floated above all\r\n* [application]{@link module:enyo/Application~Application} content by setting its\r\n* [floating]{@link module:enyo/Popup~Popup#floating} property to `true`. This has the\r\n* advantage of guaranteeing that the popup will be displayed on top of other\r\n* content. This usage is appropriate when the popup does not need to scroll\r\n* along with other content.\r\n*\r\n* To avoid obscuring popup contents, scrims require the dialog to be floating;\r\n* otherwise, they won't render. A modal popup will get a transparent scrim\r\n* unless the popup isn't floating. To get a translucent scrim when modal,\r\n* specify `[scrim]{@link module:enyo/Popup~Popup#scrim}: true` and\r\n* `[scrimWhenModal]{@link module:enyo/Popup~Popup#scrimWhenModal}: false`.\r\n*\r\n* Finally, there is a WebKit bug affecting the behavior of popups that are\r\n* displayed on top of text input controls.  For more information, including a\r\n* workaround, see the documentation on\r\n* [Popups]{@linkplain $dev-guide/building-apps/controls/popups.html}\r\n* in the Enyo Developer Guide.\r\n*\r\n* @class Popup\r\n* @extends module:enyo/Control~Control\r\n* @ui\r\n* @public\r\n*/\r\nvar Popup = module.exports = kind(\r\n\t/** @lends module:enyo/Popup~Popup.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Popup',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'enyo-popup enyo-no-touch-action',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished:\r\n\t\t/** @lends module:enyo/Popup~Popup.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to prevent [controls]{@link module:enyo/Control~Control} outside the\r\n\t\t* [popup]{@link module:enyo/Popup~Popup} from receiving [events]{@glossary event} while the\r\n\t\t* popup is showing.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmodal: false,\r\n\r\n\t\t/**\r\n\t\t* By default, the [popup]{@link module:enyo/Popup~Popup} will hide when the user taps outside it or\r\n\t\t* presses `ESC`.  Set to `false` to prevent this behavior.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tautoDismiss: true,\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to render the [popup]{@link module:enyo/Popup~Popup} in a\r\n\t\t* [floating layer]{@link module:enyo/Control/floatingLayer~FloatingLayer} outside of other\r\n\t\t* [controls]{@link module:enyo/Control~Control}.  This may be used to guarantee that the\r\n\t\t* popup will be shown on top of other controls.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tfloating: false,\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to automatically center the [popup]{@link module:enyo/Popup~Popup} in\r\n\t\t* the middle of the viewport.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tcentered: false,\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to be able to show transition on the style modifications;\r\n\t\t* otherwise the transition is invisible `(visibility: hidden)`.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tshowTransitions: false,\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to stop `preventDefault()` from being called on captured\r\n\t\t* [events]{@glossary event}.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tallowDefault: false,\r\n\r\n\t\t/**\r\n\t\t* Boolean that controls whether a scrim will appear when the dialog is\r\n\t\t* modal. Note that modal scrims are transparent, so you won't see them.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrimWhenModal: true,\r\n\r\n\t\t/**\r\n\t\t* Boolean that controls whether or not a scrim will be displayed. Scrims are\r\n\t\t* only displayed when the dialog is floating.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default  false\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrim: false,\r\n\r\n\t\t/**\r\n\t\t* Optional class name to apply to the scrim. Be aware that the scrim\r\n\t\t* is a singleton and you will be modifying the scrim instance used for\r\n\t\t* other popups.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default  ''\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrimClassName: '',\r\n\r\n\t\t/**\r\n\t\t* Lowest z-index that may be applied to a popup\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default  120\r\n\t\t* @public\r\n\t\t*/\r\n\t\tdefaultZ: 120\r\n\t},\r\n\r\n\t/**\r\n\t* @lends module:enyo/Popup~Popup\r\n\t* @private\r\n\t*/\r\n\tprotectedStatics: {\r\n\t\t/**\r\n\t\t* Count of currently showing popups\r\n\t\t* @type {Number}\r\n\t\t* @static\r\n\t\t* @private\r\n\t\t*/\r\n\t\tcount: 0,\r\n\r\n\t\t/**\r\n\t\t* Highest possible z-index for a popup\r\n\t\t* @type {Number}\r\n\t\t* @static\r\n\t\t* @private\r\n\t\t*/\r\n\t\thighestZ: 120\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowing: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonkeydown: 'keydown',\r\n\t\tondragstart: 'dragstart',\r\n\t\tonfocus: 'focus',\r\n\t\tonblur: 'blur',\r\n\t\tonRequestShow: 'requestShow',\r\n\t\tonRequestHide: 'requestHide'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcaptureEvents: true,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\teventsToCapture: {\r\n\t\tondown: 'capturedDown',\r\n\t\tontap: 'capturedTap'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonShow: '',\r\n\t\tonHide: ''\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttools: [\r\n\t\t{kind: Signals, onKeydown: 'keydown'}\r\n\t],\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tvar showing = this.showing;\r\n\t\t\tthis.showing = false;\r\n\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.canGenerate = !this.floating;\r\n\r\n\t\t\t// if the showing flag was true we know the intent was to automatically show the\r\n\t\t\t// popup on render...but it can't be rendered in the normal flow...but the rendered\r\n\t\t\t// method won't be called because it wasn't generated...SO...we arbitrarily flag\r\n\t\t\t// it as generated even though it wasn't to ensure that its rendered method will\r\n\t\t\t// be called and we then check for this scenario in rendered\r\n\t\t\tthis.generated = showing;\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trender: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tif (this.floating) {\r\n\t\t\t\tif (!Control.floatingLayer.hasNode()) {\r\n\t\t\t\t\tControl.floatingLayer.render();\r\n\t\t\t\t}\r\n\t\t\t\tthis.parentNode = Control.floatingLayer.hasNode();\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tteardownRender: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\t// if this is a rendered floating popup, remove the node from the\r\n\t\t\t// floating layer because it won't be removed otherwise\r\n\t\t\tif (this.floating) this.removeNodeFromDom();\r\n\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tdestroy: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.release();\r\n\t\t\tif (this.showing) this.showHideScrim(false);\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\treflow: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.updatePosition();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcViewportSize: function () {\r\n\t\tif (global.innerWidth) {\r\n\t\t\treturn {\r\n\t\t\t\twidth: global.innerWidth,\r\n\t\t\t\theight: global.innerHeight\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tvar e = document.documentElement;\r\n\t\t\treturn {\r\n\t\t\t\twidth: e.offsetWidth,\r\n\t\t\t\theight: e.offsetHeight\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tupdatePosition: function () {\r\n\t\tvar d = this.calcViewportSize(),\r\n\t\t\tb = this.getBounds();\r\n\r\n\t\tif (this.targetPosition) {\r\n\t\t\t// For brevity's sake...\r\n\t\t\tvar p = this.targetPosition;\r\n\r\n\t\t\t// Test and optionally adjust our target bounds (only first is commented, because logic is effectively identical for all scenarios)\r\n\t\t\tif (typeof p.left == 'number') {\r\n\t\t\t\t// If popup will be outside global bounds, switch anchor\r\n\t\t\t\tif (p.left + b.width > d.width) {\r\n\t\t\t\t\tif (p.left - b.width >= 0) {\r\n\t\t\t\t\t\t// Switching to right corner will fit in global\r\n\t\t\t\t\t\tp.right = d.width - p.left;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Neither corner will work; stick at side of global\r\n\t\t\t\t\t\tp.right = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tp.left = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tp.right = null;\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof p.right == 'number') {\r\n\t\t\t\tif (p.right + b.width > d.width) {\r\n\t\t\t\t\tif (p.right - b.width >= 0) {\r\n\t\t\t\t\t\tp.left = d.width - p.right;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tp.left = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tp.right = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tp.left = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof p.top == 'number') {\r\n\t\t\t\tif (p.top + b.height > d.height) {\r\n\t\t\t\t\tif (p.top - b.height >= 0) {\r\n\t\t\t\t\t\tp.bottom = d.height - p.top;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tp.bottom = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tp.top = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tp.bottom = null;\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof p.bottom == 'number') {\r\n\t\t\t\tif (p.bottom + b.height > d.height) {\r\n\t\t\t\t\tif (p.bottom - b.height >= 0) {\r\n\t\t\t\t\t\tp.top = d.height - p.bottom;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tp.top = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tp.bottom = null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tp.top = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 'initial' values are necessary to override positioning rules in the CSS\r\n\t\t\tthis.addStyles('left: ' + (p.left !== null ? p.left + 'px' : 'initial') + '; right: ' + (p.right !== null ? p.right + 'px' : 'initial') + '; top: ' + (p.top !== null ? p.top + 'px' : 'initial') + '; bottom: ' + (p.bottom !== null ? p.bottom + 'px' : 'initial') + ';');\r\n\t\t} else if (this.centered) {\r\n\t\t\tvar o = this.floating ? d : this.getInstanceOwner().getBounds();\r\n\t\t\tthis.addStyles( 'top: ' + Math.max( ( ( o.height - b.height ) / 2 ), 0 ) + 'px; left: ' + Math.max( ( ( o.width - b.width ) / 2 ), 0 ) + 'px;' );\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\t// generated won't be true when this method is called with showing false unless\r\n\t\t\t// we set it that way so we need to go ahead and do our actual render now that the container (parent)\r\n\t\t\t// has been rendered and the floating layer can be rendered and we should be able to carry on normally\r\n\t\t\tif (this.generated && !this.showing && !this.hasNode()) {\r\n\t\t\t\tthis.generated = false;\r\n\t\t\t\tthis.showing = true;\r\n\t\t\t\tthis.showingChanged();\r\n\t\t\t} else sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @fires module:enyo/Popup~Popup#onShow\r\n\t* @fires module:enyo/Popup~Popup#onHide\r\n\t* @private\r\n\t*/\r\n\tshowingChanged: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\t// auto render when shown.\r\n\t\t\tif (this.floating && this.showing && !this.hasNode()) {\r\n\t\t\t\tthis.render();\r\n\t\t\t}\r\n\t\t\t// hide while sizing, and move to top corner for accurate sizing\r\n\t\t\tif (this.centered || this.targetPosition) {\r\n\t\t\t\tif (!this.showTransitions) {\r\n\t\t\t\t\tthis.applyStyle('visibility', 'hidden');\r\n\t\t\t\t}\r\n\t\t\t\tthis.addStyles('top: 0px; left: 0px; right: initial; bottom: initial;');\r\n\t\t\t}\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (this.showing) {\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tPopup.count++;\r\n\t\t\t\tthis.applyZIndex();\r\n\t\t\t\tif (this.captureEvents) {\r\n\t\t\t\t\tthis.capture();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif(Popup.count > 0) {\r\n\t\t\t\t\tPopup.count--;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.captureEvents) {\r\n\t\t\t\t\tthis.release();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.showHideScrim(this.showing);\r\n\t\t\t// show after sizing\r\n\t\t\tif (this.centered || this.targetPosition && !this.showTransitions) {\r\n\t\t\t\tthis.applyStyle('visibility', null);\r\n\t\t\t}\r\n\t\t\t// events desired due to programmatic show/hide\r\n\t\t\tif (this.hasNode()) {\r\n\t\t\t\tthis[this.showing ? 'doShow' : 'doHide']();\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcapture: function () {\r\n\t\tdispatcher.capture(this, this.eventsToCapture);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trelease: function () {\r\n\t\tdispatcher.release(this);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcapturedDown: function (sender, e) {\r\n\t\t//record the down event to verify in tap\r\n\t\tthis.downEvent = e;\r\n\r\n\t\t// prevent focus from shifting outside the popup when modal.\r\n\t\tif (this.modal && !this.allowDefault) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t\treturn this.modal;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcapturedTap: function (sender, e) {\r\n\t\t// dismiss on tap if property is set and click started & ended outside the popup\r\n\t\tif (this.autoDismiss && (!e.dispatchTarget.isDescendantOf(this)) && this.downEvent &&\r\n\t\t\t(!this.downEvent.dispatchTarget.isDescendantOf(this))) {\r\n\t\t\tthis.downEvent = null;\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t\treturn this.modal;\r\n\t},\r\n\r\n\t/**\r\n\t* If a drag event occurs outside a [popup]{@link module:enyo/Popup~Popup}, hide.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdragstart: function (sender, e) {\r\n\t\tvar inScope = (e.dispatchTarget === this || e.dispatchTarget.isDescendantOf(this));\r\n\t\tif (sender.autoDismiss && !inScope) {\r\n\t\t\tsender.setShowing(false);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkeydown: function (sender, e) {\r\n\t\tif (this.showing && this.autoDismiss && e.keyCode == 27 /* escape */) {\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* If something inside the [popup]{@link module:enyo/Popup~Popup} blurred, keep track of it.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tblur: function (sender, e) {\r\n\t\tif (e.dispatchTarget.isDescendantOf(this)) {\r\n\t\t\tthis.lastFocus = e.originator;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* When something outside the [popup]{@link module:enyo/Popup~Popup} focuses (e.g., due to tab key), focus\r\n\t* our last focused [control]{@link module:enyo/Control~Control}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tfocus: function (sender, e) {\r\n\t\tvar dt = e.dispatchTarget;\r\n\t\tif (this.modal && !dt.isDescendantOf(this)) {\r\n\t\t\tif (dt.hasNode()) {\r\n\t\t\t\tdt.node.blur();\r\n\t\t\t}\r\n\t\t\tvar n = (this.lastFocus && this.lastFocus.hasNode()) || this.hasNode();\r\n\t\t\tif (n) {\r\n\t\t\t\tn.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trequestShow: function () {\r\n\t\tthis.show();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\trequestHide: function () {\r\n\t\tthis.hide();\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Opens the [popup]{@link module:enyo/Popup~Popup} at the location of a mouse\r\n\t* {@glossary event}. The popup's position is automatically constrained so\r\n\t* that it does not display outside the viewport, and defaults to anchoring\r\n\t* the top left corner of the popup to the position of the mouse event.\r\n\t*\r\n\t* @param {Object} e - The mouse {@glossary event} that initiated this call.\r\n\t* @param {Object} [offset] - An optional [object]{@glossary Object} that may\r\n\t* contain `left` and `top` properties to specify an offset relative to the\r\n\t* location where the [popup]{@link module:enyo/Popup~Popup} would otherwise be positioned.\r\n\t* @public\r\n\t*/\r\n\tshowAtEvent: function (e, offset) {\r\n\t\t// Calculate our ideal target based on the event position and offset\r\n\t\tvar p = {\r\n\t\t\tleft: e.centerX || e.clientX || e.pageX,\r\n\t\t\ttop: e.centerY || e.clientY || e.pageY\r\n\t\t};\r\n\t\tif (offset) {\r\n\t\t\tp.left += offset.left || 0;\r\n\t\t\tp.top += offset.top || 0;\r\n\t\t}\r\n\r\n\t\tthis.showAtPosition(p);\r\n\t},\r\n\r\n\t/**\r\n\t* Opens the [popup]{@link module:enyo/Popup~Popup} at a specific position. The final\r\n\t* location of the popup will be automatically constrained so that it does\r\n\t* not display outside the viewport.\r\n\t*\r\n\t* @param {Object} pos An [object]{@glossary Object} that may contain `left`,\r\n\t* `top`, `bottom`, and `right` properties to specify where the\r\n\t* [popup]{@link module:enyo/Popup~Popup} will be anchored. If both `left` and `right` are\r\n\t* included, the preference will be to anchor on the left; similarly, if both\r\n\t* `top` and `bottom` are specified, the preference will be to anchor at the\r\n\t* top.\r\n\t* @public\r\n\t*/\r\n\tshowAtPosition: function (pos) {\r\n\t\t// Save our target position for later processing\r\n\t\tthis.targetPosition = pos;\r\n\r\n\t\t// Show the dialog\r\n\t\tthis.show();\r\n\t},\r\n\r\n\t/**\r\n\t* Toggles the display of the scrim\r\n\t*\r\n\t* @param  {Boolean} show - Show the scrim\r\n\t* @private\r\n\t*/\r\n\tshowHideScrim: function (show) {\r\n\t\tif (this.floating && (this.scrim || (this.modal && this.scrimWhenModal))) {\r\n\t\t\tvar scrim = this.getScrim();\r\n\t\t\tif (show) {\r\n\t\t\t\t// move scrim to just under the popup to obscure rest of screen\r\n\t\t\t\tvar i = this.getScrimZIndex();\r\n\t\t\t\tthis._scrimZ = i;\r\n\t\t\t\tscrim.showAtZIndex(i);\r\n\t\t\t} else {\r\n\t\t\t\tscrim.hideAtZIndex(this._scrimZ);\r\n\t\t\t}\r\n\t\t\tutils.call(scrim, 'addRemoveClass', [this.scrimClassName, scrim.showing]);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Calculates the z-index for the scrim so it's directly below the popup\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tgetScrimZIndex: function () {\r\n\t\treturn Popup.highestZ >= this._zIndex ? this._zIndex - 1 : Popup.highestZ;\r\n\t},\r\n\r\n\t/**\r\n\t* Show a transparent scrim for modal popups if {@link module:enyo/Popup~Popup#scrimWhenModal} is `true`\r\n\t* if {@link module:enyo/Popup~Popup#scrim} is `true`, then show a regular scrim.\r\n\t*\r\n\t* @return {module:enyo/Scrim~Scrim}\r\n\t* @private\r\n\t*/\r\n\tgetScrim: function () {\r\n\t\t//\r\n\t\tif (this.modal && this.scrimWhenModal && !this.scrim) {\r\n\t\t\treturn Scrim.scrimTransparent.make();\r\n\t\t}\r\n\t\treturn Scrim.scrim.make();\r\n\t},\r\n\r\n\t/**\r\n\t* Adjust the zIndex so that popups will properly stack on each other.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tapplyZIndex: function () {\r\n\t\tthis._zIndex = (Popup.count * 2) + this.findZIndex() + 1;\r\n\t\tif (this._zIndex <= Popup.highestZ) {\r\n\t\t\tthis._zIndex = Popup.highestZ + 1;\r\n\t\t}\r\n\t\tif (this._zIndex > Popup.highestZ) {\r\n\t\t\tPopup.highestZ = this._zIndex;\r\n\t\t}\r\n\t\t// leave room for scrim\r\n\t\tthis.applyStyle('z-index', this._zIndex);\r\n\t},\r\n\r\n\t/**\r\n\t* Find the z-index for this popup, clamped by {@link module:enyo/Popup~Popup#defaultZ}\r\n\t*\r\n\t* @return {Number} z-index value\r\n\t* @private\r\n\t*/\r\n\tfindZIndex: function () {\r\n\t\t// a default z value\r\n\t\tvar z = this.defaultZ;\r\n\t\tif (this._zIndex) {\r\n\t\t\tz = this._zIndex;\r\n\t\t} else if (this.hasNode()) {\r\n\t\t\t// Re-use existing zIndex if it has one\r\n\t\t\tz = Number(Dom.getComputedStyleValue(this.node, 'z-index')) || z;\r\n\t\t}\r\n\t\tif (z < this.defaultZ) {\r\n\t\t\tz = this.defaultZ;\r\n\t\t}\r\n\t\tthis._zIndex = z;\r\n\t\treturn this._zIndex;\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default dialog\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityRole\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: 'dialog'\r\n});\r\n\r\n/**\r\n* By default, we capture `ondown` and `ontap` to implement the [popup's]{@link module:enyo/Popup~Popup}\r\n* modal behavior, but in certain circumstances it may be necessary to capture other\r\n* [events]{@glossary event} as well, so we provide this hook to extend. (We are currently\r\n* using this in Moonstone to capture `onSpotlightFocus` [events]{@glossary event}).\r\n*\r\n* @private\r\n*/\r\nPopup.concat = function (ctor, props, instance) {\r\n\tvar proto = ctor.prototype || ctor,\r\n\t\tevts = proto.eventsToCapture;\r\n\tproto.eventsToCapture = evts ? utils.mixin({}, [evts, props.eventsToCapture]) : props.eventsToCapture;\r\n\tdelete props.eventsToCapture;\r\n};\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/ToolDecorator~ToolDecorator} kind.\r\n* @module enyo/ToolDecorator\r\n*/\r\n\r\n\r\n\r\nvar\r\n\tkind = require('../kind');\r\nvar\r\n\tGroupItem = require('../GroupItem');\r\n\r\n/**\r\n* {@link module:enyo/ToolDecorator~ToolDecorator} lines up [components]{@link module:enyo/Component~Component} in a row,\r\n* centered vertically.\r\n*\r\n* @class ToolDecorator\r\n* @extends module:enyo/GroupItem~GroupItem\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/ToolDecorator~ToolDecorator.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.ToolDecorator',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: GroupItem,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'enyo-tool-decorator'\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n * Contains the declaration for the {@link module:enyo/TranslateScrollStrategy~TranslateScrollStrategy} kind.\r\n * @module enyo/TranslateScrollStrategy\r\n */\r\n\r\nvar\r\n\tkind = require('./kind'),\r\n\tdispatcher = require('./dispatcher');\r\n\r\nvar\r\n\tTouchScrollStrategy = require('./TouchScrollStrategy'),\r\n\tDom = require('./dom');\r\n\r\n/**\r\n* {@link module:enyo/TranslateScrollStrategy~TranslateScrollStrategy} is a helper [kind]{@glossary kind} that extends\r\n* {@link module:enyo/TouchScrollStrategy~TouchScrollStrategy}, optimizing it for scrolling environments in which effecting\r\n* scroll changes with transforms using CSS translations is fastest.\r\n* \r\n* `TranslateScrollStrategy` is not typically created in application code. Instead, it is\r\n* specified as the value of the [strategyKind]{@link module:enyo/Scroller~Scroller#strategyKind} property of\r\n* an {@link module:enyo/Scroller~Scroller} or {@link module:layout/List~List}, or is used by the framework implicitly.\r\n*\r\n* @class TranslateScrollStrategy\r\n* @extends module:enyo/TouchScrollStrategy~TouchScrollStrategy\r\n* @protected\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/TranslateScrollStrategy~TranslateScrollStrategy.prototype */ {\r\n\r\n\tname: 'enyo.TranslateScrollStrategy',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: TouchScrollStrategy,\r\n\r\n\t/** \r\n\t* Set to `true` to optimize the strategy to only use translation to scroll; this increases\r\n\t* fluidity of scrolling animation. It should not be used when the\r\n\t* [scroller]{@link module:enyo/Scroller~Scroller} contains [controls]{@link module:enyo/Control~Control} that require\r\n\t* keyboard input. This is because when `translateOptimized` is `true`, it is possible to\r\n\t* position inputs such that they will not become visible when focused.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\ttranslateOptimized: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcomponents: [\r\n\t\t{name: 'clientContainer', classes: 'enyo-touch-scroller', components: [\r\n\t\t\t{name: 'client', classes: 'enyo-touch-scroller-client'}\r\n\t\t]}\r\n\t],\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tdispatcher.makeBubble(this.$.clientContainer, 'scroll');\r\n\t\t\tif (this.translateOptimized) {\r\n\t\t\t\t// on render, the start positions should be 0 for translateOptimized because the\r\n\t\t\t\t// scrollNode's scrollTop/Left will always be 0 and therefore offsetting the\r\n\t\t\t\t// translate to account for a non-zero scrollTop/Left isn't necessary.\r\n\t\t\t\tthis.setStartPosition(true);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Sets the start position for scrolling.\r\n\t*\r\n\t* @param {Boolean} [reset] When true, resets the start position to 0 rather than the current\r\n\t* \tscrollTop and scrollLeft.\r\n\t* @private\r\n\t*/\r\n\tsetStartPosition: function (reset) {\r\n\t\tif (reset) {\r\n\t\t\tthis.startX = this.startY = 0;\r\n\t\t} else {\r\n\t\t\tthis.startX = this.getScrollLeft();\r\n\t\t\tthis.startY = this.getScrollTop();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetScrollSize: function () {\r\n\t\tvar n = this.$.client.hasNode();\r\n\t\treturn {width: n ? n.scrollWidth : 0, height: n ? n.scrollHeight : 0};\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\t// apply initial transform so we're always composited\r\n\t\t\tDom.transformValue(this.$.client, this.translation, '0,0,0');\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcalcScrollNode: function () {\r\n\t\treturn this.$.clientContainer.hasNode();\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmaxHeightChanged: function () {\r\n\t\t// content should cover scroller at a minimum if there's no max-height.\r\n\t\tthis.$.client.applyStyle('min-height', this.maxHeight ? null : '100%');\r\n\t\tthis.$.client.applyStyle('max-height', this.maxHeight);\r\n\t\tthis.$.clientContainer.addRemoveClass('enyo-scrollee-fit', !this.maxHeight);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tshouldDrag: kind.inherit(function (sup) {\r\n\t\treturn function(inEvent) {\r\n\t\t\t// stop and update drag info before checking drag status\r\n\t\t\tthis.stop();\r\n\t\t\tthis.calcStartInfo();\r\n\t\t\treturn sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tsyncScrollMath: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tif (!this._translated) {\r\n\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Sets the horizontal scroll position.\r\n\t*\r\n\t* @param {Number} left - The horizontal scroll position in pixels.\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tsetScrollLeft: kind.inherit(function (sup) {\r\n\t\treturn function(inLeft) {\r\n\t\t\tvar m, p;\r\n\t\t\tif (this.translateOptimized) {\r\n\t\t\t\tp = this.scrollLeft;\r\n\t\t\t\tm = this.$.scrollMath;\r\n\t\t\t\tthis.stop(true);\r\n\t\t\t\tm.setScrollX(-inLeft);\r\n\t\t\t\tm.stabilize();\r\n\t\t\t\tif (p != -m.x) {\r\n\t\t\t\t\t// We won't get a native scroll event,\r\n\t\t\t\t\t// so need to make one ourselves\r\n\t\t\t\t\tm.doScroll();\r\n\t\t\t\t\tthis.delayHideThumbs(100);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Sets the vertical scroll position.\r\n\t*\r\n\t* @param {Number} top - The vertical scroll position in pixels.\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tsetScrollTop: kind.inherit(function (sup) {\r\n\t\treturn function(inTop) {\r\n\t\t\tvar m, p;\r\n\t\t\tif (this.translateOptimized) {\r\n\t\t\t\tp = this.scrollTop;\r\n\t\t\t\tm = this.$.scrollMath;\r\n\t\t\t\tthis.stop(true);\r\n\t\t\t\tm.setScrollY(-inTop);\r\n\t\t\t\tm.stabilize();\r\n\t\t\t\tif (p != -m.y) {\r\n\t\t\t\t\t// We won't get a native scroll event,\r\n\t\t\t\t\t// so need to make one ourselves\r\n\t\t\t\t\tm.doScroll();\r\n\t\t\t\t\tthis.delayHideThumbs(100);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Retrieves the horizontal scroll position.\r\n\t*\r\n\t* @returns {Number} The horizontal scroll position in pixels.\r\n\t* @method\r\n\t* @public\r\n\t*/\r\n\tgetScrollLeft: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\treturn this._translated ? this.scrollLeft: sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* Retrieves the vertical scroll position.\r\n\t*\r\n\t* @returns {Number} The vertical scroll position in pixels.\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tgetScrollTop: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\treturn this._translated ? this.scrollTop : sup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcalcBoundaries: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (this.translateOptimized && !this.isScrolling()) this.stabilize();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\thandleResize: function() {\r\n\t\tif (this.translateOptimized) {\r\n\t\t\tthis.stabilize();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tscrollMathStart: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (!this._translated) {\r\n\t\t\t\tthis.setStartPosition();\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollMathScroll: function (sender) {\r\n\t\tif(!this.overscroll) { //don't overscroll past edges\r\n\t\t\tthis.scrollLeft = -Math.min(sender.leftBoundary, Math.max(sender.rightBoundary, sender.x));\r\n\t\t\tthis.scrollTop = -Math.min(sender.topBoundary, Math.max(sender.bottomBoundary, sender.y));\r\n\t\t} else {\r\n\t\t\tthis.scrollLeft = -sender.x;\r\n\t\t\tthis.scrollTop = -sender.y;\r\n\t\t}\r\n\t\tthis.effectScroll(this.scrollLeft, this.scrollTop);\r\n\t\tif (this.thumb) {\r\n\t\t\tthis.showThumbs();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tscrollMathStabilize: kind.inherit(function (sup) {\r\n\t\treturn function (sender) {\r\n\t\t\tif (this._translated) {\r\n\t\t\t\tthis.scrollLeft = -sender.x;\r\n\t\t\t\tthis.scrollTop = -sender.y;\r\n\t\t\t\tthis.effectScroll(-sender.x, -sender.y);\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn sup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* While moving, scroller uses translate.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\teffectScroll: kind.inherit(function (sup) {\r\n\t\treturn function (x, y) {\r\n\t\t\tvar o;\r\n\t\t\tif (this.translateOptimized || this.isScrolling()) {\r\n\t\t\t\tx = this.startX - x;\r\n\t\t\t\ty = this.startY - y;\r\n\t\t\t\to = x + 'px, ' + y + 'px' + (this.accel ? ',0' : '');\r\n\t\t\t\tDom.transformValue(this.$.client, this.translation, o);\r\n\t\t\t\tthis._translated = true;\r\n\t\t\t} else {\r\n\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* When stopped, we use `scrollLeft/scrollTop` (makes cursor positioning automagic).\r\n\t*\r\n\t* @private\r\n\t*/\r\n\teffectScrollStop: function () {\r\n\t\tif (!this.translateOptimized) {\r\n\t\t\tvar t = '0,0' + (this.accel ? ',0' : '');\r\n\t\t\t// FIXME: normally translate3d changes not effect scrollHeight; however\r\n\t\t\t// there appear to be some dom changes (e.g. showing a node inside the scroller,\r\n\t\t\t// which do cause the scrollHeight to be changed from the translate3d.\r\n\t\t\t// In this case setting the translate3d back to 0 does not restore scrollHeight.\r\n\t\t\t// This causes a problem because setting scrollTop can produced an unexpected result if\r\n\t\t\t// scrollHeight is less than expected.\r\n\t\t\t// We detect this fault by validating scroll bounds and (1) un-apply the translate3d,\r\n\t\t\t// (2) update scrollTop/Left, and (3) re-apply a 0,0,0 translate3d to ensure compositing.\r\n\t\t\t// Luckily this corrects the problem (which appears to be a webkit bug). Note that\r\n\t\t\t// it's important to maintain a composited state (translate3d 0,0,0) or Android 4 is\r\n\t\t\t// slow to start scrolling.\r\n\t\t\tvar m = this.$.scrollMath, sb = this._getScrollBounds();\r\n\t\t\tvar needsBoundsFix = Boolean((sb.maxTop + m.bottomBoundary) || (sb.maxLeft + m.rightBoundary));\r\n\t\t\tDom.transformValue(this.$.client, this.translation, needsBoundsFix ? null : t);\r\n\t\t\t// note: this asynchronously triggers dom scroll event\r\n\t\t\tthis.setScrollLeft(this.scrollLeft);\r\n\t\t\tthis.setScrollTop(this.scrollTop);\r\n\t\t\tif (needsBoundsFix) {\r\n\t\t\t\tDom.transformValue(this.$.client, this.translation, t);\r\n\t\t\t}\r\n\t\t\tthis._translated = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* FIXME: we can fix scrolling artifacts BUGS on Android 4.04 with this heinous incantation.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\ttwiddle: function () {\r\n\t\tif (this.translateOptimized && this.scrollNode) { // this.scrollNode is not always defined and makes Motorola XOOM crash\r\n\t\t\tthis.scrollNode.scrollTop = 1;\r\n\t\t\tthis.scrollNode.scrollTop = 0;\r\n\t\t}\r\n\t}\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Button~Button} kind.\r\n* @module enyo/Button\r\n*/\r\n\r\nvar\r\n\tkind = require('../kind');\r\nvar\r\n\tToolDecorator = require('../ToolDecorator');\r\n\r\n/**\r\n* {@link module:enyo/Button~Button} implements an HTML [button]{@glossary button}, with support\r\n* for grouping using {@link module:enyo/Group~Group}.\r\n*\r\n* For more information, see the documentation on\r\n* [Buttons]{@linkplain $dev-guide/building-apps/controls/buttons.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class Button\r\n* @extends module:enyo/ToolDecorator~ToolDecorator\r\n* @ui\r\n* @public\r\n*/\r\nmodule.exports = kind(\r\n\t/** @lends module:enyo/Button~Button.prototype */ {\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tname: 'enyo.Button',\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tkind: ToolDecorator,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttag: 'button',\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tattributes: {\r\n\t\t/**\r\n\t\t * Set to `'button'`; otherwise, the default value would be `'submit'`, which\r\n\t\t * can cause unexpected problems when [controls]{@link module:enyo/Control~Control} are used\r\n\t\t * inside of a [form]{@glossary form}.\r\n\t\t * \r\n\t\t * @type {String}\r\n\t\t * @private\r\n\t\t */\r\n\t\ttype: 'button'\r\n\t},\r\n\t\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished: \r\n\t\t/** @lends module:enyo/Button~Button.prototype */ {\r\n\t\t\r\n\t\t/**\r\n\t\t * When `true`, the [button]{@glossary button} is shown as disabled and does not \r\n\t\t * generate tap [events]{@glossary event}.\r\n\t\t * \r\n\t\t * @type {Boolean}\r\n\t\t * @default false\r\n\t\t * @public\r\n\t\t */\r\n\t\tdisabled: false\r\n\t},\r\n\t\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.disabledChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdisabledChanged: function () {\r\n\t\tthis.setAttribute('disabled', this.disabled);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\ttap: function () {\r\n\t\tif (this.disabled) {\r\n\t\t\t// work around for platforms like Chrome on Android or Opera that send\r\n\t\t\t// mouseup to disabled form controls\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tthis.setActive(true);\r\n\t\t}\r\n\t},\r\n\r\n\t// Accessibility\r\n\r\n\t/**\r\n\t* @default button\r\n\t* @type {String}\r\n\t* @see enyo/AccessibilitySupport~AccessibilitySupport#accessibilityRole\r\n\t* @public\r\n\t*/\r\n\taccessibilityRole: 'button',\r\n\r\n\t/**\r\n\t* When `true`, `aria-pressed` will reflect the state of\r\n\t* {@link module:enyo/GroupItem~GroupItem#active}\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default false\r\n\t* @public\r\n\t*/\r\n\taccessibilityPressed: false,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tariaObservers: [\r\n\t\t{from: 'disabled', to: 'aria-disabled'},\r\n\t\t{path: ['active', 'accessibilityPressed'], method: function () {\r\n\t\t\tthis.setAriaAttribute('aria-pressed', this.accessibilityPressed ? String(this.active) : null);\r\n\t\t}},\r\n\t\t{from: 'accessibilityRole', to: 'role'}\r\n\t]\r\n});\r\n","require('enyo');\r\n\r\n/**\r\n* Contains the declaration for the {@link module:enyo/Scroller~Scroller} kind.\r\n* @module enyo/Scroller\r\n*/\r\n\r\n\r\n\r\nvar\r\n\tkind = require('../kind'),\r\n\tplatform = require('../platform');\r\n\r\nvar\r\n\tControl = require('../Control'),\r\n\tScrollStrategy = require('../ScrollStrategy'),\r\n\tTouchScrollStrategy = require('../TouchScrollStrategy'),\r\n\tTranslateScrollStrategy = require('../TranslateScrollStrategy');\r\n\r\n/**\r\n* An [object]{@glossary Object} representing the scroll boundaries.\r\n*\r\n* @typedef {Object} module:enyo/Scroller~Scroller~BoundaryObject\r\n* @property {Number} left - The left scroll position.\r\n* @property {Number} top - The top scroll position.\r\n* @property {Number} maxLeft - Maximum value for the left scroll position (minimum is always 0).\r\n* @property {Number} maxTop - Maximum value for the top scroll position (minimum is always 0).\r\n* @property {Number} clientHeight - The vertical size of the [scroller]{@link module:enyo/Scroller~Scroller} on\r\n*\tscreen.\r\n* @property {Number} clientWidth - The horizontal size of the [scroller]{@link module:enyo/Scroller~Scroller} on\r\n*\tscreen.\r\n* @property {Number} width - The horizontal size of the full area of the scrolled region.\r\n* @property {Number} height - The vertical size of the full area of the scrolled region.\r\n* @property {Number} xDir - Either `1`, `-1`, or `0`, indicating positive movement along the\r\n*\tx-axis, negative movement, or no movement, respectively.\r\n* @property {Number} yDir - Either `1`, `-1`, or `0`, indicating positive movement along the\r\n*\ty-axis, negative movement, or no movement, respectively.\r\n*/\r\n\r\n\r\n/**\r\n* An [object]{@glossary Object} representing the overscroll boundaries.\r\n*\r\n* @typedef {Object} module:enyo/Scroller~Scroller~OverscrollBoundaryObject\r\n* @property {Number} overleft - The left overscroll position.\r\n* @property {Number} overtop - The top overscroll position.\r\n*/\r\n\r\n/**\r\n* The extended {@glossary event} [object]{@glossary Object} that is provided\r\n* when a scroll event is fired.\r\n*\r\n* @typedef {Object} module:enyo/Scroller~Scroller~ScrollEvent\r\n* @property {module:enyo/Scroller~Scroller~BoundaryObject} bounds - Current values of scroller bounds.\r\n*/\r\n\r\n/**\r\n* Fires when a scrolling action starts.\r\n*\r\n* @event module:enyo/Scroller~Scroller#onScrollStart\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {module:enyo/Scroller~Scroller~ScrollEvent} event - An [object]{@glossary Object} containing\r\n*\tevent information.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires while a scrolling action is in progress.\r\n*\r\n* @event module:enyo/Scroller~Scroller#onScroll\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {Object} event - An [object]{@glossary Object} containing\r\n*\tevent information.\r\n* @public\r\n*/\r\n\r\n/**\r\n* Fires when a scrolling action stops.\r\n*\r\n* @event module:enyo/Scroller~Scroller#onScrollStop\r\n* @type {Object}\r\n* @property {Object} sender - The [component]{@link module:enyo/Component~Component} that most recently\r\n*\tpropagated the {@glossary event}.\r\n* @property {Object} event - An [object]{@glossary Object} containing\r\n*\tevent information.\r\n* @public\r\n*/\r\n\r\n/**\r\n* {@link module:enyo/Scroller~Scroller} is a scroller suitable for use in both desktop and mobile\r\n* applications.\r\n*\r\n* In some mobile environments, a default scrolling solution is not implemented for\r\n* DOM elements. In such cases, `enyo/Scroller` implements a touch-based scrolling\r\n* solution, which may be opted into either globally (by setting\r\n* [touchScrolling]{@link module:enyo/Scroller~Scroller#touchScrolling} to `true`) or on a\r\n* per-instance basis (by specifying a [strategyKind]{@link module:enyo/Scroller~Scroller#strategyKind}\r\n* of `'TouchScrollStrategy'`).\r\n*\r\n* For more information, see the documentation on\r\n* [Scrollers]{@linkplain $dev-guide/building-apps/layout/scrollers.html} in the\r\n* Enyo Developer Guide.\r\n*\r\n* @class Scroller\r\n* @public\r\n*/\r\nvar Scroller = module.exports = kind(\r\n\t/** @lends module:enyo/Scroller~Scroller.prototype */ {\r\n\r\n\tname: 'enyo.Scroller',\r\n\r\n\tkind: Control,\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tpublished:\r\n\t\t/** @lends module:enyo/Scroller~Scroller.prototype */ {\r\n\r\n\t\t/**\r\n\t\t* Specifies how to horizontally scroll.  Acceptable values are `'scroll'`, `'auto'`,\r\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\r\n\t\t* scroll strategy.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'default'\r\n\t\t* @public\r\n\t\t*/\r\n\t\thorizontal: 'default',\r\n\r\n\t\t/**\r\n\t\t* Specifies how to vertically scroll.  Acceptable values are `'scroll'`, `'auto'`,\r\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\r\n\t\t* scroll strategy.\r\n\t\t*\r\n\t\t* @type {String}\r\n\t\t* @default 'default'\r\n\t\t* @public\r\n\t\t*/\r\n\t\tvertical: 'default',\r\n\r\n\t\t/**\r\n\t\t* The vertical scroll position.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrollTop: 0,\r\n\r\n\t\t/**\r\n\t\t* The horizontal scroll position.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default 0\r\n\t\t* @public\r\n\t\t*/\r\n\t\tscrollLeft: 0,\r\n\r\n\t\t/**\r\n\t\t* Maximum height of the scroll content.\r\n\t\t*\r\n\t\t* @type {Number}\r\n\t\t* @default null\r\n\t\t* @memberof enyo/Scroller~Scroller.prototype\r\n\t\t* @public\r\n\t\t*/\r\n\t\tmaxHeight: null,\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to make this [scroller]{@link module:enyo/Scroller~Scroller} select a\r\n\t\t* platform-appropriate touch-based scrolling strategy. Note that if you specify a value\r\n\t\t* for [strategyKind]{@link module:enyo/Scroller~Scroller#strategyKind}, that will take precedence over\r\n\t\t* this setting.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default false\r\n\t\t* @public\r\n\t\t*/\r\n\t\ttouch: false,\r\n\t\t/**\r\n\t\t* Specifies a type of scrolling. The [scroller]{@link module:enyo/Scroller~Scroller} will attempt to\r\n\t\t* automatically select a strategy compatible with the runtime environment. Alternatively,\r\n\t\t* you may choose to use a specific strategy:\r\n\t\t*\r\n\t\t* - [ScrollStrategy]{@link module:enyo/ScrollStrategy~ScrollStrategy} is the default and implements no\r\n\t\t*\tscrolling, relying instead on the environment to scroll properly.\r\n\t\t* - [TouchScrollStrategy]{@link module:enyo/TouchScrollStrategy~TouchScrollStrategy} implements a touch scrolling\r\n\t\t*\tmechanism.\r\n\t\t* - [TranslateScrollStrategy]{@link module:enyo/TranslateScrollStrategy~TranslateScrollStrategy} implements a touch\r\n\t\t*\tscrolling mechanism using translations; it is currently recommended only for Android\r\n\t\t*\t3+, iOS 5+ and Windows Phone 8.\r\n\t\t* - [TransitionScrollStrategy]{@link module:enyo/TransitionScrollStrategy~TransitionScrollStrategy} implements a touch\r\n\t\t*\tscrolling mechanism using CSS transitions;\r\n\t\t*\r\n\t\t* @type {Object}\r\n\t\t* @default module:enyo/ScrollStrategy~ScrollStrategy\r\n\t\t* @public\r\n\t\t*/\r\n\t\tstrategyKind: ScrollStrategy,\r\n\r\n\t\t/**\r\n\t\t* Set to `true` to display a scroll thumb in touch [scrollers]{@link module:enyo/Scroller~Scroller}.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tthumb: true,\r\n\r\n\t\t/**\r\n\t\t* If `true`, mouse wheel may be used to move the [scroller]{@link module:enyo/Scroller~Scroller}.\r\n\t\t*\r\n\t\t* @type {Boolean}\r\n\t\t* @default true\r\n\t\t* @public\r\n\t\t*/\r\n\t\tuseMouseWheel: true\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tevents: {\r\n\t\tonScrollStart: '',\r\n\t\tonScroll: '',\r\n\t\tonScrollStop: ''\r\n\t},\r\n\r\n\t/**\r\n\t* If `true`, enables touch scrolling globally.\r\n\t*\r\n\t* @name touchScrolling\r\n\t* @type {Boolean}\r\n\t* @default undefined\r\n\t* @memberof enyo/Scroller~Scroller.prototype\r\n\t* @public\r\n\t*/\r\n\r\n\t/**\r\n\t* If `true` and this is a touch [scroller]{@link module:enyo/Scroller~Scroller}, the scroller\r\n\t* will overscroll and bounce back at the edges.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\ttouchOverscroll: true,\r\n\r\n\t/**\r\n\t* If `true`, the [scroller]{@link module:enyo/Scroller~Scroller} will not propagate `dragstart`\r\n\t* [events]{@glossary event} that cause it to start scrolling.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tpreventDragPropagation: true,\r\n\r\n\t/**\r\n\t* If `true`, the [scroller]{@link module:enyo/Scroller~Scroller} will not propagate scroll\r\n\t* [events]{@glossary event}.\r\n\t*\r\n\t* @type {Boolean}\r\n\t* @default true\r\n\t* @public\r\n\t*/\r\n\tpreventScrollPropagation: true,\r\n\r\n\t/**\r\n\t* Needed to allow global mods to `enyo/Scroller.touchScrolling`.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thandlers: {\r\n\t\tonscroll: 'domScroll',\r\n\t\tonScrollStart: 'scrollStart',\r\n\t\tonScroll: 'scroll',\r\n\t\tonScrollStop: 'scrollStop'\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tclasses: 'enyo-scroller',\r\n\r\n\t/**\r\n\t* @lends module:enyo/Scroller~Scroller\r\n\t* @private\r\n\t*/\r\n\tstatics: {\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tosInfo: [\r\n\t\t\t{os: 'android', version: 3},\r\n\t\t\t{os: 'androidChrome', version: 18},\r\n\t\t\t{os: 'androidFirefox', version: 16},\r\n\t\t\t{os: 'firefoxOS', version: 16},\r\n\t\t\t{os: 'ios', version: 5},\r\n\t\t\t{os: 'webos', version: 1e9},\r\n\t\t\t{os: 'blackberry', version:1e9},\r\n\t\t\t{os: 'tizen', version: 2}\r\n\t\t],\r\n\t\t/** Returns true if platform should have touch events. */\r\n\t\thasTouchScrolling: function() {\r\n\t\t\tfor (var i=0, t; (t=this.osInfo[i]); i++) {\r\n\t\t\t\tif (platform[t.os]) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// special detection for IE10+ on touch devices\r\n\t\t\tif ((platform.ie >= 10 || platform.windowsPhone >= 8) && platform.touch) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t* Returns true if the platform has native div scrollers (desktop\r\n\t\t* browsers always have them).\r\n\t\t*/\r\n\t\thasNativeScrolling: function() {\r\n\t\t\tfor (var i=0, t; (t=this.osInfo[i]); i++) {\r\n\t\t\t\tif (platform[t.os] < t.version) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t* @private\r\n\t\t*/\r\n\t\tgetTouchStrategy: function() {\r\n\t\t\treturn (platform.androidChrome >= 27) || (platform.android >= 3) || (platform.ios >= 5) || (platform.windowsPhone === 8) || (platform.webos >= 4)\r\n\t\t\t\t? TranslateScrollStrategy\r\n\t\t\t\t: TouchScrollStrategy;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcontrolParentName: 'strategy',\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tcreate: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.horizontalChanged();\r\n\t\t\tthis.verticalChanged();\r\n\t\t\tthis.useMouseWheelChanged();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\timportProps: kind.inherit(function (sup) {\r\n\t\treturn function(inProps) {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\t// allow global overriding of strategy kind\r\n\t\t\tif (inProps && inProps.strategyKind === undefined && (Scroller.touchScrolling || this.touch)) {\r\n\t\t\t\tthis.strategyKind = Scroller.getTouchStrategy();\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tinitComponents: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tthis.strategyKindChanged();\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\trendered: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tthis.syncStrategy();\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tsyncStrategy: function() {\r\n\t\tthis.$.strategy.setScrollLeft(this.scrollLeft);\r\n\t\tthis.$.strategy.setScrollTop(this.scrollTop);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tstrategyKindChanged: function () {\r\n\t\tif (this.$.strategy) {\r\n\t\t\tthis.$.strategy.destroy();\r\n\t\t\tthis.controlParent = null;\r\n\t\t}\r\n\t\t// note: createComponents automatically updates controlParent.\r\n\t\tthis.createStrategy();\r\n\t\tif (this.hasNode()) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tcreateStrategy: function () {\r\n\t\tthis.createComponents([{name: 'strategy', maxHeight: this.maxHeight,\r\n\t\t\tkind: this.strategyKind, thumb: this.thumb,\r\n\t\t\tpreventDragPropagation: this.preventDragPropagation,\r\n\t\t\toverscroll:this.touchOverscroll, isChrome: true}]);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tgetStrategy: function () {\r\n\t\treturn this.$.strategy;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tmaxHeightChanged: function () {\r\n\t\tthis.$.strategy.setMaxHeight(this.maxHeight);\r\n\t},\r\n\r\n\t/**\r\n\t* @method\r\n\t* @private\r\n\t*/\r\n\tshowingChanged: kind.inherit(function (sup) {\r\n\t\treturn function() {\r\n\t\t\tsup.apply(this, arguments);\r\n\t\t\tif (this.showing) {\r\n\t\t\t\tthis.syncStrategy();\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tshowingChangedHandler: kind.inherit(function(sup) {\r\n\t\treturn function(sender, event) {\r\n\t\t\tif (this.showing && event.showing) {\r\n\t\t\t\tthis.syncStrategy();\r\n\t\t\t}\r\n\t\t};\r\n\t}),\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tthumbChanged: function () {\r\n\t\tthis.$.strategy.setThumb(this.thumb);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\thorizontalChanged: function () {\r\n\t\tthis.$.strategy.setHorizontal(this.horizontal);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tverticalChanged: function () {\r\n\t\tthis.$.strategy.setVertical(this.vertical);\r\n\t},\r\n\r\n\t// FIXME: these properties are virtual; property changed methods are fired only if\r\n\t// property value changes, not if getter changes.\r\n\r\n\t/**\r\n\t* Sets the horizontal scroll position.\r\n\t*\r\n\t* @param {Number} left - The horizontal scroll position in pixels.\r\n\t* @public\r\n\t*/\r\n\tsetScrollLeft: function (left) {\r\n\t\tthis.$.strategy.setScrollLeft(left);\r\n\t},\r\n\r\n\t/**\r\n\t* Sets the vertical scroll position.\r\n\t*\r\n\t* @param {Number} top - The vertical scroll position in pixels.\r\n\t* @public\r\n\t*/\r\n\tsetScrollTop: function (top) {\r\n\t\tthis.$.strategy.setScrollTop(top);\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves the horizontal scroll position.\r\n\t*\r\n\t* @returns {Number} The horizontal scroll position in pixels.\r\n\t* @public\r\n\t*/\r\n\tgetScrollLeft: function () {\r\n\t\t// sync our internal property\r\n\t\tthis.scrollLeft = this.$.strategy.getScrollLeft();\r\n\t\treturn this.scrollLeft;\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves the vertical scroll position.\r\n\t*\r\n\t* @returns {Number} The vertical scroll position in pixels.\r\n\t* @public\r\n\t*/\r\n\tgetScrollTop: function () {\r\n\t\t// sync our internal property\r\n\t\tthis.scrollTop = this.$.strategy.getScrollTop();\r\n\t\treturn this.scrollTop;\r\n\t},\r\n\r\n\t/**\r\n\t* Retrieves the scroll boundaries of the [scroller]{@link module:enyo/Scroller~Scroller}.\r\n\t*\r\n\t* @returns {module:enyo/Scroller~BoundaryObject} An [object]{@glossary Object} describing the\r\n\t*\tscroll boundaries.\r\n\t* @public\r\n\t*/\r\n\tgetScrollBounds: function () {\r\n\t\tvar bounds  = this.$.strategy.getScrollBounds();\r\n\t\tif (\r\n\t\t\t(bounds.xDir !== -1 && bounds.xDir !== 0 && bounds.xDir !== 1) ||\r\n\t\t\t(bounds.yDir !== -1 && bounds.yDir !== 0 && bounds.yDir !== 1)\r\n\t\t) {\r\n\t\t\tthis.decorateBounds(bounds);\r\n\t\t}\r\n\t\t// keep our properties synchronized always and without extra calls\r\n\t\tthis.scrollTop  = bounds.top;\r\n\t\tthis.scrollLeft = bounds.left;\r\n\t\treturn bounds;\r\n\t},\r\n\r\n\t/**\r\n\t* Trigger a remeasurement of the scroller's metrics (specifically, the\r\n\t* size of its viewport, the size of its contents and the difference between\r\n\t* the two, which determines the extent to which the scroller may scroll).\r\n\t*\r\n\t* You should generally not need to call this from application code, as the\r\n\t* scroller usually remeasures automatically whenever needed. This method\r\n\t* exists primarily to support an internal use case for\r\n\t* [enyo/DataList]{@link module:enyo/DataList~DataList}.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tremeasure: function() {\r\n\t\tvar s = this.$.strategy;\r\n\t\tif (s.remeasure) s.remeasure();\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls the given [control]{@link module:enyo/Control~Control} into view.\r\n\t*\r\n\t* @param {module:enyo/Control~Control} ctl - The control to make visible in the\r\n\t*\t[scroller's]{@link module:enyo/Scroller~Scroller} viewport.\r\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top\r\n\t* of the scroller.\r\n\t* @public\r\n\t*/\r\n\tscrollIntoView: function (ctl, alignWithTop) {\r\n\t\tthis.$.strategy.scrollIntoView(ctl, alignWithTop);\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to the specified position.\r\n\t*\r\n\t* @param {Number} x - The `x` position in pixels.\r\n\t* @param {Number} y - The `y` position in pixels.\r\n\t* @public\r\n\t*/\r\n\tscrollTo: function (x, y) {\r\n\t\tthis.$.strategy.scrollTo(x, y);\r\n\t},\r\n\r\n\t/**\r\n\t* Ensures that the given [control]{@link module:enyo/Control~Control} is visible in the\r\n\t* [scroller's]{@link module:enyo/Scroller~Scroller} viewport. Unlike\r\n\t* [scrollIntoView()]{@link module:enyo/Scroller~Scroller#scrollIntoView}, which uses DOM's\r\n\t* [scrollIntoView()]{@glossary scrollIntoView}, this only affects the current\r\n\t* scroller.\r\n\t*\r\n\t* @param {module:enyo/Control~Control} ctl - The [control]{@link module:enyo/Control~Control} to make visible in the\r\n\t*\t[scroller's]{@link module:enyo/Scroller~Scroller} viewport.\r\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\r\n\t*\tscroller.\r\n\t* @public\r\n\t*/\r\n\tscrollToControl: function (ctl, alignWithTop) {\r\n\t\tthis.scrollToNode(ctl.hasNode(), alignWithTop);\r\n\t},\r\n\r\n\t/**\r\n\t* Ensures that the given node is visible in the [scroller's]{@link module:enyo/Scroller~Scroller} viewport.\r\n\t*\r\n\t* @param {Node} node - The node to make visible in the [scroller's]{@link module:enyo/Scroller~Scroller}\r\n\t*\tviewport.\r\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\r\n\t*\tscroller.\r\n\t* @public\r\n\t*/\r\n\tscrollToNode: function (node, alignWithTop) {\r\n\t\tthis.$.strategy.scrollToNode(node, alignWithTop);\r\n\t},\r\n\r\n\t/**\r\n\t* Stops the scroller if it is currently animating.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tstop: function() {\r\n\t\tif (typeof this.$.strategy.stop == 'function') {\r\n\t\t\tthis.$.strategy.stop(true);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Adds current values of `getScrollBounds()` to {@glossary event}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tdecorateScrollEvent: function (e) {\r\n\t\tvar bounds = e.scrollBounds = e.scrollBounds || this.$.strategy._getScrollBounds();\r\n\t\t// in the off chance that the event already had scrollBounds then we need\r\n\t\t// to make sure they are decorated\r\n\t\tif (\r\n\t\t\t(bounds.xDir !== -1 && bounds.xDir !== 0 && bounds.xDir !== 1) ||\r\n\t\t\t(bounds.yDir !== -1 && bounds.yDir !== 0 && bounds.yDir !== 1)\r\n\t\t) {\r\n\t\t\tthis.decorateBounds(bounds);\r\n\t\t}\r\n\t\t// keep our properties synchronized always and without extra calls\r\n\t\tthis.scrollTop  = bounds.top;\r\n\t\tthis.scrollLeft = bounds.left;\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tdecorateBounds: function (bounds) {\r\n\t\tvar x       = this.scrollLeft - bounds.left,\r\n\t\t\ty       = this.scrollTop  - bounds.top;\r\n\t\tbounds.xDir = (x < 0? 1: x > 0? -1: 0);\r\n\t\tbounds.yDir = (y < 0? 1: y > 0? -1: 0);\r\n\t\t// we update our current bounds properties so we don't have to unnecessarily\r\n\t\t// call getScrollTop/getScrollLeft because we already have the current data\r\n\t\tthis.scrollLeft = bounds.left;\r\n\t\tthis.scrollTop  = bounds.top;\r\n\t},\r\n\r\n\t/**\r\n\t* Normalizes scroll {@glossary event} to `onScroll`.\r\n\t*\r\n\t* @fires module:enyo/Scroller~Scroller#onScroll\r\n\t* @private\r\n\t*/\r\n\tdomScroll: function (sender, e) {\r\n\t\t// if a scroll event originated here, pass it to our strategy to handle\r\n\t\tif (this.$.strategy.domScroll && e.originator == this) {\r\n\t\t\tthis.$.strategy.domScroll(sender, e);\r\n\t\t}\r\n\t\tthis.decorateScrollEvent(e);\r\n\t\tthis.doScroll(e);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* @returns {Boolean} `true` if the current scroll {@glossary event} should\r\n\t* be stopped; `false` if it should be allowed to propagate.\r\n\t* @private\r\n\t*/\r\n\tshouldStopScrollEvent: function (e) {\r\n\t\treturn (this.preventScrollPropagation &&\r\n\t\t\te.originator.owner != this.$.strategy);\r\n\t},\r\n\r\n\t/**\r\n\t* Calls [shouldStopScrollEvent()]{@link module:enyo/Scroller~Scroller#shouldStopScrollEvent} to\r\n\t* determine whether current scroll {@glossary event} should be stopped.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tscrollStart: function (sender, e) {\r\n\t\tif (!this.shouldStopScrollEvent(e)) {\r\n\t\t\tthis.decorateScrollEvent(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Either propagates or stops the current scroll {@glossary event}.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tscroll: function (sender, e) {\r\n\t\t// note: scroll event can be native dom or generated.\r\n\t\tvar stop;\r\n\t\tif (e.dispatchTarget) {\r\n\t\t\t// allow a dom event if it orignated with this scroller or its strategy\r\n\t\t\tstop = this.preventScrollPropagation && !(e.originator == this ||\r\n\t\t\t\te.originator.owner == this.$.strategy);\r\n\t\t} else {\r\n\t\t\tstop = this.shouldStopScrollEvent(e);\r\n\t\t}\r\n\t\tif (!stop) {\r\n\t\t\tthis.decorateScrollEvent(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Calls [shouldStopScrollEvent()]{@link module:enyo/Scroller~Scroller#shouldStopScrollEvent} to\r\n\t* determine whether current scroll {@glossary event} should be stopped.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tscrollStop: function (sender, e) {\r\n\t\tif (!this.shouldStopScrollEvent(e)) {\r\n\t\t\tthis.decorateScrollEvent(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to the top of the scrolling region.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tscrollToTop: function () {\r\n\t\tthis.setScrollTop(0);\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to the bottom of the scrolling region.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tscrollToBottom: function () {\r\n\t\tthis.setScrollTop(this.getScrollBounds().maxTop);\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to the right edge of the scrolling region.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tscrollToRight: function () {\r\n\t\tthis.setScrollLeft(this.getScrollBounds().maxLeft);\r\n\t},\r\n\r\n\t/**\r\n\t* Scrolls to the left edge of the scrolling region.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tscrollToLeft: function () {\r\n\t\tthis.setScrollLeft(0);\r\n\t},\r\n\r\n\t/**\r\n\t* Ensures scroll position is in bounds.\r\n\t*\r\n\t* @public\r\n\t*/\r\n\tstabilize: function () {\r\n\t\tvar s = this.getStrategy();\r\n\t\tif (s.stabilize) {\r\n\t\t\ts.stabilize();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t* Sends the [useMouseWheel]{@link module:enyo/Scroller~Scroller#useMouseWheel} property to the scroll\r\n\t* strategy.\r\n\t*\r\n\t* @private\r\n\t*/\r\n\tuseMouseWheelChanged: function () {\r\n\t\tthis.$.strategy.setUseMouseWheel(this.useMouseWheel);\r\n\t},\r\n\r\n\t/**\r\n\t* @private\r\n\t*/\r\n\tresize: kind.inherit(function (sup) {\r\n\t\treturn function () {\r\n\t\t\tif (this.getAbsoluteShowing(true)) {\r\n\t\t\t\tsup.apply(this, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t})\r\n});\r\n\r\n// provide a touch scrolling solution by default when the environment is mobile\r\nif (Scroller.hasTouchScrolling()) {\r\n\tScroller.prototype.strategyKind = Scroller.getTouchStrategy();\r\n}\r\n"]}